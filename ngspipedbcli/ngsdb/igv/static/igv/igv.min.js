!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).igv=t()}(this,(function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var r=function(e){return e&&e.Math==Math&&e},n=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||function(){return this}()||Function("return this")(),i=function(e){try{return!!e()}catch(e){return!0}},a=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),o={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,c={f:s&&!o.call({1:2},1)?function(e){var t=s(this,e);return!!t&&t.enumerable}:o},u=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},h={}.toString,l=function(e){return h.call(e).slice(8,-1)},f="".split,p=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==l(e)?f.call(e,""):Object(e)}:Object,d=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},g=function(e){return p(d(e))},v=function(e){return"object"==typeof e?null!==e:"function"==typeof e},m=function(e,t){if(!v(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!v(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!v(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!v(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},b={}.hasOwnProperty,y=function(e,t){return b.call(e,t)},w=n.document,k=v(w)&&v(w.createElement),x=function(e){return k?w.createElement(e):{}},S=!a&&!i((function(){return 7!=Object.defineProperty(x("div"),"a",{get:function(){return 7}}).a})),_=Object.getOwnPropertyDescriptor,C={f:a?_:function(e,t){if(e=g(e),t=m(t,!0),S)try{return _(e,t)}catch(e){}if(y(e,t))return u(!c.f.call(e,t),e[t])}},R=function(e){if(!v(e))throw TypeError(String(e)+" is not an object");return e},E=Object.defineProperty,A={f:a?E:function(e,t,r){if(R(e),t=m(t,!0),R(r),S)try{return E(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},T=a?function(e,t,r){return A.f(e,t,u(1,r))}:function(e,t,r){return e[t]=r,e},I=function(e,t){try{T(n,e,t)}catch(r){n[e]=t}return t},L="__core-js_shared__",M=n[L]||I(L,{}),F=Function.toString;"function"!=typeof M.inspectSource&&(M.inspectSource=function(e){return F.call(e)});var D,O,B,N=M.inspectSource,P=n.WeakMap,z="function"==typeof P&&/native code/.test(N(P)),U=t((function(e){(e.exports=function(e,t){return M[e]||(M[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),H=0,j=Math.random(),q=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++H+j).toString(36)},V=U("keys"),W=function(e){return V[e]||(V[e]=q(e))},G={},$=n.WeakMap;if(z){var Z=M.state||(M.state=new $),Y=Z.get,X=Z.has,K=Z.set;D=function(e,t){return t.facade=e,K.call(Z,e,t),t},O=function(e){return Y.call(Z,e)||{}},B=function(e){return X.call(Z,e)}}else{var Q=W("state");G[Q]=!0,D=function(e,t){return t.facade=e,T(e,Q,t),t},O=function(e){return y(e,Q)?e[Q]:{}},B=function(e){return y(e,Q)}}var J,ee,te={set:D,get:O,has:B,enforce:function(e){return B(e)?O(e):D(e,{})},getterFor:function(e){return function(t){var r;if(!v(t)||(r=O(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}},re=t((function(e){var t=te.get,r=te.enforce,i=String(String).split("String");(e.exports=function(e,t,a,o){var s,c=!!o&&!!o.unsafe,u=!!o&&!!o.enumerable,h=!!o&&!!o.noTargetGet;"function"==typeof a&&("string"!=typeof t||y(a,"name")||T(a,"name",t),(s=r(a)).source||(s.source=i.join("string"==typeof t?t:""))),e!==n?(c?!h&&e[t]&&(u=!0):delete e[t],u?e[t]=a:T(e,t,a)):u?e[t]=a:I(t,a)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||N(this)}))})),ne=n,ie=function(e){return"function"==typeof e?e:void 0},ae=function(e,t){return arguments.length<2?ie(ne[e])||ie(n[e]):ne[e]&&ne[e][t]||n[e]&&n[e][t]},oe=Math.ceil,se=Math.floor,ce=function(e){return isNaN(e=+e)?0:(e>0?se:oe)(e)},ue=Math.min,he=function(e){return e>0?ue(ce(e),9007199254740991):0},le=Math.max,fe=Math.min,pe=function(e,t){var r=ce(e);return r<0?le(r+t,0):fe(r,t)},de=function(e){return function(t,r,n){var i,a=g(t),o=he(a.length),s=pe(n,o);if(e&&r!=r){for(;o>s;)if((i=a[s++])!=i)return!0}else for(;o>s;s++)if((e||s in a)&&a[s]===r)return e||s||0;return!e&&-1}},ge={includes:de(!0),indexOf:de(!1)},ve=ge.indexOf,me=function(e,t){var r,n=g(e),i=0,a=[];for(r in n)!y(G,r)&&y(n,r)&&a.push(r);for(;t.length>i;)y(n,r=t[i++])&&(~ve(a,r)||a.push(r));return a},be=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ye=be.concat("length","prototype"),we={f:Object.getOwnPropertyNames||function(e){return me(e,ye)}},ke={f:Object.getOwnPropertySymbols},xe=ae("Reflect","ownKeys")||function(e){var t=we.f(R(e)),r=ke.f;return r?t.concat(r(e)):t},Se=function(e,t){for(var r=xe(t),n=A.f,i=C.f,a=0;a<r.length;a++){var o=r[a];y(e,o)||n(e,o,i(t,o))}},_e=/#|\.prototype\./,Ce=function(e,t){var r=Ee[Re(e)];return r==Te||r!=Ae&&("function"==typeof t?i(t):!!t)},Re=Ce.normalize=function(e){return String(e).replace(_e,".").toLowerCase()},Ee=Ce.data={},Ae=Ce.NATIVE="N",Te=Ce.POLYFILL="P",Ie=Ce,Le=C.f,Me=function(e,t){var r,i,a,o,s,c=e.target,u=e.global,h=e.stat;if(r=u?n:h?n[c]||I(c,{}):(n[c]||{}).prototype)for(i in t){if(o=t[i],a=e.noTargetGet?(s=Le(r,i))&&s.value:r[i],!Ie(u?i:c+(h?".":"#")+i,e.forced)&&void 0!==a){if(typeof o==typeof a)continue;Se(o,a)}(e.sham||a&&a.sham)&&T(o,"sham",!0),re(r,i,o,e)}},Fe=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},De=function(e,t,r){if(Fe(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}},Oe=function(e){return Object(d(e))},Be=Array.isArray||function(e){return"Array"==l(e)},Ne=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())})),Pe=Ne&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ze=U("wks"),Ue=n.Symbol,He=Pe?Ue:Ue&&Ue.withoutSetter||q,je=function(e){return y(ze,e)||(Ne&&y(Ue,e)?ze[e]=Ue[e]:ze[e]=He("Symbol."+e)),ze[e]},qe=je("species"),Ve=function(e,t){var r;return Be(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!Be(r.prototype)?v(r)&&null===(r=r[qe])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)},We=[].push,Ge=function(e){var t=1==e,r=2==e,n=3==e,i=4==e,a=6==e,o=7==e,s=5==e||a;return function(c,u,h,l){for(var f,d,g=Oe(c),v=p(g),m=De(u,h,3),b=he(v.length),y=0,w=l||Ve,k=t?w(c,b):r||o?w(c,0):void 0;b>y;y++)if((s||y in v)&&(d=m(f=v[y],y,g),e))if(t)k[y]=d;else if(d)switch(e){case 3:return!0;case 5:return f;case 6:return y;case 2:We.call(k,f)}else switch(e){case 4:return!1;case 7:We.call(k,f)}return a?-1:n||i?i:k}},$e={forEach:Ge(0),map:Ge(1),filter:Ge(2),some:Ge(3),every:Ge(4),find:Ge(5),findIndex:Ge(6),filterOut:Ge(7)},Ze=ae("navigator","userAgent")||"",Ye=n.process,Xe=Ye&&Ye.versions,Ke=Xe&&Xe.v8;Ke?ee=(J=Ke.split("."))[0]+J[1]:Ze&&(!(J=Ze.match(/Edge\/(\d+)/))||J[1]>=74)&&(J=Ze.match(/Chrome\/(\d+)/))&&(ee=J[1]);var Qe=ee&&+ee,Je=je("species"),et=function(e){return Qe>=51||!i((function(){var t=[];return(t.constructor={})[Je]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},tt=Object.defineProperty,rt={},nt=function(e){throw e},it=function(e,t){if(y(rt,e))return rt[e];t||(t={});var r=[][e],n=!!y(t,"ACCESSORS")&&t.ACCESSORS,o=y(t,0)?t[0]:nt,s=y(t,1)?t[1]:void 0;return rt[e]=!!r&&!i((function(){if(n&&!a)return!0;var e={length:-1};n?tt(e,1,{enumerable:!0,get:nt}):e[1]=1,r.call(e,o,s)}))},at=$e.filter,ot=et("filter"),st=it("filter");Me({target:"Array",proto:!0,forced:!ot||!st},{filter:function(e){return at(this,e,arguments.length>1?arguments[1]:void 0)}});var ct=function(e,t){var r=[][e];return!!r&&i((function(){r.call(null,t||function(){throw 1},1)}))},ut=$e.forEach,ht=ct("forEach"),lt=it("forEach"),ft=ht&&lt?[].forEach:function(e){return ut(this,e,arguments.length>1?arguments[1]:void 0)};Me({target:"Array",proto:!0,forced:[].forEach!=ft},{forEach:ft});var pt=ge.indexOf,dt=[].indexOf,gt=!!dt&&1/[1].indexOf(1,-0)<0,vt=ct("indexOf"),mt=it("indexOf",{ACCESSORS:!0,1:0});Me({target:"Array",proto:!0,forced:gt||!vt||!mt},{indexOf:function(e){return gt?dt.apply(this,arguments)||0:pt(this,e,arguments.length>1?arguments[1]:void 0)}});var bt=Math.min,yt=[].lastIndexOf,wt=!!yt&&1/[1].lastIndexOf(1,-0)<0,kt=ct("lastIndexOf"),xt=it("indexOf",{ACCESSORS:!0,1:0}),St=wt||!kt||!xt?function(e){if(wt)return yt.apply(this,arguments)||0;var t=g(this),r=he(t.length),n=r-1;for(arguments.length>1&&(n=bt(n,ce(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in t&&t[n]===e)return n||0;return-1}:yt;Me({target:"Array",proto:!0,forced:St!==[].lastIndexOf},{lastIndexOf:St});var _t=function(){var e=R(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function Ct(e,t){return RegExp(e,t)}var Rt={UNSUPPORTED_Y:i((function(){var e=Ct("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),BROKEN_CARET:i((function(){var e=Ct("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},Et=RegExp.prototype.exec,At=String.prototype.replace,Tt=Et,It=function(){var e=/a/,t=/b*/g;return Et.call(e,"a"),Et.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),Lt=Rt.UNSUPPORTED_Y||Rt.BROKEN_CARET,Mt=void 0!==/()??/.exec("")[1];(It||Mt||Lt)&&(Tt=function(e){var t,r,n,i,a=this,o=Lt&&a.sticky,s=_t.call(a),c=a.source,u=0,h=e;return o&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),h=String(e).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==e[a.lastIndex-1])&&(c="(?: "+c+")",h=" "+h,u++),r=new RegExp("^(?:"+c+")",s)),Mt&&(r=new RegExp("^"+c+"$(?!\\s)",s)),It&&(t=a.lastIndex),n=Et.call(o?r:a,h),o?n?(n.input=n.input.slice(u),n[0]=n[0].slice(u),n.index=a.lastIndex,a.lastIndex+=n[0].length):a.lastIndex=0:It&&n&&(a.lastIndex=a.global?n.index+n[0].length:t),Mt&&n&&n.length>1&&At.call(n[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)})),n});var Ft=Tt;Me({target:"RegExp",proto:!0,forced:/./.exec!==Ft},{exec:Ft});var Dt,Ot=je("match"),Bt=function(e){var t;return v(e)&&(void 0!==(t=e[Ot])?!!t:"RegExp"==l(e))},Nt=function(e){if(Bt(e))throw TypeError("The method doesn't accept regular expressions");return e},Pt=je("match"),zt=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[Pt]=!1,"/./"[e](t)}catch(e){}}return!1},Ut=C.f,Ht="".endsWith,jt=Math.min,qt=zt("endsWith"),Vt=!(qt||(Dt=Ut(String.prototype,"endsWith"),!Dt||Dt.writable));Me({target:"String",proto:!0,forced:!Vt&&!qt},{endsWith:function(e){var t=String(d(this));Nt(e);var r=arguments.length>1?arguments[1]:void 0,n=he(t.length),i=void 0===r?n:jt(he(r),n),a=String(e);return Ht?Ht.call(t,a,i):t.slice(i-a.length,i)===a}});var Wt=je("species"),Gt=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),$t="$0"==="a".replace(/./,"$0"),Zt=je("replace"),Yt=!!/./[Zt]&&""===/./[Zt]("a","$0"),Xt=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),Kt=function(e,t,r,n){var a=je(e),o=!i((function(){var t={};return t[a]=function(){return 7},7!=""[e](t)})),s=o&&!i((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[Wt]=function(){return r},r.flags="",r[a]=/./[a]),r.exec=function(){return t=!0,null},r[a](""),!t}));if(!o||!s||"replace"===e&&(!Gt||!$t||Yt)||"split"===e&&!Xt){var c=/./[a],u=r(a,""[e],(function(e,t,r,n,i){return t.exec===Ft?o&&!i?{done:!0,value:c.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}),{REPLACE_KEEPS_$0:$t,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Yt}),h=u[0],l=u[1];re(String.prototype,e,h),re(RegExp.prototype,a,2==t?function(e,t){return l.call(e,this,t)}:function(e){return l.call(e,this)})}n&&T(RegExp.prototype[a],"sham",!0)},Qt=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},Jt=function(e,t){var r=e.exec;if("function"==typeof r){var n=r.call(e,t);if("object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==l(e))throw TypeError("RegExp#exec called on incompatible receiver");return Ft.call(e,t)};Kt("search",1,(function(e,t,r){return[function(t){var r=d(this),n=null==t?void 0:t[e];return void 0!==n?n.call(t,r):new RegExp(t)[e](String(r))},function(e){var n=r(t,e,this);if(n.done)return n.value;var i=R(e),a=String(this),o=i.lastIndex;Qt(o,0)||(i.lastIndex=0);var s=Jt(i,a);return Qt(i.lastIndex,o)||(i.lastIndex=o),null===s?-1:s.index}]}));var er=je("species"),tr=function(e,t){var r,n=R(e).constructor;return void 0===n||null==(r=R(n)[er])?t:Fe(r)},rr=function(e){return function(t,r){var n,i,a=String(d(t)),o=ce(r),s=a.length;return o<0||o>=s?e?"":void 0:(n=a.charCodeAt(o))<55296||n>56319||o+1===s||(i=a.charCodeAt(o+1))<56320||i>57343?e?a.charAt(o):n:e?a.slice(o,o+2):i-56320+(n-55296<<10)+65536}},nr={codeAt:rr(!1),charAt:rr(!0)},ir=nr.charAt,ar=function(e,t,r){return t+(r?ir(e,t).length:1)},or=[].push,sr=Math.min,cr=4294967295,ur=!i((function(){return!RegExp(cr,"y")}));Kt("split",2,(function(e,t,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var n=String(d(this)),i=void 0===r?cr:r>>>0;if(0===i)return[];if(void 0===e)return[n];if(!Bt(e))return t.call(n,e,i);for(var a,o,s,c=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,l=new RegExp(e.source,u+"g");(a=Ft.call(l,n))&&!((o=l.lastIndex)>h&&(c.push(n.slice(h,a.index)),a.length>1&&a.index<n.length&&or.apply(c,a.slice(1)),s=a[0].length,h=o,c.length>=i));)l.lastIndex===a.index&&l.lastIndex++;return h===n.length?!s&&l.test("")||c.push(""):c.push(n.slice(h)),c.length>i?c.slice(0,i):c}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:t.call(this,e,r)}:t,[function(t,r){var i=d(this),a=null==t?void 0:t[e];return void 0!==a?a.call(t,i,r):n.call(String(i),t,r)},function(e,i){var a=r(n,e,this,i,n!==t);if(a.done)return a.value;var o=R(e),s=String(this),c=tr(o,RegExp),u=o.unicode,h=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(ur?"y":"g"),l=new c(ur?o:"^(?:"+o.source+")",h),f=void 0===i?cr:i>>>0;if(0===f)return[];if(0===s.length)return null===Jt(l,s)?[s]:[];for(var p=0,d=0,g=[];d<s.length;){l.lastIndex=ur?d:0;var v,m=Jt(l,ur?s:s.slice(d));if(null===m||(v=sr(he(l.lastIndex+(ur?0:d)),s.length))===p)d=ar(s,d,u);else{if(g.push(s.slice(p,d)),g.length===f)return g;for(var b=1;b<=m.length-1;b++)if(g.push(m[b]),g.length===f)return g;d=p=v}}return g.push(s.slice(p)),g}]}),!ur);var hr={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var lr in hr){var fr=n[lr],pr=fr&&fr.prototype;if(pr&&pr.forEach!==ft)try{T(pr,"forEach",ft)}catch(e){pr.forEach=ft}}t((function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),o=new A(n||[]);return a._invoke=function(e,t,r){var n=l;return function(i,a){if(n===p)throw new Error("Generator is already running");if(n===d){if("throw"===i)throw a;return I()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=C(o,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var c=h(e,t,r);if("normal"===c.type){if(n=r.done?d:f,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=d,r.method="throw",r.arg=c.arg)}}}(e,r,o),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l="suspendedStart",f="suspendedYield",p="executing",d="completed",g={};function v(){}function m(){}function b(){}var y={};y[a]=function(){return this};var w=Object.getPrototypeOf,k=w&&w(w(T([])));k&&k!==r&&n.call(k,a)&&(y=k);var x=b.prototype=v.prototype=Object.create(y);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(i,a,o,s){var c=h(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return r("throw",e,o,s)}))}s(c.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function C(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method))return g;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=h(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function T(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}return{next:I}}function I(){return{value:t,done:!0}}return m.prototype=x.constructor=b,b.constructor=m,m.displayName=c(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},S(_.prototype),_.prototype[o]=function(){return this},e.AsyncIterator=_,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new _(u(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),c(x,s,"Generator"),x[a]=function(){return this},x.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;E(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));function dr(e){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gr(e,t,r,n,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function vr(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){gr(a,n,i,o,s,"next",e)}function s(e){gr(a,n,i,o,s,"throw",e)}o(void 0)}))}}function mr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function br(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yr(e,t,r){return t&&br(e.prototype,t),r&&br(e,r),e}function wr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xr(e,t)}function kr(e){return(kr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xr(e,t){return(xr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _r(e,t,r){return(_r=Sr()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&xr(i,r.prototype),i}).apply(null,arguments)}function Cr(e){var t="function"==typeof Map?new Map:void 0;return(Cr=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _r(e,arguments,kr(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),xr(n,e)})(e)}function Rr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Er(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Rr(e):t}function Ar(e){var t=Sr();return function(){var r,n=kr(e);if(t){var i=kr(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Er(this,r)}}function Tr(e,t,r){return(Tr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kr(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function Ir(e,t){return Mr(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}(e,t)||Dr(e,t)||Br()}function Lr(e){return function(e){if(Array.isArray(e))return Or(e)}(e)||Fr(e)||Dr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mr(e){if(Array.isArray(e))return e}function Fr(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Dr(e,t){if(e){if("string"==typeof e)return Or(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Or(e,t):void 0}}function Or(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Br(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Nr(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=Dr(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}var Pr=t((function(e){e.exports=function(e){return(e instanceof Buffer?e:Buffer.from(e.toString(),"binary")).toString("base64")}}));function zr(e){return function(e,t){const r=document.createElement(e);t&&(t.class&&r.classList.add(t.class),t.id&&(r.id=t.id),t.style&&function(e,t){for(let r of Object.keys(t))e.style[r]=t[r]}(r,t.style));return r}("div",e)}function Ur(e){const t=getComputedStyle(e);"none"!==t.display&&(e._initialDisplay=t.display),e.style.display="none"}function Hr(e){if("none"===getComputedStyle(e).display){const t=e._initialDisplay||"block";e.style.display=t}}function jr(e,t){t=t||"currentColor";let r=qr[e];r||(console.error(`No icon named: ${e}`),r=qr.question);const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"viewBox","0 0 "+r[0]+" "+r[1]);const i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttributeNS(null,"fill",t),i.setAttributeNS(null,"d",r[4]),n.appendChild(i),n}const qr={check:[512,512,[],"f00c","M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"],cog:[512,512,[],"f013","M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"],exclamation:[192,512,[],"f12a","M176 432c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80zM25.26 25.199l13.6 272C39.499 309.972 50.041 320 62.83 320h66.34c12.789 0 23.331-10.028 23.97-22.801l13.6-272C167.425 11.49 156.496 0 142.77 0H49.23C35.504 0 24.575 11.49 25.26 25.199z"],"exclamation-circle":[512,512,[],"f06a","M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],"exclamation-triangle":[576,512,[],"f071","M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],minus:[448,512,[],"f068","M424 318.2c13.3 0 24-10.7 24-24v-76.4c0-13.3-10.7-24-24-24H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h400z"],"minus-circle":[512,512,[],"f056","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"],"minus-square":[448,512,[],"f146","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM92 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H92z"],plus:[448,512,[],"f067","M448 294.2v-76.4c0-13.3-10.7-24-24-24H286.2V56c0-13.3-10.7-24-24-24h-76.4c-13.3 0-24 10.7-24 24v137.8H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h137.8V456c0 13.3 10.7 24 24 24h76.4c13.3 0 24-10.7 24-24V318.2H424c13.3 0 24-10.7 24-24z"],"plus-circle":[512,512,[],"f055","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],"plus-square":[448,512,[],"f0fe","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-32 252c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92H92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],question:[384,512,[],"f128","M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"],save:[448,512,[],"f0c7","M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"],search:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"],share:[512,512,[],"f064","M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"],spinner:[512,512,[],"f110","M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"],square:[448,512,[],"f0c8","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"],"square-full":[512,512,[],"f45c","M512 512H0V0h512v512z"],times:[384,512,[],"f00d","M323.1 441l53.9-53.9c9.4-9.4 9.4-24.5 0-33.9L279.8 256l97.2-97.2c9.4-9.4 9.4-24.5 0-33.9L323.1 71c-9.4-9.4-24.5-9.4-33.9 0L192 168.2 94.8 71c-9.4-9.4-24.5-9.4-33.9 0L7 124.9c-9.4 9.4-9.4 24.5 0 33.9l97.2 97.2L7 353.2c-9.4 9.4-9.4 24.5 0 33.9L60.9 441c9.4 9.4 24.5 9.4 33.9 0l97.2-97.2 97.2 97.2c9.3 9.3 24.5 9.3 33.9 0z"],"times-circle":[512,512,[],"f057","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"],wrench:[512,512,[],"f0ad","M481.156 200c9.3 0 15.12 10.155 10.325 18.124C466.295 259.992 420.419 288 368 288c-79.222 0-143.501-63.974-143.997-143.079C223.505 65.469 288.548-.001 368.002 0c52.362.001 98.196 27.949 123.4 69.743C496.24 77.766 490.523 88 481.154 88H376l-40 56 40 56h105.156zm-171.649 93.003L109.255 493.255c-24.994 24.993-65.515 24.994-90.51 0-24.993-24.994-24.993-65.516 0-90.51L218.991 202.5c16.16 41.197 49.303 74.335 90.516 90.503zM104 432c0-13.255-10.745-24-24-24s-24 10.745-24 24 10.745 24 24 24 24-10.745 24-24z"]};function Vr(e,t){var r,n=document.createElement("div");e.appendChild(n),n.appendChild(jr("times",r)),n.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),t()}))}var Wr={Huffman:{},Util:{},CRC32:{},CompressionMethod:{DEFLATE:8,RESERVED:15},Zip:function(e){e=e||{},this.files=[],this.comment=e.comment,this.password}};Wr.Zip.CompressionMethod={STORE:0,DEFLATE:8},Wr.Zip.OperatingSystem={MSDOS:0,UNIX:3,MACINTOSH:7},Wr.Zip.Flags={ENCRYPT:1,DESCRIPTOR:8,UTF8:2048},Wr.Zip.FileHeaderSignature=[80,75,1,2],Wr.Zip.LocalFileHeaderSignature=[80,75,3,4],Wr.Zip.CentralDirectorySignature=[80,75,5,6],Wr.Zip.prototype.addFile=function(e,t){(t=t||{}).filename;var r,n=e.length,i=0;if(e instanceof Array&&(e=new Uint8Array(e)),"number"!=typeof t.compressionMethod&&(t.compressionMethod=Wr.Zip.CompressionMethod.DEFLATE),t.compress)switch(t.compressionMethod){case Wr.Zip.CompressionMethod.STORE:break;case Wr.Zip.CompressionMethod.DEFLATE:i=Wr.CRC32.calc(e),e=this.deflateWithOption(e,t),r=!0;break;default:throw new Error("unknown compression method:"+t.compressionMethod)}this.files.push({buffer:e,option:t,compressed:r,encrypted:!1,size:n,crc32:i})},Wr.Zip.prototype.setPassword=function(e){this.password=e},Wr.Zip.prototype.compress=function(){var e,t,r,n,i,a,o,s,c,u,h,l,f,p,d,g,v,m,b,y,w,k,x,S,_,C,R=this.files,E=0,A=0;for(x=0,S=R.length;x<S;++x){if(p=(e=R[x]).option.filename?e.option.filename.length:0,d=e.option.extraField?e.option.extraField.length:0,g=e.option.comment?e.option.comment.length:0,!e.compressed)switch(e.crc32=Wr.CRC32.calc(e.buffer),e.option.compressionMethod){case Wr.Zip.CompressionMethod.STORE:break;case Wr.Zip.CompressionMethod.DEFLATE:e.buffer=this.deflateWithOption(e.buffer,e.option),e.compressed=!0;break;default:throw new Error("unknown compression method:"+e.option.compressionMethod)}if(void 0!==e.option.password||void 0!==this.password){for(k=this.createEncryptionKey(e.option.password||this.password),y=e.buffer,(w=new Uint8Array(y.length+12)).set(y,12),y=w,_=0;_<12;++_)y[_]=this.encode(k,11===x?255&e.crc32:256*Math.random()|0);for(C=y.length;_<C;++_)y[_]=this.encode(k,y[_]);e.buffer=y}E+=30+p+e.buffer.length,A+=46+p+g}for(a=22+(this.comment?this.comment.length:0),t=new Uint8Array(E+A+a),r=0,i=(n=E)+A,x=0,S=R.length;x<S;++x)p=(e=R[x]).option.filename?e.option.filename.length:0,d=0,g=e.option.comment?e.option.comment.length:0,o=r,t[r++]=Wr.Zip.LocalFileHeaderSignature[0],t[r++]=Wr.Zip.LocalFileHeaderSignature[1],t[r++]=Wr.Zip.LocalFileHeaderSignature[2],t[r++]=Wr.Zip.LocalFileHeaderSignature[3],t[n++]=Wr.Zip.FileHeaderSignature[0],t[n++]=Wr.Zip.FileHeaderSignature[1],t[n++]=Wr.Zip.FileHeaderSignature[2],t[n++]=Wr.Zip.FileHeaderSignature[3],20,t[n++]=20,t[n++]=e.option.os||Wr.Zip.OperatingSystem.MSDOS,t[r++]=t[n++]=20,t[r++]=t[n++]=0,s=0,(e.option.password||this.password)&&(s|=Wr.Zip.Flags.ENCRYPT),t[r++]=t[n++]=255&s,t[r++]=t[n++]=s>>8&255,c=e.option.compressionMethod,t[r++]=t[n++]=255&c,t[r++]=t[n++]=c>>8&255,u=e.option.date||new Date,t[r++]=t[n++]=(7&u.getMinutes())<<5|u.getSeconds()/2|0,t[r++]=t[n++]=u.getHours()<<3|u.getMinutes()>>3,t[r++]=t[n++]=(u.getMonth()+1&7)<<5|u.getDate(),t[r++]=t[n++]=(u.getFullYear()-1980&127)<<1|u.getMonth()+1>>3,h=e.crc32,t[r++]=t[n++]=255&h,t[r++]=t[n++]=h>>8&255,t[r++]=t[n++]=h>>16&255,t[r++]=t[n++]=h>>24&255,l=e.buffer.length,t[r++]=t[n++]=255&l,t[r++]=t[n++]=l>>8&255,t[r++]=t[n++]=l>>16&255,t[r++]=t[n++]=l>>24&255,f=e.size,t[r++]=t[n++]=255&f,t[r++]=t[n++]=f>>8&255,t[r++]=t[n++]=f>>16&255,t[r++]=t[n++]=f>>24&255,t[r++]=t[n++]=255&p,t[r++]=t[n++]=p>>8&255,t[r++]=t[n++]=255&d,t[r++]=t[n++]=d>>8&255,t[n++]=255&g,t[n++]=g>>8&255,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=255&o,t[n++]=o>>8&255,t[n++]=o>>16&255,t[n++]=o>>24&255,(v=e.option.filename)&&(t.set(v,r),t.set(v,n),r+=p,n+=p),(m=e.option.extraField)&&(t.set(m,r),t.set(m,n),r+=d,n+=d),(b=e.option.comment)&&(t.set(b,n),n+=g),t.set(e.buffer,r),r+=e.buffer.length;return t[i++]=Wr.Zip.CentralDirectorySignature[0],t[i++]=Wr.Zip.CentralDirectorySignature[1],t[i++]=Wr.Zip.CentralDirectorySignature[2],t[i++]=Wr.Zip.CentralDirectorySignature[3],t[i++]=0,t[i++]=0,t[i++]=0,t[i++]=0,t[i++]=255&S,t[i++]=S>>8&255,t[i++]=255&S,t[i++]=S>>8&255,t[i++]=255&A,t[i++]=A>>8&255,t[i++]=A>>16&255,t[i++]=A>>24&255,t[i++]=255&E,t[i++]=E>>8&255,t[i++]=E>>16&255,t[i++]=E>>24&255,g=this.comment?this.comment.length:0,t[i++]=255&g,t[i++]=g>>8&255,this.comment&&(t.set(this.comment,i),i+=g),t},Wr.Zip.prototype.deflateWithOption=function(e,t){return new Wr.RawDeflate(e,t.deflateOption).compress()},Wr.Zip.prototype.getByte=function(e){var t=65535&e[2]|2;return t*(1^t)>>8&255},Wr.Zip.prototype.encode=function(e,t){var r=this.getByte(e);return this.updateKeys(e,t),r^t},Wr.Zip.prototype.updateKeys=function(e,t){e[0]=Wr.CRC32.single(e[0],t),e[1]=1+(6681*(20173*(e[1]+(255&e[0]))>>>0)>>>0)>>>0,e[2]=Wr.CRC32.single(e[2],e[1]>>>24)},Wr.Zip.prototype.createEncryptionKey=function(e){var t,r,n=[305419896,591751049,878082192];for(n=new Uint32Array(n),t=0,r=e.length;t<r;++t)this.updateKeys(n,255&e[t]);return n},Wr.Huffman.buildHuffmanTable=function(e){var t,r,n,i,a,o,s,c,u,h,l,f=e.length,p=0,d=Number.POSITIVE_INFINITY;for(c=0,u=f;c<u;++c)e[c]>p&&(p=e[c]),e[c]<d&&(d=e[c]);for(t=1<<p,r=new Uint32Array(t),n=1,i=0,a=2;n<=p;){for(c=0;c<f;++c)if(e[c]===n){for(o=0,s=i,h=0;h<n;++h)o=o<<1|1&s,s>>=1;for(l=n<<16|c,h=o;h<t;h+=a)r[h]=l;++i}++n,i<<=1,a<<=1}return[r,p,d]};var Gr=Wr.Huffman.buildHuffmanTable;Wr.RawInflate=function(e,t){switch(this.buffer,this.blocks=[],this.bufferSize=32768,this.totalpos=0,this.ip=0,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(e),this.output,this.op,this.bfinal=!1,this.bufferType=Wr.RawInflate.BufferType.ADAPTIVE,this.resize=!1,!t&&(t={})||(t.index&&(this.ip=t.index),t.bufferSize&&(this.bufferSize=t.bufferSize),t.bufferType&&(this.bufferType=t.bufferType),t.resize&&(this.resize=t.resize)),this.bufferType){case Wr.RawInflate.BufferType.BLOCK:this.op=Wr.RawInflate.MaxBackwardLength,this.output=new Uint8Array(Wr.RawInflate.MaxBackwardLength+this.bufferSize+Wr.RawInflate.MaxCopyLength);break;case Wr.RawInflate.BufferType.ADAPTIVE:this.op=0,this.output=new Uint8Array(this.bufferSize);break;default:throw new Error("invalid inflate mode")}},Wr.RawInflate.BufferType={BLOCK:0,ADAPTIVE:1},Wr.RawInflate.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();switch(this.bufferType){case Wr.RawInflate.BufferType.BLOCK:return this.concatBufferBlock();case Wr.RawInflate.BufferType.ADAPTIVE:return this.concatBufferDynamic();default:throw new Error("invalid inflate mode")}},Wr.RawInflate.MaxBackwardLength=32768,Wr.RawInflate.MaxCopyLength=258,Wr.RawInflate.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Wr.RawInflate.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),Wr.RawInflate.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),Wr.RawInflate.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),Wr.RawInflate.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Wr.RawInflate.FixedLiteralLengthTable=function(){var e,t,r=new Uint8Array(288);for(e=0,t=r.length;e<t;++e)r[e]=e<=143?8:e<=255?9:e<=279?7:8;return Gr(r)}(),Wr.RawInflate.FixedDistanceTable=function(){var e,t,r=new Uint8Array(30);for(e=0,t=r.length;e<t;++e)r[e]=5;return Gr(r)}(),Wr.RawInflate.prototype.parseBlock=function(){var e=this.readBits(3);switch(1&e&&(this.bfinal=!0),e>>>=1){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw new Error("unknown BTYPE: "+e)}},Wr.RawInflate.prototype.readBits=function(e){var t,r=this.bitsbuf,n=this.bitsbuflen,i=this.input,a=this.ip;if(a+(e-n+7>>3)>=i.length)throw new Error("input buffer is broken");for(;n<e;)r|=i[a++]<<n,n+=8;return t=r&(1<<e)-1,r>>>=e,n-=e,this.bitsbuf=r,this.bitsbuflen=n,this.ip=a,t},Wr.RawInflate.prototype.readCodeByTable=function(e){for(var t,r,n=this.bitsbuf,i=this.bitsbuflen,a=this.input,o=this.ip,s=a.length,c=e[0],u=e[1];i<u&&!(o>=s);)n|=a[o++]<<i,i+=8;if((r=(t=c[n&(1<<u)-1])>>>16)>i)throw new Error("invalid code length: "+r);return this.bitsbuf=n>>r,this.bitsbuflen=i-r,this.ip=o,65535&t},Wr.RawInflate.prototype.parseUncompressedBlock=function(){var e,t,r=this.input,n=this.ip,i=this.output,a=this.op,o=r.length,s=i.length;if(this.bitsbuf=0,this.bitsbuflen=0,n+1>=o)throw new Error("invalid uncompressed block header: LEN");if(e=r[n++]|r[n++]<<8,n+1>=o)throw new Error("invalid uncompressed block header: NLEN");if(e===~(r[n++]|r[n++]<<8))throw new Error("invalid uncompressed block header: length verify");if(n+e>r.length)throw new Error("input buffer is broken");switch(this.bufferType){case Wr.RawInflate.BufferType.BLOCK:for(;a+e>i.length;)e-=t=s-a,i.set(r.subarray(n,n+t),a),a+=t,n+=t,this.op=a,i=this.expandBufferBlock(),a=this.op;break;case Wr.RawInflate.BufferType.ADAPTIVE:for(;a+e>i.length;)i=this.expandBufferAdaptive({fixRatio:2});break;default:throw new Error("invalid inflate mode")}i.set(r.subarray(n,n+e),a),a+=e,n+=e,this.ip=n,this.op=a,this.output=i},Wr.RawInflate.prototype.parseFixedHuffmanBlock=function(){switch(this.bufferType){case Wr.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(Wr.RawInflate.FixedLiteralLengthTable,Wr.RawInflate.FixedDistanceTable);break;case Wr.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(Wr.RawInflate.FixedLiteralLengthTable,Wr.RawInflate.FixedDistanceTable);break;default:throw new Error("invalid inflate mode")}},Wr.RawInflate.prototype.parseDynamicHuffmanBlock=function(){var e,t,r,n,i,a,o,s,c,u=this.readBits(5)+257,h=this.readBits(5)+1,l=this.readBits(4)+4,f=new Uint8Array(Wr.RawInflate.Order.length);for(s=0;s<l;++s)f[Wr.RawInflate.Order[s]]=this.readBits(3);for(e=Gr(f),n=new Uint8Array(u+h),s=0,c=u+h;s<c;)switch(i=this.readCodeByTable(e)){case 16:for(o=3+this.readBits(2);o--;)n[s++]=a;break;case 17:for(o=3+this.readBits(3);o--;)n[s++]=0;a=0;break;case 18:for(o=11+this.readBits(7);o--;)n[s++]=0;a=0;break;default:n[s++]=i,a=i}switch(t=Gr(n.subarray(0,u)),r=Gr(n.subarray(u)),this.bufferType){case Wr.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(t,r);break;case Wr.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(t,r);break;default:throw new Error("invalid inflate mode")}},Wr.RawInflate.prototype.decodeHuffmanBlock=function(e,t){var r=this.output,n=this.op;this.currentLitlenTable=e;for(var i,a,o,s,c=r.length-Wr.RawInflate.MaxCopyLength,u=Wr.RawInflate.LengthCodeTable,h=Wr.RawInflate.LengthExtraTable,l=Wr.RawInflate.DistCodeTable,f=Wr.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(e));)if(i<256)n>=c&&(this.op=n,r=this.expandBufferBlock(),n=this.op),r[n++]=i;else for(s=u[a=i-257],h[a]>0&&(s+=this.readBits(h[a])),o=l[i=this.readCodeByTable(t)],f[i]>0&&(o+=this.readBits(f[i])),n>=c&&(this.op=n,r=this.expandBufferBlock(),n=this.op);s--;)r[n]=r[n++-o];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=n},Wr.RawInflate.prototype.decodeHuffmanAdaptive=function(e,t){var r=this.output,n=this.op;this.currentLitlenTable=e;for(var i,a,o,s,c=r.length,u=Wr.RawInflate.LengthCodeTable,h=Wr.RawInflate.LengthExtraTable,l=Wr.RawInflate.DistCodeTable,f=Wr.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(e));)if(i<256)n>=c&&(c=(r=this.expandBufferAdaptive()).length),r[n++]=i;else for(s=u[a=i-257],h[a]>0&&(s+=this.readBits(h[a])),o=l[i=this.readCodeByTable(t)],f[i]>0&&(o+=this.readBits(f[i])),n+s>c&&(c=(r=this.expandBufferAdaptive()).length);s--;)r[n]=r[n++-o];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=n},Wr.RawInflate.prototype.expandBufferBlock=function(e){var t=new Uint8Array(this.op-Wr.RawInflate.MaxBackwardLength),r=this.op-Wr.RawInflate.MaxBackwardLength,n=this.output;return t.set(n.subarray(Wr.RawInflate.MaxBackwardLength,t.length)),this.blocks.push(t),this.totalpos+=t.length,n.set(n.subarray(r,r+Wr.RawInflate.MaxBackwardLength)),this.op=Wr.RawInflate.MaxBackwardLength,n},Wr.RawInflate.prototype.expandBufferAdaptive=function(e){var t,r,n,i=this.input.length/this.ip+1|0,a=this.input,o=this.output;return e&&("number"==typeof e.fixRatio&&(i=e.fixRatio),"number"==typeof e.addRatio&&(i+=e.addRatio)),r=i<2?(n=(a.length-this.ip)/this.currentLitlenTable[2]/2*258|0)<o.length?o.length+n:o.length<<1:o.length*i,(t=new Uint8Array(r)).set(o),this.output=t,this.output},Wr.RawInflate.prototype.concatBufferBlock=function(){var e,t,r,n,i,a=0,o=this.totalpos+(this.op-Wr.RawInflate.MaxBackwardLength),s=this.output,c=this.blocks,u=new Uint8Array(o);if(0===c.length)return this.output.subarray(Wr.RawInflate.MaxBackwardLength,this.op);for(t=0,r=c.length;t<r;++t)for(n=0,i=(e=c[t]).length;n<i;++n)u[a++]=e[n];for(t=Wr.RawInflate.MaxBackwardLength,r=this.op;t<r;++t)u[a++]=s[t];return this.blocks=[],this.buffer=u,this.buffer},Wr.RawInflate.prototype.concatBufferDynamic=function(){var e,t=this.op;return this.resize?(e=new Uint8Array(t)).set(this.output.subarray(0,t)):e=this.output.subarray(0,t),this.buffer=e,this.buffer};var $r;Gr=Wr.Huffman.buildHuffmanTable;let Zr;function Yr(e,t){t.addEventListener("mousedown",Xr.bind(e))}function Xr(e){e.stopPropagation(),e.preventDefault();!function(e){if(!e.getClientRects().length)return{top:0,left:0};const t=e.getBoundingClientRect(),r=e.ownerDocument.defaultView;t.top,r.pageYOffset,t.left,r.pageXOffset}(this);const t=Kr.bind(this),r=Qr.bind(this),n=getComputedStyle(this),i=parseInt(n.top.replace("px","")),a=parseInt(n.left.replace("px",""));Zr={dragFunction:t,dragEndFunction:r,screenX:e.screenX,screenY:e.screenY,top:i,left:a},document.addEventListener("mousemove",t),document.addEventListener("mouseup",r),document.addEventListener("mouseleave",r),document.addEventListener("mouseexit",r)}function Kr(e){if(!Zr)return;e.stopPropagation(),e.preventDefault();const t=e.screenX-Zr.screenX,r=e.screenY-Zr.screenY;this.style.left=`${Zr.left+t}px`,this.style.top=`${Zr.top+r}px`}function Qr(e){if(!Zr)return;e.stopPropagation(),e.preventDefault();const t=Zr.dragFunction,r=Zr.dragEndFunction;document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",r),document.removeEventListener("mouseleave",r),document.removeEventListener("mouseexit",r),Zr=void 0}Wr.RawInflateStream=function(e,t,r){this.blocks=[],this.bufferSize=r||65e3,this.totalpos=0,this.ip=void 0===t?0:t,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(e),this.output=new Uint8Array(this.bufferSize),this.op=0,this.bfinal=!1,this.blockLength,this.resize=!1,this.litlenTable,this.distTable,this.sp=0,this.status=Wr.RawInflateStream.Status.INITIALIZED,this.ip_,this.bitsbuflen_,this.bitsbuf_},Wr.RawInflateStream.BlockType={UNCOMPRESSED:0,FIXED:1,DYNAMIC:2},Wr.RawInflateStream.Status={INITIALIZED:0,BLOCK_HEADER_START:1,BLOCK_HEADER_END:2,BLOCK_BODY_START:3,BLOCK_BODY_END:4,DECODE_BLOCK_START:5,DECODE_BLOCK_END:6},Wr.RawInflateStream.prototype.decompress=function(e,t){var r=!1;for(void 0!==e&&(this.input=e),void 0!==t&&(this.ip=t);!r;)switch(this.status){case Wr.RawInflateStream.Status.INITIALIZED:case Wr.RawInflateStream.Status.BLOCK_HEADER_START:this.readBlockHeader()<0&&(r=!0);break;case Wr.RawInflateStream.Status.BLOCK_HEADER_END:case Wr.RawInflateStream.Status.BLOCK_BODY_START:switch(this.currentBlockType){case Wr.RawInflateStream.BlockType.UNCOMPRESSED:this.readUncompressedBlockHeader()<0&&(r=!0);break;case Wr.RawInflateStream.BlockType.FIXED:this.parseFixedHuffmanBlock()<0&&(r=!0);break;case Wr.RawInflateStream.BlockType.DYNAMIC:this.parseDynamicHuffmanBlock()<0&&(r=!0)}break;case Wr.RawInflateStream.Status.BLOCK_BODY_END:case Wr.RawInflateStream.Status.DECODE_BLOCK_START:switch(this.currentBlockType){case Wr.RawInflateStream.BlockType.UNCOMPRESSED:this.parseUncompressedBlock()<0&&(r=!0);break;case Wr.RawInflateStream.BlockType.FIXED:case Wr.RawInflateStream.BlockType.DYNAMIC:this.decodeHuffman()<0&&(r=!0)}break;case Wr.RawInflateStream.Status.DECODE_BLOCK_END:this.bfinal?r=!0:this.status=Wr.RawInflateStream.Status.INITIALIZED}return this.concatBuffer()},Wr.RawInflateStream.MaxBackwardLength=32768,Wr.RawInflateStream.MaxCopyLength=258,Wr.RawInflateStream.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Wr.RawInflateStream.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),Wr.RawInflateStream.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),Wr.RawInflateStream.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),Wr.RawInflateStream.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Wr.RawInflateStream.FixedLiteralLengthTable=function(){var e,t,r=new Uint8Array(288);for(e=0,t=r.length;e<t;++e)r[e]=e<=143?8:e<=255?9:e<=279?7:8;return Gr(r)}(),Wr.RawInflateStream.FixedDistanceTable=function(){var e,t,r=new Uint8Array(30);for(e=0,t=r.length;e<t;++e)r[e]=5;return Gr(r)}(),Wr.RawInflateStream.prototype.readBlockHeader=function(){var e;if(this.status=Wr.RawInflateStream.Status.BLOCK_HEADER_START,this.save_(),(e=this.readBits(3))<0)return this.restore_(),-1;switch(1&e&&(this.bfinal=!0),e>>>=1){case 0:this.currentBlockType=Wr.RawInflateStream.BlockType.UNCOMPRESSED;break;case 1:this.currentBlockType=Wr.RawInflateStream.BlockType.FIXED;break;case 2:this.currentBlockType=Wr.RawInflateStream.BlockType.DYNAMIC;break;default:throw new Error("unknown BTYPE: "+e)}this.status=Wr.RawInflateStream.Status.BLOCK_HEADER_END},Wr.RawInflateStream.prototype.readBits=function(e){for(var t,r=this.bitsbuf,n=this.bitsbuflen,i=this.input,a=this.ip;n<e;){if(i.length<=a)return-1;r|=(t=i[a++])<<n,n+=8}return t=r&(1<<e)-1,r>>>=e,n-=e,this.bitsbuf=r,this.bitsbuflen=n,this.ip=a,t},Wr.RawInflateStream.prototype.readCodeByTable=function(e){for(var t,r,n=this.bitsbuf,i=this.bitsbuflen,a=this.input,o=this.ip,s=e[0],c=e[1];i<c;){if(a.length<=o)return-1;n|=a[o++]<<i,i+=8}if((r=(t=s[n&(1<<c)-1])>>>16)>i)throw new Error("invalid code length: "+r);return this.bitsbuf=n>>r,this.bitsbuflen=i-r,this.ip=o,65535&t},Wr.RawInflateStream.prototype.readUncompressedBlockHeader=function(){var e,t=this.input,r=this.ip;if(this.status=Wr.RawInflateStream.Status.BLOCK_BODY_START,r+4>=t.length)return-1;if((e=t[r++]|t[r++]<<8)===~(t[r++]|t[r++]<<8))throw new Error("invalid uncompressed block header: length verify");this.bitsbuf=0,this.bitsbuflen=0,this.ip=r,this.blockLength=e,this.status=Wr.RawInflateStream.Status.BLOCK_BODY_END},Wr.RawInflateStream.prototype.parseUncompressedBlock=function(){var e=this.input,t=this.ip,r=this.output,n=this.op,i=this.blockLength;for(this.status=Wr.RawInflateStream.Status.DECODE_BLOCK_START;i--;){if(n===r.length&&(r=this.expandBuffer({fixRatio:2})),t>=e.length)return this.ip=t,this.op=n,this.blockLength=i+1,-1;r[n++]=e[t++]}return i<0&&(this.status=Wr.RawInflateStream.Status.DECODE_BLOCK_END),this.ip=t,this.op=n,0},Wr.RawInflateStream.prototype.parseFixedHuffmanBlock=function(){return this.status=Wr.RawInflateStream.Status.BLOCK_BODY_START,this.litlenTable=Wr.RawInflateStream.FixedLiteralLengthTable,this.distTable=Wr.RawInflateStream.FixedDistanceTable,this.status=Wr.RawInflateStream.Status.BLOCK_BODY_END,0},Wr.RawInflateStream.prototype.save_=function(){this.ip_=this.ip,this.bitsbuflen_=this.bitsbuflen,this.bitsbuf_=this.bitsbuf},Wr.RawInflateStream.prototype.restore_=function(){this.ip=this.ip_,this.bitsbuflen=this.bitsbuflen_,this.bitsbuf=this.bitsbuf_},Wr.RawInflateStream.prototype.parseDynamicHuffmanBlock=function(){var e,t,r,n,i=new Uint8Array(Wr.RawInflateStream.Order.length);if(this.status=Wr.RawInflateStream.Status.BLOCK_BODY_START,this.save_(),e=this.readBits(5)+257,t=this.readBits(5)+1,r=this.readBits(4)+4,e<0||t<0||r<0)return this.restore_(),-1;try{(function(){var a,o,s,c,u,h,l=0;for(u=0;u<r;++u){if((a=this.readBits(3))<0)throw new Error("not enough input");i[Wr.RawInflateStream.Order[u]]=a}for(n=Gr(i),c=new Uint8Array(e+t),u=0,h=e+t;u<h;){if((o=this.readCodeByTable(n))<0)throw new Error("not enough input");switch(o){case 16:if((a=this.readBits(2))<0)throw new Error("not enough input");for(s=3+a;s--;)c[u++]=l;break;case 17:if((a=this.readBits(3))<0)throw new Error("not enough input");for(s=3+a;s--;)c[u++]=0;l=0;break;case 18:if((a=this.readBits(7))<0)throw new Error("not enough input");for(s=11+a;s--;)c[u++]=0;l=0;break;default:c[u++]=o,l=o}}this.litlenTable=Gr(c.subarray(0,e)),this.distTable=Gr(c.subarray(e))}).call(this)}catch(e){return this.restore_(),-1}return this.status=Wr.RawInflateStream.Status.BLOCK_BODY_END,0},Wr.RawInflateStream.prototype.decodeHuffman=function(){var e,t,r,n,i,a=this.output,o=this.op,s=this.litlenTable,c=this.distTable,u=a.length;for(this.status=Wr.RawInflateStream.Status.DECODE_BLOCK_START;;){if(this.save_(),(e=this.readCodeByTable(s))<0)return this.op=o,this.restore_(),-1;if(256===e)break;if(e<256)o===u&&(u=(a=this.expandBuffer()).length),a[o++]=e;else{if(t=e-257,n=Wr.RawInflateStream.LengthCodeTable[t],Wr.RawInflateStream.LengthExtraTable[t]>0){if((i=this.readBits(Wr.RawInflateStream.LengthExtraTable[t]))<0)return this.op=o,this.restore_(),-1;n+=i}if((e=this.readCodeByTable(c))<0)return this.op=o,this.restore_(),-1;if(r=Wr.RawInflateStream.DistCodeTable[e],Wr.RawInflateStream.DistExtraTable[e]>0){if((i=this.readBits(Wr.RawInflateStream.DistExtraTable[e]))<0)return this.op=o,this.restore_(),-1;r+=i}for(o+n>=u&&(u=(a=this.expandBuffer()).length);n--;)a[o]=a[o++-r];if(this.ip===this.input.length)return this.op=o,-1}}for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=o,this.status=Wr.RawInflateStream.Status.DECODE_BLOCK_END},Wr.RawInflateStream.prototype.expandBuffer=function(e){var t,r,n,i=this.input.length/this.ip+1|0,a=this.input,o=this.output;return e&&("number"==typeof e.fixRatio&&(i=e.fixRatio),"number"==typeof e.addRatio&&(i+=e.addRatio)),r=i<2?(n=(a.length-this.ip)/this.litlenTable[2]/2*258|0)<o.length?o.length+n:o.length<<1:o.length*i,(t=new Uint8Array(r)).set(o),this.output=t,this.output},Wr.RawInflateStream.prototype.concatBuffer=function(){var e,t,r=this.op;return e=this.resize?new Uint8Array(this.output.subarray(this.sp,r)):this.output.subarray(this.sp,r),this.sp=r,r>Wr.RawInflateStream.MaxBackwardLength+this.bufferSize&&(this.op=this.sp=Wr.RawInflateStream.MaxBackwardLength,t=this.output,this.output=new Uint8Array(this.bufferSize+Wr.RawInflateStream.MaxBackwardLength),this.output.set(t.subarray(r-Wr.RawInflateStream.MaxBackwardLength,r))),e},Wr.Inflate=function(e,t){var r,n;switch(this.input=e,this.ip=0,this.rawinflate,this.verify,!t&&(t={})||(t.index&&(this.ip=t.index),t.verify&&(this.verify=t.verify)),r=e[this.ip++],n=e[this.ip++],15&r){case Wr.CompressionMethod.DEFLATE:this.method=Wr.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((r<<8)+n)%31!=0)throw new Error("invalid fcheck flag:"+((r<<8)+n)%31);if(32&n)throw new Error("fdict flag is not supported");this.rawinflate=new Wr.RawInflate(e,{index:this.ip,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})},Wr.Inflate.BufferType=Wr.RawInflate.BufferType,Wr.Inflate.prototype.decompress=function(){var e,t=this.input;if(e=this.rawinflate.decompress(),this.ip=this.rawinflate.ip,this.verify&&(t[this.ip++]<<24|t[this.ip++]<<16|t[this.ip++]<<8|t[this.ip++])>>>0!==Wr.Adler32(e))throw new Error("invalid adler-32 checksum");return e},Wr.InflateStream=function(e){this.input=void 0===e?new Uint8Array:e,this.ip=0,this.rawinflate=new Wr.RawInflateStream(this.input,this.ip),this.method,this.output=this.rawinflate.output},Wr.InflateStream.prototype.decompress=function(e){var t;if(void 0!==e){var r=new Uint8Array(this.input.length+e.length);r.set(this.input,0),r.set(e,this.input.length),this.input=r}return void 0===this.method&&this.readHeader()<0?new Uint8Array:(t=this.rawinflate.decompress(this.input,this.ip),0!==this.rawinflate.ip&&(this.input=this.input.subarray(this.rawinflate.ip),this.ip=0),t)},Wr.InflateStream.prototype.readHeader=function(){var e=this.ip,t=this.input,r=t[e++],n=t[e++];if(void 0===r||void 0===n)return-1;switch(15&r){case Wr.CompressionMethod.DEFLATE:this.method=Wr.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((r<<8)+n)%31!=0)throw new Error("invalid fcheck flag:"+((r<<8)+n)%31);if(32&n)throw new Error("fdict flag is not supported");this.ip=e},Wr.Gunzip=function(e,t){this.input=e,this.ip=0,this.member=[],this.decompressed=!1},Wr.Gunzip.prototype.getMembers=function(){return this.decompressed||this.decompress(),this.member.slice()},Wr.Gunzip.prototype.decompress=function(){for(var e=this.input.length;this.ip<e;)this.decodeMember();return this.decompressed=!0,this.concatMember()},Wr.Gunzip.prototype.decodeMember=function(){var e,t,r,n,i,a,o,s,c,u=new Wr.GunzipMember,h=this.input,l=this.ip;if(u.id1=h[l++],u.id2=h[l++],31!==u.id1||139!==u.id2)throw new Error("invalid file signature:"+u.id1+","+u.id2);switch(u.cm=h[l++],u.cm){case 8:break;default:throw new Error("unknown compression method: "+u.cm)}if(u.flg=h[l++],s=h[l++]|h[l++]<<8|h[l++]<<16|h[l++]<<24,u.mtime=new Date(1e3*s),u.xfl=h[l++],u.os=h[l++],(u.flg&Wr.Gzip.FlagsMask.FEXTRA)>0&&(u.xlen=h[l++]|h[l++]<<8,l=this.decodeSubField(l,u.xlen)),(u.flg&Wr.Gzip.FlagsMask.FNAME)>0){for(o=[],a=0;(i=h[l++])>0;)o[a++]=String.fromCharCode(i);u.name=o.join("")}if((u.flg&Wr.Gzip.FlagsMask.FCOMMENT)>0){for(o=[],a=0;(i=h[l++])>0;)o[a++]=String.fromCharCode(i);u.comment=o.join("")}if((u.flg&Wr.Gzip.FlagsMask.FHCRC)>0&&(u.crc16=65535&Wr.CRC32.calc(h,0,l),u.crc16!==(h[l++]|h[l++]<<8)))throw new Error("invalid header crc16");if(e=h[h.length-4]|h[h.length-3]<<8|h[h.length-2]<<16|h[h.length-1]<<24,h.length-l-4-4<512*e&&(n=e),t=new Wr.RawInflate(h,{index:l,bufferSize:n}),u.data=r=t.decompress(),l=t.ip,u.crc32=c=(h[l++]|h[l++]<<8|h[l++]<<16|h[l++]<<24)>>>0,Wr.CRC32.calc(r)!==c)throw new Error("invalid CRC-32 checksum: 0x"+Wr.CRC32.calc(r).toString(16)+" / 0x"+c.toString(16));if(u.isize=e=(h[l++]|h[l++]<<8|h[l++]<<16|h[l++]<<24)>>>0,(4294967295&r.length)!==e)throw new Error("invalid input size: "+(4294967295&r.length)+" / "+e);this.member.push(u),this.ip=l},Wr.Gunzip.prototype.decodeSubField=function(e,t){return e+t},Wr.Gunzip.prototype.concatMember=function(){var e,t,r,n=this.member,i=0,a=0;for(e=0,t=n.length;e<t;++e)a+=n[e].data.length;for(r=new Uint8Array(a),e=0;e<t;++e)r.set(n[e].data,i),i+=n[e].data.length;return r},Wr.GunzipMember=function(){this.id1,this.id2,this.cm,this.flg,this.mtime,this.xfl,this.os,this.crc16,this.xlen,this.crc32,this.isize,this.name,this.comment,this.data},Wr.GunzipMember.prototype.getName=function(){return this.name},Wr.GunzipMember.prototype.getData=function(){return this.data},Wr.GunzipMember.prototype.getMtime=function(){return this.mtime},Wr.Gzip=function(e,t){this.input=e,this.ip=0,this.output,this.op=0,this.flags={},this.filename,this.comment,this.deflateOptions,t&&(t.flags&&(this.flags=t.flags),"string"==typeof t.filename&&(this.filename=t.filename),"string"==typeof t.comment&&(this.comment=t.comment),t.deflateOptions&&(this.deflateOptions=t.deflateOptions)),this.deflateOptions||(this.deflateOptions={})},Wr.Gzip.DefaultBufferSize=32768,Wr.Gzip.prototype.compress=function(){var e,t,r,n,i,a,o,s,c=new Uint8Array(Wr.Gzip.DefaultBufferSize),u=0,h=this.input,l=this.ip,f=this.filename,p=this.comment;if(c[u++]=31,c[u++]=139,c[u++]=8,e=0,this.flags.fname&&(e|=Wr.Gzip.FlagsMask.FNAME),this.flags.fcomment&&(e|=Wr.Gzip.FlagsMask.FCOMMENT),this.flags.fhcrc&&(e|=Wr.Gzip.FlagsMask.FHCRC),c[u++]=e,t=(Date.now?Date.now():+new Date)/1e3|0,c[u++]=255&t,c[u++]=t>>>8&255,c[u++]=t>>>16&255,c[u++]=t>>>24&255,c[u++]=0,c[u++]=Wr.Gzip.OperatingSystem.UNKNOWN,void 0!==this.flags.fname){for(o=0,s=f.length;o<s;++o)(a=f.charCodeAt(o))>255&&(c[u++]=a>>>8&255),c[u++]=255&a;c[u++]=0}if(this.flags.comment){for(o=0,s=p.length;o<s;++o)(a=p.charCodeAt(o))>255&&(c[u++]=a>>>8&255),c[u++]=255&a;c[u++]=0}return this.flags.fhcrc&&(r=65535&Wr.CRC32.calc(c,0,u),c[u++]=255&r,c[u++]=r>>>8&255),this.deflateOptions.outputBuffer=c,this.deflateOptions.outputIndex=u,c=(i=new Wr.RawDeflate(h,this.deflateOptions)).compress(),(u=i.op)+8>c.buffer.byteLength?(this.output=new Uint8Array(u+8),this.output.set(new Uint8Array(c.buffer)),c=this.output):c=new Uint8Array(c.buffer),n=Wr.CRC32.calc(h),c[u++]=255&n,c[u++]=n>>>8&255,c[u++]=n>>>16&255,c[u++]=n>>>24&255,s=h.length,c[u++]=255&s,c[u++]=s>>>8&255,c[u++]=s>>>16&255,c[u++]=s>>>24&255,this.ip=l,u<c.length&&(this.output=c=c.subarray(0,u)),c},Wr.Gzip.OperatingSystem={FAT:0,AMIGA:1,VMS:2,UNIX:3,VM_CMS:4,ATARI_TOS:5,HPFS:6,MACINTOSH:7,Z_SYSTEM:8,CP_M:9,TOPS_20:10,NTFS:11,QDOS:12,ACORN_RISCOS:13,UNKNOWN:255},Wr.Gzip.FlagsMask={FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16},Wr.Heap=function(e){this.buffer=new Uint16Array(2*e),this.length=0},Wr.Heap.prototype.getParent=function(e){return 2*((e-2)/4|0)},Wr.Heap.prototype.getChild=function(e){return 2*e+2},Wr.Heap.prototype.push=function(e,t){var r,n,i,a=this.buffer;for(r=this.length,a[this.length++]=t,a[this.length++]=e;r>0&&(n=this.getParent(r),a[r]>a[n]);)i=a[r],a[r]=a[n],a[n]=i,i=a[r+1],a[r+1]=a[n+1],a[n+1]=i,r=n;return this.length},Wr.Heap.prototype.pop=function(){var e,t,r,n,i,a=this.buffer;for(t=a[0],e=a[1],this.length-=2,a[0]=a[this.length],a[1]=a[this.length+1],i=0;!((n=this.getChild(i))>=this.length)&&(n+2<this.length&&a[n+2]>a[n]&&(n+=2),a[n]>a[i]);)r=a[i],a[i]=a[n],a[n]=r,r=a[i+1],a[i+1]=a[n+1],a[n+1]=r,i=n;return{index:e,value:t,length:this.length}},Wr.RawDeflate=function(e,t){this.compressionType=Wr.RawDeflate.CompressionType.DYNAMIC,this.lazy=0,this.freqsLitLen,this.freqsDist,this.input=e instanceof Array?new Uint8Array(e):e,this.output,this.op=0,t&&(t.lazy&&(this.lazy=t.lazy),"number"==typeof t.compressionType&&(this.compressionType=t.compressionType),t.outputBuffer&&(this.output=t.outputBuffer instanceof Array?new Uint8Array(t.outputBuffer):t.outputBuffer),"number"==typeof t.outputIndex&&(this.op=t.outputIndex)),this.output||(this.output=new Uint8Array(32768))},Wr.RawDeflate.CompressionType={NONE:0,FIXED:1,DYNAMIC:2,RESERVED:3},Wr.RawDeflate.Lz77MinLength=3,Wr.RawDeflate.Lz77MaxLength=258,Wr.RawDeflate.WindowSize=32768,Wr.RawDeflate.MaxCodeLength=16,Wr.RawDeflate.HUFMAX=286,Wr.RawDeflate.FixedHuffmanTable=function(){var e,t=[];for(e=0;e<288;e++)switch(!0){case e<=143:t.push([e+48,8]);break;case e<=255:t.push([e-144+400,9]);break;case e<=279:t.push([e-256+0,7]);break;case e<=287:t.push([e-280+192,8]);break;default:throw"invalid literal: "+e}return t}(),Wr.RawDeflate.prototype.compress=function(){var e,t,r,n=this.input;switch(this.compressionType){case Wr.RawDeflate.CompressionType.NONE:for(t=0,r=n.length;t<r;)t+=(e=n.subarray(t,t+65535)).length,this.makeNocompressBlock(e,t===r);break;case Wr.RawDeflate.CompressionType.FIXED:this.output=this.makeFixedHuffmanBlock(n,!0),this.op=this.output.length;break;case Wr.RawDeflate.CompressionType.DYNAMIC:this.output=this.makeDynamicHuffmanBlock(n,!0),this.op=this.output.length;break;default:throw"invalid compression type"}return this.output},Wr.RawDeflate.prototype.makeNocompressBlock=function(e,t){var r,n,i,a,o=this.output,s=this.op;for(o=new Uint8Array(this.output.buffer);o.length<=s+e.length+5;)o=new Uint8Array(o.length<<1);return o.set(this.output),r=t?1:0,n=Wr.RawDeflate.CompressionType.NONE,o[s++]=r|n<<1,a=65536+~(i=e.length)&65535,o[s++]=255&i,o[s++]=i>>>8&255,o[s++]=255&a,o[s++]=a>>>8&255,o.set(e,s),s+=e.length,o=o.subarray(0,s),this.op=s,this.output=o,o},Wr.RawDeflate.prototype.makeFixedHuffmanBlock=function(e,t){var r,n,i,a=new Wr.BitStream(new Uint8Array(this.output.buffer),this.op);return r=t?1:0,n=Wr.RawDeflate.CompressionType.FIXED,a.writeBits(r,1,!0),a.writeBits(n,2,!0),i=this.lz77(e),this.fixedHuffman(i,a),a.finish()},Wr.RawDeflate.prototype.makeDynamicHuffmanBlock=function(e,t){var r,n,i,a,o,s,c,u,h,l,f,p,d,g,v,m,b,y=new Wr.BitStream(new Uint8Array(this.output.buffer),this.op),w=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],k=new Array(19);for(r=t?1:0,n=Wr.RawDeflate.CompressionType.DYNAMIC,y.writeBits(r,1,!0),y.writeBits(n,2,!0),i=this.lz77(e),c=this.getLengths_(this.freqsLitLen,15),u=this.getCodesFromLengths_(c),h=this.getLengths_(this.freqsDist,7),l=this.getCodesFromLengths_(h),a=286;a>257&&0===c[a-1];a--);for(o=30;o>1&&0===h[o-1];o--);for(f=this.getTreeSymbols_(a,c,o,h),p=this.getLengths_(f.freqs,7),m=0;m<19;m++)k[m]=p[w[m]];for(s=19;s>4&&0===k[s-1];s--);for(d=this.getCodesFromLengths_(p),y.writeBits(a-257,5,!0),y.writeBits(o-1,5,!0),y.writeBits(s-4,4,!0),m=0;m<s;m++)y.writeBits(k[m],3,!0);for(m=0,b=f.codes.length;m<b;m++)if(g=f.codes[m],y.writeBits(d[g],p[g],!0),g>=16){switch(m++,g){case 16:v=2;break;case 17:v=3;break;case 18:v=7;break;default:throw"invalid code: "+g}y.writeBits(f.codes[m],v,!0)}return this.dynamicHuffman(i,[u,c],[l,h],y),y.finish()},Wr.RawDeflate.prototype.dynamicHuffman=function(e,t,r,n){var i,a,o,s,c,u,h,l;for(c=t[0],u=t[1],h=r[0],l=r[1],i=0,a=e.length;i<a;++i)if(o=e[i],n.writeBits(c[o],u[o],!0),o>256)n.writeBits(e[++i],e[++i],!0),s=e[++i],n.writeBits(h[s],l[s],!0),n.writeBits(e[++i],e[++i],!0);else if(256===o)break;return n},Wr.RawDeflate.prototype.fixedHuffman=function(e,t){var r,n,i;for(r=0,n=e.length;r<n;r++)if(i=e[r],Wr.BitStream.prototype.writeBits.apply(t,Wr.RawDeflate.FixedHuffmanTable[i]),i>256)t.writeBits(e[++r],e[++r],!0),t.writeBits(e[++r],5),t.writeBits(e[++r],e[++r],!0);else if(256===i)break;return t},Wr.RawDeflate.Lz77Match=function(e,t){this.length=e,this.backwardDistance=t},Wr.RawDeflate.Lz77Match.LengthCodeTable=($r=function(){var e,t,r=[];for(e=3;e<=258;e++)t=n(e),r[e]=t[2]<<24|t[1]<<16|t[0];function n(e){switch(!0){case 3===e:return[257,e-3,0];case 4===e:return[258,e-4,0];case 5===e:return[259,e-5,0];case 6===e:return[260,e-6,0];case 7===e:return[261,e-7,0];case 8===e:return[262,e-8,0];case 9===e:return[263,e-9,0];case 10===e:return[264,e-10,0];case e<=12:return[265,e-11,1];case e<=14:return[266,e-13,1];case e<=16:return[267,e-15,1];case e<=18:return[268,e-17,1];case e<=22:return[269,e-19,2];case e<=26:return[270,e-23,2];case e<=30:return[271,e-27,2];case e<=34:return[272,e-31,2];case e<=42:return[273,e-35,3];case e<=50:return[274,e-43,3];case e<=58:return[275,e-51,3];case e<=66:return[276,e-59,3];case e<=82:return[277,e-67,4];case e<=98:return[278,e-83,4];case e<=114:return[279,e-99,4];case e<=130:return[280,e-115,4];case e<=162:return[281,e-131,5];case e<=194:return[282,e-163,5];case e<=226:return[283,e-195,5];case e<=257:return[284,e-227,5];case 258===e:return[285,e-258,0];default:throw"invalid length: "+e}}return r}(),new Uint32Array($r)),Wr.RawDeflate.Lz77Match.prototype.getDistanceCode_=function(e){var t;switch(!0){case 1===e:t=[0,e-1,0];break;case 2===e:t=[1,e-2,0];break;case 3===e:t=[2,e-3,0];break;case 4===e:t=[3,e-4,0];break;case e<=6:t=[4,e-5,1];break;case e<=8:t=[5,e-7,1];break;case e<=12:t=[6,e-9,2];break;case e<=16:t=[7,e-13,2];break;case e<=24:t=[8,e-17,3];break;case e<=32:t=[9,e-25,3];break;case e<=48:t=[10,e-33,4];break;case e<=64:t=[11,e-49,4];break;case e<=96:t=[12,e-65,5];break;case e<=128:t=[13,e-97,5];break;case e<=192:t=[14,e-129,6];break;case e<=256:t=[15,e-193,6];break;case e<=384:t=[16,e-257,7];break;case e<=512:t=[17,e-385,7];break;case e<=768:t=[18,e-513,8];break;case e<=1024:t=[19,e-769,8];break;case e<=1536:t=[20,e-1025,9];break;case e<=2048:t=[21,e-1537,9];break;case e<=3072:t=[22,e-2049,10];break;case e<=4096:t=[23,e-3073,10];break;case e<=6144:t=[24,e-4097,11];break;case e<=8192:t=[25,e-6145,11];break;case e<=12288:t=[26,e-8193,12];break;case e<=16384:t=[27,e-12289,12];break;case e<=24576:t=[28,e-16385,13];break;case e<=32768:t=[29,e-24577,13];break;default:throw"invalid distance"}return t},Wr.RawDeflate.Lz77Match.prototype.toLz77Array=function(){var e,t=this.length,r=this.backwardDistance,n=[],i=0;return e=Wr.RawDeflate.Lz77Match.LengthCodeTable[t],n[i++]=65535&e,n[i++]=e>>16&255,n[i++]=e>>24,e=this.getDistanceCode_(r),n[i++]=e[0],n[i++]=e[1],n[i++]=e[2],n},Wr.RawDeflate.prototype.lz77=function(e){var t,r,n,i,a,o,s,c,u,h={},l=Wr.RawDeflate.WindowSize,f=new Uint16Array(2*e.length),p=0,d=0,g=new Uint32Array(286),v=new Uint32Array(30),m=this.lazy;function b(e,t){var r,n,i=e.toLz77Array();for(r=0,n=i.length;r<n;++r)f[p++]=i[r];g[i[0]]++,v[i[3]]++,d=e.length+t-1,c=null}for(g[256]=1,t=0,r=e.length;t<r;++t){for(a=0,n=0,i=Wr.RawDeflate.Lz77MinLength;n<i&&t+n!==r;++n)a=a<<8|e[t+n];if(void 0===h[a]&&(h[a]=[]),o=h[a],d-- >0)o.push(t);else{for(;o.length>0&&t-o[0]>l;)o.shift();if(t+Wr.RawDeflate.Lz77MinLength>=r){for(c&&b(c,-1),n=0,i=r-t;n<i;++n)u=e[t+n],f[p++]=u,++g[u];break}o.length>0?(s=this.searchLongestMatch_(e,t,o),c?c.length<s.length?(u=e[t-1],f[p++]=u,++g[u],b(s,0)):b(c,-1):s.length<m?c=s:b(s,0)):c?b(c,-1):(u=e[t],f[p++]=u,++g[u]),o.push(t)}}return f[p++]=256,g[256]++,this.freqsLitLen=g,this.freqsDist=v,f.subarray(0,p)},Wr.RawDeflate.prototype.searchLongestMatch_=function(e,t,r){var n,i,a,o,s,c,u=0,h=e.length;e:for(o=0,c=r.length;o<c;o++){if(n=r[c-o-1],a=Wr.RawDeflate.Lz77MinLength,u>Wr.RawDeflate.Lz77MinLength){for(s=u;s>Wr.RawDeflate.Lz77MinLength;s--)if(e[n+s-1]!==e[t+s-1])continue e;a=u}for(;a<Wr.RawDeflate.Lz77MaxLength&&t+a<h&&e[n+a]===e[t+a];)++a;if(a>u&&(i=n,u=a),a===Wr.RawDeflate.Lz77MaxLength)break}return new Wr.RawDeflate.Lz77Match(u,t-i)},Wr.RawDeflate.prototype.getTreeSymbols_=function(e,t,r,n){var i,a,o,s,c,u,h=new Uint32Array(e+r),l=new Uint32Array(316),f=new Uint8Array(19);for(a=0,i=0;i<e;i++)h[a++]=t[i];for(i=0;i<r;i++)h[a++]=n[i];for(c=0,i=0,s=h.length;i<s;i+=a){for(a=1;i+a<s&&h[i+a]===h[i];++a);if(o=a,0===h[i])if(o<3)for(;o-- >0;)l[c++]=0,f[0]++;else for(;o>0;)(u=o<138?o:138)>o-3&&u<o&&(u=o-3),u<=10?(l[c++]=17,l[c++]=u-3,f[17]++):(l[c++]=18,l[c++]=u-11,f[18]++),o-=u;else if(l[c++]=h[i],f[h[i]]++,--o<3)for(;o-- >0;)l[c++]=h[i],f[h[i]]++;else for(;o>0;)(u=o<6?o:6)>o-3&&u<o&&(u=o-3),l[c++]=16,l[c++]=u-3,f[16]++,o-=u}return{codes:l.subarray(0,c),freqs:f}},Wr.RawDeflate.prototype.getLengths_=function(e,t){var r,n,i,a,o,s=e.length,c=new Wr.Heap(2*Wr.RawDeflate.HUFMAX),u=new Uint8Array(s);for(a=0;a<s;++a)e[a]>0&&c.push(a,e[a]);if(r=new Array(c.length/2),n=new Uint32Array(c.length/2),1===r.length)return u[c.pop().index]=1,u;for(a=0,o=c.length/2;a<o;++a)r[a]=c.pop(),n[a]=r[a].value;for(i=this.reversePackageMerge_(n,n.length,t),a=0,o=r.length;a<o;++a)u[r[a].index]=i[a];return u},Wr.RawDeflate.prototype.reversePackageMerge_=function(e,t,r){var n,i,a,o,s,c=new Uint16Array(r),u=new Uint8Array(r),h=new Uint8Array(t),l=new Array(r),f=new Array(r),p=new Array(r),d=(1<<r)-t,g=1<<r-1;function v(e){var r=f[e][p[e]];r===t?(v(e+1),v(e+1)):--h[r],++p[e]}for(c[r-1]=t,i=0;i<r;++i)d<g?u[i]=0:(u[i]=1,d-=g),d<<=1,c[r-2-i]=(c[r-1-i]/2|0)+t;for(c[0]=u[0],l[0]=new Array(c[0]),f[0]=new Array(c[0]),i=1;i<r;++i)c[i]>2*c[i-1]+u[i]&&(c[i]=2*c[i-1]+u[i]),l[i]=new Array(c[i]),f[i]=new Array(c[i]);for(n=0;n<t;++n)h[n]=r;for(a=0;a<c[r-1];++a)l[r-1][a]=e[a],f[r-1][a]=a;for(n=0;n<r;++n)p[n]=0;for(1===u[r-1]&&(--h[0],++p[r-1]),i=r-2;i>=0;--i){for(n=0,o=0,s=p[i+1],a=0;a<c[i];a++)(o=l[i+1][s]+l[i+1][s+1])>e[n]?(l[i][a]=o,f[i][a]=t,s+=2):(l[i][a]=e[n],f[i][a]=n,++n);p[i]=0,1===u[i]&&v(i)}return h},Wr.RawDeflate.prototype.getCodesFromLengths_=function(e){var t,r,n,i,a=new Uint16Array(e.length),o=[],s=[],c=0;for(t=0,r=e.length;t<r;t++)o[e[t]]=1+(0|o[e[t]]);for(t=1,r=Wr.RawDeflate.MaxCodeLength;t<=r;t++)s[t]=c,c+=0|o[t],c<<=1;for(t=0,r=e.length;t<r;t++)for(c=s[e[t]],s[e[t]]+=1,a[t]=0,n=0,i=e[t];n<i;n++)a[t]=a[t]<<1|1&c,c>>>=1;return a},Wr.Unzip=function(e,t){t=t||{},this.input=e instanceof Array?new Uint8Array(e):e,this.ip=0,this.eocdrOffset,this.numberOfThisDisk,this.startDisk,this.totalEntriesThisDisk,this.totalEntries,this.centralDirectorySize,this.centralDirectoryOffset,this.commentLength,this.comment,this.fileHeaderList,this.filenameToIndex,this.verify=t.verify||!1,this.password=t.password},Wr.Unzip.CompressionMethod=Wr.Zip.CompressionMethod,Wr.Unzip.FileHeaderSignature=Wr.Zip.FileHeaderSignature,Wr.Unzip.LocalFileHeaderSignature=Wr.Zip.LocalFileHeaderSignature,Wr.Unzip.CentralDirectorySignature=Wr.Zip.CentralDirectorySignature,Wr.Unzip.FileHeader=function(e,t){this.input=e,this.offset=t,this.length,this.version,this.os,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.fileCommentLength,this.diskNumberStart,this.internalFileAttributes,this.externalFileAttributes,this.relativeOffset,this.filename,this.extraField,this.comment},Wr.Unzip.FileHeader.prototype.parse=function(){var e=this.input,t=this.offset;if(e[t++]!==Wr.Unzip.FileHeaderSignature[0]||e[t++]!==Wr.Unzip.FileHeaderSignature[1]||e[t++]!==Wr.Unzip.FileHeaderSignature[2]||e[t++]!==Wr.Unzip.FileHeaderSignature[3])throw new Error("invalid file header signature");this.version=e[t++],this.os=e[t++],this.needVersion=e[t++]|e[t++]<<8,this.flags=e[t++]|e[t++]<<8,this.compression=e[t++]|e[t++]<<8,this.time=e[t++]|e[t++]<<8,this.date=e[t++]|e[t++]<<8,this.crc32=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.compressedSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.plainSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.fileNameLength=e[t++]|e[t++]<<8,this.extraFieldLength=e[t++]|e[t++]<<8,this.fileCommentLength=e[t++]|e[t++]<<8,this.diskNumberStart=e[t++]|e[t++]<<8,this.internalFileAttributes=e[t++]|e[t++]<<8,this.externalFileAttributes=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,this.relativeOffset=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.filename=String.fromCharCode.apply(null,e.subarray(t,t+=this.fileNameLength)),this.extraField=e.subarray(t,t+=this.extraFieldLength),this.comment=e.subarray(t,t+this.fileCommentLength),this.length=t-this.offset},Wr.Unzip.LocalFileHeader=function(e,t){this.input=e,this.offset=t,this.length,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.filename,this.extraField},Wr.Unzip.LocalFileHeader.Flags=Wr.Zip.Flags,Wr.Unzip.LocalFileHeader.prototype.parse=function(){var e=this.input,t=this.offset;if(e[t++]!==Wr.Unzip.LocalFileHeaderSignature[0]||e[t++]!==Wr.Unzip.LocalFileHeaderSignature[1]||e[t++]!==Wr.Unzip.LocalFileHeaderSignature[2]||e[t++]!==Wr.Unzip.LocalFileHeaderSignature[3])throw new Error("invalid local file header signature");this.needVersion=e[t++]|e[t++]<<8,this.flags=e[t++]|e[t++]<<8,this.compression=e[t++]|e[t++]<<8,this.time=e[t++]|e[t++]<<8,this.date=e[t++]|e[t++]<<8,this.crc32=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.compressedSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.plainSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.fileNameLength=e[t++]|e[t++]<<8,this.extraFieldLength=e[t++]|e[t++]<<8,this.filename=String.fromCharCode.apply(null,e.subarray(t,t+=this.fileNameLength)),this.extraField=e.subarray(t,t+=this.extraFieldLength),this.length=t-this.offset},Wr.Unzip.prototype.searchEndOfCentralDirectoryRecord=function(){var e,t=this.input;for(e=t.length-12;e>0;--e)if(t[e]===Wr.Unzip.CentralDirectorySignature[0]&&t[e+1]===Wr.Unzip.CentralDirectorySignature[1]&&t[e+2]===Wr.Unzip.CentralDirectorySignature[2]&&t[e+3]===Wr.Unzip.CentralDirectorySignature[3])return void(this.eocdrOffset=e);throw new Error("End of Central Directory Record not found")},Wr.Unzip.prototype.parseEndOfCentralDirectoryRecord=function(){var e,t=this.input;if(this.eocdrOffset||this.searchEndOfCentralDirectoryRecord(),e=this.eocdrOffset,t[e++]!==Wr.Unzip.CentralDirectorySignature[0]||t[e++]!==Wr.Unzip.CentralDirectorySignature[1]||t[e++]!==Wr.Unzip.CentralDirectorySignature[2]||t[e++]!==Wr.Unzip.CentralDirectorySignature[3])throw new Error("invalid signature");this.numberOfThisDisk=t[e++]|t[e++]<<8,this.startDisk=t[e++]|t[e++]<<8,this.totalEntriesThisDisk=t[e++]|t[e++]<<8,this.totalEntries=t[e++]|t[e++]<<8,this.centralDirectorySize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.centralDirectoryOffset=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.commentLength=t[e++]|t[e++]<<8,this.comment=t.subarray(e,e+this.commentLength)},Wr.Unzip.prototype.parseFileHeader=function(){var e,t,r,n,i=[],a={};if(!this.fileHeaderList){for(void 0===this.centralDirectoryOffset&&this.parseEndOfCentralDirectoryRecord(),e=this.centralDirectoryOffset,r=0,n=this.totalEntries;r<n;++r)(t=new Wr.Unzip.FileHeader(this.input,e)).parse(),e+=t.length,i[r]=t,a[t.filename]=r;if(this.centralDirectorySize<e-this.centralDirectoryOffset)throw new Error("invalid file header size");this.fileHeaderList=i,this.filenameToIndex=a}},Wr.Unzip.prototype.getFileData=function(e,t){t=t||{};var r,n,i,a,o,s,c,u,h=this.input,l=this.fileHeaderList;if(l||this.parseFileHeader(),void 0===l[e])throw new Error("wrong index");if(n=l[e].relativeOffset,(r=new Wr.Unzip.LocalFileHeader(this.input,n)).parse(),n+=r.length,i=r.compressedSize,0!=(r.flags&Wr.Unzip.LocalFileHeader.Flags.ENCRYPT)){if(!t.password&&!this.password)throw new Error("please set password");for(s=this.createDecryptionKey(t.password||this.password),c=n,u=n+12;c<u;++c)this.decode(s,h[c]);for(c=n+=12,u=n+(i-=12);c<u;++c)h[c]=this.decode(s,h[c])}switch(r.compression){case Wr.Unzip.CompressionMethod.STORE:a=this.input.subarray(n,n+i);break;case Wr.Unzip.CompressionMethod.DEFLATE:a=new Wr.RawInflate(this.input,{index:n,bufferSize:r.plainSize}).decompress();break;default:throw new Error("unknown compression type")}if(this.verify&&(o=Wr.CRC32.calc(a),r.crc32!==o))throw new Error("wrong crc: file=0x"+r.crc32.toString(16)+", data=0x"+o.toString(16));return a},Wr.Unzip.prototype.getFilenames=function(){var e,t,r,n=[];for(this.fileHeaderList||this.parseFileHeader(),e=0,t=(r=this.fileHeaderList).length;e<t;++e)n[e]=r[e].filename;return n},Wr.Unzip.prototype.decompress=function(e,t){var r;if(this.filenameToIndex||this.parseFileHeader(),void 0===(r=this.filenameToIndex[e]))throw new Error(e+" not found");return this.getFileData(r,t)},Wr.Unzip.prototype.setPassword=function(e){this.password=e},Wr.Unzip.prototype.decode=function(e,t){return t^=this.getByte(e),this.updateKeys(e,t),t},Wr.Unzip.prototype.updateKeys=Wr.Zip.prototype.updateKeys,Wr.Unzip.prototype.createDecryptionKey=Wr.Zip.prototype.createEncryptionKey,Wr.Unzip.prototype.getByte=Wr.Zip.prototype.getByte,Wr.Util.stringToByteArray=function(e){var t,r,n=e.split("");for(t=0,r=n.length;t<r;t++)n[t]=(255&n[t].charCodeAt(0))>>>0;return n},Wr.Adler32=function(e){return"string"==typeof e&&(e=Wr.Util.stringToByteArray(e)),Wr.Adler32.update(1,e)},Wr.Adler32.update=function(e,t){for(var r,n=65535&e,i=e>>>16&65535,a=t.length,o=0;a>0;){a-=r=a>Wr.Adler32.OptimizationParameter?Wr.Adler32.OptimizationParameter:a;do{i+=n+=t[o++]}while(--r);n%=65521,i%=65521}return(i<<16|n)>>>0},Wr.Adler32.OptimizationParameter=1024,Wr.BitStream=function(e,t){if(this.index="number"==typeof t?t:0,this.bitindex=0,this.buffer=e instanceof Uint8Array?e:new Uint8Array(Wr.BitStream.DefaultBlockSize),2*this.buffer.length<=this.index)throw new Error("invalid index");this.buffer.length<=this.index&&this.expandBuffer()},Wr.BitStream.DefaultBlockSize=32768,Wr.BitStream.prototype.expandBuffer=function(){var e=this.buffer,t=e.length,r=new Uint8Array(t<<1);return r.set(e),this.buffer=r},Wr.BitStream.prototype.writeBits=function(e,t,r){var n,i=this.buffer,a=this.index,o=this.bitindex,s=i[a];if(r&&t>1&&(e=t>8?function(e){return Wr.BitStream.ReverseTable[255&e]<<24|Wr.BitStream.ReverseTable[e>>>8&255]<<16|Wr.BitStream.ReverseTable[e>>>16&255]<<8|Wr.BitStream.ReverseTable[e>>>24&255]}(e)>>32-t:Wr.BitStream.ReverseTable[e]>>8-t),t+o<8)s=s<<t|e,o+=t;else for(n=0;n<t;++n)s=s<<1|e>>t-n-1&1,8==++o&&(o=0,i[a++]=Wr.BitStream.ReverseTable[s],s=0,a===i.length&&(i=this.expandBuffer()));i[a]=s,this.buffer=i,this.bitindex=o,this.index=a},Wr.BitStream.prototype.finish=function(){var e=this.buffer,t=this.index;return this.bitindex>0&&(e[t]<<=8-this.bitindex,e[t]=Wr.BitStream.ReverseTable[e[t]],t++),e.subarray(0,t)},Wr.BitStream.ReverseTable=function(){var e,t=new Uint8Array(256);for(e=0;e<256;++e)t[e]=function(e){var t=e,r=7;for(e>>>=1;e;e>>>=1)t<<=1,t|=1&e,--r;return(t<<r&255)>>>0}(e);return t}(),Wr.CRC32.calc=function(e,t,r){return Wr.CRC32.update(e,0,t,r)},Wr.CRC32.update=function(e,t,r,n){var i=Wr.CRC32.Table,a="number"==typeof r?r:r=0,o="number"==typeof n?n:e.length;for(t^=4294967295,a=7&o;a--;++r)t=t>>>8^i[255&(t^e[r])];for(a=o>>3;a--;r+=8)t=(t=(t=(t=(t=(t=(t=(t=t>>>8^i[255&(t^e[r])])>>>8^i[255&(t^e[r+1])])>>>8^i[255&(t^e[r+2])])>>>8^i[255&(t^e[r+3])])>>>8^i[255&(t^e[r+4])])>>>8^i[255&(t^e[r+5])])>>>8^i[255&(t^e[r+6])])>>>8^i[255&(t^e[r+7])];return(4294967295^t)>>>0},Wr.CRC32.single=function(e,t){return(Wr.CRC32.Table[255&(e^t)]^e>>>8)>>>0},Wr.CRC32.Table_=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],Wr.CRC32.Table=new Uint32Array(Wr.CRC32.Table_),Wr.Deflate=function(e,t){this.input=e,this.output=new Uint8Array(Wr.Deflate.DefaultBufferSize),this.compressionType=Wr.Deflate.CompressionType.DYNAMIC,this.rawDeflate;var r,n={};for(r in!t&&(t={})||"number"==typeof t.compressionType&&(this.compressionType=t.compressionType),t)n[r]=t[r];n.outputBuffer=this.output,this.rawDeflate=new Wr.RawDeflate(this.input,n)},Wr.Deflate.DefaultBufferSize=32768,Wr.Deflate.CompressionType=Wr.RawDeflate.CompressionType,Wr.Deflate.compress=function(e,t){return new Wr.Deflate(e,t).compress()},Wr.Deflate.prototype.compress=function(){var e,t,r,n,i,a,o,s=0;switch(o=this.output,e=Wr.CompressionMethod.DEFLATE){case Wr.CompressionMethod.DEFLATE:t=Math.LOG2E*Math.log(Wr.RawDeflate.WindowSize)-8;break;default:throw new Error("invalid compression method")}switch(r=t<<4|e,o[s++]=r,0,e){case Wr.CompressionMethod.DEFLATE:switch(this.compressionType){case Wr.Deflate.CompressionType.NONE:i=0;break;case Wr.Deflate.CompressionType.FIXED:i=1;break;case Wr.Deflate.CompressionType.DYNAMIC:i=2;break;default:throw new Error("unsupported compression type")}break;default:throw new Error("invalid compression method")}return n=i<<6|0,n|=31-(256*r+n)%31,o[s++]=n,a=Wr.Adler32(this.input),this.rawDeflate.op=s,s=(o=this.rawDeflate.compress()).length,(o=new Uint8Array(o.buffer)).length<=s+4&&(this.output=new Uint8Array(o.length+4),this.output.set(o),o=this.output),(o=o.subarray(0,s+4))[s++]=a>>24&255,o[s++]=a>>16&255,o[s++]=a>>8&255,o[s++]=255&a,o},"object"==typeof process&&"undefined"==typeof window&&(global.atob=function(e){return Buffer.from(e,"base64").toString("binary")});const Jr={licorice:"#000000",lead:"#1e1e1e",tungsten:"#3a3a3a",iron:"#545453",steel:"#6e6e6e",tin:"#878687",nickel:"#888787",aluminum:"#a09fa0",magnesium:"#b8b8b8",silver:"#d0d0d0",mercury:"#e8e8e8",snow:"#ffffff",cayenne:"#891100",mocha:"#894800",aspargus:"#888501",fern:"#458401",clover:"#028401",moss:"#018448",teal:"#008688",ocean:"#004a88",midnight:"#001888",eggplant:"#491a88",plum:"#891e88",maroon:"#891648",maraschino:"#ff2101",tangerine:"#ff8802",lemon:"#fffa03",lime:"#83f902",spring:"#05f802",seam_foam:"#03f987",turquoise:"#00fdff",aqua:"#008cff",blueberry:"#002eff",grape:"#8931ff",magenta:"#ff39ff",strawberry:"#ff2987",salmon:"#ff726e",cantaloupe:"#ffce6e",banana:"#fffb6d",honeydew:"#cefa6e",flora:"#68f96e",spindrift:"#68fbd0",ice:"#68fdff",sky:"#6acfff",orchid:"#6e76ff",lavender:"#d278ff",bubblegum:"#ff7aff",carnation:"#ff7fd3"},en={401:"Access unauthorized",403:"Access forbidden",404:"Not found"};class tn{constructor(e){this.container=zr({class:"igv-ui-alert-dialog-container"}),e.appendChild(this.container),this.container.setAttribute("tabIndex","-1");const t=zr();this.container.appendChild(t);const r=zr();t.appendChild(r),r.textContent="ERROR";let n=zr({id:"igv-ui-alert-dialog-body"});this.container.appendChild(n),this.body=zr({id:"igv-ui-alert-dialog-body-copy"}),n.appendChild(this.body);let i=zr();this.container.appendChild(i),this.ok=zr(),i.appendChild(this.ok),this.ok.textContent="OK";const a=()=>{"function"==typeof this.callback&&(this.callback("OK"),this.callback=void 0),this.body.innerHTML="",Ur(this.container)};this.ok.addEventListener("click",(e=>{e.stopPropagation(),a()})),this.container.addEventListener("keypress",(e=>{e.stopPropagation(),"Enter"===e.key&&a()})),Yr(this.container,t),Ur(this.container)}present(e,t){let r=e.message||e;en.hasOwnProperty(r)&&(r=en[r]),this.body.innerHTML=r,this.callback=t,Hr(this.container),this.container.focus()}}let rn;const nn={init(e){rn||(rn=new tn(e))},presentAlert:function(e,t){rn.present(e,t)}};class an{constructor(e){this.parent=e,this.container=zr({class:"igv-ui-generic-dialog-container"}),e.appendChild(this.container);const t=zr({class:"igv-ui-generic-dialog-header"});this.container.appendChild(t),this.label=zr({class:"igv-ui-generic-dialog-one-liner"}),this.container.appendChild(this.label),this.label.text="Unlabeled",this.input_container=zr({class:"igv-ui-generic-dialog-input"}),this.container.appendChild(this.input_container),this.input=document.createElement("input"),this.input_container.appendChild(this.input);const r=zr({class:"igv-ui-generic-dialog-ok-cancel"});this.container.appendChild(r),this.ok=zr(),r.appendChild(this.ok),this.ok.textContent="OK",this.cancel=zr(),r.appendChild(this.cancel),this.cancel.textContent="Cancel",Ur(this.container),this.input.addEventListener("keyup",(e=>{13===e.keyCode&&("function"==typeof this.callback&&(this.callback(this.input.value),this.callback=void 0),this.input.value=void 0,Ur(this.container))})),this.ok.addEventListener("click",(()=>{"function"==typeof this.callback&&(this.callback(this.input.value),this.callback=void 0),this.input.value=void 0,Ur(this.container)}));const n=()=>{this.input.value="",Ur(this.container)};this.cancel.addEventListener("click",n),Vr(t,n),Yr(this.container,t)}present(e,t){this.label.textContent=e.label,this.input.value=e.value,this.callback=e.callback||e.click,Hr(this.container);const{x:r,y:n}=function(e){if(e.type.startsWith("touch")){const t=e.touches[0];return{x:t.pageX,y:t.pageY}}return{x:e.pageX,y:e.pageY}}(t);this.clampLocation(r,n)}clampLocation(e,t){const{width:r,height:n}=this.container.getBoundingClientRect(),{x:i,y:a,width:o,height:s}=this.parent.getBoundingClientRect(),c=Math.min(Math.max(t,a),a+s-n),u=Math.min(Math.max(e,i),i+o-r);this.container.style.left=`${u}px`,this.container.style.top=`${c}px`}}class on extends class{constructor({parent:e,top:t,left:r,width:n,height:i,border:a,closeHandler:o}){let s=zr({class:"igv-ui-generic-container"});e.appendChild(s),Ur(s),this.container=s,void 0!==t&&(this.container.style.width=t+"px"),void 0!==r&&(this.container.style.width=r+"px"),void 0!==n&&(this.container.style.width=n+"px"),void 0!==i&&(this.container.style.height=i+"px"),a&&(this.container.style.border=a);const c=zr();this.container.appendChild(c),Vr(c,(e=>{Ur(this.container),"function"==typeof o&&o(e)})),Yr(this.container,c)}show(){Hr(this.container)}hide(){Ur(this.container)}dispose(){this.container.parent&&this.container.parent.removeChild(this.container)}}{constructor({parent:e,top:t,left:r,width:n,height:i,defaultColors:a,colorHandler:o}){super({parent:e,top:t,left:r,width:n,height:i,border:"1px solid gray"}),sn(this.container,o,a)}}const sn=(e,t,r)=>{const n=Object.values(Jr);for(let r of n){const n=zr({class:"igv-ui-color-swatch"});e.appendChild(n),cn(n,r,t)}if(r)for(let n of r){const r=zr({class:"igv-ui-color-swatch"});e.appendChild(r),cn(r,n,t)}},cn=(e,t,r)=>{e.style.backgroundColor=t,e.onmouseenter=()=>e.style.borderColor=t,e.onmouseenter=()=>e.style.borderColor="white",e.addEventListener("click",(e=>{e.stopPropagation(),r(t)})),e.addEventListener("touchend",(e=>{e.stopPropagation(),r(t)}))};class un{constructor(e){this.parent=e,this.popover=zr({class:"igv-ui-popover"}),e.appendChild(this.popover);const t=zr();this.popover.appendChild(t),Vr(t,(()=>this.hide())),Yr(this.popover,t),this.popoverContent=zr(),this.popover.appendChild(this.popoverContent),this.popover.style.display="none"}presentContentWithEvent(e,t){this.popover.style.display="block",this.popoverContent.innerHTML=t,hn(e,this.popover)}presentMenu(e,t){if(0===t.length)return;this.popover.style.display="block";const r=(n=t,i=this.popover,n.map((function(e,t){let r;if("string"==typeof e)r=zr(),r.innerHTML=e;else if("Node"==typeof e)r=e;else{if("function"==typeof e.init&&e.init(),"checkbox"===e.type)r=function(e,t){const r=zr({class:"igv-ui-trackgear-popover-check-container"}),n=jr("check",!0===t?"#444":"transparent");n.style.borderColor="gray",n.style.borderWidth="1px",n.style.borderStyle="solid",r.appendChild(n);let i=zr();return i.textContent=e,r.appendChild(i),r}("Show all bases",e.value);else if("color"===e.type){const t=new on({parent:i.parentElement,width:364,colorHandler:t=>e.click(t)});r=zr(),"string"==typeof e.label&&(r.innerHTML=e.label);const n=e=>{t.show(),Ur(i),e.preventDefault(),e.stopPropagation()};r.addEventListener("click",n),r.addEventListener("touchend",n),r.addEventListener("mouseup",(function(e){e.preventDefault(),e.stopPropagation()}))}else r=zr(),"string"==typeof e.label&&(r.innerHTML=e.label);if(e.click&&"color"!==e.type){function n(t){e.click(),Ur(i),t.preventDefault(),t.stopPropagation()}r.addEventListener("click",n),r.addEventListener("touchend",n),r.addEventListener("mouseup",(function(e){e.preventDefault(),e.stopPropagation()}))}}return{object:r,init:e.init}})));var n,i;for(let e of r)this.popoverContent.appendChild(e.object);hn(e,this.popover)}hide(){this.popover.style.display="none",this.dispose()}dispose(){this.popover&&this.popover.parentNode.removeChild(this.popover);const e=Object.keys(this);for(let t of e)this[t]=void 0}}function hn(e,t){const{x:r,y:n}=function(e,t){const{clientX:r,clientY:n}=e;return((e,{clientX:t,clientY:r})=>{const{left:n,top:i,width:a,height:o}=e.getBoundingClientRect(),s=t-n,c=r-i;return{x:s,y:c,xNormalized:s/a,yNormalized:c/o,width:a,height:o}})(t,{clientX:r,clientY:n})}(e,t.parentNode),{width:i}=t.parentNode.getBoundingClientRect(),{width:a}=t.getBoundingClientRect(),o=r+a;t.style.left=`${o>i?r-(o-i):r}px`,t.style.top=`${n}px`}if("undefined"!=typeof document){(function(e){for(let t of document.styleSheets)if(t=t.href?t.href.replace(/^.*[\\\/]/,""):"",t===e)return!0;return!1})("igv-ui.css")||((ln=document.createElement("style")).setAttribute("type","text/css"),ln.innerHTML='.igv-ui-popover {\n  cursor: default;\n  position: absolute;\n  z-index: 2048;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: 1px;\n  font-family: "Open Sans", sans-serif;\n  font-size: small;\n  background-color: white; }\n  .igv-ui-popover > div:first-child {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-ui-popover > div:first-child > div {\n      margin-right: 4px;\n      height: 12px;\n      width: 12px;\n      color: #7F7F7F; }\n    .igv-ui-popover > div:first-child > div:hover {\n      color: #444; }\n  .igv-ui-popover > div:last-child {\n    overflow-y: auto;\n    overflow-x: hidden;\n    max-height: 400px;\n    background-color: white; }\n    .igv-ui-popover > div:last-child > div {\n      -webkit-user-select: all;\n      /* Chrome/Safari */\n      -moz-user-select: all;\n      /* Firefox */\n      margin-left: 4px;\n      margin-right: 4px;\n      max-width: 384px;\n      min-width: 220px;\n      overflow-x: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap; }\n      .igv-ui-popover > div:last-child > div > span {\n        font-weight: bolder; }\n    .igv-ui-popover > div:last-child hr {\n      width: 100%; }\n\n.igv-ui-alert-dialog-container {\n  box-sizing: content-box;\n  position: absolute;\n  z-index: 2048;\n  top: 50%;\n  left: 50%;\n  width: 400px;\n  height: 200px;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: thin;\n  outline: none;\n  font-family: "Open Sans", sans-serif;\n  font-size: 15px;\n  font-weight: 400;\n  background-color: white;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  align-items: center; }\n  .igv-ui-alert-dialog-container > div:first-child {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-ui-alert-dialog-container > div:first-child div:first-child {\n      padding-left: 8px; }\n  .igv-ui-alert-dialog-container #igv-ui-alert-dialog-body {\n    color: #373737;\n    width: 100%;\n    height: calc(100% - 24px - 64px);\n    overflow-y: scroll; }\n    .igv-ui-alert-dialog-container #igv-ui-alert-dialog-body #igv-ui-alert-dialog-body-copy {\n      cursor: pointer;\n      margin: 16px;\n      width: auto;\n      height: auto;\n      overflow-wrap: break-word;\n      word-break: break-word;\n      background-color: white;\n      border: unset; }\n  .igv-ui-alert-dialog-container > div:last-child {\n    width: 100%;\n    margin-bottom: 10px;\n    background-color: white;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: center;\n    align-items: center; }\n    .igv-ui-alert-dialog-container > div:last-child div {\n      margin: unset;\n      width: 40px;\n      height: 30px;\n      line-height: 30px;\n      text-align: center;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: small;\n      font-weight: 400;\n      border-color: #2B81AF;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 4px;\n      background-color: #2B81AF; }\n    .igv-ui-alert-dialog-container > div:last-child div:hover {\n      cursor: pointer;\n      border-color: #25597f;\n      background-color: #25597f; }\n\n.igv-ui-color-swatch {\n  box-sizing: content-box;\n  display: flex;\n  flex-flow: row;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-items: center;\n  width: 32px;\n  height: 32px;\n  border-style: solid;\n  border-width: 2px;\n  border-color: white;\n  border-radius: 4px; }\n\n.igv-ui-colorpicker-menu-close-button {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-end;\n  align-items: center;\n  width: 100%;\n  height: 32px;\n  margin-top: 4px;\n  margin-bottom: 4px;\n  padding-right: 8px; }\n  .igv-ui-colorpicker-menu-close-button i.fa {\n    display: block;\n    margin-left: 4px;\n    margin-right: 4px;\n    color: #5f5f5f; }\n  .igv-ui-colorpicker-menu-close-button i.fa:hover,\n  .igv-ui-colorpicker-menu-close-button i.fa:focus,\n  .igv-ui-colorpicker-menu-close-button i.fa:active {\n    cursor: pointer;\n    color: #0f0f0f; }\n\n.igv-ui-generic-dialog-container {\n  box-sizing: content-box;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 300px;\n  height: 200px;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: thin;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400;\n  z-index: 2048;\n  background-color: white;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-header {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-header div {\n      margin-right: 4px;\n      margin-bottom: 2px;\n      height: 12px;\n      width: 12px;\n      color: #7F7F7F; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-header div:hover {\n      cursor: pointer;\n      color: #444; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-one-liner {\n    color: #373737;\n    width: 95%;\n    height: 24px;\n    line-height: 24px;\n    text-align: left;\n    margin-top: 8px;\n    padding-left: 8px;\n    overflow-wrap: break-word;\n    background-color: white; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-label-input {\n    margin-top: 8px;\n    width: 95%;\n    height: 24px;\n    color: #373737;\n    line-height: 24px;\n    padding-left: 8px;\n    background-color: white;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-items: center; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-label-input div {\n      width: 30%;\n      height: 100%;\n      font-size: 16px;\n      text-align: right;\n      padding-right: 8px;\n      background-color: white; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-label-input input {\n      display: block;\n      height: 100%;\n      width: 100%;\n      padding-left: 4px;\n      font-family: "Open Sans", sans-serif;\n      font-weight: 400;\n      color: #373737;\n      text-align: left;\n      outline: none;\n      border-style: solid;\n      border-width: thin;\n      border-color: #7F7F7F;\n      background-color: white; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-label-input input {\n      width: 50%;\n      font-size: 16px; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-input {\n    margin-top: 8px;\n    width: calc(100% - 16px);\n    height: 24px;\n    color: #373737;\n    line-height: 24px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-input input {\n      display: block;\n      height: 100%;\n      width: 100%;\n      padding-left: 4px;\n      font-family: "Open Sans", sans-serif;\n      font-weight: 400;\n      color: #373737;\n      text-align: left;\n      outline: none;\n      border-style: solid;\n      border-width: thin;\n      border-color: #7F7F7F;\n      background-color: white; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-input input {\n      font-size: 16px; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel {\n    width: 100%;\n    height: 28px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel div {\n      margin-top: 32px;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: 14px;\n      font-weight: 400;\n      width: 75px;\n      height: 28px;\n      line-height: 28px;\n      text-align: center;\n      border-color: transparent;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 2px; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel div:first-child {\n      margin-left: 32px;\n      margin-right: 0;\n      background-color: #5ea4e0; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel div:last-child {\n      margin-left: 0;\n      margin-right: 32px;\n      background-color: #c4c4c4; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel div:first-child:hover {\n      cursor: pointer;\n      background-color: #3b5c7f; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel div:last-child:hover {\n      cursor: pointer;\n      background-color: #7f7f7f; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok {\n    width: 100%;\n    height: 36px;\n    margin-top: 32px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok div {\n      width: 98px;\n      height: 36px;\n      line-height: 36px;\n      text-align: center;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: medium;\n      font-weight: 400;\n      border-color: white;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 4px;\n      background-color: #2B81AF; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok div:hover {\n      cursor: pointer;\n      background-color: #25597f; }\n\n.igv-ui-generic-container {\n  box-sizing: content-box;\n  position: absolute;\n  z-index: 2048;\n  background-color: white;\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-ui-generic-container div:first-child {\n    cursor: move;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    height: 24px;\n    width: 100%;\n    background-color: #dddddd; }\n    .igv-ui-generic-container div:first-child div {\n      display: block;\n      color: #5f5f5f;\n      cursor: pointer;\n      width: 14px;\n      height: 14px;\n      margin-right: 8px;\n      margin-bottom: 4px; }\n\n.igv-ui-dialog {\n  z-index: 2048;\n  position: fixed;\n  width: fit-content;\n  height: fit-content;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  background-color: white;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: thin;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400; }\n  .igv-ui-dialog .igv-ui-dialog-header {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-ui-dialog .igv-ui-dialog-header div {\n      margin-right: 4px;\n      margin-bottom: 2px;\n      height: 12px;\n      width: 12px;\n      color: #7F7F7F; }\n    .igv-ui-dialog .igv-ui-dialog-header div:hover {\n      cursor: pointer;\n      color: #444; }\n  .igv-ui-dialog .igv-ui-dialog-one-liner {\n    width: 95%;\n    height: 24px;\n    line-height: 24px;\n    text-align: left;\n    margin: 8px;\n    overflow-wrap: break-word;\n    background-color: white;\n    font-weight: bold; }\n  .igv-ui-dialog .igv-ui-dialog-ok-cancel {\n    width: 100%;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-ui-dialog .igv-ui-dialog-ok-cancel div {\n      margin: 16px;\n      margin-top: 32px;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: 14px;\n      font-weight: 400;\n      width: 75px;\n      height: 28px;\n      line-height: 28px;\n      text-align: center;\n      border-color: transparent;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 2px; }\n    .igv-ui-dialog .igv-ui-dialog-ok-cancel div:first-child {\n      background-color: #5ea4e0; }\n    .igv-ui-dialog .igv-ui-dialog-ok-cancel div:last-child {\n      background-color: #c4c4c4; }\n    .igv-ui-dialog .igv-ui-dialog-ok-cancel div:first-child:hover {\n      cursor: pointer;\n      background-color: #3b5c7f; }\n    .igv-ui-dialog .igv-ui-dialog-ok-cancel div:last-child:hover {\n      cursor: pointer;\n      background-color: #7f7f7f; }\n  .igv-ui-dialog .igv-ui-dialog-ok {\n    width: 100%;\n    height: 36px;\n    margin-top: 32px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-ui-dialog .igv-ui-dialog-ok div {\n      width: 98px;\n      height: 36px;\n      line-height: 36px;\n      text-align: center;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: medium;\n      font-weight: 400;\n      border-color: white;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 4px;\n      background-color: #2B81AF; }\n    .igv-ui-dialog .igv-ui-dialog-ok div:hover {\n      cursor: pointer;\n      background-color: #25597f; }\n\n.igv-ui-panel, .igv-ui-panel-column, .igv-ui-panel-row {\n  z-index: 2048;\n  background-color: white;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400;\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-start; }\n\n.igv-ui-panel-column {\n  display: flex;\n  flex-direction: column; }\n\n.igv-ui-panel-row {\n  display: flex;\n  flex-direction: row; }\n\n.igv-ui-textbox {\n  background-color: white;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400;\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-start; }\n\n/*# sourceMappingURL=igv-ui.css.map */\n',document.head.insertBefore(ln,document.head.childNodes[document.head.childNodes.length-1]))}var ln;function fn(e){return function(e,t){const r=document.createElement(e);t&&(t.class&&r.classList.add(t.class),t.id&&(r.id=t.id),t.style&&function(e,t){for(let r of Object.keys(t))e.style[r]=t[r]}(r,t.style));return r}("div",e)}function pn(e){const t=getComputedStyle(e);"none"!==t.display&&(e._initialDisplay=t.display),e.style.display="none"}function dn(e){if(e.type.startsWith("touch")){const t=e.touches[0];return{x:t.pageX,y:t.pageY}}return{x:e.pageX,y:e.pageY}}function gn(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}function vn(e,t){const{clientX:r,clientY:n}=e;return((e,{clientX:t,clientY:r})=>{const{left:n,top:i,width:a,height:o}=e.getBoundingClientRect(),s=t-n,c=r-i;return{x:s,y:c,xNormalized:s/a,yNormalized:c/o,width:a,height:o}})(t,{clientX:r,clientY:n})}function mn(e,t){return function(e,t){t=t||"currentColor";let r=bn[e];r||(console.error(`No icon named: ${e}`),r=bn.question);const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"viewBox","0 0 "+r[0]+" "+r[1]);const i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttributeNS(null,"fill",t),i.setAttributeNS(null,"d",r[4]),n.appendChild(i),n}(e,t)}const bn={check:[512,512,[],"f00c","M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"],cog:[512,512,[],"f013","M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"],exclamation:[192,512,[],"f12a","M176 432c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80zM25.26 25.199l13.6 272C39.499 309.972 50.041 320 62.83 320h66.34c12.789 0 23.331-10.028 23.97-22.801l13.6-272C167.425 11.49 156.496 0 142.77 0H49.23C35.504 0 24.575 11.49 25.26 25.199z"],"exclamation-circle":[512,512,[],"f06a","M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],"exclamation-triangle":[576,512,[],"f071","M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],minus:[448,512,[],"f068","M424 318.2c13.3 0 24-10.7 24-24v-76.4c0-13.3-10.7-24-24-24H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h400z"],"minus-circle":[512,512,[],"f056","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"],"minus-square":[448,512,[],"f146","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM92 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H92z"],plus:[448,512,[],"f067","M448 294.2v-76.4c0-13.3-10.7-24-24-24H286.2V56c0-13.3-10.7-24-24-24h-76.4c-13.3 0-24 10.7-24 24v137.8H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h137.8V456c0 13.3 10.7 24 24 24h76.4c13.3 0 24-10.7 24-24V318.2H424c13.3 0 24-10.7 24-24z"],"plus-circle":[512,512,[],"f055","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],"plus-square":[448,512,[],"f0fe","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-32 252c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92H92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],question:[384,512,[],"f128","M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"],save:[448,512,[],"f0c7","M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"],search:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"],share:[512,512,[],"f064","M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"],spinner:[512,512,[],"f110","M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"],square:[448,512,[],"f0c8","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"],"square-full":[512,512,[],"f45c","M512 512H0V0h512v512z"],times:[384,512,[],"f00d","M323.1 441l53.9-53.9c9.4-9.4 9.4-24.5 0-33.9L279.8 256l97.2-97.2c9.4-9.4 9.4-24.5 0-33.9L323.1 71c-9.4-9.4-24.5-9.4-33.9 0L192 168.2 94.8 71c-9.4-9.4-24.5-9.4-33.9 0L7 124.9c-9.4 9.4-9.4 24.5 0 33.9l97.2 97.2L7 353.2c-9.4 9.4-9.4 24.5 0 33.9L60.9 441c9.4 9.4 24.5 9.4 33.9 0l97.2-97.2 97.2 97.2c9.3 9.3 24.5 9.3 33.9 0z"],"times-circle":[512,512,[],"f057","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"],wrench:[512,512,[],"f0ad","M481.156 200c9.3 0 15.12 10.155 10.325 18.124C466.295 259.992 420.419 288 368 288c-79.222 0-143.501-63.974-143.997-143.079C223.505 65.469 288.548-.001 368.002 0c52.362.001 98.196 27.949 123.4 69.743C496.24 77.766 490.523 88 481.154 88H376l-40 56 40 56h105.156zm-171.649 93.003L109.255 493.255c-24.994 24.993-65.515 24.994-90.51 0-24.993-24.994-24.993-65.516 0-90.51L218.991 202.5c16.16 41.197 49.303 74.335 90.516 90.503zM104 432c0-13.255-10.745-24-24-24s-24 10.745-24 24 10.745 24 24 24 24-10.745 24-24z"]};function yn(e,t){var r=document.createElement("div");e.appendChild(r),r.appendChild(mn("times")),r.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),t()}))}var wn={Huffman:{},Util:{},CRC32:{},CompressionMethod:{DEFLATE:8,RESERVED:15},Zip:function(e){e=e||{},this.files=[],this.comment=e.comment,this.password}};wn.Zip.CompressionMethod={STORE:0,DEFLATE:8},wn.Zip.OperatingSystem={MSDOS:0,UNIX:3,MACINTOSH:7},wn.Zip.Flags={ENCRYPT:1,DESCRIPTOR:8,UTF8:2048},wn.Zip.FileHeaderSignature=[80,75,1,2],wn.Zip.LocalFileHeaderSignature=[80,75,3,4],wn.Zip.CentralDirectorySignature=[80,75,5,6],wn.Zip.prototype.addFile=function(e,t){(t=t||{}).filename;var r,n=e.length,i=0;if(e instanceof Array&&(e=new Uint8Array(e)),"number"!=typeof t.compressionMethod&&(t.compressionMethod=wn.Zip.CompressionMethod.DEFLATE),t.compress)switch(t.compressionMethod){case wn.Zip.CompressionMethod.STORE:break;case wn.Zip.CompressionMethod.DEFLATE:i=wn.CRC32.calc(e),e=this.deflateWithOption(e,t),r=!0;break;default:throw new Error("unknown compression method:"+t.compressionMethod)}this.files.push({buffer:e,option:t,compressed:r,encrypted:!1,size:n,crc32:i})},wn.Zip.prototype.setPassword=function(e){this.password=e},wn.Zip.prototype.compress=function(){var e,t,r,n,i,a,o,s,c,u,h,l,f,p,d,g,v,m,b,y,w,k,x,S,_,C,R=this.files,E=0,A=0;for(x=0,S=R.length;x<S;++x){if(p=(e=R[x]).option.filename?e.option.filename.length:0,d=e.option.extraField?e.option.extraField.length:0,g=e.option.comment?e.option.comment.length:0,!e.compressed)switch(e.crc32=wn.CRC32.calc(e.buffer),e.option.compressionMethod){case wn.Zip.CompressionMethod.STORE:break;case wn.Zip.CompressionMethod.DEFLATE:e.buffer=this.deflateWithOption(e.buffer,e.option),e.compressed=!0;break;default:throw new Error("unknown compression method:"+e.option.compressionMethod)}if(void 0!==e.option.password||void 0!==this.password){for(k=this.createEncryptionKey(e.option.password||this.password),y=e.buffer,(w=new Uint8Array(y.length+12)).set(y,12),y=w,_=0;_<12;++_)y[_]=this.encode(k,11===x?255&e.crc32:256*Math.random()|0);for(C=y.length;_<C;++_)y[_]=this.encode(k,y[_]);e.buffer=y}E+=30+p+e.buffer.length,A+=46+p+g}for(a=22+(this.comment?this.comment.length:0),t=new Uint8Array(E+A+a),r=0,i=(n=E)+A,x=0,S=R.length;x<S;++x)p=(e=R[x]).option.filename?e.option.filename.length:0,d=0,g=e.option.comment?e.option.comment.length:0,o=r,t[r++]=wn.Zip.LocalFileHeaderSignature[0],t[r++]=wn.Zip.LocalFileHeaderSignature[1],t[r++]=wn.Zip.LocalFileHeaderSignature[2],t[r++]=wn.Zip.LocalFileHeaderSignature[3],t[n++]=wn.Zip.FileHeaderSignature[0],t[n++]=wn.Zip.FileHeaderSignature[1],t[n++]=wn.Zip.FileHeaderSignature[2],t[n++]=wn.Zip.FileHeaderSignature[3],20,t[n++]=20,t[n++]=e.option.os||wn.Zip.OperatingSystem.MSDOS,t[r++]=t[n++]=20,t[r++]=t[n++]=0,s=0,(e.option.password||this.password)&&(s|=wn.Zip.Flags.ENCRYPT),t[r++]=t[n++]=255&s,t[r++]=t[n++]=s>>8&255,c=e.option.compressionMethod,t[r++]=t[n++]=255&c,t[r++]=t[n++]=c>>8&255,u=e.option.date||new Date,t[r++]=t[n++]=(7&u.getMinutes())<<5|u.getSeconds()/2|0,t[r++]=t[n++]=u.getHours()<<3|u.getMinutes()>>3,t[r++]=t[n++]=(u.getMonth()+1&7)<<5|u.getDate(),t[r++]=t[n++]=(u.getFullYear()-1980&127)<<1|u.getMonth()+1>>3,h=e.crc32,t[r++]=t[n++]=255&h,t[r++]=t[n++]=h>>8&255,t[r++]=t[n++]=h>>16&255,t[r++]=t[n++]=h>>24&255,l=e.buffer.length,t[r++]=t[n++]=255&l,t[r++]=t[n++]=l>>8&255,t[r++]=t[n++]=l>>16&255,t[r++]=t[n++]=l>>24&255,f=e.size,t[r++]=t[n++]=255&f,t[r++]=t[n++]=f>>8&255,t[r++]=t[n++]=f>>16&255,t[r++]=t[n++]=f>>24&255,t[r++]=t[n++]=255&p,t[r++]=t[n++]=p>>8&255,t[r++]=t[n++]=255&d,t[r++]=t[n++]=d>>8&255,t[n++]=255&g,t[n++]=g>>8&255,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=255&o,t[n++]=o>>8&255,t[n++]=o>>16&255,t[n++]=o>>24&255,(v=e.option.filename)&&(t.set(v,r),t.set(v,n),r+=p,n+=p),(m=e.option.extraField)&&(t.set(m,r),t.set(m,n),r+=d,n+=d),(b=e.option.comment)&&(t.set(b,n),n+=g),t.set(e.buffer,r),r+=e.buffer.length;return t[i++]=wn.Zip.CentralDirectorySignature[0],t[i++]=wn.Zip.CentralDirectorySignature[1],t[i++]=wn.Zip.CentralDirectorySignature[2],t[i++]=wn.Zip.CentralDirectorySignature[3],t[i++]=0,t[i++]=0,t[i++]=0,t[i++]=0,t[i++]=255&S,t[i++]=S>>8&255,t[i++]=255&S,t[i++]=S>>8&255,t[i++]=255&A,t[i++]=A>>8&255,t[i++]=A>>16&255,t[i++]=A>>24&255,t[i++]=255&E,t[i++]=E>>8&255,t[i++]=E>>16&255,t[i++]=E>>24&255,g=this.comment?this.comment.length:0,t[i++]=255&g,t[i++]=g>>8&255,this.comment&&(t.set(this.comment,i),i+=g),t},wn.Zip.prototype.deflateWithOption=function(e,t){return new wn.RawDeflate(e,t.deflateOption).compress()},wn.Zip.prototype.getByte=function(e){var t=65535&e[2]|2;return t*(1^t)>>8&255},wn.Zip.prototype.encode=function(e,t){var r=this.getByte(e);return this.updateKeys(e,t),r^t},wn.Zip.prototype.updateKeys=function(e,t){e[0]=wn.CRC32.single(e[0],t),e[1]=1+(6681*(20173*(e[1]+(255&e[0]))>>>0)>>>0)>>>0,e[2]=wn.CRC32.single(e[2],e[1]>>>24)},wn.Zip.prototype.createEncryptionKey=function(e){var t,r,n=[305419896,591751049,878082192];for(n=new Uint32Array(n),t=0,r=e.length;t<r;++t)this.updateKeys(n,255&e[t]);return n},wn.Huffman.buildHuffmanTable=function(e){var t,r,n,i,a,o,s,c,u,h,l,f=e.length,p=0,d=Number.POSITIVE_INFINITY;for(c=0,u=f;c<u;++c)e[c]>p&&(p=e[c]),e[c]<d&&(d=e[c]);for(t=1<<p,r=new Uint32Array(t),n=1,i=0,a=2;n<=p;){for(c=0;c<f;++c)if(e[c]===n){for(o=0,s=i,h=0;h<n;++h)o=o<<1|1&s,s>>=1;for(l=n<<16|c,h=o;h<t;h+=a)r[h]=l;++i}++n,i<<=1,a<<=1}return[r,p,d]};var kn=wn.Huffman.buildHuffmanTable;wn.RawInflate=function(e,t){switch(this.buffer,this.blocks=[],this.bufferSize=32768,this.totalpos=0,this.ip=0,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(e),this.output,this.op,this.bfinal=!1,this.bufferType=wn.RawInflate.BufferType.ADAPTIVE,this.resize=!1,!t&&(t={})||(t.index&&(this.ip=t.index),t.bufferSize&&(this.bufferSize=t.bufferSize),t.bufferType&&(this.bufferType=t.bufferType),t.resize&&(this.resize=t.resize)),this.bufferType){case wn.RawInflate.BufferType.BLOCK:this.op=wn.RawInflate.MaxBackwardLength,this.output=new Uint8Array(wn.RawInflate.MaxBackwardLength+this.bufferSize+wn.RawInflate.MaxCopyLength);break;case wn.RawInflate.BufferType.ADAPTIVE:this.op=0,this.output=new Uint8Array(this.bufferSize);break;default:throw new Error("invalid inflate mode")}},wn.RawInflate.BufferType={BLOCK:0,ADAPTIVE:1},wn.RawInflate.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();switch(this.bufferType){case wn.RawInflate.BufferType.BLOCK:return this.concatBufferBlock();case wn.RawInflate.BufferType.ADAPTIVE:return this.concatBufferDynamic();default:throw new Error("invalid inflate mode")}},wn.RawInflate.MaxBackwardLength=32768,wn.RawInflate.MaxCopyLength=258,wn.RawInflate.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wn.RawInflate.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),wn.RawInflate.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),wn.RawInflate.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),wn.RawInflate.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),wn.RawInflate.FixedLiteralLengthTable=function(){var e,t,r=new Uint8Array(288);for(e=0,t=r.length;e<t;++e)r[e]=e<=143?8:e<=255?9:e<=279?7:8;return kn(r)}(),wn.RawInflate.FixedDistanceTable=function(){var e,t,r=new Uint8Array(30);for(e=0,t=r.length;e<t;++e)r[e]=5;return kn(r)}(),wn.RawInflate.prototype.parseBlock=function(){var e=this.readBits(3);switch(1&e&&(this.bfinal=!0),e>>>=1){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw new Error("unknown BTYPE: "+e)}},wn.RawInflate.prototype.readBits=function(e){var t,r=this.bitsbuf,n=this.bitsbuflen,i=this.input,a=this.ip;if(a+(e-n+7>>3)>=i.length)throw new Error("input buffer is broken");for(;n<e;)r|=i[a++]<<n,n+=8;return t=r&(1<<e)-1,r>>>=e,n-=e,this.bitsbuf=r,this.bitsbuflen=n,this.ip=a,t},wn.RawInflate.prototype.readCodeByTable=function(e){for(var t,r,n=this.bitsbuf,i=this.bitsbuflen,a=this.input,o=this.ip,s=a.length,c=e[0],u=e[1];i<u&&!(o>=s);)n|=a[o++]<<i,i+=8;if((r=(t=c[n&(1<<u)-1])>>>16)>i)throw new Error("invalid code length: "+r);return this.bitsbuf=n>>r,this.bitsbuflen=i-r,this.ip=o,65535&t},wn.RawInflate.prototype.parseUncompressedBlock=function(){var e,t,r=this.input,n=this.ip,i=this.output,a=this.op,o=r.length,s=i.length;if(this.bitsbuf=0,this.bitsbuflen=0,n+1>=o)throw new Error("invalid uncompressed block header: LEN");if(e=r[n++]|r[n++]<<8,n+1>=o)throw new Error("invalid uncompressed block header: NLEN");if(e===~(r[n++]|r[n++]<<8))throw new Error("invalid uncompressed block header: length verify");if(n+e>r.length)throw new Error("input buffer is broken");switch(this.bufferType){case wn.RawInflate.BufferType.BLOCK:for(;a+e>i.length;)e-=t=s-a,i.set(r.subarray(n,n+t),a),a+=t,n+=t,this.op=a,i=this.expandBufferBlock(),a=this.op;break;case wn.RawInflate.BufferType.ADAPTIVE:for(;a+e>i.length;)i=this.expandBufferAdaptive({fixRatio:2});break;default:throw new Error("invalid inflate mode")}i.set(r.subarray(n,n+e),a),a+=e,n+=e,this.ip=n,this.op=a,this.output=i},wn.RawInflate.prototype.parseFixedHuffmanBlock=function(){switch(this.bufferType){case wn.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(wn.RawInflate.FixedLiteralLengthTable,wn.RawInflate.FixedDistanceTable);break;case wn.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(wn.RawInflate.FixedLiteralLengthTable,wn.RawInflate.FixedDistanceTable);break;default:throw new Error("invalid inflate mode")}},wn.RawInflate.prototype.parseDynamicHuffmanBlock=function(){var e,t,r,n,i,a,o,s,c,u=this.readBits(5)+257,h=this.readBits(5)+1,l=this.readBits(4)+4,f=new Uint8Array(wn.RawInflate.Order.length);for(s=0;s<l;++s)f[wn.RawInflate.Order[s]]=this.readBits(3);for(e=kn(f),n=new Uint8Array(u+h),s=0,c=u+h;s<c;)switch(i=this.readCodeByTable(e)){case 16:for(o=3+this.readBits(2);o--;)n[s++]=a;break;case 17:for(o=3+this.readBits(3);o--;)n[s++]=0;a=0;break;case 18:for(o=11+this.readBits(7);o--;)n[s++]=0;a=0;break;default:n[s++]=i,a=i}switch(t=kn(n.subarray(0,u)),r=kn(n.subarray(u)),this.bufferType){case wn.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(t,r);break;case wn.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(t,r);break;default:throw new Error("invalid inflate mode")}},wn.RawInflate.prototype.decodeHuffmanBlock=function(e,t){var r=this.output,n=this.op;this.currentLitlenTable=e;for(var i,a,o,s,c=r.length-wn.RawInflate.MaxCopyLength,u=wn.RawInflate.LengthCodeTable,h=wn.RawInflate.LengthExtraTable,l=wn.RawInflate.DistCodeTable,f=wn.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(e));)if(i<256)n>=c&&(this.op=n,r=this.expandBufferBlock(),n=this.op),r[n++]=i;else for(s=u[a=i-257],h[a]>0&&(s+=this.readBits(h[a])),o=l[i=this.readCodeByTable(t)],f[i]>0&&(o+=this.readBits(f[i])),n>=c&&(this.op=n,r=this.expandBufferBlock(),n=this.op);s--;)r[n]=r[n++-o];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=n},wn.RawInflate.prototype.decodeHuffmanAdaptive=function(e,t){var r=this.output,n=this.op;this.currentLitlenTable=e;for(var i,a,o,s,c=r.length,u=wn.RawInflate.LengthCodeTable,h=wn.RawInflate.LengthExtraTable,l=wn.RawInflate.DistCodeTable,f=wn.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(e));)if(i<256)n>=c&&(c=(r=this.expandBufferAdaptive()).length),r[n++]=i;else for(s=u[a=i-257],h[a]>0&&(s+=this.readBits(h[a])),o=l[i=this.readCodeByTable(t)],f[i]>0&&(o+=this.readBits(f[i])),n+s>c&&(c=(r=this.expandBufferAdaptive()).length);s--;)r[n]=r[n++-o];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=n},wn.RawInflate.prototype.expandBufferBlock=function(e){var t=new Uint8Array(this.op-wn.RawInflate.MaxBackwardLength),r=this.op-wn.RawInflate.MaxBackwardLength,n=this.output;return t.set(n.subarray(wn.RawInflate.MaxBackwardLength,t.length)),this.blocks.push(t),this.totalpos+=t.length,n.set(n.subarray(r,r+wn.RawInflate.MaxBackwardLength)),this.op=wn.RawInflate.MaxBackwardLength,n},wn.RawInflate.prototype.expandBufferAdaptive=function(e){var t,r,n,i=this.input.length/this.ip+1|0,a=this.input,o=this.output;return e&&("number"==typeof e.fixRatio&&(i=e.fixRatio),"number"==typeof e.addRatio&&(i+=e.addRatio)),r=i<2?(n=(a.length-this.ip)/this.currentLitlenTable[2]/2*258|0)<o.length?o.length+n:o.length<<1:o.length*i,(t=new Uint8Array(r)).set(o),this.output=t,this.output},wn.RawInflate.prototype.concatBufferBlock=function(){var e,t,r,n,i,a=0,o=this.totalpos+(this.op-wn.RawInflate.MaxBackwardLength),s=this.output,c=this.blocks,u=new Uint8Array(o);if(0===c.length)return this.output.subarray(wn.RawInflate.MaxBackwardLength,this.op);for(t=0,r=c.length;t<r;++t)for(n=0,i=(e=c[t]).length;n<i;++n)u[a++]=e[n];for(t=wn.RawInflate.MaxBackwardLength,r=this.op;t<r;++t)u[a++]=s[t];return this.blocks=[],this.buffer=u,this.buffer},wn.RawInflate.prototype.concatBufferDynamic=function(){var e,t=this.op;return this.resize?(e=new Uint8Array(t)).set(this.output.subarray(0,t)):e=this.output.subarray(0,t),this.buffer=e,this.buffer};kn=wn.Huffman.buildHuffmanTable;let xn;function Sn(e){return"string"==typeof e||e instanceof String}function _n(e){var t=String(e).split(/[.,]/);return t[0].split("").reverse().reduce((function(e,t,r){return r%3==0?e+","+t:e+t})).split("").reverse().join("")+(t[1]?"."+t[1]:"")}wn.RawInflateStream=function(e,t,r){this.blocks=[],this.bufferSize=r||65e3,this.totalpos=0,this.ip=void 0===t?0:t,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(e),this.output=new Uint8Array(this.bufferSize),this.op=0,this.bfinal=!1,this.blockLength,this.resize=!1,this.litlenTable,this.distTable,this.sp=0,this.status=wn.RawInflateStream.Status.INITIALIZED,this.ip_,this.bitsbuflen_,this.bitsbuf_},wn.RawInflateStream.BlockType={UNCOMPRESSED:0,FIXED:1,DYNAMIC:2},wn.RawInflateStream.Status={INITIALIZED:0,BLOCK_HEADER_START:1,BLOCK_HEADER_END:2,BLOCK_BODY_START:3,BLOCK_BODY_END:4,DECODE_BLOCK_START:5,DECODE_BLOCK_END:6},wn.RawInflateStream.prototype.decompress=function(e,t){var r=!1;for(void 0!==e&&(this.input=e),void 0!==t&&(this.ip=t);!r;)switch(this.status){case wn.RawInflateStream.Status.INITIALIZED:case wn.RawInflateStream.Status.BLOCK_HEADER_START:this.readBlockHeader()<0&&(r=!0);break;case wn.RawInflateStream.Status.BLOCK_HEADER_END:case wn.RawInflateStream.Status.BLOCK_BODY_START:switch(this.currentBlockType){case wn.RawInflateStream.BlockType.UNCOMPRESSED:this.readUncompressedBlockHeader()<0&&(r=!0);break;case wn.RawInflateStream.BlockType.FIXED:this.parseFixedHuffmanBlock()<0&&(r=!0);break;case wn.RawInflateStream.BlockType.DYNAMIC:this.parseDynamicHuffmanBlock()<0&&(r=!0)}break;case wn.RawInflateStream.Status.BLOCK_BODY_END:case wn.RawInflateStream.Status.DECODE_BLOCK_START:switch(this.currentBlockType){case wn.RawInflateStream.BlockType.UNCOMPRESSED:this.parseUncompressedBlock()<0&&(r=!0);break;case wn.RawInflateStream.BlockType.FIXED:case wn.RawInflateStream.BlockType.DYNAMIC:this.decodeHuffman()<0&&(r=!0)}break;case wn.RawInflateStream.Status.DECODE_BLOCK_END:this.bfinal?r=!0:this.status=wn.RawInflateStream.Status.INITIALIZED}return this.concatBuffer()},wn.RawInflateStream.MaxBackwardLength=32768,wn.RawInflateStream.MaxCopyLength=258,wn.RawInflateStream.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wn.RawInflateStream.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),wn.RawInflateStream.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),wn.RawInflateStream.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),wn.RawInflateStream.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),wn.RawInflateStream.FixedLiteralLengthTable=function(){var e,t,r=new Uint8Array(288);for(e=0,t=r.length;e<t;++e)r[e]=e<=143?8:e<=255?9:e<=279?7:8;return kn(r)}(),wn.RawInflateStream.FixedDistanceTable=function(){var e,t,r=new Uint8Array(30);for(e=0,t=r.length;e<t;++e)r[e]=5;return kn(r)}(),wn.RawInflateStream.prototype.readBlockHeader=function(){var e;if(this.status=wn.RawInflateStream.Status.BLOCK_HEADER_START,this.save_(),(e=this.readBits(3))<0)return this.restore_(),-1;switch(1&e&&(this.bfinal=!0),e>>>=1){case 0:this.currentBlockType=wn.RawInflateStream.BlockType.UNCOMPRESSED;break;case 1:this.currentBlockType=wn.RawInflateStream.BlockType.FIXED;break;case 2:this.currentBlockType=wn.RawInflateStream.BlockType.DYNAMIC;break;default:throw new Error("unknown BTYPE: "+e)}this.status=wn.RawInflateStream.Status.BLOCK_HEADER_END},wn.RawInflateStream.prototype.readBits=function(e){for(var t,r=this.bitsbuf,n=this.bitsbuflen,i=this.input,a=this.ip;n<e;){if(i.length<=a)return-1;r|=(t=i[a++])<<n,n+=8}return t=r&(1<<e)-1,r>>>=e,n-=e,this.bitsbuf=r,this.bitsbuflen=n,this.ip=a,t},wn.RawInflateStream.prototype.readCodeByTable=function(e){for(var t,r,n=this.bitsbuf,i=this.bitsbuflen,a=this.input,o=this.ip,s=e[0],c=e[1];i<c;){if(a.length<=o)return-1;n|=a[o++]<<i,i+=8}if((r=(t=s[n&(1<<c)-1])>>>16)>i)throw new Error("invalid code length: "+r);return this.bitsbuf=n>>r,this.bitsbuflen=i-r,this.ip=o,65535&t},wn.RawInflateStream.prototype.readUncompressedBlockHeader=function(){var e,t=this.input,r=this.ip;if(this.status=wn.RawInflateStream.Status.BLOCK_BODY_START,r+4>=t.length)return-1;if((e=t[r++]|t[r++]<<8)===~(t[r++]|t[r++]<<8))throw new Error("invalid uncompressed block header: length verify");this.bitsbuf=0,this.bitsbuflen=0,this.ip=r,this.blockLength=e,this.status=wn.RawInflateStream.Status.BLOCK_BODY_END},wn.RawInflateStream.prototype.parseUncompressedBlock=function(){var e=this.input,t=this.ip,r=this.output,n=this.op,i=this.blockLength;for(this.status=wn.RawInflateStream.Status.DECODE_BLOCK_START;i--;){if(n===r.length&&(r=this.expandBuffer({fixRatio:2})),t>=e.length)return this.ip=t,this.op=n,this.blockLength=i+1,-1;r[n++]=e[t++]}return i<0&&(this.status=wn.RawInflateStream.Status.DECODE_BLOCK_END),this.ip=t,this.op=n,0},wn.RawInflateStream.prototype.parseFixedHuffmanBlock=function(){return this.status=wn.RawInflateStream.Status.BLOCK_BODY_START,this.litlenTable=wn.RawInflateStream.FixedLiteralLengthTable,this.distTable=wn.RawInflateStream.FixedDistanceTable,this.status=wn.RawInflateStream.Status.BLOCK_BODY_END,0},wn.RawInflateStream.prototype.save_=function(){this.ip_=this.ip,this.bitsbuflen_=this.bitsbuflen,this.bitsbuf_=this.bitsbuf},wn.RawInflateStream.prototype.restore_=function(){this.ip=this.ip_,this.bitsbuflen=this.bitsbuflen_,this.bitsbuf=this.bitsbuf_},wn.RawInflateStream.prototype.parseDynamicHuffmanBlock=function(){var e,t,r,n,i=new Uint8Array(wn.RawInflateStream.Order.length);if(this.status=wn.RawInflateStream.Status.BLOCK_BODY_START,this.save_(),e=this.readBits(5)+257,t=this.readBits(5)+1,r=this.readBits(4)+4,e<0||t<0||r<0)return this.restore_(),-1;try{(function(){var a,o,s,c,u,h,l=0;for(u=0;u<r;++u){if((a=this.readBits(3))<0)throw new Error("not enough input");i[wn.RawInflateStream.Order[u]]=a}for(n=kn(i),c=new Uint8Array(e+t),u=0,h=e+t;u<h;){if((o=this.readCodeByTable(n))<0)throw new Error("not enough input");switch(o){case 16:if((a=this.readBits(2))<0)throw new Error("not enough input");for(s=3+a;s--;)c[u++]=l;break;case 17:if((a=this.readBits(3))<0)throw new Error("not enough input");for(s=3+a;s--;)c[u++]=0;l=0;break;case 18:if((a=this.readBits(7))<0)throw new Error("not enough input");for(s=11+a;s--;)c[u++]=0;l=0;break;default:c[u++]=o,l=o}}this.litlenTable=kn(c.subarray(0,e)),this.distTable=kn(c.subarray(e))}).call(this)}catch(e){return this.restore_(),-1}return this.status=wn.RawInflateStream.Status.BLOCK_BODY_END,0},wn.RawInflateStream.prototype.decodeHuffman=function(){var e,t,r,n,i,a=this.output,o=this.op,s=this.litlenTable,c=this.distTable,u=a.length;for(this.status=wn.RawInflateStream.Status.DECODE_BLOCK_START;;){if(this.save_(),(e=this.readCodeByTable(s))<0)return this.op=o,this.restore_(),-1;if(256===e)break;if(e<256)o===u&&(u=(a=this.expandBuffer()).length),a[o++]=e;else{if(t=e-257,n=wn.RawInflateStream.LengthCodeTable[t],wn.RawInflateStream.LengthExtraTable[t]>0){if((i=this.readBits(wn.RawInflateStream.LengthExtraTable[t]))<0)return this.op=o,this.restore_(),-1;n+=i}if((e=this.readCodeByTable(c))<0)return this.op=o,this.restore_(),-1;if(r=wn.RawInflateStream.DistCodeTable[e],wn.RawInflateStream.DistExtraTable[e]>0){if((i=this.readBits(wn.RawInflateStream.DistExtraTable[e]))<0)return this.op=o,this.restore_(),-1;r+=i}for(o+n>=u&&(u=(a=this.expandBuffer()).length);n--;)a[o]=a[o++-r];if(this.ip===this.input.length)return this.op=o,-1}}for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=o,this.status=wn.RawInflateStream.Status.DECODE_BLOCK_END},wn.RawInflateStream.prototype.expandBuffer=function(e){var t,r,n,i=this.input.length/this.ip+1|0,a=this.input,o=this.output;return e&&("number"==typeof e.fixRatio&&(i=e.fixRatio),"number"==typeof e.addRatio&&(i+=e.addRatio)),r=i<2?(n=(a.length-this.ip)/this.litlenTable[2]/2*258|0)<o.length?o.length+n:o.length<<1:o.length*i,(t=new Uint8Array(r)).set(o),this.output=t,this.output},wn.RawInflateStream.prototype.concatBuffer=function(){var e,t,r=this.op;return e=this.resize?new Uint8Array(this.output.subarray(this.sp,r)):this.output.subarray(this.sp,r),this.sp=r,r>wn.RawInflateStream.MaxBackwardLength+this.bufferSize&&(this.op=this.sp=wn.RawInflateStream.MaxBackwardLength,t=this.output,this.output=new Uint8Array(this.bufferSize+wn.RawInflateStream.MaxBackwardLength),this.output.set(t.subarray(r-wn.RawInflateStream.MaxBackwardLength,r))),e},wn.Inflate=function(e,t){var r,n;switch(this.input=e,this.ip=0,this.rawinflate,this.verify,!t&&(t={})||(t.index&&(this.ip=t.index),t.verify&&(this.verify=t.verify)),r=e[this.ip++],n=e[this.ip++],15&r){case wn.CompressionMethod.DEFLATE:this.method=wn.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((r<<8)+n)%31!=0)throw new Error("invalid fcheck flag:"+((r<<8)+n)%31);if(32&n)throw new Error("fdict flag is not supported");this.rawinflate=new wn.RawInflate(e,{index:this.ip,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})},wn.Inflate.BufferType=wn.RawInflate.BufferType,wn.Inflate.prototype.decompress=function(){var e,t=this.input;if(e=this.rawinflate.decompress(),this.ip=this.rawinflate.ip,this.verify&&(t[this.ip++]<<24|t[this.ip++]<<16|t[this.ip++]<<8|t[this.ip++])>>>0!==wn.Adler32(e))throw new Error("invalid adler-32 checksum");return e},wn.InflateStream=function(e){this.input=void 0===e?new Uint8Array:e,this.ip=0,this.rawinflate=new wn.RawInflateStream(this.input,this.ip),this.method,this.output=this.rawinflate.output},wn.InflateStream.prototype.decompress=function(e){var t;if(void 0!==e){var r=new Uint8Array(this.input.length+e.length);r.set(this.input,0),r.set(e,this.input.length),this.input=r}return void 0===this.method&&this.readHeader()<0?new Uint8Array:(t=this.rawinflate.decompress(this.input,this.ip),0!==this.rawinflate.ip&&(this.input=this.input.subarray(this.rawinflate.ip),this.ip=0),t)},wn.InflateStream.prototype.readHeader=function(){var e=this.ip,t=this.input,r=t[e++],n=t[e++];if(void 0===r||void 0===n)return-1;switch(15&r){case wn.CompressionMethod.DEFLATE:this.method=wn.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((r<<8)+n)%31!=0)throw new Error("invalid fcheck flag:"+((r<<8)+n)%31);if(32&n)throw new Error("fdict flag is not supported");this.ip=e},wn.Gunzip=function(e,t){this.input=e,this.ip=0,this.member=[],this.decompressed=!1},wn.Gunzip.prototype.getMembers=function(){return this.decompressed||this.decompress(),this.member.slice()},wn.Gunzip.prototype.decompress=function(){for(var e=this.input.length;this.ip<e;)this.decodeMember();return this.decompressed=!0,this.concatMember()},wn.Gunzip.prototype.decodeMember=function(){var e,t,r,n,i,a,o,s,c,u=new wn.GunzipMember,h=this.input,l=this.ip;if(u.id1=h[l++],u.id2=h[l++],31!==u.id1||139!==u.id2)throw new Error("invalid file signature:"+u.id1+","+u.id2);switch(u.cm=h[l++],u.cm){case 8:break;default:throw new Error("unknown compression method: "+u.cm)}if(u.flg=h[l++],s=h[l++]|h[l++]<<8|h[l++]<<16|h[l++]<<24,u.mtime=new Date(1e3*s),u.xfl=h[l++],u.os=h[l++],(u.flg&wn.Gzip.FlagsMask.FEXTRA)>0&&(u.xlen=h[l++]|h[l++]<<8,l=this.decodeSubField(l,u.xlen)),(u.flg&wn.Gzip.FlagsMask.FNAME)>0){for(o=[],a=0;(i=h[l++])>0;)o[a++]=String.fromCharCode(i);u.name=o.join("")}if((u.flg&wn.Gzip.FlagsMask.FCOMMENT)>0){for(o=[],a=0;(i=h[l++])>0;)o[a++]=String.fromCharCode(i);u.comment=o.join("")}if((u.flg&wn.Gzip.FlagsMask.FHCRC)>0&&(u.crc16=65535&wn.CRC32.calc(h,0,l),u.crc16!==(h[l++]|h[l++]<<8)))throw new Error("invalid header crc16");if(e=h[h.length-4]|h[h.length-3]<<8|h[h.length-2]<<16|h[h.length-1]<<24,h.length-l-4-4<512*e&&(n=e),t=new wn.RawInflate(h,{index:l,bufferSize:n}),u.data=r=t.decompress(),l=t.ip,u.crc32=c=(h[l++]|h[l++]<<8|h[l++]<<16|h[l++]<<24)>>>0,wn.CRC32.calc(r)!==c)throw new Error("invalid CRC-32 checksum: 0x"+wn.CRC32.calc(r).toString(16)+" / 0x"+c.toString(16));if(u.isize=e=(h[l++]|h[l++]<<8|h[l++]<<16|h[l++]<<24)>>>0,(4294967295&r.length)!==e)throw new Error("invalid input size: "+(4294967295&r.length)+" / "+e);this.member.push(u),this.ip=l},wn.Gunzip.prototype.decodeSubField=function(e,t){return e+t},wn.Gunzip.prototype.concatMember=function(){var e,t,r,n=this.member,i=0,a=0;for(e=0,t=n.length;e<t;++e)a+=n[e].data.length;for(r=new Uint8Array(a),e=0;e<t;++e)r.set(n[e].data,i),i+=n[e].data.length;return r},wn.GunzipMember=function(){this.id1,this.id2,this.cm,this.flg,this.mtime,this.xfl,this.os,this.crc16,this.xlen,this.crc32,this.isize,this.name,this.comment,this.data},wn.GunzipMember.prototype.getName=function(){return this.name},wn.GunzipMember.prototype.getData=function(){return this.data},wn.GunzipMember.prototype.getMtime=function(){return this.mtime},wn.Gzip=function(e,t){this.input=e,this.ip=0,this.output,this.op=0,this.flags={},this.filename,this.comment,this.deflateOptions,t&&(t.flags&&(this.flags=t.flags),"string"==typeof t.filename&&(this.filename=t.filename),"string"==typeof t.comment&&(this.comment=t.comment),t.deflateOptions&&(this.deflateOptions=t.deflateOptions)),this.deflateOptions||(this.deflateOptions={})},wn.Gzip.DefaultBufferSize=32768,wn.Gzip.prototype.compress=function(){var e,t,r,n,i,a,o,s,c=new Uint8Array(wn.Gzip.DefaultBufferSize),u=0,h=this.input,l=this.ip,f=this.filename,p=this.comment;if(c[u++]=31,c[u++]=139,c[u++]=8,e=0,this.flags.fname&&(e|=wn.Gzip.FlagsMask.FNAME),this.flags.fcomment&&(e|=wn.Gzip.FlagsMask.FCOMMENT),this.flags.fhcrc&&(e|=wn.Gzip.FlagsMask.FHCRC),c[u++]=e,t=(Date.now?Date.now():+new Date)/1e3|0,c[u++]=255&t,c[u++]=t>>>8&255,c[u++]=t>>>16&255,c[u++]=t>>>24&255,c[u++]=0,c[u++]=wn.Gzip.OperatingSystem.UNKNOWN,void 0!==this.flags.fname){for(o=0,s=f.length;o<s;++o)(a=f.charCodeAt(o))>255&&(c[u++]=a>>>8&255),c[u++]=255&a;c[u++]=0}if(this.flags.comment){for(o=0,s=p.length;o<s;++o)(a=p.charCodeAt(o))>255&&(c[u++]=a>>>8&255),c[u++]=255&a;c[u++]=0}return this.flags.fhcrc&&(r=65535&wn.CRC32.calc(c,0,u),c[u++]=255&r,c[u++]=r>>>8&255),this.deflateOptions.outputBuffer=c,this.deflateOptions.outputIndex=u,c=(i=new wn.RawDeflate(h,this.deflateOptions)).compress(),(u=i.op)+8>c.buffer.byteLength?(this.output=new Uint8Array(u+8),this.output.set(new Uint8Array(c.buffer)),c=this.output):c=new Uint8Array(c.buffer),n=wn.CRC32.calc(h),c[u++]=255&n,c[u++]=n>>>8&255,c[u++]=n>>>16&255,c[u++]=n>>>24&255,s=h.length,c[u++]=255&s,c[u++]=s>>>8&255,c[u++]=s>>>16&255,c[u++]=s>>>24&255,this.ip=l,u<c.length&&(this.output=c=c.subarray(0,u)),c},wn.Gzip.OperatingSystem={FAT:0,AMIGA:1,VMS:2,UNIX:3,VM_CMS:4,ATARI_TOS:5,HPFS:6,MACINTOSH:7,Z_SYSTEM:8,CP_M:9,TOPS_20:10,NTFS:11,QDOS:12,ACORN_RISCOS:13,UNKNOWN:255},wn.Gzip.FlagsMask={FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16},wn.Heap=function(e){this.buffer=new Uint16Array(2*e),this.length=0},wn.Heap.prototype.getParent=function(e){return 2*((e-2)/4|0)},wn.Heap.prototype.getChild=function(e){return 2*e+2},wn.Heap.prototype.push=function(e,t){var r,n,i,a=this.buffer;for(r=this.length,a[this.length++]=t,a[this.length++]=e;r>0&&(n=this.getParent(r),a[r]>a[n]);)i=a[r],a[r]=a[n],a[n]=i,i=a[r+1],a[r+1]=a[n+1],a[n+1]=i,r=n;return this.length},wn.Heap.prototype.pop=function(){var e,t,r,n,i,a=this.buffer;for(t=a[0],e=a[1],this.length-=2,a[0]=a[this.length],a[1]=a[this.length+1],i=0;!((n=this.getChild(i))>=this.length)&&(n+2<this.length&&a[n+2]>a[n]&&(n+=2),a[n]>a[i]);)r=a[i],a[i]=a[n],a[n]=r,r=a[i+1],a[i+1]=a[n+1],a[n+1]=r,i=n;return{index:e,value:t,length:this.length}},wn.RawDeflate=function(e,t){this.compressionType=wn.RawDeflate.CompressionType.DYNAMIC,this.lazy=0,this.freqsLitLen,this.freqsDist,this.input=e instanceof Array?new Uint8Array(e):e,this.output,this.op=0,t&&(t.lazy&&(this.lazy=t.lazy),"number"==typeof t.compressionType&&(this.compressionType=t.compressionType),t.outputBuffer&&(this.output=t.outputBuffer instanceof Array?new Uint8Array(t.outputBuffer):t.outputBuffer),"number"==typeof t.outputIndex&&(this.op=t.outputIndex)),this.output||(this.output=new Uint8Array(32768))},wn.RawDeflate.CompressionType={NONE:0,FIXED:1,DYNAMIC:2,RESERVED:3},wn.RawDeflate.Lz77MinLength=3,wn.RawDeflate.Lz77MaxLength=258,wn.RawDeflate.WindowSize=32768,wn.RawDeflate.MaxCodeLength=16,wn.RawDeflate.HUFMAX=286,wn.RawDeflate.FixedHuffmanTable=function(){var e,t=[];for(e=0;e<288;e++)switch(!0){case e<=143:t.push([e+48,8]);break;case e<=255:t.push([e-144+400,9]);break;case e<=279:t.push([e-256+0,7]);break;case e<=287:t.push([e-280+192,8]);break;default:throw"invalid literal: "+e}return t}(),wn.RawDeflate.prototype.compress=function(){var e,t,r,n=this.input;switch(this.compressionType){case wn.RawDeflate.CompressionType.NONE:for(t=0,r=n.length;t<r;)t+=(e=n.subarray(t,t+65535)).length,this.makeNocompressBlock(e,t===r);break;case wn.RawDeflate.CompressionType.FIXED:this.output=this.makeFixedHuffmanBlock(n,!0),this.op=this.output.length;break;case wn.RawDeflate.CompressionType.DYNAMIC:this.output=this.makeDynamicHuffmanBlock(n,!0),this.op=this.output.length;break;default:throw"invalid compression type"}return this.output},wn.RawDeflate.prototype.makeNocompressBlock=function(e,t){var r,n,i,a,o=this.output,s=this.op;for(o=new Uint8Array(this.output.buffer);o.length<=s+e.length+5;)o=new Uint8Array(o.length<<1);return o.set(this.output),r=t?1:0,n=wn.RawDeflate.CompressionType.NONE,o[s++]=r|n<<1,a=65536+~(i=e.length)&65535,o[s++]=255&i,o[s++]=i>>>8&255,o[s++]=255&a,o[s++]=a>>>8&255,o.set(e,s),s+=e.length,o=o.subarray(0,s),this.op=s,this.output=o,o},wn.RawDeflate.prototype.makeFixedHuffmanBlock=function(e,t){var r,n,i,a=new wn.BitStream(new Uint8Array(this.output.buffer),this.op);return r=t?1:0,n=wn.RawDeflate.CompressionType.FIXED,a.writeBits(r,1,!0),a.writeBits(n,2,!0),i=this.lz77(e),this.fixedHuffman(i,a),a.finish()},wn.RawDeflate.prototype.makeDynamicHuffmanBlock=function(e,t){var r,n,i,a,o,s,c,u,h,l,f,p,d,g,v,m,b,y=new wn.BitStream(new Uint8Array(this.output.buffer),this.op),w=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],k=new Array(19);for(r=t?1:0,n=wn.RawDeflate.CompressionType.DYNAMIC,y.writeBits(r,1,!0),y.writeBits(n,2,!0),i=this.lz77(e),c=this.getLengths_(this.freqsLitLen,15),u=this.getCodesFromLengths_(c),h=this.getLengths_(this.freqsDist,7),l=this.getCodesFromLengths_(h),a=286;a>257&&0===c[a-1];a--);for(o=30;o>1&&0===h[o-1];o--);for(f=this.getTreeSymbols_(a,c,o,h),p=this.getLengths_(f.freqs,7),m=0;m<19;m++)k[m]=p[w[m]];for(s=19;s>4&&0===k[s-1];s--);for(d=this.getCodesFromLengths_(p),y.writeBits(a-257,5,!0),y.writeBits(o-1,5,!0),y.writeBits(s-4,4,!0),m=0;m<s;m++)y.writeBits(k[m],3,!0);for(m=0,b=f.codes.length;m<b;m++)if(g=f.codes[m],y.writeBits(d[g],p[g],!0),g>=16){switch(m++,g){case 16:v=2;break;case 17:v=3;break;case 18:v=7;break;default:throw"invalid code: "+g}y.writeBits(f.codes[m],v,!0)}return this.dynamicHuffman(i,[u,c],[l,h],y),y.finish()},wn.RawDeflate.prototype.dynamicHuffman=function(e,t,r,n){var i,a,o,s,c,u,h,l;for(c=t[0],u=t[1],h=r[0],l=r[1],i=0,a=e.length;i<a;++i)if(o=e[i],n.writeBits(c[o],u[o],!0),o>256)n.writeBits(e[++i],e[++i],!0),s=e[++i],n.writeBits(h[s],l[s],!0),n.writeBits(e[++i],e[++i],!0);else if(256===o)break;return n},wn.RawDeflate.prototype.fixedHuffman=function(e,t){var r,n,i;for(r=0,n=e.length;r<n;r++)if(i=e[r],wn.BitStream.prototype.writeBits.apply(t,wn.RawDeflate.FixedHuffmanTable[i]),i>256)t.writeBits(e[++r],e[++r],!0),t.writeBits(e[++r],5),t.writeBits(e[++r],e[++r],!0);else if(256===i)break;return t},wn.RawDeflate.Lz77Match=function(e,t){this.length=e,this.backwardDistance=t},wn.RawDeflate.Lz77Match.LengthCodeTable=function(e){return new Uint32Array(e)}(function(){var e,t,r=[];for(e=3;e<=258;e++)t=n(e),r[e]=t[2]<<24|t[1]<<16|t[0];function n(e){switch(!0){case 3===e:return[257,e-3,0];case 4===e:return[258,e-4,0];case 5===e:return[259,e-5,0];case 6===e:return[260,e-6,0];case 7===e:return[261,e-7,0];case 8===e:return[262,e-8,0];case 9===e:return[263,e-9,0];case 10===e:return[264,e-10,0];case e<=12:return[265,e-11,1];case e<=14:return[266,e-13,1];case e<=16:return[267,e-15,1];case e<=18:return[268,e-17,1];case e<=22:return[269,e-19,2];case e<=26:return[270,e-23,2];case e<=30:return[271,e-27,2];case e<=34:return[272,e-31,2];case e<=42:return[273,e-35,3];case e<=50:return[274,e-43,3];case e<=58:return[275,e-51,3];case e<=66:return[276,e-59,3];case e<=82:return[277,e-67,4];case e<=98:return[278,e-83,4];case e<=114:return[279,e-99,4];case e<=130:return[280,e-115,4];case e<=162:return[281,e-131,5];case e<=194:return[282,e-163,5];case e<=226:return[283,e-195,5];case e<=257:return[284,e-227,5];case 258===e:return[285,e-258,0];default:throw"invalid length: "+e}}return r}()),wn.RawDeflate.Lz77Match.prototype.getDistanceCode_=function(e){var t;switch(!0){case 1===e:t=[0,e-1,0];break;case 2===e:t=[1,e-2,0];break;case 3===e:t=[2,e-3,0];break;case 4===e:t=[3,e-4,0];break;case e<=6:t=[4,e-5,1];break;case e<=8:t=[5,e-7,1];break;case e<=12:t=[6,e-9,2];break;case e<=16:t=[7,e-13,2];break;case e<=24:t=[8,e-17,3];break;case e<=32:t=[9,e-25,3];break;case e<=48:t=[10,e-33,4];break;case e<=64:t=[11,e-49,4];break;case e<=96:t=[12,e-65,5];break;case e<=128:t=[13,e-97,5];break;case e<=192:t=[14,e-129,6];break;case e<=256:t=[15,e-193,6];break;case e<=384:t=[16,e-257,7];break;case e<=512:t=[17,e-385,7];break;case e<=768:t=[18,e-513,8];break;case e<=1024:t=[19,e-769,8];break;case e<=1536:t=[20,e-1025,9];break;case e<=2048:t=[21,e-1537,9];break;case e<=3072:t=[22,e-2049,10];break;case e<=4096:t=[23,e-3073,10];break;case e<=6144:t=[24,e-4097,11];break;case e<=8192:t=[25,e-6145,11];break;case e<=12288:t=[26,e-8193,12];break;case e<=16384:t=[27,e-12289,12];break;case e<=24576:t=[28,e-16385,13];break;case e<=32768:t=[29,e-24577,13];break;default:throw"invalid distance"}return t},wn.RawDeflate.Lz77Match.prototype.toLz77Array=function(){var e,t=this.length,r=this.backwardDistance,n=[],i=0;return e=wn.RawDeflate.Lz77Match.LengthCodeTable[t],n[i++]=65535&e,n[i++]=e>>16&255,n[i++]=e>>24,e=this.getDistanceCode_(r),n[i++]=e[0],n[i++]=e[1],n[i++]=e[2],n},wn.RawDeflate.prototype.lz77=function(e){var t,r,n,i,a,o,s,c,u,h={},l=wn.RawDeflate.WindowSize,f=new Uint16Array(2*e.length),p=0,d=0,g=new Uint32Array(286),v=new Uint32Array(30),m=this.lazy;function b(e,t){var r,n,i=e.toLz77Array();for(r=0,n=i.length;r<n;++r)f[p++]=i[r];g[i[0]]++,v[i[3]]++,d=e.length+t-1,c=null}for(g[256]=1,t=0,r=e.length;t<r;++t){for(a=0,n=0,i=wn.RawDeflate.Lz77MinLength;n<i&&t+n!==r;++n)a=a<<8|e[t+n];if(void 0===h[a]&&(h[a]=[]),o=h[a],d-- >0)o.push(t);else{for(;o.length>0&&t-o[0]>l;)o.shift();if(t+wn.RawDeflate.Lz77MinLength>=r){for(c&&b(c,-1),n=0,i=r-t;n<i;++n)u=e[t+n],f[p++]=u,++g[u];break}o.length>0?(s=this.searchLongestMatch_(e,t,o),c?c.length<s.length?(u=e[t-1],f[p++]=u,++g[u],b(s,0)):b(c,-1):s.length<m?c=s:b(s,0)):c?b(c,-1):(u=e[t],f[p++]=u,++g[u]),o.push(t)}}return f[p++]=256,g[256]++,this.freqsLitLen=g,this.freqsDist=v,f.subarray(0,p)},wn.RawDeflate.prototype.searchLongestMatch_=function(e,t,r){var n,i,a,o,s,c,u=0,h=e.length;e:for(o=0,c=r.length;o<c;o++){if(n=r[c-o-1],a=wn.RawDeflate.Lz77MinLength,u>wn.RawDeflate.Lz77MinLength){for(s=u;s>wn.RawDeflate.Lz77MinLength;s--)if(e[n+s-1]!==e[t+s-1])continue e;a=u}for(;a<wn.RawDeflate.Lz77MaxLength&&t+a<h&&e[n+a]===e[t+a];)++a;if(a>u&&(i=n,u=a),a===wn.RawDeflate.Lz77MaxLength)break}return new wn.RawDeflate.Lz77Match(u,t-i)},wn.RawDeflate.prototype.getTreeSymbols_=function(e,t,r,n){var i,a,o,s,c,u,h=new Uint32Array(e+r),l=new Uint32Array(316),f=new Uint8Array(19);for(a=0,i=0;i<e;i++)h[a++]=t[i];for(i=0;i<r;i++)h[a++]=n[i];for(c=0,i=0,s=h.length;i<s;i+=a){for(a=1;i+a<s&&h[i+a]===h[i];++a);if(o=a,0===h[i])if(o<3)for(;o-- >0;)l[c++]=0,f[0]++;else for(;o>0;)(u=o<138?o:138)>o-3&&u<o&&(u=o-3),u<=10?(l[c++]=17,l[c++]=u-3,f[17]++):(l[c++]=18,l[c++]=u-11,f[18]++),o-=u;else if(l[c++]=h[i],f[h[i]]++,--o<3)for(;o-- >0;)l[c++]=h[i],f[h[i]]++;else for(;o>0;)(u=o<6?o:6)>o-3&&u<o&&(u=o-3),l[c++]=16,l[c++]=u-3,f[16]++,o-=u}return{codes:l.subarray(0,c),freqs:f}},wn.RawDeflate.prototype.getLengths_=function(e,t){var r,n,i,a,o,s=e.length,c=new wn.Heap(2*wn.RawDeflate.HUFMAX),u=new Uint8Array(s);for(a=0;a<s;++a)e[a]>0&&c.push(a,e[a]);if(r=new Array(c.length/2),n=new Uint32Array(c.length/2),1===r.length)return u[c.pop().index]=1,u;for(a=0,o=c.length/2;a<o;++a)r[a]=c.pop(),n[a]=r[a].value;for(i=this.reversePackageMerge_(n,n.length,t),a=0,o=r.length;a<o;++a)u[r[a].index]=i[a];return u},wn.RawDeflate.prototype.reversePackageMerge_=function(e,t,r){var n,i,a,o,s,c=new Uint16Array(r),u=new Uint8Array(r),h=new Uint8Array(t),l=new Array(r),f=new Array(r),p=new Array(r),d=(1<<r)-t,g=1<<r-1;function v(e){var r=f[e][p[e]];r===t?(v(e+1),v(e+1)):--h[r],++p[e]}for(c[r-1]=t,i=0;i<r;++i)d<g?u[i]=0:(u[i]=1,d-=g),d<<=1,c[r-2-i]=(c[r-1-i]/2|0)+t;for(c[0]=u[0],l[0]=new Array(c[0]),f[0]=new Array(c[0]),i=1;i<r;++i)c[i]>2*c[i-1]+u[i]&&(c[i]=2*c[i-1]+u[i]),l[i]=new Array(c[i]),f[i]=new Array(c[i]);for(n=0;n<t;++n)h[n]=r;for(a=0;a<c[r-1];++a)l[r-1][a]=e[a],f[r-1][a]=a;for(n=0;n<r;++n)p[n]=0;for(1===u[r-1]&&(--h[0],++p[r-1]),i=r-2;i>=0;--i){for(n=0,o=0,s=p[i+1],a=0;a<c[i];a++)(o=l[i+1][s]+l[i+1][s+1])>e[n]?(l[i][a]=o,f[i][a]=t,s+=2):(l[i][a]=e[n],f[i][a]=n,++n);p[i]=0,1===u[i]&&v(i)}return h},wn.RawDeflate.prototype.getCodesFromLengths_=function(e){var t,r,n,i,a=new Uint16Array(e.length),o=[],s=[],c=0;for(t=0,r=e.length;t<r;t++)o[e[t]]=1+(0|o[e[t]]);for(t=1,r=wn.RawDeflate.MaxCodeLength;t<=r;t++)s[t]=c,c+=0|o[t],c<<=1;for(t=0,r=e.length;t<r;t++)for(c=s[e[t]],s[e[t]]+=1,a[t]=0,n=0,i=e[t];n<i;n++)a[t]=a[t]<<1|1&c,c>>>=1;return a},wn.Unzip=function(e,t){t=t||{},this.input=e instanceof Array?new Uint8Array(e):e,this.ip=0,this.eocdrOffset,this.numberOfThisDisk,this.startDisk,this.totalEntriesThisDisk,this.totalEntries,this.centralDirectorySize,this.centralDirectoryOffset,this.commentLength,this.comment,this.fileHeaderList,this.filenameToIndex,this.verify=t.verify||!1,this.password=t.password},wn.Unzip.CompressionMethod=wn.Zip.CompressionMethod,wn.Unzip.FileHeaderSignature=wn.Zip.FileHeaderSignature,wn.Unzip.LocalFileHeaderSignature=wn.Zip.LocalFileHeaderSignature,wn.Unzip.CentralDirectorySignature=wn.Zip.CentralDirectorySignature,wn.Unzip.FileHeader=function(e,t){this.input=e,this.offset=t,this.length,this.version,this.os,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.fileCommentLength,this.diskNumberStart,this.internalFileAttributes,this.externalFileAttributes,this.relativeOffset,this.filename,this.extraField,this.comment},wn.Unzip.FileHeader.prototype.parse=function(){var e=this.input,t=this.offset;if(e[t++]!==wn.Unzip.FileHeaderSignature[0]||e[t++]!==wn.Unzip.FileHeaderSignature[1]||e[t++]!==wn.Unzip.FileHeaderSignature[2]||e[t++]!==wn.Unzip.FileHeaderSignature[3])throw new Error("invalid file header signature");this.version=e[t++],this.os=e[t++],this.needVersion=e[t++]|e[t++]<<8,this.flags=e[t++]|e[t++]<<8,this.compression=e[t++]|e[t++]<<8,this.time=e[t++]|e[t++]<<8,this.date=e[t++]|e[t++]<<8,this.crc32=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.compressedSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.plainSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.fileNameLength=e[t++]|e[t++]<<8,this.extraFieldLength=e[t++]|e[t++]<<8,this.fileCommentLength=e[t++]|e[t++]<<8,this.diskNumberStart=e[t++]|e[t++]<<8,this.internalFileAttributes=e[t++]|e[t++]<<8,this.externalFileAttributes=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,this.relativeOffset=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.filename=String.fromCharCode.apply(null,e.subarray(t,t+=this.fileNameLength)),this.extraField=e.subarray(t,t+=this.extraFieldLength),this.comment=e.subarray(t,t+this.fileCommentLength),this.length=t-this.offset},wn.Unzip.LocalFileHeader=function(e,t){this.input=e,this.offset=t,this.length,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.filename,this.extraField},wn.Unzip.LocalFileHeader.Flags=wn.Zip.Flags,wn.Unzip.LocalFileHeader.prototype.parse=function(){var e=this.input,t=this.offset;if(e[t++]!==wn.Unzip.LocalFileHeaderSignature[0]||e[t++]!==wn.Unzip.LocalFileHeaderSignature[1]||e[t++]!==wn.Unzip.LocalFileHeaderSignature[2]||e[t++]!==wn.Unzip.LocalFileHeaderSignature[3])throw new Error("invalid local file header signature");this.needVersion=e[t++]|e[t++]<<8,this.flags=e[t++]|e[t++]<<8,this.compression=e[t++]|e[t++]<<8,this.time=e[t++]|e[t++]<<8,this.date=e[t++]|e[t++]<<8,this.crc32=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.compressedSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.plainSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.fileNameLength=e[t++]|e[t++]<<8,this.extraFieldLength=e[t++]|e[t++]<<8,this.filename=String.fromCharCode.apply(null,e.subarray(t,t+=this.fileNameLength)),this.extraField=e.subarray(t,t+=this.extraFieldLength),this.length=t-this.offset},wn.Unzip.prototype.searchEndOfCentralDirectoryRecord=function(){var e,t=this.input;for(e=t.length-12;e>0;--e)if(t[e]===wn.Unzip.CentralDirectorySignature[0]&&t[e+1]===wn.Unzip.CentralDirectorySignature[1]&&t[e+2]===wn.Unzip.CentralDirectorySignature[2]&&t[e+3]===wn.Unzip.CentralDirectorySignature[3])return void(this.eocdrOffset=e);throw new Error("End of Central Directory Record not found")},wn.Unzip.prototype.parseEndOfCentralDirectoryRecord=function(){var e,t=this.input;if(this.eocdrOffset||this.searchEndOfCentralDirectoryRecord(),e=this.eocdrOffset,t[e++]!==wn.Unzip.CentralDirectorySignature[0]||t[e++]!==wn.Unzip.CentralDirectorySignature[1]||t[e++]!==wn.Unzip.CentralDirectorySignature[2]||t[e++]!==wn.Unzip.CentralDirectorySignature[3])throw new Error("invalid signature");this.numberOfThisDisk=t[e++]|t[e++]<<8,this.startDisk=t[e++]|t[e++]<<8,this.totalEntriesThisDisk=t[e++]|t[e++]<<8,this.totalEntries=t[e++]|t[e++]<<8,this.centralDirectorySize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.centralDirectoryOffset=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.commentLength=t[e++]|t[e++]<<8,this.comment=t.subarray(e,e+this.commentLength)},wn.Unzip.prototype.parseFileHeader=function(){var e,t,r,n,i=[],a={};if(!this.fileHeaderList){for(void 0===this.centralDirectoryOffset&&this.parseEndOfCentralDirectoryRecord(),e=this.centralDirectoryOffset,r=0,n=this.totalEntries;r<n;++r)(t=new wn.Unzip.FileHeader(this.input,e)).parse(),e+=t.length,i[r]=t,a[t.filename]=r;if(this.centralDirectorySize<e-this.centralDirectoryOffset)throw new Error("invalid file header size");this.fileHeaderList=i,this.filenameToIndex=a}},wn.Unzip.prototype.getFileData=function(e,t){t=t||{};var r,n,i,a,o,s,c,u,h=this.input,l=this.fileHeaderList;if(l||this.parseFileHeader(),void 0===l[e])throw new Error("wrong index");if(n=l[e].relativeOffset,(r=new wn.Unzip.LocalFileHeader(this.input,n)).parse(),n+=r.length,i=r.compressedSize,0!=(r.flags&wn.Unzip.LocalFileHeader.Flags.ENCRYPT)){if(!t.password&&!this.password)throw new Error("please set password");for(s=this.createDecryptionKey(t.password||this.password),c=n,u=n+12;c<u;++c)this.decode(s,h[c]);for(c=n+=12,u=n+(i-=12);c<u;++c)h[c]=this.decode(s,h[c])}switch(r.compression){case wn.Unzip.CompressionMethod.STORE:a=this.input.subarray(n,n+i);break;case wn.Unzip.CompressionMethod.DEFLATE:a=new wn.RawInflate(this.input,{index:n,bufferSize:r.plainSize}).decompress();break;default:throw new Error("unknown compression type")}if(this.verify&&(o=wn.CRC32.calc(a),r.crc32!==o))throw new Error("wrong crc: file=0x"+r.crc32.toString(16)+", data=0x"+o.toString(16));return a},wn.Unzip.prototype.getFilenames=function(){var e,t,r,n=[];for(this.fileHeaderList||this.parseFileHeader(),e=0,t=(r=this.fileHeaderList).length;e<t;++e)n[e]=r[e].filename;return n},wn.Unzip.prototype.decompress=function(e,t){var r;if(this.filenameToIndex||this.parseFileHeader(),void 0===(r=this.filenameToIndex[e]))throw new Error(e+" not found");return this.getFileData(r,t)},wn.Unzip.prototype.setPassword=function(e){this.password=e},wn.Unzip.prototype.decode=function(e,t){return t^=this.getByte(e),this.updateKeys(e,t),t},wn.Unzip.prototype.updateKeys=wn.Zip.prototype.updateKeys,wn.Unzip.prototype.createDecryptionKey=wn.Zip.prototype.createEncryptionKey,wn.Unzip.prototype.getByte=wn.Zip.prototype.getByte,wn.Util.stringToByteArray=function(e){var t,r,n=e.split("");for(t=0,r=n.length;t<r;t++)n[t]=(255&n[t].charCodeAt(0))>>>0;return n},wn.Adler32=function(e){return"string"==typeof e&&(e=wn.Util.stringToByteArray(e)),wn.Adler32.update(1,e)},wn.Adler32.update=function(e,t){for(var r,n=65535&e,i=e>>>16&65535,a=t.length,o=0;a>0;){a-=r=a>wn.Adler32.OptimizationParameter?wn.Adler32.OptimizationParameter:a;do{i+=n+=t[o++]}while(--r);n%=65521,i%=65521}return(i<<16|n)>>>0},wn.Adler32.OptimizationParameter=1024,wn.BitStream=function(e,t){if(this.index="number"==typeof t?t:0,this.bitindex=0,this.buffer=e instanceof Uint8Array?e:new Uint8Array(wn.BitStream.DefaultBlockSize),2*this.buffer.length<=this.index)throw new Error("invalid index");this.buffer.length<=this.index&&this.expandBuffer()},wn.BitStream.DefaultBlockSize=32768,wn.BitStream.prototype.expandBuffer=function(){var e=this.buffer,t=e.length,r=new Uint8Array(t<<1);return r.set(e),this.buffer=r},wn.BitStream.prototype.writeBits=function(e,t,r){var n,i=this.buffer,a=this.index,o=this.bitindex,s=i[a];if(r&&t>1&&(e=t>8?function(e){return wn.BitStream.ReverseTable[255&e]<<24|wn.BitStream.ReverseTable[e>>>8&255]<<16|wn.BitStream.ReverseTable[e>>>16&255]<<8|wn.BitStream.ReverseTable[e>>>24&255]}(e)>>32-t:wn.BitStream.ReverseTable[e]>>8-t),t+o<8)s=s<<t|e,o+=t;else for(n=0;n<t;++n)s=s<<1|e>>t-n-1&1,8==++o&&(o=0,i[a++]=wn.BitStream.ReverseTable[s],s=0,a===i.length&&(i=this.expandBuffer()));i[a]=s,this.buffer=i,this.bitindex=o,this.index=a},wn.BitStream.prototype.finish=function(){var e=this.buffer,t=this.index;return this.bitindex>0&&(e[t]<<=8-this.bitindex,e[t]=wn.BitStream.ReverseTable[e[t]],t++),e.subarray(0,t)},wn.BitStream.ReverseTable=function(){var e,t=new Uint8Array(256);for(e=0;e<256;++e)t[e]=function(e){var t=e,r=7;for(e>>>=1;e;e>>>=1)t<<=1,t|=1&e,--r;return(t<<r&255)>>>0}(e);return t}(),wn.CRC32.calc=function(e,t,r){return wn.CRC32.update(e,0,t,r)},wn.CRC32.update=function(e,t,r,n){var i=wn.CRC32.Table,a="number"==typeof r?r:r=0,o="number"==typeof n?n:e.length;for(t^=4294967295,a=7&o;a--;++r)t=t>>>8^i[255&(t^e[r])];for(a=o>>3;a--;r+=8)t=(t=(t=(t=(t=(t=(t=(t=t>>>8^i[255&(t^e[r])])>>>8^i[255&(t^e[r+1])])>>>8^i[255&(t^e[r+2])])>>>8^i[255&(t^e[r+3])])>>>8^i[255&(t^e[r+4])])>>>8^i[255&(t^e[r+5])])>>>8^i[255&(t^e[r+6])])>>>8^i[255&(t^e[r+7])];return(4294967295^t)>>>0},wn.CRC32.single=function(e,t){return(wn.CRC32.Table[255&(e^t)]^e>>>8)>>>0},wn.CRC32.Table_=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],wn.CRC32.Table=new Uint32Array(wn.CRC32.Table_),wn.Deflate=function(e,t){this.input=e,this.output=new Uint8Array(wn.Deflate.DefaultBufferSize),this.compressionType=wn.Deflate.CompressionType.DYNAMIC,this.rawDeflate;var r,n={};for(r in!t&&(t={})||"number"==typeof t.compressionType&&(this.compressionType=t.compressionType),t)n[r]=t[r];n.outputBuffer=this.output,this.rawDeflate=new wn.RawDeflate(this.input,n)},wn.Deflate.DefaultBufferSize=32768,wn.Deflate.CompressionType=wn.RawDeflate.CompressionType,wn.Deflate.compress=function(e,t){return new wn.Deflate(e,t).compress()},wn.Deflate.prototype.compress=function(){var e,t,r,n,i,a,o,s=0;switch(o=this.output,e=wn.CompressionMethod.DEFLATE){case wn.CompressionMethod.DEFLATE:t=Math.LOG2E*Math.log(wn.RawDeflate.WindowSize)-8;break;default:throw new Error("invalid compression method")}switch(r=t<<4|e,o[s++]=r,0,e){case wn.CompressionMethod.DEFLATE:switch(this.compressionType){case wn.Deflate.CompressionType.NONE:i=0;break;case wn.Deflate.CompressionType.FIXED:i=1;break;case wn.Deflate.CompressionType.DYNAMIC:i=2;break;default:throw new Error("unsupported compression type")}break;default:throw new Error("invalid compression method")}return n=i<<6|0,n|=31-(256*r+n)%31,o[s++]=n,a=wn.Adler32(this.input),this.rawDeflate.op=s,s=(o=this.rawDeflate.compress()).length,(o=new Uint8Array(o.buffer)).length<=s+4&&(this.output=new Uint8Array(o.length+4),this.output.set(o),o=this.output),(o=o.subarray(0,s+4))[s++]=a>>24&255,o[s++]=a>>16&255,o[s++]=a>>8&255,o[s++]=255&a,o},xn="undefined"==typeof btoa?Pr:btoa;const Cn=function(e){return e.split(/\n|\r\n|\r/g)};function Rn(e,t){var r,n,i=[],a=e.length,o=0,s=!1;if(a>0)for(i[o]=e.charAt(0),r=1;r<a;r++)'"'===(n=e.charAt(r))?s=!s:s||n!==t?i[o]+=n:i[++o]="";return i}function En(e){return e.includes("googleapis")&&!e.includes("urlshortener")||An(e)||Tn(e)}function An(e){return e.startsWith("gs://")||e.startsWith("https://www.googleapis.com/storage")||e.startsWith("https://storage.cloud.google.com")||e.startsWith("https://storage.googleapis.com")}function Tn(e){return e.indexOf("drive.google.com")>=0||e.indexOf("www.googleapis.com/drive")>0}function In(e){var t,r,n,i,a,o;return t=e.indexOf("/",5),i=e.indexOf("?"),t<0?(console.log("Invalid gs url: "+e),e):(r=e.substring(5,t),a=i<0?e.substring(t+1):e.substring(t+1,i),n=encodeURIComponent(a),i>0&&(o=e.substring(i)),"https://www.googleapis.com/storage/v1/b/"+r+"/o/"+n+(o?o+"&alt=media":"?alt=media"))}function Ln(e){var t=Mn(e);return t?"https://www.googleapis.com/drive/v3/files/"+t+"?alt=media&supportsTeamDrives=true":e}function Mn(e){var t,r;if(e.includes("/open?id=")){if(t=e.indexOf("/open?id=")+9,r=e.indexOf("&"),t>0&&r>t)return e.substring(t,r);if(t>0)return e.substring(t)}else if(e.includes("/file/d/"))return t=e.indexOf("/file/d/")+8,r=e.lastIndexOf("/"),e.substring(t,r)}async function Fn(e){if(Dn())return void console.warn("oAuth has already been initialized");gapi.apiKey=e.apiKey;const t=Object.assign({},e);return t.scope||(t.scope="profile"),e.client_id||(e.client_id=e.clientId),await async function(e){return new Promise((function(t,r){gapi.load(e,{callback:t,onerror:r})}))}("auth2"),new Promise((function(e,r){gapi.auth2.init(t).then(e,r)}))}function Dn(){return"undefined"!=typeof gapi&&gapi.auth2&&gapi.auth2.getAuthInstance()}let On=!1;async function Bn(e){if("undefined"==typeof gapi)throw Error("Google authentication requires the 'gapi' library");if(!gapi.auth2)throw Error("Google 'auth2' has not been initialized");if(On)return new Promise((function(t,r){let n;n=setInterval((()=>{try{!1===On&&(t(Bn(e)),clearInterval(n))}catch(e){clearInterval(n),r(e)}}),100)}));On=!0;try{let t,r=gapi.auth2.getAuthInstance().currentUser.get();if(r.isSignedIn()){r.hasGrantedScopes(e)||await r.grant({scope:e});const{access_token:n,expires_at:i}=r.getAuthResponse();if(Date.now()<i-3e5)t={access_token:n,expires_at:i};else{const{access_token:e,expires_at:n}=r.reloadAuthResponse();t={access_token:e,expires_at:n}}}else{r=await async function(e){const t=new gapi.auth2.SigninOptionsBuilder;return t.setPrompt("select_account"),t.setScope(e),gapi.auth2.getAuthInstance().signIn(t)}(e);const{access_token:n,expires_at:i}=r.getAuthResponse();t={access_token:n,expires_at:i}}return t}finally{On=!1}}function Nn(e){return Tn(e)?"https://www.googleapis.com/auth/drive.file":An(e)?"https://www.googleapis.com/auth/devstorage.read_only":"https://www.googleapis.com/auth/userinfo.profile"}function Pn(){return gapi.apiKey}async function zn(e){let t="https://www.googleapis.com/drive/v3/files/"+Mn(e)+"?supportsTeamDrives=true";const r=Pn();r&&(t+="&key="+r);const n=await fetch(t);let i=await n.json();if(i.error&&404===i.error.code){const{access_token:e}=await Bn("https://www.googleapis.com/auth/drive.readonly");if(!e)throw Error(i.error);{const r=await fetch(t,{headers:{Authorization:`Bearer ${e}`}});if(i=await r.json(),i.error)throw Error(i.error)}}return i}function Un(e){const t=e.split(","),r=t[0].split(":")[1];let n=t[1];n=r.indexOf("base64")>=0?atob(n):decodeURI(n);const i=new Uint8Array(n.length);for(let e=0;e<n.length;e++)i[e]=n.charCodeAt(e);let a;if(r.indexOf("gzip")>0){a=new wn.Gunzip(i).decompress()}else a=i;return a}function Hn(e){for(var t=jn,r=t.parser.loose.exec(e),n={},i=14;i--;)n[t.key[i]]=r[i]||"";return n[t.q.name]={},n[t.key[12]].replace(t.q.parser,(function(e,r,i){r&&(n[t.q.name][r]=i)})),n}"object"==typeof process&&"undefined"==typeof window&&(global.atob=function(e){return Buffer.from(e,"base64").toString("binary")});const jn={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};async function qn(e){return"function"==typeof e?e():e}function Vn(e){if(e instanceof File)return e.name;if(Sn(e)){let t=e.lastIndexOf("/"),r=t<0?e:e.substr(t+1);return t=r.indexOf("?"),t>0&&(r=r.substr(0,t)),r}throw Error("Expected File or string, got "+typeof e)}function Wn(e){return e instanceof File}function Gn(e,t){const r=document.createElement("a");r.setAttribute("href",t),r.setAttribute("download",e),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}const $n={gwascatalog:{fields:["bin","chr","start","end","name","pubMedID","author","pubDate","journal","title","trait","initSample","replSample","region","genes","riskAllele","riskAlFreq","pValue","pValueDesc","orOrBeta","ci95","platform","cnv"]},wgrna:{fields:["bin","chr","start","end","name","score","strand","thickStart","thickEnd","type"]},cpgislandext:{fields:["bin","chr","start","end","name","length","cpgNum","gcNum","perCpg","perGc","obsExp"]},clinVarMain:{fields:["chr1","start","end","name","score","strand","thickStart","thickEnd","reserved","blockCount","blockSizes","chromStarts","origName","clinSign","reviewStatus","type","geneId","snpId","nsvId","rcvAcc","testedInGtr","phenotypeList","phenotype","origin","assembly","cytogenetic","hgvsCod","hgvsProt","numSubmit","lastEval","guidelines","otherIds"]}},Zn=new Set(["narrowpeak","broadpeak","regionpeak","peaks","bedgraph","wig","gff3","gff","gtf","fusionjuncspan","refflat","seg","aed","bed","vcf","bb","bigbed","bw","bigwig","bam","tdf","refgene","genepred","genepredext","bedpe","bp","snp","rmsk","cram","gwas"]);function Yn(e){var t,r;if((e=e.toLowerCase()).endsWith("refgene.txt.gz")||e.endsWith("refgene.txt.bgz")||e.endsWith("refgene.txt")||e.endsWith("refgene.sorted.txt.gz")||e.endsWith("refgene.sorted.txt.bgz"))return"refgene";switch((t=e.indexOf("?"))>0&&(e=e.substr(0,t)),e.endsWith(".gz")&&(e=e.substr(0,e.length-3)),(e.endsWith(".txt")||e.endsWith(".tab")||e.endsWith(".bgz"))&&(e=e.substr(0,e.length-4)),r=(t=e.lastIndexOf("."))<0?e:e.substr(t+1)){case"bw":return"bigwig";case"bb":return"bigbed";default:return Zn.has(r)?r:void 0}}const Xn=function(e,t){if(0!==e.length){var r=Math.floor(e.length*((100-t)/100));return 0===r?(e.sort((function(e,t){return t-e})),e[r]):function(e,t){var r,n=new Jn;for(r=0;r<e.length;r++){var i=e[r];if(n.content.length<t||i>n.content[0]){if(n.content.length===t)n.pop();n.push(i)}}return n.content[0]}(e,r)}},Kn=function(e,t,r){return Math.min(Math.max(e,t),r)},Qn=function(e){return Math.log(e)/Math.LN2};function Jn(){this.content=[]}Jn.prototype={push:function(e){this.content.push(e),this.bubbleUp(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.sinkDown(0)),e},remove:function(e){for(var t=this.content.length,r=0;r<t;r++)if(this.content[r]===e){var n=this.content.pop();if(r===t-1)break;this.content[r]=n,this.bubbleUp(r),this.sinkDown(r);break}},size:function(){return this.content.length},bubbleUp:function(e){for(var t=this.content[e],r=t;e>0;){var n=Math.floor((e+1)/2)-1,i=this.content[n];if(r>=i)break;this.content[n]=t,this.content[e]=i,e=n}},sinkDown:function(e){for(var t=this.content.length,r=this.content[e],n=r;;){var i=2*(e+1),a=i-1,o=null;if(a<t){var s=this.content[a],c=s;s<n&&(o=a)}if(i<t)this.content[i]<(null==o?n:c)&&(o=i);if(null==o)break;this.content[e]=this.content[o],this.content[o]=r,e=o}}};const ei={rgbListFromHSV:()=>{let e=[];for(let t=1;t>=.5;t-=.1)for(let r=0;r<1;r+=1/28){const n="rgb("+ei.hsvToRgb(r,1,t).join(",")+")";e.push(n)}return e.pop(),e.push(ei.rgbColor(16,16,16)),e},rgbToHex:function(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""},hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(null!==t)return"rgb("+parseInt(t[1],16)+","+parseInt(t[2],16)+","+parseInt(t[3],16)+")"},hsvToRgb:function(e,t,r){var n,i,a,o=Math.floor(6*e),s=6*e-o,c=r*(1-t),u=r*(1-s*t),h=r*(1-(1-s)*t);switch(o%6){case 0:n=r,i=h,a=c;break;case 1:n=u,i=r,a=c;break;case 2:n=c,i=r,a=h;break;case 3:n=c,i=u,a=r;break;case 4:n=h,i=c,a=r;break;case 5:n=r,i=c,a=u}return[Math.floor(255*n),Math.floor(255*i),Math.floor(255*a)]},hslToRgb:function(e,t,r){var n,i,a;if(0===t)n=i=a=r;else{var o=r<.5?r*(1+t):r+t-r*t,s=2*r-o;n=ei.hue2rgb(s,o,e+1/3),i=ei.hue2rgb(s,o,e),a=ei.hue2rgb(s,o,e-1/3)}return[255*n,255*i,255*a]},hue2rgb:(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e),rgbaColor:function(e,t,r,n){return"rgba("+(e=Kn(e,0,255))+","+(t=Kn(t,0,255))+","+(r=Kn(r,0,255))+","+(n=Kn(n,0,1))+")"},rgbColor:function(e,t,r){return"rgb("+(e=Kn(e,0,255))+","+(t=Kn(t,0,255))+","+(r=Kn(r,0,255))+")"},greyScale:function(e){var t=Kn(e,0,255);return"rgb("+t+","+t+","+t+")"},randomGrey:function(e,t){e=Kn(e,0,255),t=Kn(t,0,255);var r=Math.round(Math.random(e,t)).toString(10);return"rgb("+r+","+r+","+r+")"},randomRGB:function(e,t){return e=Kn(e,0,255),t=Kn(t,0,255),"rgb("+Math.round(Math.random(e,t)).toString(10)+","+Math.round(Math.random(e,t)).toString(10)+","+Math.round(Math.random(e,t)).toString(10)+")"},randomRGBConstantAlpha:function(e,t,r){return e=Kn(e,0,255),t=Kn(t,0,255),"rgba("+Math.round(Math.random(e,t)).toString(10)+","+Math.round(Math.random(e,t)).toString(10)+","+Math.round(Math.random(e,t)).toString(10)+","+r+")"},addAlpha:function(e,t){if("0"===e||"."===e)e="rgb(0,0,0)";else{const t=this.colorNameToHex(e);t&&(e=t)}var r=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e);if(e.startsWith("rgba")){const r=e.lastIndexOf(",");return e.substring(0,r+1)+t.toString()+")"}return r&&(e=ei.hexToRgb(e)),e.startsWith("rgb")?e.replace("rgb","rgba").replace(")",", "+t+")"):(console.log(e+" is not an rgb style string"),e)},getCompositeColor:function(e,t,r){return"rgb("+Math.floor(r*t[0]+(1-r)*e[0])+","+Math.floor(r*t[1]+(1-r)*e[1])+","+Math.floor(r*t[2]+(1-r)*e[2])+")"},createColorString:function(e){return(e=function(e){return void 0===e||((e.startsWith("'")||e.startsWith('"'))&&(e=e.substring(1)),(e.endsWith("'")||e.endsWith('"'))&&(e=e.substring(0,e.length-1))),e}(e)).includes(",")?e.startsWith("rgb")?e:"rgb("+e+")":e},darkenLighten:function(e,t){let r,n=this.colorNameToHex(e);r=n?ei.hexToRgb(n):e.startsWith("rgb(")?e:ei.hexToRgb(e);const i=r.replace(")","").substring(4).split(","),a=Math.max(0,Math.min(255,Number.parseInt(i[0].trim())+t)),o=Math.max(0,Math.min(255,Number.parseInt(i[1].trim())+t)),s=Math.max(0,Math.min(255,Number.parseInt(i[2].trim())+t));return"rgb("+a.toString()+","+o.toString()+","+s.toString()+")"},colorNameToHex:function(e){return{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",darkgrey:"#a9a9a9",darkslategrey:"#2f4f4f",dimgrey:"#696969",grey:"#808080",lightgray:"#d3d3d3",lightslategrey:"#778899",slategrey:"#708090"}[e]}};let ti;function ri(e,t){t.addEventListener("mousedown",ni.bind(e))}function ni(e){e.stopPropagation(),e.preventDefault();!function(e){if(!e.getClientRects().length)return{top:0,left:0};const t=e.getBoundingClientRect(),r=e.ownerDocument.defaultView;t.top,r.pageYOffset,t.left,r.pageXOffset}(this);const t=ii.bind(this),r=ai.bind(this),n=getComputedStyle(this),i=parseInt(n.top.replace("px","")),a=parseInt(n.left.replace("px",""));ti={dragFunction:t,dragEndFunction:r,screenX:e.screenX,screenY:e.screenY,top:i,left:a},document.addEventListener("mousemove",t),document.addEventListener("mouseup",r),document.addEventListener("mouseleave",r),document.addEventListener("mouseexit",r)}function ii(e){if(!ti)return void console.log("No drag data!");e.stopPropagation(),e.preventDefault();const t=e.screenX-ti.screenX,r=e.screenY-ti.screenY;this.style.left=`${ti.left+t}px`,this.style.top=`${ti.top+r}px`}function ai(e){if(!ti)return void console.log("No drag data!");e.stopPropagation(),e.preventDefault();const t=ti.dragFunction,r=ti.dragEndFunction;document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",r),document.removeEventListener("mouseleave",r),document.removeEventListener("mouseexit",r),ti=void 0}var oi,si=Object.keys||function(e){return me(e,be)},ci=a?Object.defineProperties:function(e,t){R(e);for(var r,n=si(t),i=n.length,a=0;i>a;)A.f(e,r=n[a++],t[r]);return e},ui=ae("document","documentElement"),hi=W("IE_PROTO"),li=function(){},fi=function(e){return"<script>"+e+"</"+"script>"},pi=function(){try{oi=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;pi=oi?function(e){e.write(fi("")),e.close();var t=e.parentWindow.Object;return e=null,t}(oi):((t=x("iframe")).style.display="none",ui.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(fi("document.F=Object")),e.close(),e.F);for(var r=be.length;r--;)delete pi.prototype[be[r]];return pi()};G[hi]=!0;var di=Object.create||function(e,t){var r;return null!==e?(li.prototype=R(e),r=new li,li.prototype=null,r[hi]=e):r=pi(),void 0===t?r:ci(r,t)},gi=we.f,vi={}.toString,mi="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],bi={f:function(e){return mi&&"[object Window]"==vi.call(e)?function(e){try{return gi(e)}catch(e){return mi.slice()}}(e):gi(g(e))}},yi={f:je},wi=A.f,ki=function(e){var t=ne.Symbol||(ne.Symbol={});y(t,e)||wi(t,e,{value:yi.f(e)})},xi=A.f,Si=je("toStringTag"),_i=function(e,t,r){e&&!y(e=r?e:e.prototype,Si)&&xi(e,Si,{configurable:!0,value:t})},Ci=$e.forEach,Ri=W("hidden"),Ei="Symbol",Ai=je("toPrimitive"),Ti=te.set,Ii=te.getterFor(Ei),Li=Object.prototype,Mi=n.Symbol,Fi=ae("JSON","stringify"),Di=C.f,Oi=A.f,Bi=bi.f,Ni=c.f,Pi=U("symbols"),zi=U("op-symbols"),Ui=U("string-to-symbol-registry"),Hi=U("symbol-to-string-registry"),ji=U("wks"),qi=n.QObject,Vi=!qi||!qi.prototype||!qi.prototype.findChild,Wi=a&&i((function(){return 7!=di(Oi({},"a",{get:function(){return Oi(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=Di(Li,t);n&&delete Li[t],Oi(e,t,r),n&&e!==Li&&Oi(Li,t,n)}:Oi,Gi=function(e,t){var r=Pi[e]=di(Mi.prototype);return Ti(r,{type:Ei,tag:e,description:t}),a||(r.description=t),r},$i=Pe?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof Mi},Zi=function(e,t,r){e===Li&&Zi(zi,t,r),R(e);var n=m(t,!0);return R(r),y(Pi,n)?(r.enumerable?(y(e,Ri)&&e[Ri][n]&&(e[Ri][n]=!1),r=di(r,{enumerable:u(0,!1)})):(y(e,Ri)||Oi(e,Ri,u(1,{})),e[Ri][n]=!0),Wi(e,n,r)):Oi(e,n,r)},Yi=function(e,t){R(e);var r=g(t),n=si(r).concat(Ji(r));return Ci(n,(function(t){a&&!Xi.call(r,t)||Zi(e,t,r[t])})),e},Xi=function(e){var t=m(e,!0),r=Ni.call(this,t);return!(this===Li&&y(Pi,t)&&!y(zi,t))&&(!(r||!y(this,t)||!y(Pi,t)||y(this,Ri)&&this[Ri][t])||r)},Ki=function(e,t){var r=g(e),n=m(t,!0);if(r!==Li||!y(Pi,n)||y(zi,n)){var i=Di(r,n);return!i||!y(Pi,n)||y(r,Ri)&&r[Ri][n]||(i.enumerable=!0),i}},Qi=function(e){var t=Bi(g(e)),r=[];return Ci(t,(function(e){y(Pi,e)||y(G,e)||r.push(e)})),r},Ji=function(e){var t=e===Li,r=Bi(t?zi:g(e)),n=[];return Ci(r,(function(e){!y(Pi,e)||t&&!y(Li,e)||n.push(Pi[e])})),n};if(Ne||(re((Mi=function(){if(this instanceof Mi)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=q(e),r=function(e){this===Li&&r.call(zi,e),y(this,Ri)&&y(this[Ri],t)&&(this[Ri][t]=!1),Wi(this,t,u(1,e))};return a&&Vi&&Wi(Li,t,{configurable:!0,set:r}),Gi(t,e)}).prototype,"toString",(function(){return Ii(this).tag})),re(Mi,"withoutSetter",(function(e){return Gi(q(e),e)})),c.f=Xi,A.f=Zi,C.f=Ki,we.f=bi.f=Qi,ke.f=Ji,yi.f=function(e){return Gi(je(e),e)},a&&(Oi(Mi.prototype,"description",{configurable:!0,get:function(){return Ii(this).description}}),re(Li,"propertyIsEnumerable",Xi,{unsafe:!0}))),Me({global:!0,wrap:!0,forced:!Ne,sham:!Ne},{Symbol:Mi}),Ci(si(ji),(function(e){ki(e)})),Me({target:Ei,stat:!0,forced:!Ne},{for:function(e){var t=String(e);if(y(Ui,t))return Ui[t];var r=Mi(t);return Ui[t]=r,Hi[r]=t,r},keyFor:function(e){if(!$i(e))throw TypeError(e+" is not a symbol");if(y(Hi,e))return Hi[e]},useSetter:function(){Vi=!0},useSimple:function(){Vi=!1}}),Me({target:"Object",stat:!0,forced:!Ne,sham:!a},{create:function(e,t){return void 0===t?di(e):Yi(di(e),t)},defineProperty:Zi,defineProperties:Yi,getOwnPropertyDescriptor:Ki}),Me({target:"Object",stat:!0,forced:!Ne},{getOwnPropertyNames:Qi,getOwnPropertySymbols:Ji}),Me({target:"Object",stat:!0,forced:i((function(){ke.f(1)}))},{getOwnPropertySymbols:function(e){return ke.f(Oe(e))}}),Fi){var ea=!Ne||i((function(){var e=Mi();return"[null]"!=Fi([e])||"{}"!=Fi({a:e})||"{}"!=Fi(Object(e))}));Me({target:"JSON",stat:!0,forced:ea},{stringify:function(e,t,r){for(var n,i=[e],a=1;arguments.length>a;)i.push(arguments[a++]);if(n=t,(v(t)||void 0!==e)&&!$i(e))return Be(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!$i(t))return t}),i[1]=t,Fi.apply(null,i)}})}Mi.prototype[Ai]||T(Mi.prototype,Ai,Mi.prototype.valueOf),_i(Mi,Ei),G[Ri]=!0;var ta=A.f,ra=n.Symbol;if(a&&"function"==typeof ra&&(!("description"in ra.prototype)||void 0!==ra().description)){var na={},ia=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof ia?new ra(e):void 0===e?ra():ra(e);return""===e&&(na[t]=!0),t};Se(ia,ra);var aa=ia.prototype=ra.prototype;aa.constructor=ia;var oa=aa.toString,sa="Symbol(test)"==String(ra("test")),ca=/^Symbol\((.*)\)[^)]+$/;ta(aa,"description",{configurable:!0,get:function(){var e=v(this)?this.valueOf():this,t=oa.call(e);if(y(na,e))return"";var r=sa?t.slice(7,-1):t.replace(ca,"$1");return""===r?void 0:r}}),Me({global:!0,forced:!0},{Symbol:ia})}ki("iterator");var ua=function(e,t,r){var n=m(t);n in e?A.f(e,n,u(0,r)):e[n]=r},ha=je("isConcatSpreadable"),la=9007199254740991,fa="Maximum allowed index exceeded",pa=Qe>=51||!i((function(){var e=[];return e[ha]=!1,e.concat()[0]!==e})),da=et("concat"),ga=function(e){if(!v(e))return!1;var t=e[ha];return void 0!==t?!!t:Be(e)};Me({target:"Array",proto:!0,forced:!pa||!da},{concat:function(e){var t,r,n,i,a,o=Oe(this),s=Ve(o,0),c=0;for(t=-1,n=arguments.length;t<n;t++)if(ga(a=-1===t?o:arguments[t])){if(c+(i=he(a.length))>la)throw TypeError(fa);for(r=0;r<i;r++,c++)r in a&&ua(s,c,a[r])}else{if(c>=la)throw TypeError(fa);ua(s,c++,a)}return s.length=c,s}});var va=je("unscopables"),ma=Array.prototype;null==ma[va]&&A.f(ma,va,{configurable:!0,value:di(null)});var ba=function(e){ma[va][e]=!0},ya=$e.find,wa="find",ka=!0,xa=it(wa);wa in[]&&Array(1).find((function(){ka=!1})),Me({target:"Array",proto:!0,forced:ka||!xa},{find:function(e){return ya(this,e,arguments.length>1?arguments[1]:void 0)}}),ba(wa);var Sa,_a,Ca,Ra={},Ea=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Aa=W("IE_PROTO"),Ta=Object.prototype,Ia=Ea?Object.getPrototypeOf:function(e){return e=Oe(e),y(e,Aa)?e[Aa]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Ta:null},La=je("iterator"),Ma=!1;[].keys&&("next"in(Ca=[].keys())?(_a=Ia(Ia(Ca)))!==Object.prototype&&(Sa=_a):Ma=!0),null==Sa&&(Sa={}),y(Sa,La)||T(Sa,La,(function(){return this}));var Fa={IteratorPrototype:Sa,BUGGY_SAFARI_ITERATORS:Ma},Da=Fa.IteratorPrototype,Oa=function(){return this},Ba=function(e,t,r){var n=t+" Iterator";return e.prototype=di(Da,{next:u(1,r)}),_i(e,n,!1),Ra[n]=Oa,e},Na=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return R(r),function(e){if(!v(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(n),t?e.call(r,n):r.__proto__=n,r}}():void 0),Pa=Fa.IteratorPrototype,za=Fa.BUGGY_SAFARI_ITERATORS,Ua=je("iterator"),Ha="keys",ja="values",qa="entries",Va=function(){return this},Wa=function(e,t,r,n,i,a,o){Ba(r,t,n);var s,c,u,h=function(e){if(e===i&&g)return g;if(!za&&e in p)return p[e];switch(e){case Ha:case ja:case qa:return function(){return new r(this,e)}}return function(){return new r(this)}},l=t+" Iterator",f=!1,p=e.prototype,d=p[Ua]||p["@@iterator"]||i&&p[i],g=!za&&d||h(i),v="Array"==t&&p.entries||d;if(v&&(s=Ia(v.call(new e)),Pa!==Object.prototype&&s.next&&(Ia(s)!==Pa&&(Na?Na(s,Pa):"function"!=typeof s[Ua]&&T(s,Ua,Va)),_i(s,l,!0))),i==ja&&d&&d.name!==ja&&(f=!0,g=function(){return d.call(this)}),p[Ua]!==g&&T(p,Ua,g),Ra[t]=g,i)if(c={values:h(ja),keys:a?g:h(Ha),entries:h(qa)},o)for(u in c)(za||f||!(u in p))&&re(p,u,c[u]);else Me({target:t,proto:!0,forced:za||f},c);return c},Ga="Array Iterator",$a=te.set,Za=te.getterFor(Ga),Ya=Wa(Array,"Array",(function(e,t){$a(this,{type:Ga,target:g(e),index:0,kind:t})}),(function(){var e=Za(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values");Ra.Arguments=Ra.Array,ba("keys"),ba("values"),ba("entries");var Xa=[].join,Ka=p!=Object,Qa=ct("join",",");Me({target:"Array",proto:!0,forced:Ka||!Qa},{join:function(e){return Xa.call(g(this),void 0===e?",":e)}});var Ja=$e.map,eo=et("map"),to=it("map");Me({target:"Array",proto:!0,forced:!eo||!to},{map:function(e){return Ja(this,e,arguments.length>1?arguments[1]:void 0)}});var ro=et("slice"),no=it("slice",{ACCESSORS:!0,0:0,1:2}),io=je("species"),ao=[].slice,oo=Math.max;Me({target:"Array",proto:!0,forced:!ro||!no},{slice:function(e,t){var r,n,i,a=g(this),o=he(a.length),s=pe(e,o),c=pe(void 0===t?o:t,o);if(Be(a)&&("function"!=typeof(r=a.constructor)||r!==Array&&!Be(r.prototype)?v(r)&&null===(r=r[io])&&(r=void 0):r=void 0,r===Array||void 0===r))return ao.call(a,s,c);for(n=new(void 0===r?Array:r)(oo(c-s,0)),i=0;s<c;s++,i++)s in a&&ua(n,i,a[s]);return n.length=i,n}});var so=et("splice"),co=it("splice",{ACCESSORS:!0,0:0,1:2}),uo=Math.max,ho=Math.min,lo=9007199254740991,fo="Maximum allowed length exceeded";Me({target:"Array",proto:!0,forced:!so||!co},{splice:function(e,t){var r,n,i,a,o,s,c=Oe(this),u=he(c.length),h=pe(e,u),l=arguments.length;if(0===l?r=n=0:1===l?(r=0,n=u-h):(r=l-2,n=ho(uo(ce(t),0),u-h)),u+r-n>lo)throw TypeError(fo);for(i=Ve(c,n),a=0;a<n;a++)(o=h+a)in c&&ua(i,a,c[o]);if(i.length=n,r<n){for(a=h;a<u-n;a++)s=a+r,(o=a+n)in c?c[s]=c[o]:delete c[s];for(a=u;a>u-n+r;a--)delete c[a-1]}else if(r>n)for(a=u-n;a>h;a--)s=a+r-1,(o=a+n-1)in c?c[s]=c[o]:delete c[s];for(a=0;a<r;a++)c[a+h]=arguments[a+2];return c.length=u-n+r,i}});var po=A.f,go=Function.prototype,vo=go.toString,mo=/^\s*function ([^ (]*)/,bo="name";a&&!(bo in go)&&po(go,bo,{configurable:!0,get:function(){try{return vo.call(this).match(mo)[1]}catch(e){return""}}});var yo=i((function(){Ia(1)}));Me({target:"Object",stat:!0,forced:yo,sham:!Ea},{getPrototypeOf:function(e){return Ia(Oe(e))}});var wo={};wo[je("toStringTag")]="z";var ko="[object z]"===String(wo),xo=je("toStringTag"),So="Arguments"==l(function(){return arguments}()),_o=ko?l:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),xo))?r:So?l(t):"Object"==(n=l(t))&&"function"==typeof t.callee?"Arguments":n},Co=ko?{}.toString:function(){return"[object "+_o(this)+"]"};ko||re(Object.prototype,"toString",Co,{unsafe:!0});var Ro=function(e,t,r){var n,i;return Na&&"function"==typeof(n=t.constructor)&&n!==r&&v(i=n.prototype)&&i!==r.prototype&&Na(e,i),e},Eo=je("species"),Ao=function(e){var t=ae(e),r=A.f;a&&t&&!t[Eo]&&r(t,Eo,{configurable:!0,get:function(){return this}})},To=A.f,Io=we.f,Lo=te.set,Mo=je("match"),Fo=n.RegExp,Do=Fo.prototype,Oo=/a/g,Bo=/a/g,No=new Fo(Oo)!==Oo,Po=Rt.UNSUPPORTED_Y;if(a&&Ie("RegExp",!No||Po||i((function(){return Bo[Mo]=!1,Fo(Oo)!=Oo||Fo(Bo)==Bo||"/a/i"!=Fo(Oo,"i")})))){for(var zo=function(e,t){var r,n=this instanceof zo,i=Bt(e),a=void 0===t;if(!n&&i&&e.constructor===zo&&a)return e;No?i&&!a&&(e=e.source):e instanceof zo&&(a&&(t=_t.call(e)),e=e.source),Po&&(r=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var o=Ro(No?new Fo(e,t):Fo(e,t),n?this:Do,zo);return Po&&r&&Lo(o,{sticky:r}),o},Uo=function(e){e in zo||To(zo,e,{configurable:!0,get:function(){return Fo[e]},set:function(t){Fo[e]=t}})},Ho=Io(Fo),jo=0;Ho.length>jo;)Uo(Ho[jo++]);Do.constructor=zo,zo.prototype=Do,re(n,"RegExp",zo)}Ao("RegExp");var qo="toString",Vo=RegExp.prototype,Wo=Vo.toString,Go=i((function(){return"/a/b"!=Wo.call({source:"a",flags:"b"})})),$o=Wo.name!=qo;(Go||$o)&&re(RegExp.prototype,qo,(function(){var e=R(this),t=String(e.source),r=e.flags;return"/"+t+"/"+String(void 0===r&&e instanceof RegExp&&!("flags"in Vo)?_t.call(e):r)}),{unsafe:!0});var Zo=nr.charAt,Yo="String Iterator",Xo=te.set,Ko=te.getterFor(Yo);Wa(String,"String",(function(e){Xo(this,{type:Yo,string:String(e),index:0})}),(function(){var e,t=Ko(this),r=t.string,n=t.index;return n>=r.length?{value:void 0,done:!0}:(e=Zo(r,n),t.index+=e.length,{value:e,done:!1})})),Kt("match",1,(function(e,t,r){return[function(t){var r=d(this),n=null==t?void 0:t[e];return void 0!==n?n.call(t,r):new RegExp(t)[e](String(r))},function(e){var n=r(t,e,this);if(n.done)return n.value;var i=R(e),a=String(this);if(!i.global)return Jt(i,a);var o=i.unicode;i.lastIndex=0;for(var s,c=[],u=0;null!==(s=Jt(i,a));){var h=String(s[0]);c[u]=h,""===h&&(i.lastIndex=ar(a,he(i.lastIndex),o)),u++}return 0===u?null:c}]}));var Qo=Math.max,Jo=Math.min,es=Math.floor,ts=/\$([$&'`]|\d\d?|<[^>]*>)/g,rs=/\$([$&'`]|\d\d?)/g;Kt("replace",2,(function(e,t,r,n){var i=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,a=n.REPLACE_KEEPS_$0,o=i?"$":"$0";return[function(r,n){var i=d(this),a=null==r?void 0:r[e];return void 0!==a?a.call(r,i,n):t.call(String(i),r,n)},function(e,n){if(!i&&a||"string"==typeof n&&-1===n.indexOf(o)){var c=r(t,e,this,n);if(c.done)return c.value}var u=R(e),h=String(this),l="function"==typeof n;l||(n=String(n));var f=u.global;if(f){var p=u.unicode;u.lastIndex=0}for(var d=[];;){var g=Jt(u,h);if(null===g)break;if(d.push(g),!f)break;""===String(g[0])&&(u.lastIndex=ar(h,he(u.lastIndex),p))}for(var v,m="",b=0,y=0;y<d.length;y++){g=d[y];for(var w=String(g[0]),k=Qo(Jo(ce(g.index),h.length),0),x=[],S=1;S<g.length;S++)x.push(void 0===(v=g[S])?v:String(v));var _=g.groups;if(l){var C=[w].concat(x,k,h);void 0!==_&&C.push(_);var E=String(n.apply(void 0,C))}else E=s(w,h,k,x,_,n);k>=b&&(m+=h.slice(b,k)+E,b=k+w.length)}return m+h.slice(b)}];function s(e,r,n,i,a,o){var s=n+e.length,c=i.length,u=rs;return void 0!==a&&(a=Oe(a),u=ts),t.call(o,u,(function(t,o){var u;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return r.slice(0,n);case"'":return r.slice(s);case"<":u=a[o.slice(1,-1)];break;default:var h=+o;if(0===h)return t;if(h>c){var l=es(h/10);return 0===l?t:l<=c?void 0===i[l-1]?o.charAt(1):i[l-1]+o.charAt(1):t}u=i[h-1]}return void 0===u?"":u}))}}));var ns=je("iterator"),is=je("toStringTag"),as=Ya.values;for(var os in hr){var ss=n[os],cs=ss&&ss.prototype;if(cs){if(cs[ns]!==as)try{T(cs,ns,as)}catch(e){cs[ns]=as}if(cs[is]||T(cs,is,os),hr[os])for(var us in Ya)if(cs[us]!==Ya[us])try{T(cs,us,Ya[us])}catch(e){cs[us]=Ya[us]}}}
/*!
	 * jQuery JavaScript Library v3.3.1 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseXML,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-event/ajax,-effects,-effects/Tween,-effects/animatedSelector
	 * https://jquery.com/
	 *
	 * Includes Sizzle.js
	 * https://sizzlejs.com/
	 *
	 * Copyright JS Foundation and other contributors
	 * Released under the MIT license
	 * https://jquery.org/license
	 *
	 * Date: 2018-01-20T17:24Z
	 */var hs=[],ls=window.document,fs=Object.getPrototypeOf,ps=hs.slice,ds=hs.concat,gs=hs.push,vs=hs.indexOf,ms={},bs=ms.toString,ys=ms.hasOwnProperty,ws=ys.toString,ks=ws.call(Object),xs={},Ss=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},_s=function(e){return null!=e&&e===e.window},Cs={type:!0,src:!0,noModule:!0};function Rs(e,t,r){var n,i=(t=t||ls).createElement("script");if(i.text=e,r)for(n in Cs)r[n]&&(i[n]=r[n]);t.head.appendChild(i).parentNode.removeChild(i)}function Es(e){return null==e?e+"":"object"===dr(e)||"function"==typeof e?ms[bs.call(e)]||"object":dr(e)}var As="3.3.1 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseXML,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-event/ajax,-effects,-effects/Tween,-effects/animatedSelector",Ts=function e(t,r){return new e.fn.init(t,r)},Is=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function Ls(e){var t=!!e&&"length"in e&&e.length,r=Es(e);return!Ss(e)&&!_s(e)&&("array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}Ts.fn=Ts.prototype={jquery:As,constructor:Ts,length:0,toArray:function(){return ps.call(this)},get:function(e){return null==e?ps.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=Ts.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return Ts.each(this,e)},map:function(e){return this.pushStack(Ts.map(this,(function(t,r){return e.call(t,r,t)})))},slice:function(){return this.pushStack(ps.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:gs,sort:hs.sort,splice:hs.splice},Ts.extend=Ts.fn.extend=function(){var e,t,r,n,i,a,o=arguments[0]||{},s=1,c=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[s]||{},s++),"object"===dr(o)||Ss(o)||(o={}),s===c&&(o=this,s--);s<c;s++)if(null!=(e=arguments[s]))for(t in e)r=o[t],o!==(n=e[t])&&(u&&n&&(Ts.isPlainObject(n)||(i=Array.isArray(n)))?(i?(i=!1,a=r&&Array.isArray(r)?r:[]):a=r&&Ts.isPlainObject(r)?r:{},o[t]=Ts.extend(u,a,n)):void 0!==n&&(o[t]=n));return o},Ts.extend({expando:"jQuery"+(As+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,r;return!(!e||"[object Object]"!==bs.call(e))&&(!(t=fs(e))||"function"==typeof(r=ys.call(t,"constructor")&&t.constructor)&&ws.call(r)===ks)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){Rs(e)},each:function(e,t){var r,n=0;if(Ls(e))for(r=e.length;n<r&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(Is,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(Ls(Object(e))?Ts.merge(r,"string"==typeof e?[e]:e):gs.call(r,e)),r},inArray:function(e,t,r){return null==t?-1:vs.call(t,e,r)},merge:function(e,t){for(var r=+t.length,n=0,i=e.length;n<r;n++)e[i++]=t[n];return e.length=i,e},grep:function(e,t,r){for(var n=[],i=0,a=e.length,o=!r;i<a;i++)!t(e[i],i)!==o&&n.push(e[i]);return n},map:function(e,t,r){var n,i,a=0,o=[];if(Ls(e))for(n=e.length;a<n;a++)null!=(i=t(e[a],a,r))&&o.push(i);else for(a in e)null!=(i=t(e[a],a,r))&&o.push(i);return ds.apply([],o)},guid:1,support:xs}),"function"==typeof Symbol&&(Ts.fn[Symbol.iterator]=hs[Symbol.iterator]),Ts.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){ms["[object "+t+"]"]=t.toLowerCase()}));var Ms=
/*!
	* Sizzle CSS Selector Engine v2.3.3
	* https://sizzlejs.com/
	*
	* Copyright jQuery Foundation and other contributors
	* Released under the MIT license
	* http://jquery.org/license
	*
	* Date: 2016-08-08
	*/
function(e){var t,r,n,i,a,o,s,c,u,h,l,f,p,d,g,v,m,b,y,w="sizzle"+1*new Date,k=e.document,x=0,S=0,_=oe(),C=oe(),R=oe(),E=function(e,t){return e===t&&(l=!0),0},A={}.hasOwnProperty,T=[],I=T.pop,L=T.push,M=T.push,F=T.slice,D=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",P="\\[[\\x20\\t\\r\\n\\f]*("+N+")(?:"+B+"*([*^$|!~]?=)"+B+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+B+"*\\]",z=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",U=new RegExp(B+"+","g"),H=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),j=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),q=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),V=new RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),W=new RegExp(z),G=new RegExp("^"+N+"$"),$={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N+"|[*])"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+O+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Z=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,J=new RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),ee=function(e,t,r){var n="0x"+t-65536;return n!=n||r?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,re=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ne=function(){f()},ie=me((function(e){return!0===e.disabled&&("form"in e||"label"in e)}),{dir:"parentNode",next:"legend"});try{M.apply(T=F.call(k.childNodes),k.childNodes),T[k.childNodes.length].nodeType}catch(e){M={apply:T.length?function(e,t){L.apply(e,F.call(t))}:function(e,t){for(var r=e.length,n=0;e[r++]=t[n++];);e.length=r-1}}}function ae(e,t,n,i){var a,s,u,h,l,d,m,b=t&&t.ownerDocument,x=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==x&&9!==x&&11!==x)return n;if(!i&&((t?t.ownerDocument||t:k)!==p&&f(t),t=t||p,g)){if(11!==x&&(l=K.exec(e)))if(a=l[1]){if(9===x){if(!(u=t.getElementById(a)))return n;if(u.id===a)return n.push(u),n}else if(b&&(u=b.getElementById(a))&&y(t,u)&&u.id===a)return n.push(u),n}else{if(l[2])return M.apply(n,t.getElementsByTagName(e)),n;if((a=l[3])&&r.getElementsByClassName&&t.getElementsByClassName)return M.apply(n,t.getElementsByClassName(a)),n}if(r.qsa&&!R[e+" "]&&(!v||!v.test(e))){if(1!==x)b=t,m=e;else if("object"!==t.nodeName.toLowerCase()){for((h=t.getAttribute("id"))?h=h.replace(te,re):t.setAttribute("id",h=w),s=(d=o(e)).length;s--;)d[s]="#"+h+" "+ve(d[s]);m=d.join(","),b=Q.test(e)&&de(t.parentNode)||t}if(m)try{return M.apply(n,b.querySelectorAll(m)),n}catch(e){}finally{h===w&&t.removeAttribute("id")}}}return c(e.replace(H,"$1"),t,n,i)}function oe(){var e=[];return function t(r,i){return e.push(r+" ")>n.cacheLength&&delete t[e.shift()],t[r+" "]=i}}function se(e){return e[w]=!0,e}function ce(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){var r=t&&e,n=r&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function he(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function le(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}function fe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function pe(e){return se((function(t){return t=+t,se((function(r,n){for(var i,a=e([],r.length,t),o=a.length;o--;)r[i=a[o]]&&(r[i]=!(n[i]=r[i]))}))}))}function de(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in r=ae.support={},a=ae.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},f=ae.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:k;return o!==p&&9===o.nodeType&&o.documentElement?(d=(p=o).documentElement,g=!a(p),k!==p&&(i=p.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ne,!1):i.attachEvent&&i.attachEvent("onunload",ne)),r.attributes=ce((function(e){return e.className="i",!e.getAttribute("className")})),r.getElementsByTagName=ce((function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length})),r.getElementsByClassName=X.test(p.getElementsByClassName),r.getById=ce((function(e){return d.appendChild(e).id=w,!p.getElementsByName||!p.getElementsByName(w).length})),r.getById?(n.filter.ID=function(e){var t=e.replace(J,ee);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var r=t.getElementById(e);return r?[r]:[]}}):(n.filter.ID=function(e){var t=e.replace(J,ee);return function(e){var r=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var r,n,i,a=t.getElementById(e);if(a){if((r=a.getAttributeNode("id"))&&r.value===e)return[a];for(i=t.getElementsByName(e),n=0;a=i[n++];)if((r=a.getAttributeNode("id"))&&r.value===e)return[a]}return[]}}),n.find.TAG=r.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):r.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,n=[],i=0,a=t.getElementsByTagName(e);if("*"===e){for(;r=a[i++];)1===r.nodeType&&n.push(r);return n}return a},n.find.CLASS=r.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},m=[],v=[],(r.qsa=X.test(p.querySelectorAll))&&(ce((function(e){d.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+O+")"),e.querySelectorAll("[id~="+w+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||v.push(".#.+[+~]")})),ce((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),d.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")}))),(r.matchesSelector=X.test(b=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ce((function(e){r.disconnectedMatch=b.call(e,"*"),b.call(e,"[s!='']:x"),m.push("!=",z)})),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),t=X.test(d.compareDocumentPosition),y=t||X.test(d.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(r.contains?r.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},E=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!r.sortDetached&&t.compareDocumentPosition(e)===n?e===p||e.ownerDocument===k&&y(k,e)?-1:t===p||t.ownerDocument===k&&y(k,t)?1:h?D(h,e)-D(h,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var r,n=0,i=e.parentNode,a=t.parentNode,o=[e],s=[t];if(!i||!a)return e===p?-1:t===p?1:i?-1:a?1:h?D(h,e)-D(h,t):0;if(i===a)return ue(e,t);for(r=e;r=r.parentNode;)o.unshift(r);for(r=t;r=r.parentNode;)s.unshift(r);for(;o[n]===s[n];)n++;return n?ue(o[n],s[n]):o[n]===k?-1:s[n]===k?1:0},p):p},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&f(e),t=t.replace(V,"='$1']"),r.matchesSelector&&g&&!R[t+" "]&&(!m||!m.test(t))&&(!v||!v.test(t)))try{var n=b.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return ae(t,p,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!==p&&f(e),y(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!==p&&f(e);var i=n.attrHandle[t.toLowerCase()],a=i&&A.call(n.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==a?a:r.attributes||!g?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},ae.escape=function(e){return(e+"").replace(te,re)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,n=[],i=0,a=0;if(l=!r.detectDuplicates,h=!r.sortStable&&e.slice(0),e.sort(E),l){for(;t=e[a++];)t===e[a]&&(i=n.push(a));for(;i--;)e.splice(n[i],1)}return h=null,e},i=ae.getText=function(e){var t,r="",n=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=i(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[n++];)r+=i(t);return r},(n=ae.selectors={cacheLength:50,createPseudo:se,match:$,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(J,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(J,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return $.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&W.test(r)&&(t=o(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(J,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=_[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+B+"|$)"))&&_(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,r){return function(n){var i=ae.attr(n,e);return null==i?"!="===t:!t||(i+="","="===t?i===r:"!="===t?i!==r:"^="===t?r&&0===i.indexOf(r):"*="===t?r&&i.indexOf(r)>-1:"$="===t?r&&i.slice(-r.length)===r:"~="===t?(" "+i.replace(U," ")+" ").indexOf(r)>-1:"|="===t&&(i===r||i.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,r,n,i){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===i?function(e){return!!e.parentNode}:function(t,r,c){var u,h,l,f,p,d,g=a!==o?"nextSibling":"previousSibling",v=t.parentNode,m=s&&t.nodeName.toLowerCase(),b=!c&&!s,y=!1;if(v){if(a){for(;g;){for(f=t;f=f[g];)if(s?f.nodeName.toLowerCase()===m:1===f.nodeType)return!1;d=g="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?v.firstChild:v.lastChild],o&&b){for(y=(p=(u=(h=(l=(f=v)[w]||(f[w]={}))[f.uniqueID]||(l[f.uniqueID]={}))[e]||[])[0]===x&&u[1])&&u[2],f=p&&v.childNodes[p];f=++p&&f&&f[g]||(y=p=0)||d.pop();)if(1===f.nodeType&&++y&&f===t){h[e]=[x,p,y];break}}else if(b&&(y=p=(u=(h=(l=(f=t)[w]||(f[w]={}))[f.uniqueID]||(l[f.uniqueID]={}))[e]||[])[0]===x&&u[1]),!1===y)for(;(f=++p&&f&&f[g]||(y=p=0)||d.pop())&&((s?f.nodeName.toLowerCase()!==m:1!==f.nodeType)||!++y||(b&&((h=(l=f[w]||(f[w]={}))[f.uniqueID]||(l[f.uniqueID]={}))[e]=[x,y]),f!==t)););return(y-=i)===n||y%n==0&&y/n>=0}}},PSEUDO:function(e,t){var r,i=n.pseudos[e]||n.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(r=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?se((function(e,r){for(var n,a=i(e,t),o=a.length;o--;)e[n=D(e,a[o])]=!(r[n]=a[o])})):function(e){return i(e,0,r)}):i}},pseudos:{not:se((function(e){var t=[],r=[],n=s(e.replace(H,"$1"));return n[w]?se((function(e,t,r,i){for(var a,o=n(e,null,i,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))})):function(e,i,a){return t[0]=e,n(t,null,a,r),t[0]=null,!r.pop()}})),has:se((function(e){return function(t){return ae(e,t).length>0}})),contains:se((function(e){return e=e.replace(J,ee),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}})),lang:se((function(e){return G.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(J,ee).toLowerCase(),function(t){var r;do{if(r=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:fe(!1),disabled:fe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return Z.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pe((function(){return[0]})),last:pe((function(e,t){return[t-1]})),eq:pe((function(e,t,r){return[r<0?r+t:r]})),even:pe((function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e})),odd:pe((function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e})),lt:pe((function(e,t,r){for(var n=r<0?r+t:r;--n>=0;)e.push(n);return e})),gt:pe((function(e,t,r){for(var n=r<0?r+t:r;++n<t;)e.push(n);return e}))}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=he(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=le(t);function ge(){}function ve(e){for(var t=0,r=e.length,n="";t<r;t++)n+=e[t].value;return n}function me(e,t,r){var n=t.dir,i=t.next,a=i||n,o=r&&"parentNode"===a,s=S++;return t.first?function(t,r,i){for(;t=t[n];)if(1===t.nodeType||o)return e(t,r,i);return!1}:function(t,r,c){var u,h,l,f=[x,s];if(c){for(;t=t[n];)if((1===t.nodeType||o)&&e(t,r,c))return!0}else for(;t=t[n];)if(1===t.nodeType||o)if(h=(l=t[w]||(t[w]={}))[t.uniqueID]||(l[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[n]||t;else{if((u=h[a])&&u[0]===x&&u[1]===s)return f[2]=u[2];if(h[a]=f,f[2]=e(t,r,c))return!0}return!1}}function be(e){return e.length>1?function(t,r,n){for(var i=e.length;i--;)if(!e[i](t,r,n))return!1;return!0}:e[0]}function ye(e,t,r,n,i){for(var a,o=[],s=0,c=e.length,u=null!=t;s<c;s++)(a=e[s])&&(r&&!r(a,n,i)||(o.push(a),u&&t.push(s)));return o}function we(e,t,r,n,i,a){return n&&!n[w]&&(n=we(n)),i&&!i[w]&&(i=we(i,a)),se((function(a,o,s,c){var u,h,l,f=[],p=[],d=o.length,g=a||function(e,t,r){for(var n=0,i=t.length;n<i;n++)ae(e,t[n],r);return r}(t||"*",s.nodeType?[s]:s,[]),v=!e||!a&&t?g:ye(g,f,e,s,c),m=r?i||(a?e:d||n)?[]:o:v;if(r&&r(v,m,s,c),n)for(u=ye(m,p),n(u,[],s,c),h=u.length;h--;)(l=u[h])&&(m[p[h]]=!(v[p[h]]=l));if(a){if(i||e){if(i){for(u=[],h=m.length;h--;)(l=m[h])&&u.push(v[h]=l);i(null,m=[],u,c)}for(h=m.length;h--;)(l=m[h])&&(u=i?D(a,l):f[h])>-1&&(a[u]=!(o[u]=l))}}else m=ye(m===o?m.splice(d,m.length):m),i?i(null,o,m,c):M.apply(o,m)}))}function ke(e){for(var t,r,i,a=e.length,o=n.relative[e[0].type],s=o||n.relative[" "],c=o?1:0,h=me((function(e){return e===t}),s,!0),l=me((function(e){return D(t,e)>-1}),s,!0),f=[function(e,r,n){var i=!o&&(n||r!==u)||((t=r).nodeType?h(e,r,n):l(e,r,n));return t=null,i}];c<a;c++)if(r=n.relative[e[c].type])f=[me(be(f),r)];else{if((r=n.filter[e[c].type].apply(null,e[c].matches))[w]){for(i=++c;i<a&&!n.relative[e[i].type];i++);return we(c>1&&be(f),c>1&&ve(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(H,"$1"),r,c<i&&ke(e.slice(c,i)),i<a&&ke(e=e.slice(i)),i<a&&ve(e))}f.push(r)}return be(f)}return ge.prototype=n.filters=n.pseudos,n.setFilters=new ge,o=ae.tokenize=function(e,t){var r,i,a,o,s,c,u,h=C[e+" "];if(h)return t?0:h.slice(0);for(s=e,c=[],u=n.preFilter;s;){for(o in r&&!(i=j.exec(s))||(i&&(s=s.slice(i[0].length)||s),c.push(a=[])),r=!1,(i=q.exec(s))&&(r=i.shift(),a.push({value:r,type:i[0].replace(H," ")}),s=s.slice(r.length)),n.filter)!(i=$[o].exec(s))||u[o]&&!(i=u[o](i))||(r=i.shift(),a.push({value:r,type:o,matches:i}),s=s.slice(r.length));if(!r)break}return t?s.length:s?ae.error(e):C(e,c).slice(0)},s=ae.compile=function(e,t){var r,i=[],a=[],s=R[e+" "];if(!s){for(t||(t=o(e)),r=t.length;r--;)(s=ke(t[r]))[w]?i.push(s):a.push(s);(s=R(e,function(e,t){var r=t.length>0,i=e.length>0,a=function(a,o,s,c,h){var l,d,v,m=0,b="0",y=a&&[],w=[],k=u,S=a||i&&n.find.TAG("*",h),_=x+=null==k?1:Math.random()||.1,C=S.length;for(h&&(u=o===p||o||h);b!==C&&null!=(l=S[b]);b++){if(i&&l){for(d=0,o||l.ownerDocument===p||(f(l),s=!g);v=e[d++];)if(v(l,o||p,s)){c.push(l);break}h&&(x=_)}r&&((l=!v&&l)&&m--,a&&y.push(l))}if(m+=b,r&&b!==m){for(d=0;v=t[d++];)v(y,w,o,s);if(a){if(m>0)for(;b--;)y[b]||w[b]||(w[b]=I.call(c));w=ye(w)}M.apply(c,w),h&&!a&&w.length>0&&m+t.length>1&&ae.uniqueSort(c)}return h&&(x=_,u=k),y};return r?se(a):a}(a,i))).selector=e}return s},c=ae.select=function(e,t,r,i){var a,c,u,h,l,f="function"==typeof e&&e,p=!i&&o(e=f.selector||e);if(r=r||[],1===p.length){if((c=p[0]=p[0].slice(0)).length>2&&"ID"===(u=c[0]).type&&9===t.nodeType&&g&&n.relative[c[1].type]){if(!(t=(n.find.ID(u.matches[0].replace(J,ee),t)||[])[0]))return r;f&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(a=$.needsContext.test(e)?0:c.length;a--&&(u=c[a],!n.relative[h=u.type]);)if((l=n.find[h])&&(i=l(u.matches[0].replace(J,ee),Q.test(c[0].type)&&de(t.parentNode)||t))){if(c.splice(a,1),!(e=i.length&&ve(c)))return M.apply(r,i),r;break}}return(f||s(e,p))(i,t,!g,r,!t||Q.test(e)&&de(t.parentNode)||t),r},r.sortStable=w.split("").sort(E).join("")===w,r.detectDuplicates=!!l,f(),ae}(window);Ts.find=Ms,(Ts.expr=Ms.selectors)[":"]=Ts.expr.pseudos,Ts.uniqueSort=Ts.unique=Ms.uniqueSort,Ts.text=Ms.getText,Ts.isXMLDoc=Ms.isXML,Ts.contains=Ms.contains,Ts.escapeSelector=Ms.escape;var Fs=function(e,t,r){for(var n=[],i=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&Ts(e).is(r))break;n.push(e)}return n},Ds=function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r},Os=Ts.expr.match.needsContext;function Bs(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var Ns=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Ps(e,t,r){return Ss(t)?Ts.grep(e,(function(e,n){return!!t.call(e,n,e)!==r})):t.nodeType?Ts.grep(e,(function(e){return e===t!==r})):"string"!=typeof t?Ts.grep(e,(function(e){return vs.call(t,e)>-1!==r})):Ts.filter(t,e,r)}Ts.filter=function(e,t,r){var n=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?Ts.find.matchesSelector(n,e)?[n]:[]:Ts.find.matches(e,Ts.grep(t,(function(e){return 1===e.nodeType})))},Ts.fn.extend({find:function(e){var t,r,n=this.length,i=this;if("string"!=typeof e)return this.pushStack(Ts(e).filter((function(){for(t=0;t<n;t++)if(Ts.contains(i[t],this))return!0})));for(r=this.pushStack([]),t=0;t<n;t++)Ts.find(e,i[t],r);return n>1?Ts.uniqueSort(r):r},filter:function(e){return this.pushStack(Ps(this,e||[],!1))},not:function(e){return this.pushStack(Ps(this,e||[],!0))},is:function(e){return!!Ps(this,"string"==typeof e&&Os.test(e)?Ts(e):e||[],!1).length}});var zs,Us=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(Ts.fn.init=function(e,t,r){var n,i;if(!e)return this;if(r=r||zs,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Us.exec(e))||!n[1]&&t)return!t||t.jquery?(t||r).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof Ts?t[0]:t,Ts.merge(this,Ts.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:ls,!0)),Ns.test(n[1])&&Ts.isPlainObject(t))for(n in t)Ss(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(i=ls.getElementById(n[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):Ss(e)?void 0!==r.ready?r.ready(e):e(Ts):Ts.makeArray(e,this)}).prototype=Ts.fn,zs=Ts(ls);var Hs=/^(?:parents|prev(?:Until|All))/,js={children:!0,contents:!0,next:!0,prev:!0};function qs(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}Ts.fn.extend({has:function(e){var t=Ts(e,this),r=t.length;return this.filter((function(){for(var e=0;e<r;e++)if(Ts.contains(this,t[e]))return!0}))},closest:function(e,t){var r,n=0,i=this.length,a=[],o="string"!=typeof e&&Ts(e);if(!Os.test(e))for(;n<i;n++)for(r=this[n];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(o?o.index(r)>-1:1===r.nodeType&&Ts.find.matchesSelector(r,e))){a.push(r);break}return this.pushStack(a.length>1?Ts.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?vs.call(Ts(e),this[0]):vs.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Ts.uniqueSort(Ts.merge(this.get(),Ts(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Ts.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Fs(e,"parentNode")},parentsUntil:function(e,t,r){return Fs(e,"parentNode",r)},next:function(e){return qs(e,"nextSibling")},prev:function(e){return qs(e,"previousSibling")},nextAll:function(e){return Fs(e,"nextSibling")},prevAll:function(e){return Fs(e,"previousSibling")},nextUntil:function(e,t,r){return Fs(e,"nextSibling",r)},prevUntil:function(e,t,r){return Fs(e,"previousSibling",r)},siblings:function(e){return Ds((e.parentNode||{}).firstChild,e)},children:function(e){return Ds(e.firstChild)},contents:function(e){return Bs(e,"iframe")?e.contentDocument:(Bs(e,"template")&&(e=e.content||e),Ts.merge([],e.childNodes))}},(function(e,t){Ts.fn[e]=function(r,n){var i=Ts.map(this,t,r);return"Until"!==e.slice(-5)&&(n=r),n&&"string"==typeof n&&(i=Ts.filter(n,i)),this.length>1&&(js[e]||Ts.uniqueSort(i),Hs.test(e)&&i.reverse()),this.pushStack(i)}}));var Vs=/[^\x20\t\r\n\f]+/g;function Ws(e){return e}function Gs(e){throw e}function $s(e,t,r,n){var i;try{e&&Ss(i=e.promise)?i.call(e).done(t).fail(r):e&&Ss(i=e.then)?i.call(e,t,r):t.apply(void 0,[e].slice(n))}catch(e){r.apply(void 0,[e])}}Ts.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return Ts.each(e.match(Vs)||[],(function(e,r){t[r]=!0})),t}(e):Ts.extend({},e);var t,r,n,i,a=[],o=[],s=-1,c=function(){for(i=i||e.once,n=t=!0;o.length;s=-1)for(r=o.shift();++s<a.length;)!1===a[s].apply(r[0],r[1])&&e.stopOnFalse&&(s=a.length,r=!1);e.memory||(r=!1),t=!1,i&&(a=r?[]:"")},u={add:function(){return a&&(r&&!t&&(s=a.length-1,o.push(r)),function t(r){Ts.each(r,(function(r,n){Ss(n)?e.unique&&u.has(n)||a.push(n):n&&n.length&&"string"!==Es(n)&&t(n)}))}(arguments),r&&!t&&c()),this},remove:function(){return Ts.each(arguments,(function(e,t){for(var r;(r=Ts.inArray(t,a,r))>-1;)a.splice(r,1),r<=s&&s--})),this},has:function(e){return e?Ts.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return i=o=[],a=r="",this},disabled:function(){return!a},lock:function(){return i=o=[],r||t||(a=r=""),this},locked:function(){return!!i},fireWith:function(e,r){return i||(r=[e,(r=r||[]).slice?r.slice():r],o.push(r),t||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},Ts.extend({Deferred:function(e){var t=[["notify","progress",Ts.Callbacks("memory"),Ts.Callbacks("memory"),2],["resolve","done",Ts.Callbacks("once memory"),Ts.Callbacks("once memory"),0,"resolved"],["reject","fail",Ts.Callbacks("once memory"),Ts.Callbacks("once memory"),1,"rejected"]],r="pending",n={state:function(){return r},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return n.then(null,e)},pipe:function(){var e=arguments;return Ts.Deferred((function(r){Ts.each(t,(function(t,n){var a=Ss(e[n[4]])&&e[n[4]];i[n[1]]((function(){var e=a&&a.apply(this,arguments);e&&Ss(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[n[0]+"With"](this,a?[e]:arguments)}))})),e=null})).promise()},then:function(e,r,n){var i=0;function a(e,t,r,n){return function(){var o=this,s=arguments,c=function(){var c,u;if(!(e<i)){if((c=r.apply(o,s))===t.promise())throw new TypeError("Thenable self-resolution");u=c&&("object"===dr(c)||"function"==typeof c)&&c.then,Ss(u)?n?u.call(c,a(i,t,Ws,n),a(i,t,Gs,n)):(i++,u.call(c,a(i,t,Ws,n),a(i,t,Gs,n),a(i,t,Ws,t.notifyWith))):(r!==Ws&&(o=void 0,s=[c]),(n||t.resolveWith)(o,s))}},u=n?c:function(){try{c()}catch(n){Ts.Deferred.exceptionHook&&Ts.Deferred.exceptionHook(n,u.stackTrace),e+1>=i&&(r!==Gs&&(o=void 0,s=[n]),t.rejectWith(o,s))}};e?u():(Ts.Deferred.getStackHook&&(u.stackTrace=Ts.Deferred.getStackHook()),window.setTimeout(u))}}return Ts.Deferred((function(i){t[0][3].add(a(0,i,Ss(n)?n:Ws,i.notifyWith)),t[1][3].add(a(0,i,Ss(e)?e:Ws)),t[2][3].add(a(0,i,Ss(r)?r:Gs))})).promise()},promise:function(e){return null!=e?Ts.extend(e,n):n}},i={};return Ts.each(t,(function(e,a){var o=a[2],s=a[5];n[a[1]]=o.add,s&&o.add((function(){r=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),o.add(a[3].fire),i[a[0]]=function(){return i[a[0]+"With"](this===i?void 0:this,arguments),this},i[a[0]+"With"]=o.fireWith})),n.promise(i),e&&e.call(i,i),i},when:function(e){var t=arguments.length,r=t,n=Array(r),i=ps.call(arguments),a=Ts.Deferred(),o=function(e){return function(r){n[e]=this,i[e]=arguments.length>1?ps.call(arguments):r,--t||a.resolveWith(n,i)}};if(t<=1&&($s(e,a.done(o(r)).resolve,a.reject,!t),"pending"===a.state()||Ss(i[r]&&i[r].then)))return a.then();for(;r--;)$s(i[r],o(r),a.reject);return a.promise()}});var Zs=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;Ts.Deferred.exceptionHook=function(e,t){window.console&&window.console.warn&&e&&Zs.test(e.name)&&window.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},Ts.readyException=function(e){window.setTimeout((function(){throw e}))};var Ys=Ts.Deferred();function Xs(){ls.removeEventListener("DOMContentLoaded",Xs),window.removeEventListener("load",Xs),Ts.ready()}Ts.fn.ready=function(e){return Ys.then(e).catch((function(e){Ts.readyException(e)})),this},Ts.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--Ts.readyWait:Ts.isReady)||(Ts.isReady=!0,!0!==e&&--Ts.readyWait>0||Ys.resolveWith(ls,[Ts]))}}),Ts.ready.then=Ys.then,"complete"===ls.readyState||"loading"!==ls.readyState&&!ls.documentElement.doScroll?window.setTimeout(Ts.ready):(ls.addEventListener("DOMContentLoaded",Xs),window.addEventListener("load",Xs));var Ks=function e(t,r,n,i,a,o,s){var c=0,u=t.length,h=null==n;if("object"===Es(n))for(c in a=!0,n)e(t,r,c,n[c],!0,o,s);else if(void 0!==i&&(a=!0,Ss(i)||(s=!0),h&&(s?(r.call(t,i),r=null):(h=r,r=function(e,t,r){return h.call(Ts(e),r)})),r))for(;c<u;c++)r(t[c],n,s?i:i.call(t[c],c,r(t[c],n)));return a?t:h?r.call(t):u?r(t[0],n):o},Qs=/^-ms-/,Js=/-([a-z])/g;function ec(e,t){return t.toUpperCase()}function tc(e){return e.replace(Qs,"ms-").replace(Js,ec)}var rc=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function nc(){this.expando=Ts.expando+nc.uid++}nc.uid=1,nc.prototype={cache:function(e){var t=e[this.expando];return t||(t={},rc(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var n,i=this.cache(e);if("string"==typeof t)i[tc(t)]=r;else for(n in t)i[tc(n)]=t[n];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][tc(t)]},access:function(e,t,r){return void 0===t||t&&"string"==typeof t&&void 0===r?this.get(e,t):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,n=e[this.expando];if(void 0!==n){if(void 0!==t){r=(t=Array.isArray(t)?t.map(tc):(t=tc(t))in n?[t]:t.match(Vs)||[]).length;for(;r--;)delete n[t[r]]}(void 0===t||Ts.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!Ts.isEmptyObject(t)}};var ic=new nc,ac=new nc,oc=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,sc=/[A-Z]/g;function cc(e,t,r){var n;if(void 0===r&&1===e.nodeType)if(n="data-"+t.replace(sc,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(n))){try{r=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:oc.test(e)?JSON.parse(e):e)}(r)}catch(e){}ac.set(e,t,r)}else r=void 0;return r}Ts.extend({hasData:function(e){return ac.hasData(e)||ic.hasData(e)},data:function(e,t,r){return ac.access(e,t,r)},removeData:function(e,t){ac.remove(e,t)},_data:function(e,t,r){return ic.access(e,t,r)},_removeData:function(e,t){ic.remove(e,t)}}),Ts.fn.extend({data:function(e,t){var r,n,i,a=this[0],o=a&&a.attributes;if(void 0===e){if(this.length&&(i=ac.get(a),1===a.nodeType&&!ic.get(a,"hasDataAttrs"))){for(r=o.length;r--;)o[r]&&0===(n=o[r].name).indexOf("data-")&&(n=tc(n.slice(5)),cc(a,n,i[n]));ic.set(a,"hasDataAttrs",!0)}return i}return"object"===dr(e)?this.each((function(){ac.set(this,e)})):Ks(this,(function(t){var r;if(a&&void 0===t)return void 0!==(r=ac.get(a,e))||void 0!==(r=cc(a,e))?r:void 0;this.each((function(){ac.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){ac.remove(this,e)}))}}),Ts.extend({queue:function(e,t,r){var n;if(e)return t=(t||"fx")+"queue",n=ic.get(e,t),r&&(!n||Array.isArray(r)?n=ic.access(e,t,Ts.makeArray(r)):n.push(r)),n||[]},dequeue:function(e,t){var r=Ts.queue(e,t=t||"fx"),n=r.length,i=r.shift(),a=Ts._queueHooks(e,t);"inprogress"===i&&(i=r.shift(),n--),i&&("fx"===t&&r.unshift("inprogress"),delete a.stop,i.call(e,(function(){Ts.dequeue(e,t)}),a)),!n&&a&&a.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return ic.get(e,r)||ic.access(e,r,{empty:Ts.Callbacks("once memory").add((function(){ic.remove(e,[t+"queue",r])}))})}}),Ts.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?Ts.queue(this[0],e):void 0===t?this:this.each((function(){var r=Ts.queue(this,e,t);Ts._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&Ts.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){Ts.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,n=1,i=Ts.Deferred(),a=this,o=this.length,s=function(){--n||i.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(r=ic.get(a[o],e+"queueHooks"))&&r.empty&&(n++,r.empty.add(s));return s(),i.promise(t)}});var uc=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,hc=new RegExp("^(?:([+-])=|)("+uc+")([a-z%]*)$","i"),lc=["Top","Right","Bottom","Left"],fc=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&Ts.contains(e.ownerDocument,e)&&"none"===Ts.css(e,"display")},pc=function(e,t,r,n){var i,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];for(a in i=r.apply(e,n||[]),t)e.style[a]=o[a];return i};var dc={};function gc(e){var t,r=e.ownerDocument,n=e.nodeName,i=dc[n];return i||(t=r.body.appendChild(r.createElement(n)),i=Ts.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),dc[n]=i,i)}function vc(e,t){for(var r,n,i=[],a=0,o=e.length;a<o;a++)(n=e[a]).style&&(r=n.style.display,t?("none"===r&&(i[a]=ic.get(n,"display")||null,i[a]||(n.style.display="")),""===n.style.display&&fc(n)&&(i[a]=gc(n))):"none"!==r&&(i[a]="none",ic.set(n,"display",r)));for(a=0;a<o;a++)null!=i[a]&&(e[a].style.display=i[a]);return e}Ts.fn.extend({show:function(){return vc(this,!0)},hide:function(){return vc(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){fc(this)?Ts(this).show():Ts(this).hide()}))}});var mc=/^(?:checkbox|radio)$/i,bc=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,yc=/^$|^module$|\/(?:java|ecma)script/i,wc={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function kc(e,t){var r;return r=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&Bs(e,t)?Ts.merge([e],r):r}function xc(e,t){for(var r=0,n=e.length;r<n;r++)ic.set(e[r],"globalEval",!t||ic.get(t[r],"globalEval"))}wc.optgroup=wc.option,wc.tbody=wc.tfoot=wc.colgroup=wc.caption=wc.thead,wc.th=wc.td;var Sc=/<|&#?\w+;/;function _c(e,t,r,n,i){for(var a,o,s,c,u,h,l=t.createDocumentFragment(),f=[],p=0,d=e.length;p<d;p++)if((a=e[p])||0===a)if("object"===Es(a))Ts.merge(f,a.nodeType?[a]:a);else if(Sc.test(a)){for(o=o||l.appendChild(t.createElement("div")),s=(bc.exec(a)||["",""])[1].toLowerCase(),c=wc[s]||wc._default,o.innerHTML=c[1]+Ts.htmlPrefilter(a)+c[2],h=c[0];h--;)o=o.lastChild;Ts.merge(f,o.childNodes),(o=l.firstChild).textContent=""}else f.push(t.createTextNode(a));for(l.textContent="",p=0;a=f[p++];)if(n&&Ts.inArray(a,n)>-1)i&&i.push(a);else if(u=Ts.contains(a.ownerDocument,a),o=kc(l.appendChild(a),"script"),u&&xc(o),r)for(h=0;a=o[h++];)yc.test(a.type||"")&&r.push(a);return l}!function(){var e=ls.createDocumentFragment().appendChild(ls.createElement("div")),t=ls.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),xs.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",xs.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Cc=ls.documentElement,Rc=/^key/,Ec=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ac=/^([^.]*)(?:\.(.+)|)/;function Tc(){return!0}function Ic(){return!1}function Lc(){try{return ls.activeElement}catch(e){}}function Mc(e,t,r,n,i,a){var o,s;if("object"===dr(t)){for(s in"string"!=typeof r&&(n=n||r,r=void 0),t)Mc(e,s,r,n,t[s],a);return e}if(null==n&&null==i?(i=r,n=r=void 0):null==i&&("string"==typeof r?(i=n,n=void 0):(i=n,n=r,r=void 0)),!1===i)i=Ic;else if(!i)return e;return 1===a&&(o=i,(i=function(e){return Ts().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=Ts.guid++)),e.each((function(){Ts.event.add(this,t,i,n,r)}))}Ts.event={global:{},add:function(e,t,r,n,i){var a,o,s,c,u,h,l,f,p,d,g,v=ic.get(e);if(v)for(r.handler&&(r=(a=r).handler,i=a.selector),i&&Ts.find.matchesSelector(Cc,i),r.guid||(r.guid=Ts.guid++),(c=v.events)||(c=v.events={}),(o=v.handle)||(o=v.handle=function(t){return Ts.event.triggered!==t.type?Ts.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(Vs)||[""]).length;u--;)p=g=(s=Ac.exec(t[u])||[])[1],d=(s[2]||"").split(".").sort(),p&&(l=Ts.event.special[p]||{},p=(i?l.delegateType:l.bindType)||p,l=Ts.event.special[p]||{},h=Ts.extend({type:p,origType:g,data:n,handler:r,guid:r.guid,selector:i,needsContext:i&&Ts.expr.match.needsContext.test(i),namespace:d.join(".")},a),(f=c[p])||((f=c[p]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(e,n,d,o)||e.addEventListener&&e.addEventListener(p,o)),l.add&&(l.add.call(e,h),h.handler.guid||(h.handler.guid=r.guid)),i?f.splice(f.delegateCount++,0,h):f.push(h),Ts.event.global[p]=!0)},remove:function(e,t,r,n,i){var a,o,s,c,u,h,l,f,p,d,g,v=ic.hasData(e)&&ic.get(e);if(v&&(c=v.events)){for(u=(t=(t||"").match(Vs)||[""]).length;u--;)if(p=g=(s=Ac.exec(t[u])||[])[1],d=(s[2]||"").split(".").sort(),p){for(l=Ts.event.special[p]||{},f=c[p=(n?l.delegateType:l.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=f.length;a--;)h=f[a],!i&&g!==h.origType||r&&r.guid!==h.guid||s&&!s.test(h.namespace)||n&&n!==h.selector&&("**"!==n||!h.selector)||(f.splice(a,1),h.selector&&f.delegateCount--,l.remove&&l.remove.call(e,h));o&&!f.length&&(l.teardown&&!1!==l.teardown.call(e,d,v.handle)||Ts.removeEvent(e,p,v.handle),delete c[p])}else for(p in c)Ts.event.remove(e,p+t[u],r,n,!0);Ts.isEmptyObject(c)&&ic.remove(e,"handle events")}},dispatch:function(e){var t,r,n,i,a,o,s=Ts.event.fix(e),c=new Array(arguments.length),u=(ic.get(this,"events")||{})[s.type]||[],h=Ts.event.special[s.type]||{};for(c[0]=s,t=1;t<arguments.length;t++)c[t]=arguments[t];if(s.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,s)){for(o=Ts.event.handlers.call(this,s,u),t=0;(i=o[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,r=0;(a=i.handlers[r++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(a.namespace)||(s.handleObj=a,s.data=a.data,void 0!==(n=((Ts.event.special[a.origType]||{}).handle||a.handler).apply(i.elem,c))&&!1===(s.result=n)&&(s.preventDefault(),s.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,s),s.result}},handlers:function(e,t){var r,n,i,a,o,s=[],c=t.delegateCount,u=e.target;if(c&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(a=[],o={},r=0;r<c;r++)void 0===o[i=(n=t[r]).selector+" "]&&(o[i]=n.needsContext?Ts(i,this).index(u)>-1:Ts.find(i,this,null,[u]).length),o[i]&&a.push(n);a.length&&s.push({elem:u,handlers:a})}return u=this,c<t.length&&s.push({elem:u,handlers:t.slice(c)}),s},addProp:function(e,t){Object.defineProperty(Ts.Event.prototype,e,{enumerable:!0,configurable:!0,get:Ss(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[Ts.expando]?e:new Ts.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Lc()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Lc()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&Bs(this,"input"))return this.click(),!1},_default:function(e){return Bs(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},Ts.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},(Ts.Event=function(e,t){if(!(this instanceof Ts.Event))return new Ts.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Tc:Ic,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&Ts.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[Ts.expando]=!0}).prototype={constructor:Ts.Event,isDefaultPrevented:Ic,isPropagationStopped:Ic,isImmediatePropagationStopped:Ic,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Tc,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Tc,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Tc,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},Ts.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Rc.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ec.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},Ts.event.addProp),Ts.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){Ts.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,n=this,i=e.relatedTarget,a=e.handleObj;return i&&(i===n||Ts.contains(n,i))||(e.type=a.origType,r=a.handler.apply(this,arguments),e.type=t),r}}})),Ts.fn.extend({on:function(e,t,r,n){return Mc(this,e,t,r,n)},one:function(e,t,r,n){return Mc(this,e,t,r,n,1)},off:function(e,t,r){var n,i;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,Ts(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"===dr(e)){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=Ic),this.each((function(){Ts.event.remove(this,e,r,t)}))}});var Fc=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Dc=/<script|<style|<link/i,Oc=/checked\s*(?:[^=]|=\s*.checked.)/i,Bc=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Nc(e,t){return Bs(e,"table")&&Bs(11!==t.nodeType?t:t.firstChild,"tr")&&Ts(e).children("tbody")[0]||e}function Pc(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function zc(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Uc(e,t){var r,n,i,a,o,s,c,u;if(1===t.nodeType){if(ic.hasData(e)&&(a=ic.access(e),o=ic.set(t,a),u=a.events))for(i in delete o.handle,o.events={},u)for(r=0,n=u[i].length;r<n;r++)Ts.event.add(t,i,u[i][r]);ac.hasData(e)&&(s=ac.access(e),c=Ts.extend({},s),ac.set(t,c))}}function Hc(e,t){var r=t.nodeName.toLowerCase();"input"===r&&mc.test(e.type)?t.checked=e.checked:"input"!==r&&"textarea"!==r||(t.defaultValue=e.defaultValue)}function jc(e,t,r,n){t=ds.apply([],t);var i,a,o,s,c,u,h=0,l=e.length,f=l-1,p=t[0],d=Ss(p);if(d||l>1&&"string"==typeof p&&!xs.checkClone&&Oc.test(p))return e.each((function(i){var a=e.eq(i);d&&(t[0]=p.call(this,i,a.html())),jc(a,t,r,n)}));if(l&&(a=(i=_c(t,e[0].ownerDocument,!1,e,n)).firstChild,1===i.childNodes.length&&(i=a),a||n)){for(s=(o=Ts.map(kc(i,"script"),Pc)).length;h<l;h++)c=i,h!==f&&(c=Ts.clone(c,!0,!0),s&&Ts.merge(o,kc(c,"script"))),r.call(e[h],c,h);if(s)for(u=o[o.length-1].ownerDocument,Ts.map(o,zc),h=0;h<s;h++)c=o[h],yc.test(c.type||"")&&!ic.access(c,"globalEval")&&Ts.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?Ts._evalUrl&&Ts._evalUrl(c.src):Rs(c.textContent.replace(Bc,""),u,c))}return e}function qc(e,t,r){for(var n,i=t?Ts.filter(t,e):e,a=0;null!=(n=i[a]);a++)r||1!==n.nodeType||Ts.cleanData(kc(n)),n.parentNode&&(r&&Ts.contains(n.ownerDocument,n)&&xc(kc(n,"script")),n.parentNode.removeChild(n));return e}Ts.extend({htmlPrefilter:function(e){return e.replace(Fc,"<$1></$2>")},clone:function(e,t,r){var n,i,a,o,s=e.cloneNode(!0),c=Ts.contains(e.ownerDocument,e);if(!(xs.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Ts.isXMLDoc(e)))for(o=kc(s),n=0,i=(a=kc(e)).length;n<i;n++)Hc(a[n],o[n]);if(t)if(r)for(a=a||kc(e),o=o||kc(s),n=0,i=a.length;n<i;n++)Uc(a[n],o[n]);else Uc(e,s);return(o=kc(s,"script")).length>0&&xc(o,!c&&kc(e,"script")),s},cleanData:function(e){for(var t,r,n,i=Ts.event.special,a=0;void 0!==(r=e[a]);a++)if(rc(r)){if(t=r[ic.expando]){if(t.events)for(n in t.events)i[n]?Ts.event.remove(r,n):Ts.removeEvent(r,n,t.handle);r[ic.expando]=void 0}r[ac.expando]&&(r[ac.expando]=void 0)}}}),Ts.fn.extend({detach:function(e){return qc(this,e,!0)},remove:function(e){return qc(this,e)},text:function(e){return Ks(this,(function(e){return void 0===e?Ts.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return jc(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Nc(this,e).appendChild(e)}))},prepend:function(){return jc(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Nc(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return jc(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return jc(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Ts.cleanData(kc(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return Ts.clone(this,e,t)}))},html:function(e){return Ks(this,(function(e){var t=this[0]||{},r=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Dc.test(e)&&!wc[(bc.exec(e)||["",""])[1].toLowerCase()]){e=Ts.htmlPrefilter(e);try{for(;r<n;r++)1===(t=this[r]||{}).nodeType&&(Ts.cleanData(kc(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return jc(this,arguments,(function(t){var r=this.parentNode;Ts.inArray(this,e)<0&&(Ts.cleanData(kc(this)),r&&r.replaceChild(t,this))}),e)}}),Ts.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){Ts.fn[e]=function(e){for(var r,n=[],i=Ts(e),a=i.length-1,o=0;o<=a;o++)r=o===a?this:this.clone(!0),Ts(i[o])[t](r),gs.apply(n,r.get());return this.pushStack(n)}}));var Vc=new RegExp("^("+uc+")(?!px)[a-z%]+$","i"),Wc=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=window),t.getComputedStyle(e)},Gc=new RegExp(lc.join("|"),"i");function $c(e,t,r){var n,i,a,o,s=e.style;return(r=r||Wc(e))&&(""!==(o=r.getPropertyValue(t)||r[t])||Ts.contains(e.ownerDocument,e)||(o=Ts.style(e,t)),!xs.pixelBoxStyles()&&Vc.test(o)&&Gc.test(t)&&(n=s.width,i=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=r.width,s.width=n,s.minWidth=i,s.maxWidth=a)),void 0!==o?o+"":o}function Zc(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){s.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Cc.appendChild(s).appendChild(c);var e=window.getComputedStyle(c);r="1%"!==e.top,o=12===t(e.marginLeft),c.style.right="60%",a=36===t(e.right),n=36===t(e.width),c.style.position="absolute",i=36===c.offsetWidth||"absolute",Cc.removeChild(s),c=null}}function t(e){return Math.round(parseFloat(e))}var r,n,i,a,o,s=ls.createElement("div"),c=ls.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",xs.clearCloneStyle="content-box"===c.style.backgroundClip,Ts.extend(xs,{boxSizingReliable:function(){return e(),n},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),o},scrollboxSize:function(){return e(),i}}))}();var Yc,Xc,Kc=/^(none|table(?!-c[ea]).+)/,Qc=/^--/,Jc={position:"absolute",visibility:"hidden",display:"block"},eu={letterSpacing:"0",fontWeight:"400"},tu=["Webkit","Moz","ms"],ru=ls.createElement("div").style;function nu(e){var t=Ts.cssProps[e];return t||(t=Ts.cssProps[e]=function(e){if(e in ru)return e;for(var t=e[0].toUpperCase()+e.slice(1),r=tu.length;r--;)if((e=tu[r]+t)in ru)return e}(e)||e),t}function iu(e,t,r){var n=hc.exec(t);return n?Math.max(0,n[2]-(r||0))+(n[3]||"px"):t}function au(e,t,r,n,i,a){var o="width"===t?1:0,s=0,c=0;if(r===(n?"border":"content"))return 0;for(;o<4;o+=2)"margin"===r&&(c+=Ts.css(e,r+lc[o],!0,i)),n?("content"===r&&(c-=Ts.css(e,"padding"+lc[o],!0,i)),"margin"!==r&&(c-=Ts.css(e,"border"+lc[o]+"Width",!0,i))):(c+=Ts.css(e,"padding"+lc[o],!0,i),"padding"!==r?c+=Ts.css(e,"border"+lc[o]+"Width",!0,i):s+=Ts.css(e,"border"+lc[o]+"Width",!0,i));return!n&&a>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-c-s-.5))),c}function ou(e,t,r){var n=Wc(e),i=$c(e,t,n),a="border-box"===Ts.css(e,"boxSizing",!1,n),o=a;if(Vc.test(i)){if(!r)return i;i="auto"}return o=o&&(xs.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===Ts.css(e,"display",!1,n))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],o=!0),(i=parseFloat(i)||0)+au(e,t,r||(a?"border":"content"),o,n,i)+"px"}Ts.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=$c(e,"opacity");return""===r?"1":r}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,r,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,a,o,s=tc(t),c=Qc.test(t),u=e.style;if(c||(t=nu(s)),o=Ts.cssHooks[t]||Ts.cssHooks[s],void 0===r)return o&&"get"in o&&void 0!==(i=o.get(e,!1,n))?i:u[t];"string"===(a=dr(r))&&(i=hc.exec(r))&&i[1]&&(r=function(e,t,r,n){var i,a,o=20,s=n?function(){return n.cur()}:function(){return Ts.css(e,t,"")},c=s(),u=r&&r[3]||(Ts.cssNumber[t]?"":"px"),h=(Ts.cssNumber[t]||"px"!==u&&+c)&&hc.exec(Ts.css(e,t));if(h&&h[3]!==u){for(c/=2,u=u||h[3],h=+c||1;o--;)Ts.style(e,t,h+u),(1-a)*(1-(a=s()/c||.5))<=0&&(o=0),h/=a;Ts.style(e,t,(h*=2)+u),r=r||[]}return r&&(h=+h||+c||0,i=r[1]?h+(r[1]+1)*r[2]:+r[2],n&&(n.unit=u,n.start=h,n.end=i)),i}(e,t,i),a="number"),null!=r&&r==r&&("number"===a&&(r+=i&&i[3]||(Ts.cssNumber[s]?"":"px")),xs.clearCloneStyle||""!==r||0!==t.indexOf("background")||(u[t]="inherit"),o&&"set"in o&&void 0===(r=o.set(e,r,n))||(c?u.setProperty(t,r):u[t]=r))}},css:function(e,t,r,n){var i,a,o,s=tc(t);return Qc.test(t)||(t=nu(s)),(o=Ts.cssHooks[t]||Ts.cssHooks[s])&&"get"in o&&(i=o.get(e,!0,r)),void 0===i&&(i=$c(e,t,n)),"normal"===i&&t in eu&&(i=eu[t]),""===r||r?(a=parseFloat(i),!0===r||isFinite(a)?a||0:i):i}}),Ts.each(["height","width"],(function(e,t){Ts.cssHooks[t]={get:function(e,r,n){if(r)return!Kc.test(Ts.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ou(e,t,n):pc(e,Jc,(function(){return ou(e,t,n)}))},set:function(e,r,n){var i,a=Wc(e),o="border-box"===Ts.css(e,"boxSizing",!1,a),s=n&&au(e,t,n,o,a);return o&&xs.scrollboxSize()===a.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-au(e,t,"border",!1,a)-.5)),s&&(i=hc.exec(r))&&"px"!==(i[3]||"px")&&(e.style[t]=r,r=Ts.css(e,t)),iu(0,r,s)}}})),Ts.cssHooks.marginLeft=Zc(xs.reliableMarginLeft,(function(e,t){if(t)return(parseFloat($c(e,"marginLeft"))||e.getBoundingClientRect().left-pc(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),Ts.each({margin:"",padding:"",border:"Width"},(function(e,t){Ts.cssHooks[e+t]={expand:function(r){for(var n=0,i={},a="string"==typeof r?r.split(" "):[r];n<4;n++)i[e+lc[n]+t]=a[n]||a[n-2]||a[0];return i}},"margin"!==e&&(Ts.cssHooks[e+t].set=iu)})),Ts.fn.extend({css:function(e,t){return Ks(this,(function(e,t,r){var n,i,a={},o=0;if(Array.isArray(t)){for(n=Wc(e),i=t.length;o<i;o++)a[t[o]]=Ts.css(e,t[o],!1,n);return a}return void 0!==r?Ts.style(e,t,r):Ts.css(e,t)}),e,t,arguments.length>1)}}),Ts.fn.delay=function(e,t){return e=Ts.fx&&Ts.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,r){var n=window.setTimeout(t,e);r.stop=function(){window.clearTimeout(n)}}))},Yc=ls.createElement("input"),Xc=ls.createElement("select").appendChild(ls.createElement("option")),Yc.type="checkbox",xs.checkOn=""!==Yc.value,xs.optSelected=Xc.selected,(Yc=ls.createElement("input")).value="t",Yc.type="radio",xs.radioValue="t"===Yc.value;var su,cu=Ts.expr.attrHandle;Ts.fn.extend({attr:function(e,t){return Ks(this,Ts.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){Ts.removeAttr(this,e)}))}}),Ts.extend({attr:function(e,t,r){var n,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?Ts.prop(e,t,r):(1===a&&Ts.isXMLDoc(e)||(i=Ts.attrHooks[t.toLowerCase()]||(Ts.expr.match.bool.test(t)?su:void 0)),void 0!==r?null===r?void Ts.removeAttr(e,t):i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:(e.setAttribute(t,r+""),r):i&&"get"in i&&null!==(n=i.get(e,t))?n:null==(n=Ts.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!xs.radioValue&&"radio"===t&&Bs(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}},removeAttr:function(e,t){var r,n=0,i=t&&t.match(Vs);if(i&&1===e.nodeType)for(;r=i[n++];)e.removeAttribute(r)}}),su={set:function(e,t,r){return!1===t?Ts.removeAttr(e,r):e.setAttribute(r,r),r}},Ts.each(Ts.expr.match.bool.source.match(/\w+/g),(function(e,t){var r=cu[t]||Ts.find.attr;cu[t]=function(e,t,n){var i,a,o=t.toLowerCase();return n||(a=cu[o],cu[o]=i,i=null!=r(e,t,n)?o:null,cu[o]=a),i}}));var uu=/^(?:input|select|textarea|button)$/i,hu=/^(?:a|area)$/i;function lu(e){return(e.match(Vs)||[]).join(" ")}function fu(e){return e.getAttribute&&e.getAttribute("class")||""}function pu(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(Vs)||[]}Ts.fn.extend({prop:function(e,t){return Ks(this,Ts.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[Ts.propFix[e]||e]}))}}),Ts.extend({prop:function(e,t,r){var n,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&Ts.isXMLDoc(e)||(t=Ts.propFix[t]||t,i=Ts.propHooks[t]),void 0!==r?i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:e[t]=r:i&&"get"in i&&null!==(n=i.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=Ts.find.attr(e,"tabindex");return t?parseInt(t,10):uu.test(e.nodeName)||hu.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),xs.optSelected||(Ts.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),Ts.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){Ts.propFix[this.toLowerCase()]=this})),Ts.fn.extend({addClass:function(e){var t,r,n,i,a,o,s,c=0;if(Ss(e))return this.each((function(t){Ts(this).addClass(e.call(this,t,fu(this)))}));if((t=pu(e)).length)for(;r=this[c++];)if(i=fu(r),n=1===r.nodeType&&" "+lu(i)+" "){for(o=0;a=t[o++];)n.indexOf(" "+a+" ")<0&&(n+=a+" ");i!==(s=lu(n))&&r.setAttribute("class",s)}return this},removeClass:function(e){var t,r,n,i,a,o,s,c=0;if(Ss(e))return this.each((function(t){Ts(this).removeClass(e.call(this,t,fu(this)))}));if(!arguments.length)return this.attr("class","");if((t=pu(e)).length)for(;r=this[c++];)if(i=fu(r),n=1===r.nodeType&&" "+lu(i)+" "){for(o=0;a=t[o++];)for(;n.indexOf(" "+a+" ")>-1;)n=n.replace(" "+a+" "," ");i!==(s=lu(n))&&r.setAttribute("class",s)}return this},toggleClass:function(e,t){var r=dr(e),n="string"===r||Array.isArray(e);return"boolean"==typeof t&&n?t?this.addClass(e):this.removeClass(e):Ss(e)?this.each((function(r){Ts(this).toggleClass(e.call(this,r,fu(this),t),t)})):this.each((function(){var t,i,a,o;if(n)for(i=0,a=Ts(this),o=pu(e);t=o[i++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else void 0!==e&&"boolean"!==r||((t=fu(this))&&ic.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":ic.get(this,"__className__")||""))}))},hasClass:function(e){var t,r,n=0;for(t=" "+e+" ";r=this[n++];)if(1===r.nodeType&&(" "+lu(fu(r))+" ").indexOf(t)>-1)return!0;return!1}});var du=/\r/g;Ts.fn.extend({val:function(e){var t,r,n,i=this[0];return arguments.length?(n=Ss(e),this.each((function(r){var i;1===this.nodeType&&(null==(i=n?e.call(this,r,Ts(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=Ts.map(i,(function(e){return null==e?"":e+""}))),(t=Ts.valHooks[this.type]||Ts.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=Ts.valHooks[i.type]||Ts.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(i,"value"))?r:"string"==typeof(r=i.value)?r.replace(du,""):null==r?"":r:void 0}}),Ts.extend({valHooks:{option:{get:function(e){var t=Ts.find.attr(e,"value");return null!=t?t:lu(Ts.text(e))}},select:{get:function(e){var t,r,n,i=e.options,a=e.selectedIndex,o="select-one"===e.type,s=o?null:[],c=o?a+1:i.length;for(n=a<0?c:o?a:0;n<c;n++)if(((r=i[n]).selected||n===a)&&!r.disabled&&(!r.parentNode.disabled||!Bs(r.parentNode,"optgroup"))){if(t=Ts(r).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var r,n,i=e.options,a=Ts.makeArray(t),o=i.length;o--;)((n=i[o]).selected=Ts.inArray(Ts.valHooks.option.get(n),a)>-1)&&(r=!0);return r||(e.selectedIndex=-1),a}}}}),Ts.each(["radio","checkbox"],(function(){Ts.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=Ts.inArray(Ts(e).val(),t)>-1}},xs.checkOn||(Ts.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),xs.focusin="onfocusin"in window;var gu=/^(?:focusinfocus|focusoutblur)$/,vu=function(e){e.stopPropagation()};Ts.extend(Ts.event,{trigger:function(e,t,r,n){var i,a,o,s,c,u,h,l,f=[r||ls],p=ys.call(e,"type")?e.type:e,d=ys.call(e,"namespace")?e.namespace.split("."):[];if(a=l=o=r=r||ls,3!==r.nodeType&&8!==r.nodeType&&!gu.test(p+Ts.event.triggered)&&(p.indexOf(".")>-1&&(d=p.split("."),p=d.shift(),d.sort()),c=p.indexOf(":")<0&&"on"+p,(e=e[Ts.expando]?e:new Ts.Event(p,"object"===dr(e)&&e)).isTrigger=n?2:3,e.namespace=d.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:Ts.makeArray(t,[e]),h=Ts.event.special[p]||{},n||!h.trigger||!1!==h.trigger.apply(r,t))){if(!n&&!h.noBubble&&!_s(r)){for(s=h.delegateType||p,gu.test(s+p)||(a=a.parentNode);a;a=a.parentNode)f.push(a),o=a;o===(r.ownerDocument||ls)&&f.push(o.defaultView||o.parentWindow||window)}for(i=0;(a=f[i++])&&!e.isPropagationStopped();)l=a,e.type=i>1?s:h.bindType||p,(u=(ic.get(a,"events")||{})[e.type]&&ic.get(a,"handle"))&&u.apply(a,t),(u=c&&a[c])&&u.apply&&rc(a)&&(e.result=u.apply(a,t),!1===e.result&&e.preventDefault());return e.type=p,n||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(f.pop(),t)||!rc(r)||c&&Ss(r[p])&&!_s(r)&&((o=r[c])&&(r[c]=null),Ts.event.triggered=p,e.isPropagationStopped()&&l.addEventListener(p,vu),r[p](),e.isPropagationStopped()&&l.removeEventListener(p,vu),Ts.event.triggered=void 0,o&&(r[c]=o)),e.result}},simulate:function(e,t,r){var n=Ts.extend(new Ts.Event,r,{type:e,isSimulated:!0});Ts.event.trigger(n,null,t)}}),Ts.fn.extend({trigger:function(e,t){return this.each((function(){Ts.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var r=this[0];if(r)return Ts.event.trigger(e,t,r,!0)}}),xs.focusin||Ts.each({focus:"focusin",blur:"focusout"},(function(e,t){var r=function(e){Ts.event.simulate(t,e.target,Ts.event.fix(e))};Ts.event.special[t]={setup:function(){var n=this.ownerDocument||this,i=ic.access(n,t);i||n.addEventListener(e,r,!0),ic.access(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=ic.access(n,t)-1;i?ic.access(n,t,i):(n.removeEventListener(e,r,!0),ic.remove(n,t))}}}));var mu,bu=/\[\]$/,yu=/\r?\n/g,wu=/^(?:submit|button|image|reset|file)$/i,ku=/^(?:input|select|textarea|keygen)/i;function xu(e,t,r,n){var i;if(Array.isArray(t))Ts.each(t,(function(t,i){r||bu.test(e)?n(e,i):xu(e+"["+("object"===dr(i)&&null!=i?t:"")+"]",i,r,n)}));else if(r||"object"!==Es(t))n(e,t);else for(i in t)xu(e+"["+i+"]",t[i],r,n)}Ts.param=function(e,t){var r,n=[],i=function(e,t){var r=Ss(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==r?"":r)};if(Array.isArray(e)||e.jquery&&!Ts.isPlainObject(e))Ts.each(e,(function(){i(this.name,this.value)}));else for(r in e)xu(r,e[r],t,i);return n.join("&")},Ts.fn.extend({serialize:function(){return Ts.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=Ts.prop(this,"elements");return e?Ts.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!Ts(this).is(":disabled")&&ku.test(this.nodeName)&&!wu.test(e)&&(this.checked||!mc.test(e))})).map((function(e,t){var r=Ts(this).val();return null==r?null:Array.isArray(r)?Ts.map(r,(function(e){return{name:t.name,value:e.replace(yu,"\r\n")}})):{name:t.name,value:r.replace(yu,"\r\n")}})).get()}}),Ts.fn.extend({wrapAll:function(e){var t;return this[0]&&(Ss(e)&&(e=e.call(this[0])),t=Ts(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return Ss(e)?this.each((function(t){Ts(this).wrapInner(e.call(this,t))})):this.each((function(){var t=Ts(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)}))},wrap:function(e){var t=Ss(e);return this.each((function(r){Ts(this).wrapAll(t?e.call(this,r):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){Ts(this).replaceWith(this.childNodes)})),this}}),Ts.expr.pseudos.hidden=function(e){return!Ts.expr.pseudos.visible(e)},Ts.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},xs.createHTMLDocument=((mu=ls.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===mu.childNodes.length),Ts.parseHTML=function(e,t,r){return"string"!=typeof e?[]:("boolean"==typeof t&&(r=t,t=!1),t||(xs.createHTMLDocument?((n=(t=ls.implementation.createHTMLDocument("")).createElement("base")).href=ls.location.href,t.head.appendChild(n)):t=ls),a=!r&&[],(i=Ns.exec(e))?[t.createElement(i[1])]:(i=_c([e],t,a),a&&a.length&&Ts(a).remove(),Ts.merge([],i.childNodes)));var n,i,a},Ts.offset={setOffset:function(e,t,r){var n,i,a,o,s,c,u=Ts.css(e,"position"),h=Ts(e),l={};"static"===u&&(e.style.position="relative"),s=h.offset(),a=Ts.css(e,"top"),c=Ts.css(e,"left"),("absolute"===u||"fixed"===u)&&(a+c).indexOf("auto")>-1?(o=(n=h.position()).top,i=n.left):(o=parseFloat(a)||0,i=parseFloat(c)||0),Ss(t)&&(t=t.call(e,r,Ts.extend({},s))),null!=t.top&&(l.top=t.top-s.top+o),null!=t.left&&(l.left=t.left-s.left+i),"using"in t?t.using.call(e,l):h.css(l)}},Ts.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){Ts.offset.setOffset(this,e,t)}));var t,r,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),r=n.ownerDocument.defaultView,{top:t.top+r.pageYOffset,left:t.left+r.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,r,n=this[0],i={top:0,left:0};if("fixed"===Ts.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),r=n.ownerDocument,e=n.offsetParent||r.documentElement;e&&(e===r.body||e===r.documentElement)&&"static"===Ts.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((i=Ts(e).offset()).top+=Ts.css(e,"borderTopWidth",!0),i.left+=Ts.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-Ts.css(n,"marginTop",!0),left:t.left-i.left-Ts.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===Ts.css(e,"position");)e=e.offsetParent;return e||Cc}))}}),Ts.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var r="pageYOffset"===t;Ts.fn[e]=function(n){return Ks(this,(function(e,n,i){var a;if(_s(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===i)return a?a[t]:e[n];a?a.scrollTo(r?a.pageXOffset:i,r?i:a.pageYOffset):e[n]=i}),e,n,arguments.length)}})),Ts.each(["top","left"],(function(e,t){Ts.cssHooks[t]=Zc(xs.pixelPosition,(function(e,r){if(r)return r=$c(e,t),Vc.test(r)?Ts(e).position()[t]+"px":r}))})),Ts.each({Height:"height",Width:"width"},(function(e,t){Ts.each({padding:"inner"+e,content:t,"":"outer"+e},(function(r,n){Ts.fn[n]=function(i,a){var o=arguments.length&&(r||"boolean"!=typeof i),s=r||(!0===i||!0===a?"margin":"border");return Ks(this,(function(t,r,i){var a;return _s(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===i?Ts.css(t,r,s):Ts.style(t,r,i,s)}),t,o?i:void 0,o)}}))})),Ts.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){Ts.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}})),Ts.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Ts.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,n){return this.on(t,e,r,n)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)}}),Ts.proxy=function(e,t){var r,n,i;if("string"==typeof t&&(r=e[t],t=e,e=r),Ss(e))return n=ps.call(arguments,2),(i=function(){return e.apply(t||this,n.concat(ps.call(arguments)))}).guid=e.guid=e.guid||Ts.guid++,i},Ts.holdReady=function(e){e?Ts.readyWait++:Ts.ready(!0)},Ts.isArray=Array.isArray,Ts.parseJSON=JSON.parse,Ts.nodeName=Bs,Ts.isFunction=Ss,Ts.isWindow=_s,Ts.camelCase=tc,Ts.type=Es,Ts.now=Date.now,Ts.isNumeric=function(e){var t=Ts.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))};var Su=Ts,_u="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",Cu="["+_u+"]",Ru=RegExp("^"+Cu+Cu+"*"),Eu=RegExp(Cu+Cu+"*$"),Au=function(e){return function(t){var r=String(d(t));return 1&e&&(r=r.replace(Ru,"")),2&e&&(r=r.replace(Eu,"")),r}},Tu={start:Au(1),end:Au(2),trim:Au(3)},Iu=we.f,Lu=C.f,Mu=A.f,Fu=Tu.trim,Du="Number",Ou=n.Number,Bu=Ou.prototype,Nu=l(di(Bu))==Du,Pu=function(e){var t,r,n,i,a,o,s,c,u=m(e,!1);if("string"==typeof u&&u.length>2)if(43===(t=(u=Fu(u)).charCodeAt(0))||45===t){if(88===(r=u.charCodeAt(2))||120===r)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+u}for(o=(a=u.slice(2)).length,s=0;s<o;s++)if((c=a.charCodeAt(s))<48||c>i)return NaN;return parseInt(a,n)}return+u};if(Ie(Du,!Ou(" 0o1")||!Ou("0b1")||Ou("+0x1"))){for(var zu,Uu=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof Uu&&(Nu?i((function(){Bu.valueOf.call(r)})):l(r)!=Du)?Ro(new Ou(Pu(t)),r,Uu):Pu(t)},Hu=a?Iu(Ou):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),ju=0;Hu.length>ju;ju++)y(Ou,zu=Hu[ju])&&!y(Uu,zu)&&Mu(Uu,zu,Lu(Ou,zu));Uu.prototype=Bu,Bu.constructor=Uu,re(n,Du,Uu)}Me({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991});var qu=bi.f,Vu=i((function(){return!Object.getOwnPropertyNames(1)}));Me({target:"Object",stat:!0,forced:Vu},{getOwnPropertyNames:qu});var Wu=i((function(){si(1)}));Me({target:"Object",stat:!0,forced:Wu},{keys:function(e){return si(Oe(e))}});var Gu=n.Promise,$u=function(e,t,r){for(var n in t)re(e,n,t[n],r);return e},Zu=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e},Yu=je("iterator"),Xu=Array.prototype,Ku=function(e){return void 0!==e&&(Ra.Array===e||Xu[Yu]===e)},Qu=je("iterator"),Ju=function(e){if(null!=e)return e[Qu]||e["@@iterator"]||Ra[_o(e)]},eh=function(e){var t=e.return;if(void 0!==t)return R(t.call(e)).value},th=function(e,t){this.stopped=e,this.result=t},rh=function(e,t,r){var n,i,a,o,s,c,u,h=r&&r.that,l=!(!r||!r.AS_ENTRIES),f=!(!r||!r.IS_ITERATOR),p=!(!r||!r.INTERRUPTED),d=De(t,h,1+l+p),g=function(e){return n&&eh(n),new th(!0,e)},v=function(e){return l?(R(e),p?d(e[0],e[1],g):d(e[0],e[1])):p?d(e,g):d(e)};if(f)n=e;else{if("function"!=typeof(i=Ju(e)))throw TypeError("Target is not iterable");if(Ku(i)){for(a=0,o=he(e.length);o>a;a++)if((s=v(e[a]))&&s instanceof th)return s;return new th(!1)}n=i.call(e)}for(c=n.next;!(u=c.call(n)).done;){try{s=v(u.value)}catch(e){throw eh(n),e}if("object"==typeof s&&s&&s instanceof th)return s}return new th(!1)},nh=je("iterator"),ih=!1;try{var ah=0,oh={next:function(){return{done:!!ah++}},return:function(){ih=!0}};oh[nh]=function(){return this},Array.from(oh,(function(){throw 2}))}catch(e){}var sh,ch,uh,hh=function(e,t){if(!t&&!ih)return!1;var r=!1;try{var n={};n[nh]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(e){}return r},lh=/(iphone|ipod|ipad).*applewebkit/i.test(Ze),fh="process"==l(n.process),ph=n.location,dh=n.setImmediate,gh=n.clearImmediate,vh=n.process,mh=n.MessageChannel,bh=n.Dispatch,yh=0,wh={},kh="onreadystatechange",xh=function(e){if(wh.hasOwnProperty(e)){var t=wh[e];delete wh[e],t()}},Sh=function(e){return function(){xh(e)}},_h=function(e){xh(e.data)},Ch=function(e){n.postMessage(e+"",ph.protocol+"//"+ph.host)};dh&&gh||(dh=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return wh[++yh]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},sh(yh),yh},gh=function(e){delete wh[e]},fh?sh=function(e){vh.nextTick(Sh(e))}:bh&&bh.now?sh=function(e){bh.now(Sh(e))}:mh&&!lh?(uh=(ch=new mh).port2,ch.port1.onmessage=_h,sh=De(uh.postMessage,uh,1)):n.addEventListener&&"function"==typeof postMessage&&!n.importScripts&&ph&&"file:"!==ph.protocol&&!i(Ch)?(sh=Ch,n.addEventListener("message",_h,!1)):sh=kh in x("script")?function(e){ui.appendChild(x("script")).onreadystatechange=function(){ui.removeChild(this),xh(e)}}:function(e){setTimeout(Sh(e),0)});var Rh,Eh,Ah,Th,Ih,Lh,Mh,Fh,Dh={set:dh,clear:gh},Oh=C.f,Bh=Dh.set,Nh=n.MutationObserver||n.WebKitMutationObserver,Ph=n.document,zh=n.process,Uh=n.Promise,Hh=Oh(n,"queueMicrotask"),jh=Hh&&Hh.value;jh||(Rh=function(){var e,t;for(fh&&(e=zh.domain)&&e.exit();Eh;){t=Eh.fn,Eh=Eh.next;try{t()}catch(e){throw Eh?Th():Ah=void 0,e}}Ah=void 0,e&&e.enter()},!lh&&!fh&&Nh&&Ph?(Ih=!0,Lh=Ph.createTextNode(""),new Nh(Rh).observe(Lh,{characterData:!0}),Th=function(){Lh.data=Ih=!Ih}):Uh&&Uh.resolve?(Mh=Uh.resolve(void 0),Fh=Mh.then,Th=function(){Fh.call(Mh,Rh)}):Th=fh?function(){zh.nextTick(Rh)}:function(){Bh.call(n,Rh)});var qh,Vh,Wh,Gh,$h=jh||function(e){var t={fn:e,next:void 0};Ah&&(Ah.next=t),Eh||(Eh=t,Th()),Ah=t},Zh=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=Fe(t),this.reject=Fe(r)},Yh={f:function(e){return new Zh(e)}},Xh=function(e,t){if(R(e),v(t)&&t.constructor===e)return t;var r=Yh.f(e);return(0,r.resolve)(t),r.promise},Kh=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Qh=Dh.set,Jh=je("species"),el="Promise",tl=te.get,rl=te.set,nl=te.getterFor(el),il=Gu,al=n.TypeError,ol=n.document,sl=n.process,cl=ae("fetch"),ul=Yh.f,hl=ul,ll=!!(ol&&ol.createEvent&&n.dispatchEvent),fl="function"==typeof PromiseRejectionEvent,pl="unhandledrejection",dl=Ie(el,(function(){if(!(N(il)!==String(il))){if(66===Qe)return!0;if(!fh&&!fl)return!0}if(Qe>=51&&/native code/.test(il))return!1;var e=il.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[Jh]=t,!(e.then((function(){}))instanceof t)})),gl=dl||!hh((function(e){il.all(e).catch((function(){}))})),vl=function(e){var t;return!(!v(e)||"function"!=typeof(t=e.then))&&t},ml=function(e,t){if(!e.notified){e.notified=!0;var r=e.reactions;$h((function(){for(var n=e.value,i=1==e.state,a=0;r.length>a;){var o,s,c,u=r[a++],h=i?u.ok:u.fail,l=u.resolve,f=u.reject,p=u.domain;try{h?(i||(2===e.rejection&&kl(e),e.rejection=1),!0===h?o=n:(p&&p.enter(),o=h(n),p&&(p.exit(),c=!0)),o===u.promise?f(al("Promise-chain cycle")):(s=vl(o))?s.call(o,l,f):l(o)):f(n)}catch(e){p&&!c&&p.exit(),f(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&yl(e)}))}},bl=function(e,t,r){var i,a;ll?((i=ol.createEvent("Event")).promise=t,i.reason=r,i.initEvent(e,!1,!0),n.dispatchEvent(i)):i={promise:t,reason:r},!fl&&(a=n["on"+e])?a(i):e===pl&&function(e,t){var r=n.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))}("Unhandled promise rejection",r)},yl=function(e){Qh.call(n,(function(){var t,r=e.facade,n=e.value;if(wl(e)&&(t=Kh((function(){fh?sl.emit("unhandledRejection",n,r):bl(pl,r,n)})),e.rejection=fh||wl(e)?2:1,t.error))throw t.value}))},wl=function(e){return 1!==e.rejection&&!e.parent},kl=function(e){Qh.call(n,(function(){var t=e.facade;fh?sl.emit("rejectionHandled",t):bl("rejectionhandled",t,e.value)}))},xl=function(e,t,r){return function(n){e(t,n,r)}},Sl=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,ml(e,!0))},_l=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw al("Promise can't be resolved itself");var n=vl(t);n?$h((function(){var r={done:!1};try{n.call(t,xl(_l,r,e),xl(Sl,r,e))}catch(t){Sl(r,t,e)}})):(e.value=t,e.state=1,ml(e,!1))}catch(t){Sl({done:!1},t,e)}}};dl&&(il=function(e){Zu(this,il,el),Fe(e),qh.call(this);var t=tl(this);try{e(xl(_l,t),xl(Sl,t))}catch(e){Sl(t,e)}},(qh=function(e){rl(this,{type:el,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=$u(il.prototype,{then:function(e,t){var r=nl(this),n=ul(tr(this,il));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=fh?sl.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&ml(r,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),Vh=function(){var e=new qh,t=tl(e);this.promise=e,this.resolve=xl(_l,t),this.reject=xl(Sl,t)},Yh.f=ul=function(e){return e===il||e===Wh?new Vh(e):hl(e)},"function"==typeof Gu&&(Gh=Gu.prototype.then,re(Gu.prototype,"then",(function(e,t){var r=this;return new il((function(e,t){Gh.call(r,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof cl&&Me({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return Xh(il,cl.apply(n,arguments))}}))),Me({global:!0,wrap:!0,forced:dl},{Promise:il}),_i(il,el,!1),Ao(el),Wh=ae(el),Me({target:el,stat:!0,forced:dl},{reject:function(e){var t=ul(this);return t.reject.call(void 0,e),t.promise}}),Me({target:el,stat:!0,forced:dl},{resolve:function(e){return Xh(this,e)}}),Me({target:el,stat:!0,forced:gl},{all:function(e){var t=this,r=ul(t),n=r.resolve,i=r.reject,a=Kh((function(){var r=Fe(t.resolve),a=[],o=0,s=1;rh(e,(function(e){var c=o++,u=!1;a.push(void 0),s++,r.call(t,e).then((function(e){u||(u=!0,a[c]=e,--s||n(a))}),i)})),--s||n(a)}));return a.error&&i(a.value),r.promise},race:function(e){var t=this,r=ul(t),n=r.reject,i=Kh((function(){var i=Fe(t.resolve);rh(e,(function(e){i.call(t,e).then(r.resolve,n)}))}));return i.error&&n(i.value),r.promise}});var Cl=C.f,Rl="".startsWith,El=Math.min,Al=zt("startsWith"),Tl=!Al&&!!function(){var e=Cl(String.prototype,"startsWith");return e&&!e.writable}();Me({target:"String",proto:!0,forced:!Tl&&!Al},{startsWith:function(e){var t=String(d(this));Nt(e);var r=he(El(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return Rl?Rl.call(t,n,r):t.slice(r,r+n.length)===n}});var Il=Tu.trim;Me({target:"String",proto:!0,forced:function(e){return i((function(){return!!_u[e]()||"âÂá "!="âÂá "[e]()||_u[e].name!==e}))}("trim")},{trim:function(){return Il(this)}});var Ll=je("iterator"),Ml=!i((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),r+=n+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[Ll]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("http://a#Ð±").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host})),Fl=Object.assign,Dl=Object.defineProperty,Ol=!Fl||i((function(){if(a&&1!==Fl({b:1},Fl(Dl({},"a",{enumerable:!0,get:function(){Dl(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach((function(e){t[e]=e})),7!=Fl({},e)[r]||si(Fl({},t)).join("")!=n}))?function(e,t){for(var r=Oe(e),n=arguments.length,i=1,o=ke.f,s=c.f;n>i;)for(var u,h=p(arguments[i++]),l=o?si(h).concat(o(h)):si(h),f=l.length,d=0;f>d;)u=l[d++],a&&!s.call(h,u)||(r[u]=h[u]);return r}:Fl,Bl=function(e,t,r,n){try{return n?t(R(r)[0],r[1]):t(r)}catch(t){throw eh(e),t}},Nl=function(e){var t,r,n,i,a,o,s=Oe(e),c="function"==typeof this?this:Array,u=arguments.length,h=u>1?arguments[1]:void 0,l=void 0!==h,f=Ju(s),p=0;if(l&&(h=De(h,u>2?arguments[2]:void 0,2)),null==f||c==Array&&Ku(f))for(r=new c(t=he(s.length));t>p;p++)o=l?h(s[p],p):s[p],ua(r,p,o);else for(a=(i=f.call(s)).next,r=new c;!(n=a.call(i)).done;p++)o=l?Bl(i,h,[n.value,p],!0):n.value,ua(r,p,o);return r.length=p,r},Pl=2147483647,zl=/[^\0-\u007E]/,Ul=/[.\u3002\uFF0E\uFF61]/g,Hl="Overflow: input needs wider integers to process",jl=Math.floor,ql=String.fromCharCode,Vl=function(e){return e+22+75*(e<26)},Wl=function(e,t,r){var n=0;for(e=r?jl(e/700):e>>1,e+=jl(e/t);e>455;n+=36)e=jl(e/35);return jl(n+36*e/(e+38))},Gl=function(e){var t,r,n=[],i=(e=function(e){for(var t=[],r=0,n=e.length;r<n;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var a=e.charCodeAt(r++);56320==(64512&a)?t.push(((1023&i)<<10)+(1023&a)+65536):(t.push(i),r--)}else t.push(i)}return t}(e)).length,a=128,o=0,s=72;for(t=0;t<e.length;t++)(r=e[t])<128&&n.push(ql(r));var c=n.length,u=c;for(c&&n.push("-");u<i;){var h=Pl;for(t=0;t<e.length;t++)(r=e[t])>=a&&r<h&&(h=r);var l=u+1;if(h-a>jl((Pl-o)/l))throw RangeError(Hl);for(o+=(h-a)*l,a=h,t=0;t<e.length;t++){if((r=e[t])<a&&++o>Pl)throw RangeError(Hl);if(r==a){for(var f=o,p=36;;p+=36){var d=p<=s?1:p>=s+26?26:p-s;if(f<d)break;var g=f-d,v=36-d;n.push(ql(Vl(d+g%v))),f=jl(g/v)}n.push(ql(Vl(f))),s=Wl(o,l,u==c),o=0,++u}}++o,++a}return n.join("")},$l=function(e){var t=Ju(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return R(t.call(e))},Zl=ae("fetch"),Yl=ae("Headers"),Xl=je("iterator"),Kl="URLSearchParams",Ql="URLSearchParamsIterator",Jl=te.set,ef=te.getterFor(Kl),tf=te.getterFor(Ql),rf=/\+/g,nf=Array(4),af=function(e){return nf[e-1]||(nf[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},of=function(e){try{return decodeURIComponent(e)}catch(t){return e}},sf=function(e){var t=e.replace(rf," "),r=4;try{return decodeURIComponent(t)}catch(e){for(;r;)t=t.replace(af(r--),of);return t}},cf=/[!'()~]|%20/g,uf={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},hf=function(e){return uf[e]},lf=function(e){return encodeURIComponent(e).replace(cf,hf)},ff=function(e,t){if(t)for(var r,n,i=t.split("&"),a=0;a<i.length;)(r=i[a++]).length&&(n=r.split("="),e.push({key:sf(n.shift()),value:sf(n.join("="))}))},pf=function(e){this.entries.length=0,ff(this.entries,e)},df=function(e,t){if(e<t)throw TypeError("Not enough arguments")},gf=Ba((function(e,t){Jl(this,{type:Ql,iterator:$l(ef(e).entries),kind:t})}),"Iterator",(function(){var e=tf(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),r})),vf=function(){Zu(this,vf,Kl);var e,t,r,n,i,a,o,s,c,u=arguments.length>0?arguments[0]:void 0,h=this,l=[];if(Jl(h,{type:Kl,entries:l,updateURL:function(){},updateSearchParams:pf}),void 0!==u)if(v(u))if("function"==typeof(e=Ju(u)))for(r=(t=e.call(u)).next;!(n=r.call(t)).done;){if((o=(a=(i=$l(R(n.value))).next).call(i)).done||(s=a.call(i)).done||!a.call(i).done)throw TypeError("Expected sequence with length 2");l.push({key:o.value+"",value:s.value+""})}else for(c in u)y(u,c)&&l.push({key:c,value:u[c]+""});else ff(l,"string"==typeof u?"?"===u.charAt(0)?u.slice(1):u:u+"")},mf=vf.prototype;$u(mf,{append:function(e,t){df(arguments.length,2);var r=ef(this);r.entries.push({key:e+"",value:t+""}),r.updateURL()},delete:function(e){df(arguments.length,1);for(var t=ef(this),r=t.entries,n=e+"",i=0;i<r.length;)r[i].key===n?r.splice(i,1):i++;t.updateURL()},get:function(e){df(arguments.length,1);for(var t=ef(this).entries,r=e+"",n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){df(arguments.length,1);for(var t=ef(this).entries,r=e+"",n=[],i=0;i<t.length;i++)t[i].key===r&&n.push(t[i].value);return n},has:function(e){df(arguments.length,1);for(var t=ef(this).entries,r=e+"",n=0;n<t.length;)if(t[n++].key===r)return!0;return!1},set:function(e,t){df(arguments.length,1);for(var r,n=ef(this),i=n.entries,a=!1,o=e+"",s=t+"",c=0;c<i.length;c++)(r=i[c]).key===o&&(a?i.splice(c--,1):(a=!0,r.value=s));a||i.push({key:o,value:s}),n.updateURL()},sort:function(){var e,t,r,n=ef(this),i=n.entries,a=i.slice();for(i.length=0,r=0;r<a.length;r++){for(e=a[r],t=0;t<r;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===r&&i.push(e)}n.updateURL()},forEach:function(e){for(var t,r=ef(this).entries,n=De(e,arguments.length>1?arguments[1]:void 0,3),i=0;i<r.length;)n((t=r[i++]).value,t.key,this)},keys:function(){return new gf(this,"keys")},values:function(){return new gf(this,"values")},entries:function(){return new gf(this,"entries")}},{enumerable:!0}),re(mf,Xl,mf.entries),re(mf,"toString",(function(){for(var e,t=ef(this).entries,r=[],n=0;n<t.length;)e=t[n++],r.push(lf(e.key)+"="+lf(e.value));return r.join("&")}),{enumerable:!0}),_i(vf,Kl),Me({global:!0,forced:!Ml},{URLSearchParams:vf}),Ml||"function"!=typeof Zl||"function"!=typeof Yl||Me({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,r,n,i=[e];return arguments.length>1&&(v(t=arguments[1])&&(r=t.body,_o(r)===Kl&&((n=t.headers?new Yl(t.headers):new Yl).has("content-type")||n.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=di(t,{body:u(0,String(r)),headers:u(0,n)}))),i.push(t)),Zl.apply(this,i)}});var bf,yf={URLSearchParams:vf,getState:ef},wf=nr.codeAt,kf=n.URL,xf=yf.URLSearchParams,Sf=yf.getState,_f=te.set,Cf=te.getterFor("URL"),Rf=Math.floor,Ef=Math.pow,Af="Invalid scheme",Tf="Invalid host",If="Invalid port",Lf=/[A-Za-z]/,Mf=/[\d+-.A-Za-z]/,Ff=/\d/,Df=/^(0x|0X)/,Of=/^[0-7]+$/,Bf=/^\d+$/,Nf=/^[\dA-Fa-f]+$/,Pf=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,zf=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,Uf=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Hf=/[\u0009\u000A\u000D]/g,jf=function(e,t){var r,n,i;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return Tf;if(!(r=Vf(t.slice(1,-1))))return Tf;e.host=r}else if(Qf(e)){if(t=function(e){var t,r,n=[],i=e.toLowerCase().replace(Ul,".").split(".");for(t=0;t<i.length;t++)r=i[t],n.push(zl.test(r)?"xn--"+Gl(r):r);return n.join(".")}(t),Pf.test(t))return Tf;if(null===(r=qf(t)))return Tf;e.host=r}else{if(zf.test(t))return Tf;for(r="",n=Nl(t),i=0;i<n.length;i++)r+=Xf(n[i],Gf);e.host=r}},qf=function(e){var t,r,n,i,a,o,s,c=e.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(t=c.length)>4)return e;for(r=[],n=0;n<t;n++){if(""==(i=c[n]))return e;if(a=10,i.length>1&&"0"==i.charAt(0)&&(a=Df.test(i)?16:8,i=i.slice(8==a?1:2)),""===i)o=0;else{if(!(10==a?Bf:8==a?Of:Nf).test(i))return e;o=parseInt(i,a)}r.push(o)}for(n=0;n<t;n++)if(o=r[n],n==t-1){if(o>=Ef(256,5-t))return null}else if(o>255)return null;for(s=r.pop(),n=0;n<r.length;n++)s+=r[n]*Ef(256,3-n);return s},Vf=function(e){var t,r,n,i,a,o,s,c=[0,0,0,0,0,0,0,0],u=0,h=null,l=0,f=function(){return e.charAt(l)};if(":"==f()){if(":"!=e.charAt(1))return;l+=2,h=++u}for(;f();){if(8==u)return;if(":"!=f()){for(t=r=0;r<4&&Nf.test(f());)t=16*t+parseInt(f(),16),l++,r++;if("."==f()){if(0==r)return;if(l-=r,u>6)return;for(n=0;f();){if(i=null,n>0){if(!("."==f()&&n<4))return;l++}if(!Ff.test(f()))return;for(;Ff.test(f());){if(a=parseInt(f(),10),null===i)i=a;else{if(0==i)return;i=10*i+a}if(i>255)return;l++}c[u]=256*c[u]+i,2!=++n&&4!=n||u++}if(4!=n)return;break}if(":"==f()){if(l++,!f())return}else if(f())return;c[u++]=t}else{if(null!==h)return;l++,h=++u}}if(null!==h)for(o=u-h,u=7;0!=u&&o>0;)s=c[u],c[u--]=c[h+o-1],c[h+--o]=s;else if(8!=u)return;return c},Wf=function(e){var t,r,n,i;if("number"==typeof e){for(t=[],r=0;r<4;r++)t.unshift(e%256),e=Rf(e/256);return t.join(".")}if("object"==typeof e){for(t="",n=function(e){for(var t=null,r=1,n=null,i=0,a=0;a<8;a++)0!==e[a]?(i>r&&(t=n,r=i),n=null,i=0):(null===n&&(n=a),++i);return i>r&&(t=n,r=i),t}(e),r=0;r<8;r++)i&&0===e[r]||(i&&(i=!1),n===r?(t+=r?":":"::",i=!0):(t+=e[r].toString(16),r<7&&(t+=":")));return"["+t+"]"}return e},Gf={},$f=Ol({},Gf,{" ":1,'"':1,"<":1,">":1,"`":1}),Zf=Ol({},$f,{"#":1,"?":1,"{":1,"}":1}),Yf=Ol({},Zf,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Xf=function(e,t){var r=wf(e,0);return r>32&&r<127&&!y(t,e)?e:encodeURIComponent(e)},Kf={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Qf=function(e){return y(Kf,e.scheme)},Jf=function(e){return""!=e.username||""!=e.password},ep=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},tp=function(e,t){var r;return 2==e.length&&Lf.test(e.charAt(0))&&(":"==(r=e.charAt(1))||!t&&"|"==r)},rp=function(e){var t;return e.length>1&&tp(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},np=function(e){var t=e.path,r=t.length;!r||"file"==e.scheme&&1==r&&tp(t[0],!0)||t.pop()},ip=function(e){return"."===e||"%2e"===e.toLowerCase()},ap={},op={},sp={},cp={},up={},hp={},lp={},fp={},pp={},dp={},gp={},vp={},mp={},bp={},yp={},wp={},kp={},xp={},Sp={},_p={},Cp={},Rp=function(e,t,r,n){var i,a,o,s,c,u=r||ap,h=0,l="",f=!1,p=!1,d=!1;for(r||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(Uf,"")),t=t.replace(Hf,""),i=Nl(t);h<=i.length;){switch(a=i[h],u){case ap:if(!a||!Lf.test(a)){if(r)return Af;u=sp;continue}l+=a.toLowerCase(),u=op;break;case op:if(a&&(Mf.test(a)||"+"==a||"-"==a||"."==a))l+=a.toLowerCase();else{if(":"!=a){if(r)return Af;l="",u=sp,h=0;continue}if(r&&(Qf(e)!=y(Kf,l)||"file"==l&&(Jf(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=l,r)return void(Qf(e)&&Kf[e.scheme]==e.port&&(e.port=null));l="","file"==e.scheme?u=bp:Qf(e)&&n&&n.scheme==e.scheme?u=cp:Qf(e)?u=fp:"/"==i[h+1]?(u=up,h++):(e.cannotBeABaseURL=!0,e.path.push(""),u=Sp)}break;case sp:if(!n||n.cannotBeABaseURL&&"#"!=a)return Af;if(n.cannotBeABaseURL&&"#"==a){e.scheme=n.scheme,e.path=n.path.slice(),e.query=n.query,e.fragment="",e.cannotBeABaseURL=!0,u=Cp;break}u="file"==n.scheme?bp:hp;continue;case cp:if("/"!=a||"/"!=i[h+1]){u=hp;continue}u=pp,h++;break;case up:if("/"==a){u=dp;break}u=xp;continue;case hp:if(e.scheme=n.scheme,a==bf)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query=n.query;else if("/"==a||"\\"==a&&Qf(e))u=lp;else if("?"==a)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query="",u=_p;else{if("#"!=a){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.path.pop(),u=xp;continue}e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query=n.query,e.fragment="",u=Cp}break;case lp:if(!Qf(e)||"/"!=a&&"\\"!=a){if("/"!=a){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,u=xp;continue}u=dp}else u=pp;break;case fp:if(u=pp,"/"!=a||"/"!=l.charAt(h+1))continue;h++;break;case pp:if("/"!=a&&"\\"!=a){u=dp;continue}break;case dp:if("@"==a){f&&(l="%40"+l),f=!0,o=Nl(l);for(var g=0;g<o.length;g++){var v=o[g];if(":"!=v||d){var m=Xf(v,Yf);d?e.password+=m:e.username+=m}else d=!0}l=""}else if(a==bf||"/"==a||"?"==a||"#"==a||"\\"==a&&Qf(e)){if(f&&""==l)return"Invalid authority";h-=Nl(l).length+1,l="",u=gp}else l+=a;break;case gp:case vp:if(r&&"file"==e.scheme){u=wp;continue}if(":"!=a||p){if(a==bf||"/"==a||"?"==a||"#"==a||"\\"==a&&Qf(e)){if(Qf(e)&&""==l)return Tf;if(r&&""==l&&(Jf(e)||null!==e.port))return;if(s=jf(e,l))return s;if(l="",u=kp,r)return;continue}"["==a?p=!0:"]"==a&&(p=!1),l+=a}else{if(""==l)return Tf;if(s=jf(e,l))return s;if(l="",u=mp,r==vp)return}break;case mp:if(!Ff.test(a)){if(a==bf||"/"==a||"?"==a||"#"==a||"\\"==a&&Qf(e)||r){if(""!=l){var b=parseInt(l,10);if(b>65535)return If;e.port=Qf(e)&&b===Kf[e.scheme]?null:b,l=""}if(r)return;u=kp;continue}return If}l+=a;break;case bp:if(e.scheme="file","/"==a||"\\"==a)u=yp;else{if(!n||"file"!=n.scheme){u=xp;continue}if(a==bf)e.host=n.host,e.path=n.path.slice(),e.query=n.query;else if("?"==a)e.host=n.host,e.path=n.path.slice(),e.query="",u=_p;else{if("#"!=a){rp(i.slice(h).join(""))||(e.host=n.host,e.path=n.path.slice(),np(e)),u=xp;continue}e.host=n.host,e.path=n.path.slice(),e.query=n.query,e.fragment="",u=Cp}}break;case yp:if("/"==a||"\\"==a){u=wp;break}n&&"file"==n.scheme&&!rp(i.slice(h).join(""))&&(tp(n.path[0],!0)?e.path.push(n.path[0]):e.host=n.host),u=xp;continue;case wp:if(a==bf||"/"==a||"\\"==a||"?"==a||"#"==a){if(!r&&tp(l))u=xp;else if(""==l){if(e.host="",r)return;u=kp}else{if(s=jf(e,l))return s;if("localhost"==e.host&&(e.host=""),r)return;l="",u=kp}continue}l+=a;break;case kp:if(Qf(e)){if(u=xp,"/"!=a&&"\\"!=a)continue}else if(r||"?"!=a)if(r||"#"!=a){if(a!=bf&&(u=xp,"/"!=a))continue}else e.fragment="",u=Cp;else e.query="",u=_p;break;case xp:if(a==bf||"/"==a||"\\"==a&&Qf(e)||!r&&("?"==a||"#"==a)){if(".."===(c=(c=l).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(np(e),"/"==a||"\\"==a&&Qf(e)||e.path.push("")):ip(l)?"/"==a||"\\"==a&&Qf(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&tp(l)&&(e.host&&(e.host=""),l=l.charAt(0)+":"),e.path.push(l)),l="","file"==e.scheme&&(a==bf||"?"==a||"#"==a))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==a?(e.query="",u=_p):"#"==a&&(e.fragment="",u=Cp)}else l+=Xf(a,Zf);break;case Sp:"?"==a?(e.query="",u=_p):"#"==a?(e.fragment="",u=Cp):a!=bf&&(e.path[0]+=Xf(a,Gf));break;case _p:r||"#"!=a?a!=bf&&("'"==a&&Qf(e)?e.query+="%27":e.query+="#"==a?"%23":Xf(a,Gf)):(e.fragment="",u=Cp);break;case Cp:a!=bf&&(e.fragment+=Xf(a,$f))}h++}},Ep=function(e){var t,r,n=Zu(this,Ep,"URL"),i=arguments.length>1?arguments[1]:void 0,o=String(e),s=_f(n,{type:"URL"});if(void 0!==i)if(i instanceof Ep)t=Cf(i);else if(r=Rp(t={},String(i)))throw TypeError(r);if(r=Rp(s,o,null,t))throw TypeError(r);var c=s.searchParams=new xf,u=Sf(c);u.updateSearchParams(s.query),u.updateURL=function(){s.query=String(c)||null},a||(n.href=Tp.call(n),n.origin=Ip.call(n),n.protocol=Lp.call(n),n.username=Mp.call(n),n.password=Fp.call(n),n.host=Dp.call(n),n.hostname=Op.call(n),n.port=Bp.call(n),n.pathname=Np.call(n),n.search=Pp.call(n),n.searchParams=zp.call(n),n.hash=Up.call(n))},Ap=Ep.prototype,Tp=function(){var e=Cf(this),t=e.scheme,r=e.username,n=e.password,i=e.host,a=e.port,o=e.path,s=e.query,c=e.fragment,u=t+":";return null!==i?(u+="//",Jf(e)&&(u+=r+(n?":"+n:"")+"@"),u+=Wf(i),null!==a&&(u+=":"+a)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?o[0]:o.length?"/"+o.join("/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},Ip=function(){var e=Cf(this),t=e.scheme,r=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&Qf(e)?t+"://"+Wf(e.host)+(null!==r?":"+r:""):"null"},Lp=function(){return Cf(this).scheme+":"},Mp=function(){return Cf(this).username},Fp=function(){return Cf(this).password},Dp=function(){var e=Cf(this),t=e.host,r=e.port;return null===t?"":null===r?Wf(t):Wf(t)+":"+r},Op=function(){var e=Cf(this).host;return null===e?"":Wf(e)},Bp=function(){var e=Cf(this).port;return null===e?"":String(e)},Np=function(){var e=Cf(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Pp=function(){var e=Cf(this).query;return e?"?"+e:""},zp=function(){return Cf(this).searchParams},Up=function(){var e=Cf(this).fragment;return e?"#"+e:""},Hp=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(a&&ci(Ap,{href:Hp(Tp,(function(e){var t=Cf(this),r=String(e),n=Rp(t,r);if(n)throw TypeError(n);Sf(t.searchParams).updateSearchParams(t.query)})),origin:Hp(Ip),protocol:Hp(Lp,(function(e){var t=Cf(this);Rp(t,String(e)+":",ap)})),username:Hp(Mp,(function(e){var t=Cf(this),r=Nl(String(e));if(!ep(t)){t.username="";for(var n=0;n<r.length;n++)t.username+=Xf(r[n],Yf)}})),password:Hp(Fp,(function(e){var t=Cf(this),r=Nl(String(e));if(!ep(t)){t.password="";for(var n=0;n<r.length;n++)t.password+=Xf(r[n],Yf)}})),host:Hp(Dp,(function(e){var t=Cf(this);t.cannotBeABaseURL||Rp(t,String(e),gp)})),hostname:Hp(Op,(function(e){var t=Cf(this);t.cannotBeABaseURL||Rp(t,String(e),vp)})),port:Hp(Bp,(function(e){var t=Cf(this);ep(t)||(""==(e=String(e))?t.port=null:Rp(t,e,mp))})),pathname:Hp(Np,(function(e){var t=Cf(this);t.cannotBeABaseURL||(t.path=[],Rp(t,e+"",kp))})),search:Hp(Pp,(function(e){var t=Cf(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Rp(t,e,_p)),Sf(t.searchParams).updateSearchParams(t.query)})),searchParams:Hp(zp),hash:Hp(Up,(function(e){var t=Cf(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Rp(t,e,Cp)):t.fragment=null}))}),re(Ap,"toJSON",(function(){return Tp.call(this)}),{enumerable:!0}),re(Ap,"toString",(function(){return Tp.call(this)}),{enumerable:!0}),kf){var jp=kf.createObjectURL,qp=kf.revokeObjectURL;jp&&re(Ep,"createObjectURL",(function(e){return jp.apply(kf,arguments)})),qp&&re(Ep,"revokeObjectURL",(function(e){return qp.apply(kf,arguments)}))}_i(Ep,"URL"),Me({global:!0,forced:!Ml,sham:!a},{URL:Ep}),Me({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});var Vp=!i((function(){return Object.isExtensible(Object.preventExtensions({}))})),Wp=t((function(e){var t=A.f,r=q("meta"),n=0,i=Object.isExtensible||function(){return!0},a=function(e){t(e,r,{value:{objectID:"O"+ ++n,weakData:{}}})},o=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!v(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!y(e,r)){if(!i(e))return"F";if(!t)return"E";a(e)}return e[r].objectID},getWeakData:function(e,t){if(!y(e,r)){if(!i(e))return!0;if(!t)return!1;a(e)}return e[r].weakData},onFreeze:function(e){return Vp&&o.REQUIRED&&i(e)&&!y(e,r)&&a(e),e}};G[r]=!0})),Gp=(Wp.REQUIRED,Wp.fastKey,Wp.getWeakData,Wp.onFreeze,function(e,t,r){var a=-1!==e.indexOf("Map"),o=-1!==e.indexOf("Weak"),s=a?"set":"add",c=n[e],u=c&&c.prototype,h=c,l={},f=function(e){var t=u[e];re(u,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(o&&!v(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return o&&!v(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(o&&!v(e))&&t.call(this,0===e?0:e)}:function(e,r){return t.call(this,0===e?0:e,r),this})};if(Ie(e,"function"!=typeof c||!(o||u.forEach&&!i((function(){(new c).entries().next()})))))h=r.getConstructor(t,e,a,s),Wp.REQUIRED=!0;else if(Ie(e,!0)){var p=new h,d=p[s](o?{}:-0,1)!=p,g=i((function(){p.has(1)})),m=hh((function(e){new c(e)})),b=!o&&i((function(){for(var e=new c,t=5;t--;)e[s](t,t);return!e.has(-0)}));m||((h=t((function(t,r){Zu(t,h,e);var n=Ro(new c,t,h);return null!=r&&rh(r,n[s],{that:n,AS_ENTRIES:a}),n}))).prototype=u,u.constructor=h),(g||b)&&(f("delete"),f("has"),a&&f("get")),(b||d)&&f(s),o&&u.clear&&delete u.clear}return l[e]=h,Me({global:!0,forced:h!=c},l),_i(h,e),o||r.setStrong(h,e,a),h}),$p=A.f,Zp=Wp.fastKey,Yp=te.set,Xp=te.getterFor,Kp={getConstructor:function(e,t,r,n){var i=e((function(e,o){Zu(e,i,t),Yp(e,{type:t,index:di(null),first:void 0,last:void 0,size:0}),a||(e.size=0),null!=o&&rh(o,e[n],{that:e,AS_ENTRIES:r})})),o=Xp(t),s=function(e,t,r){var n,i,s=o(e),u=c(e,t);return u?u.value=r:(s.last=u={index:i=Zp(t,!0),key:t,value:r,previous:n=s.last,next:void 0,removed:!1},s.first||(s.first=u),n&&(n.next=u),a?s.size++:e.size++,"F"!==i&&(s.index[i]=u)),e},c=function(e,t){var r,n=o(e),i=Zp(t);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==t)return r};return $u(i.prototype,{clear:function(){for(var e=o(this),t=e.index,r=e.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete t[r.index],r=r.next;e.first=e.last=void 0,a?e.size=0:this.size=0},delete:function(e){var t=this,r=o(t),n=c(t,e);if(n){var i=n.next,s=n.previous;delete r.index[n.index],n.removed=!0,s&&(s.next=i),i&&(i.previous=s),r.first==n&&(r.first=i),r.last==n&&(r.last=s),a?r.size--:t.size--}return!!n},forEach:function(e){for(var t,r=o(this),n=De(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:r.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!c(this,e)}}),$u(i.prototype,r?{get:function(e){var t=c(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),a&&$p(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(e,t,r){var n=t+" Iterator",i=Xp(t),a=Xp(n);Wa(e,t,(function(e,t){Yp(this,{type:n,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=a(this),t=e.kind,r=e.last;r&&r.removed;)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),Ao(t)}},Qp=(Gp("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Kp),function(e){for(var t=Oe(this),r=he(t.length),n=arguments.length,i=pe(n>1?arguments[1]:void 0,r),a=n>2?arguments[2]:void 0,o=void 0===a?r:pe(a,r);o>i;)t[i++]=e;return t});Me({target:"Array",proto:!0},{fill:Qp}),ba("fill");var Jp={setProperties:function(e,t){for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];e[r]=n}},strokeLine:function(e,t,r,n,i,a){t=Math.floor(t)+.5,r=Math.floor(r)+.5,n=Math.floor(n)+.5,i=Math.floor(i)+.5,a&&(e.save(),Jp.setProperties(e,a)),e.beginPath(),e.moveTo(t,r),e.lineTo(n,i),e.stroke(),a&&e.restore()},fillRect:function(e,t,r,n,i,a){t=Math.round(t),r=Math.round(r),a&&(e.save(),Jp.setProperties(e,a)),e.fillRect(t,r,n,i),a&&e.restore()},fillPolygon:function(e,t,r,n){n&&(e.save(),Jp.setProperties(e,n)),ed(e,t,r),e.fill(),n&&e.restore()},strokePolygon:function(e,t,r,n){n&&(e.save(),Jp.setProperties(e,n)),ed(e,t,r),e.stroke(),n&&e.restore()},fillText:function(e,t,r,n,i,a){if((i||a)&&e.save(),i&&Jp.setProperties(e,i),a){for(var o in e.translate(r,n),a){var s=a[o];"translate"===o&&e.translate(s.x,s.y),"rotate"===o&&e.rotate(s.angle*Math.PI/180)}e.fillText(t,0,0)}else e.fillText(t,r,n);(i||a)&&e.restore()},strokeText:function(e,t,r,n,i,a){if((i||a)&&e.save(),i&&Jp.setProperties(e,i),a){for(var o in e.translate(r,n),a){var s=a[o];"translate"===o&&e.translate(s.x,s.y),"rotate"===o&&e.rotate(s.angle*Math.PI/180)}e.strokeText(t,0,0)}else e.strokeText(t,r,n);(i||a)&&e.restore()},strokeCircle:function(e,t,r,n,i){i&&(e.save(),Jp.setProperties(e,i)),e.beginPath(),e.arc(t,r,n,0,2*Math.PI),e.stroke(),i&&e.restore()},fillCircle:function(e,t,r,n,i){i&&(e.save(),Jp.setProperties(e,i)),e.beginPath(),e.arc(t,r,n,0,2*Math.PI),e.fill(),i&&e.restore()},drawArrowhead:function(e,t,r,n,i){e.save(),n||(n=5),i&&(e.lineWidth=i),e.beginPath(),e.moveTo(t,r-n/2),e.lineTo(t,r+n/2),e.lineTo(t+n,r),e.lineTo(t,r-n/2),e.closePath(),e.fill(),e.restore()},dashedLine:function(e,t,r,n,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};void 0===a&&(a=2),e.setLineDash([a,a]),Jp.strokeLine(e,t,r,n,i,o),e.setLineDash([])},roundRect:function(e,t,r,n,i,a,o,s){void 0===s&&(s=!0),void 0===a&&(a=5),e.beginPath(),e.moveTo(t+a,r),e.lineTo(t+n-a,r),e.quadraticCurveTo(t+n,r,t+n,r+a),e.lineTo(t+n,r+i-a),e.quadraticCurveTo(t+n,r+i,t+n-a,r+i),e.lineTo(t+a,r+i),e.quadraticCurveTo(t,r+i,t,r+i-a),e.lineTo(t,r+a),e.quadraticCurveTo(t,r,t+a,r),e.closePath(),s&&e.stroke(),o&&e.fill()},polygon:function(e,t,r,n,i){void 0===i&&(i=!0),e.beginPath();var a=t.length;e.moveTo(t[0],r[0]);for(var o=1;o<a;o++)e.lineTo(t[o],r[o]);e.closePath(),i&&e.stroke(),n&&e.fill()}};function ed(e,t,r){var n,i=t.length;for(n=0;n<i;n++)t[n]=Math.round(t[n]),r[n]=Math.round(r[n]);for(e.beginPath(),e.moveTo(t[0],r[0]),n=1;n<i;n++)e.lineTo(t[n],r[n]);e.closePath()}var td,rd,nd,id,ad,od=function(){function e(t,r,n,i){mr(this,e),this.guid=gn(),this.trackView=t,this.referenceFrame=n,this.browser=t.browser,this.$viewport=Su('<div class="igv-viewport">'),r.append(this.$viewport),this.$viewport.data("viewportGUID",this.guid),this.$content=Su("<div>",{class:"igv-viewport-content"}),this.$viewport.append(this.$content),this.$content.height(this.$viewport.height()),this.contentDiv=this.$content.get(0),this.$canvas=Su('<canvas class ="igv-canvas">'),this.$content.append(this.$canvas),this.canvas=this.$canvas.get(0),this.ctx=this.canvas.getContext("2d"),this.setWidth(i),this.initializationHelper()}var t,r;return yr(e,[{key:"initializationHelper",value:function(){}},{key:"setTrackLabel",value:function(e){}},{key:"startSpinner",value:function(){}},{key:"stopSpinner",value:function(){}},{key:"checkZoomIn",value:function(){return!0}},{key:"showMessage",value:function(e){this.messageDiv||(this.messageDiv=document.createElement("div"),this.messageDiv.className="igv-viewport-message",this.contentDiv.append(this.messageDiv)),this.messageDiv.textContent=e,this.messageDiv.style.display="inline-block"}},{key:"hideMessage",value:function(e){this.messageDiv&&(this.messageDiv.style.display="none")}},{key:"renderSVGContext",value:(r=vr(regeneratorRuntime.mark((function e(t,r){var n,i,a,o,s,c,u,h,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$zoomInNotice||!this.$zoomInNotice.is(":visible")){e.next=2;break}return e.abrupt("return");case 2:n=(n=this.trackView.track.name||this.trackView.track.id).replace(/\W/g,""),i=this.browser.referenceFrameList.indexOf(this.referenceFrame),a=n.toLowerCase()+"_genomic_state_index_"+i,0===i&&"function"==typeof this.trackView.track.paintAxis&&(o=this.trackView.controlCanvas.getBoundingClientRect(),t.addTrackGroupWithTranslationAndClipRect(a+"_axis",r.deltaX-o.width,r.deltaY,o.width,o.height,0),t.save(),this.trackView.track.paintAxis(t,o.width,o.height),t.restore()),s=Su(this.contentDiv).position().top,c=r.deltaX+i*t.multiLocusGap,u=r.deltaY+s,h=this.$viewport.get(0).getBoundingClientRect(),l=h.width,f=h.height,t.addTrackGroupWithTranslationAndClipRect(a,c,u,l,f,-s),this.drawSVGWithContect(t,l,f);case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"drawSVGWithContect",value:function(e){}},{key:"saveSVG",value:function(){}},{key:"isVisible",value:function(){return this.$viewport.width()}},{key:"setWidth",value:function(e){this.$viewport.width(e),this.canvas.style.width="".concat(e,"px"),this.canvas.setAttribute("width",e)}},{key:"getWidth",value:function(){return this.$viewport.width()}},{key:"shift",value:function(){}},{key:"setTop",value:function(e){}},{key:"loadFeatures",value:(t=vr(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"setContentHeight",value:function(e){}},{key:"isLoading",value:function(){return!1}},{key:"getContentHeight",value:function(){return this.$content.height()}},{key:"getContentTop",value:function(){return this.contentDiv.offsetTop}},{key:"containsPosition",value:function(e,t){return this.referenceFrame.chr===e&&t>=this.referenceFrame.start&&t<=this.referenceFrame.calculateEnd(this.getWidth())}},{key:"dispose",value:function(){this.popover&&this.popover.dispose(),this.$canvas.off(),this.$canvas.empty(),this.$content.off(),this.$content.empty(),this.$viewport.off(),this.$viewport.empty();for(var e=0,t=Object.keys(this);e<t.length;e++){this[t[e]]=void 0}}}]),e}();
/*!!
	 *  Canvas 2 Svg v1.0.19
	 *  A low level canvas to SVG converter. Uses a mock canvas context to build an SVG document.
	 *
	 *  Licensed under the MIT license:
	 *  http://www.opensource.org/licenses/mit-license.php
	 *
	 *  Author:
	 *  Kerry Liu
	 *
	 *  Copyright (c) 2014 Gliffy Inc.
	 */function sd(e,t){var r,n=Object.keys(t);for(r=0;r<n.length;r++)e=e.replace(new RegExp("\\{"+n[r]+"\\}","gi"),t[n[r]]);return e}function cd(e){var t,r,n;if(!e)throw new Error("cannot create a random attribute name for an undefined object");t="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",r="";do{for(r="",n=0;n<12;n++)r+=t[Math.floor(Math.random()*t.length)]}while(e[r]);return r}function ud(e){var t={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return t[e]||t.alphabetic}ad=function(e,t){var r,n,i,a={};for(e=e.split(","),t=t||10,r=0;r<e.length;r+=2)n="&"+e[r+1]+";",i=parseInt(e[r],t),a[n]="&#"+i+";";return a["\\xa0"]="&#160;",a}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),td={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},(nd=function(e,t){this.__root=e,this.__ctx=t}).prototype.addColorStop=function(e,t){var r,n=this.__ctx.__createElement("stop");n.setAttribute("offset",e),t&&-1!==t.indexOf("rgba")?(r=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(t),n.setAttribute("stop-color",sd("rgb({r},{g},{b})",{r:r[1],g:r[2],b:r[3]})),n.setAttribute("stop-opacity",r[4])):n.setAttribute("stop-color",t),this.__root.appendChild(n)},id=function(e,t){this.__root=e,this.__ctx=t},(rd=function(e){if(!(this instanceof rd))return new rd(e);if(this.config=e,this.width=e.width,this.height=e.height,this.enableMirroring=e.enableMirroring||!1,this.canvas=this,this.__document=document,e.ctx?this.__ctx=e.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.isSVG=!0,this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__createElement("svg"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__root.setAttribute("overflow","visible"),e.viewbox){var t=e.viewbox.x+" "+e.viewbox.y+" "+e.viewbox.width+" "+e.viewbox.height;this.__root.setAttribute("viewBox",t),this.viewbox=e.viewbox}this.__ids={},this.__defs=this.__createElement("defs"),this.__root.appendChild(this.__defs),this.multiLocusGap=e.multiLocusGap;var r={id:"svg_output_backdrop",width:"100%",height:"100%",fill:e.backdropColor||"white"},n=this.__createElement("rect",r);this.__root.appendChild(n),this.__rootGroup=this.__createElement("g",{id:"root-group"}),this.__root.appendChild(this.__rootGroup),this.__currentElement=this.__rootGroup}).prototype.setWidth=function(e){this.width=e,this.__root.setAttribute("width",this.width);var t=this.config.viewbox.x+" "+this.config.viewbox.y+" "+e+" "+this.config.viewbox.height;this.__root.setAttribute("viewBox",t)},rd.prototype.setHeight=function(e){this.height=e,this.__root.setAttribute("height",this.height);var t=this.config.viewbox.x+" "+this.config.viewbox.y+" "+this.config.viewbox.width+" "+e;this.__root.setAttribute("viewBox",t)},rd.prototype.__createElement=function(e,t,r){void 0===t&&(t={});var n=this.__document.createElementNS("http://www.w3.org/2000/svg",e);r&&(n.setAttribute("fill","none"),n.setAttribute("stroke","none"));for(var i=0,a=Object.keys(t);i<a.length;i++){var o=a[i];n.setAttribute(o,t[o])}return n},rd.prototype.__setDefaultStyles=function(){var e,t,r=Object.keys(td);for(e=0;e<r.length;e++)this[t=r[e]]=td[t].canvas},rd.prototype.__applyStyleState=function(e){var t,r,n=Object.keys(e);for(t=0;t<n.length;t++)this[r=n[t]]=e[r]},rd.prototype.__getStyleState=function(){var e,t,r={},n=Object.keys(td);for(e=0;e<n.length;e++)r[t=n[e]]=this[t];return r},rd.prototype.__applyStyleToCurrentElement=function(e){var t=this.__currentElement,r=this.__currentElementsToStyle;r&&(t.setAttribute(e,""),t=r.element,r.children.forEach((function(t){t.setAttribute(e,"")})));var n,i,a,o,s,c=Object.keys(td);for(n=0;n<c.length;n++)if(i=td[c[n]],a=this[c[n]],i.apply)if(a instanceof id){if(a.__ctx)for(;a.__ctx.__defs.childNodes.length;)o=a.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[o]=o,this.__defs.appendChild(a.__ctx.__defs.childNodes[0]);t.setAttribute(i.apply,sd("url(#{id})",{id:a.__root.getAttribute("id")}))}else if(a instanceof nd)t.setAttribute(i.apply,sd("url(#{id})",{id:a.__root.getAttribute("id")}));else if(i&&-1!==i.apply.indexOf(e)&&i.svg!==a)if("stroke"!==i.svgAttr&&"fill"!==i.svgAttr||!a||-1===a.indexOf("rgba")){var u=i.svgAttr;if("globalAlpha"===c[n]&&(u=e+"-"+i.svgAttr,t.getAttribute(u)))continue;t.setAttribute(u,a)}else{s=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(a),t.setAttribute(i.svgAttr,sd("rgb({r},{g},{b})",{r:s[1],g:s[2],b:s[3]}));var h=s[4],l=this.globalAlpha;null!=l&&(h*=l),t.setAttribute(i.svgAttr+"-opacity",h)}},rd.prototype.__closestGroupOrSvg=function(e){return"g"===(e=e||this.__currentElement).nodeName||"svg"===e.nodeName?e:this.__closestGroupOrSvg(e.parentNode)},rd.prototype.getSerializedSvg=function(e){var t,r,n,i,a,o=(new XMLSerializer).serializeToString(this.__root);if(e)for(t=Object.keys(ad),r=0;r<t.length;r++)n=t[r],i=ad[n],(a=new RegExp(n,"gi")).test(o)&&(o=o.replace(a,i));return o},rd.prototype.getSvg=function(){return this.__root},rd.prototype.save=function(){var e=this.__createElement("g"),t=this.__closestGroupOrSvg();this.__groupStack.push(t),t.appendChild(e),this.__currentElement=e,this.__stack.push(this.__getStyleState())},rd.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var e=this.__stack.pop();this.__applyStyleState(e)},rd.prototype.__addTransform=function(e){var t=this.__closestGroupOrSvg();if(t.childNodes.length>0){"path"===this.__currentElement.nodeName&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:t,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var r=this.__createElement("g");t.appendChild(r),this.__currentElement=r}var n=this.__currentElement.getAttribute("transform");n?n+=" ":n="",n+=e,this.__currentElement.setAttribute("transform",n)},rd.prototype.addTrackGroupWithTranslationAndClipRect=function(e,t,r,n,i,a){var o=e+"_clip_rect",s=this.__createElement("clipPath",{id:o});this.__defs.appendChild(s),s.appendChild(this.__createElement("rect",{x:"0",y:a.toString(),width:n.toString(),height:i.toString()}));var c=this.__createElement("g");this.__rootGroup.appendChild(c),c.setAttribute("transform",sd("translate({x},{y})",{x:t,y:r})),c.setAttribute("id",e+"_group"),c.setAttribute("clip-path",sd("url(#{id})",{id:o})),this.__currentElement=c},rd.prototype.scale=function(e,t){void 0===t&&(t=e),this.__addTransform(sd("scale({x},{y})",{x:e,y:t}))},rd.prototype.rotate=function(e){var t=180*e/Math.PI;this.__addTransform(sd("rotate({angle},{cx},{cy})",{angle:t,cx:0,cy:0}))},rd.prototype.translate=function(e,t){this.__addTransform(sd("translate({x},{y})",{x:e,y:t}))},rd.prototype.transform=function(e,t,r,n,i,a){this.__addTransform(sd("matrix({a},{b},{c},{d},{e},{f})",{a:e,b:t,c:r,d:n,e:i,f:a}))},rd.prototype.beginPath=function(){var e;this.__currentDefaultPath="",this.__currentPosition={},e=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(e),this.__currentElement=e},rd.prototype.__applyCurrentDefaultPath=function(){var e=this.__currentElement;"path"===e.nodeName?e.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",e.nodeName)},rd.prototype.__addPathCommand=function(e){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=e},rd.prototype.moveTo=function(e,t){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.__currentPosition={x:e,y:t},this.__addPathCommand(sd("M {x} {y}",{x:e,y:t}))},rd.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},rd.prototype.lineTo=function(e,t){this.__currentPosition={x:e,y:t},this.__currentDefaultPath&&this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(sd("L {x} {y}",{x:e,y:t})):this.__addPathCommand(sd("M {x} {y}",{x:e,y:t}))},rd.prototype.bezierCurveTo=function(e,t,r,n,i,a){this.__currentPosition={x:i,y:a},this.__addPathCommand(sd("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:e,cp1y:t,cp2x:r,cp2y:n,x:i,y:a}))},rd.prototype.quadraticCurveTo=function(e,t,r,n){this.__currentPosition={x:r,y:n},this.__addPathCommand(sd("Q {cpx} {cpy} {x} {y}",{cpx:e,cpy:t,x:r,y:n}))};var hd=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/t,e[1]/t]};rd.prototype.arcTo=function(e,t,r,n,i){var a=this.__currentPosition&&this.__currentPosition.x,o=this.__currentPosition&&this.__currentPosition.y;if(void 0!==a&&void 0!==o){if(i<0)throw new Error("IndexSizeError: The radius provided ("+i+") is negative.");if(a===e&&o===t||e===r&&t===n||0===i)this.lineTo(e,t);else{var s=hd([a-e,o-t]),c=hd([r-e,n-t]);if(s[0]*c[1]!=s[1]*c[0]){var u=s[0]*c[0]+s[1]*c[1],h=Math.acos(Math.abs(u)),l=hd([s[0]+c[0],s[1]+c[1]]),f=i/Math.sin(h/2),p=e+f*l[0],d=t+f*l[1],g=[-s[1],s[0]],v=[c[1],-c[0]],m=function(e){var t=e[0];return e[1]>=0?Math.acos(t):-Math.acos(t)},b=m(g),y=m(v);this.lineTo(p+g[0]*i,d+g[1]*i),this.arc(p,d,i,b,y)}else this.lineTo(e,t)}}},rd.prototype.stroke=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},rd.prototype.fill=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},rd.prototype.rect=function(e,t,r,n){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.moveTo(e,t),this.lineTo(e+r,t),this.lineTo(e+r,t+n),this.lineTo(e,t+n),this.lineTo(e,t),this.closePath()},rd.prototype.fillRect=function(e,t,r,n){n<0&&(t+=n,n=-n),r<0&&(e+=r,r=-r);var i,a,o,s={x:e,y:t,width:r,height:n};(!this.viewbox||(i=this.viewbox,a=s,i.x<a.x+a.width&&i.x+i.width>a.x&&i.y<a.y+a.height&&i.y+i.height>a.y))&&(o=this.__createElement("rect",s,!0),this.__closestGroupOrSvg().appendChild(o),this.__currentElement=o,this.__applyStyleToCurrentElement("fill"))},rd.prototype.strokeRect=function(e,t,r,n){var i;i=this.__createElement("rect",{x:e,y:t,width:r,height:n},!0),this.__closestGroupOrSvg().appendChild(i),this.__currentElement=i,this.__applyStyleToCurrentElement("stroke")},rd.prototype.__clearCanvas=function(){for(var e=this.__closestGroupOrSvg().getAttribute("transform"),t=this.__root.childNodes[1],r=t.childNodes,n=r.length-1;n>=0;n--)r[n]&&t.removeChild(r[n]);this.__currentElement=t,this.__groupStack=[],e&&this.__addTransform(e)},rd.prototype.clearRect=function(e,t,r,n){if(0!==e||0!==t||r!==this.width||n!==this.height){var i,a=this.__closestGroupOrSvg();i=this.__createElement("rect",{x:e,y:t,width:r,height:n,fill:"#FFFFFF"},!0),a.appendChild(i)}else this.__clearCanvas()},rd.prototype.createLinearGradient=function(e,t,r,n){var i=this.__createElement("linearGradient",{id:cd(this.__ids),x1:e+"px",x2:r+"px",y1:t+"px",y2:n+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(i),new nd(i,this)},rd.prototype.createRadialGradient=function(e,t,r,n,i,a){var o=this.__createElement("radialGradient",{id:cd(this.__ids),cx:n+"px",cy:i+"px",r:a+"px",fx:e+"px",fy:t+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(o),new nd(o,this)},rd.prototype.__parseFont=function(){var e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),t={style:e[1]||"normal",size:e[4]||"10px",family:e[6]||"sans-serif",weight:e[3]||"normal",decoration:e[2]||"normal",href:null};return"underline"===this.__fontUnderline&&(t.decoration="underline"),this.__fontHref&&(t.href=this.__fontHref),t},rd.prototype.__wrapTextLink=function(e,t){if(e.href){var r=this.__createElement("a");return r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.href),r.appendChild(t),r}return t},rd.prototype.__applyText=function(e,t,r,n){var i,a,o=this.__parseFont(),s=this.__closestGroupOrSvg(),c=this.__createElement("text",{"font-family":o.family,"font-size":o.size,"font-style":o.style,"font-weight":o.weight,"text-decoration":o.decoration,x:t,y:r,"text-anchor":(i=this.textAlign,a={left:"start",right:"end",center:"middle",start:"start",end:"end"},a[i]||a.start),"dominant-baseline":ud(this.textBaseline)},!0);c.appendChild(this.__document.createTextNode(e)),this.__currentElement=c,this.__applyStyleToCurrentElement(n),s.appendChild(this.__wrapTextLink(o,c))},rd.prototype.fillText=function(e,t,r){this.__applyText(e,t,r,"fill")},rd.prototype.strokeText=function(e,t,r){this.__applyText(e,t,r,"stroke")},rd.prototype.measureText=function(e){return this.__ctx.font=this.font,this.__ctx.measureText(e)},rd.prototype.arc=function(e,t,r,n,i,a){if(n!==i){(n%=2*Math.PI)===(i%=2*Math.PI)&&(i=(i+2*Math.PI-.001*(a?-1:1))%(2*Math.PI));var o=e+r*Math.cos(i),s=t+r*Math.sin(i),c=e+r*Math.cos(n),u=t+r*Math.sin(n),h=a?0:1,l=0,f=i-n;f<0&&(f+=2*Math.PI),l=a?f>Math.PI?0:1:f>Math.PI?1:0,this.lineTo(c,u),this.__addPathCommand(sd("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:r,ry:r,xAxisRotation:0,largeArcFlag:l,sweepFlag:h,endX:o,endY:s})),this.__currentPosition={x:o,y:s}}},rd.prototype.clip=function(){var e=this.__closestGroupOrSvg(),t=this.__createElement("clipPath"),r=cd(this.__ids),n=this.__createElement("g");this.__applyCurrentDefaultPath(),e.removeChild(this.__currentElement),t.setAttribute("id",r),t.appendChild(this.__currentElement),this.__defs.appendChild(t),e.setAttribute("clip-path",sd("url(#{id})",{id:r})),e.appendChild(n),this.__currentElement=n},rd.prototype.drawImage=function(){var e,t,r,n,i,a,o,s,c,u,h,l,f,p=Array.prototype.slice.call(arguments),d=p[0],g=0,v=0;if(3===p.length)e=p[1],t=p[2],r=i=d.width,n=a=d.height;else if(5===p.length)e=p[1],t=p[2],r=p[3],n=p[4],i=d.width,a=d.height;else{if(9!==p.length)throw new Error("Invalid number of arguments passed to drawImage: "+arguments.length);g=p[1],v=p[2],i=p[3],a=p[4],e=p[5],t=p[6],r=p[7],n=p[8]}o=this.__closestGroupOrSvg(),this.__currentElement;var m="translate("+e+", "+t+")";if(d instanceof rd){if((s=d.getSvg().cloneNode(!0)).childNodes&&s.childNodes.length>1){for(c=s.childNodes[0];c.childNodes.length;)f=c.childNodes[0].getAttribute("id"),this.__ids[f]=f,this.__defs.appendChild(c.childNodes[0]);if(u=s.childNodes[1]){var b,y=u.getAttribute("transform");b=y?y+" "+m:m,u.setAttribute("transform",b),o.appendChild(u)}}}else"CANVAS"!==d.nodeName&&"IMG"!==d.nodeName||((h=this.__createElement("image")).setAttribute("width",r),h.setAttribute("height",n),h.setAttribute("preserveAspectRatio","none"),(g||v||i!==d.width||a!==d.height)&&((l=this.__document.createElement("canvas")).width=r,l.height=n,l.getContext("2d").drawImage(d,g,v,i,a,0,0,r,n),d=l),h.setAttribute("transform",m),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===d.nodeName?d.toDataURL():d.getAttribute("src")),o.appendChild(h))},rd.prototype.createPattern=function(e,t){var r,n=this.__document.__createElement("pattern"),i=cd(this.__ids);return n.setAttribute("id",i),n.setAttribute("width",e.width),n.setAttribute("height",e.height),"CANVAS"===e.nodeName||"IMG"===e.nodeName?((r=this.__createElement("image")).setAttribute("width",e.width),r.setAttribute("height",e.height),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===e.nodeName?e.toDataURL():e.getAttribute("src")),n.appendChild(r),this.__defs.appendChild(n)):e instanceof rd&&(n.appendChild(e.__root.childNodes[1]),this.__defs.appendChild(n)),new id(n,this)},rd.prototype.setLineDash=function(e){e&&e.length>0?this.lineDash=e.join(","):this.lineDash=null},rd.prototype.drawFocusRing=function(){},rd.prototype.createImageData=function(){},rd.prototype.getImageData=function(){},rd.prototype.putImageData=function(){},rd.prototype.globalCompositeOperation=function(){},rd.prototype.setTransform=function(){};var ld=rd,fd=function(e){wr(r,e);var t=Ar(r);function r(e,n,i,a){var o;return mr(this,r),(o=t.call(this,e,n,i,a)).$canvas.on("click",(function(e){return o.handleClick(e,o.canvas)})),o}return yr(r,[{key:"setWidth",value:function(e){this.$viewport.width(e),this.ctx.canvas.style.width="".concat(e,"px"),this.ctx.canvas.width=window.devicePixelRatio*e,this.ctx.canvas.style.height="".concat(this.$viewport.height(),"px"),this.ctx.canvas.height=window.devicePixelRatio*this.$viewport.height(),this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio)}},{key:"handleClick",value:function(e,t){var r=vn(e,t),n=r.xNormalized,i=r.width,a=this.browser.genome.getChromosome(this.referenceFrame.chr).bpLength,o=this.referenceFrame.bpPerPixel*i/a,s=n;s-o/2<0&&(s=o/2),s+o/2>1&&(s=1-o/2);var c=Math.round((s-o/2)*a),u=Math.round((s+o/2)*a);this.referenceFrame.start=c,this.referenceFrame.initialEnd=u,this.referenceFrame.bpPerPixel=(u-c)/i,this.browser.referenceFrameList>1?this.browser.updateLocusSearchWidget(this.browser.referenceFrameList):this.browser.updateLocusSearchWidget([this.referenceFrame]),this.browser.updateViews()}},{key:"checkZoomIn",value:function(){return!0}},{key:"setTop",value:function(e){}},{key:"saveSVG",value:function(){var e=this.$viewport.get(0).getBoundingClientRect(),t=e.width,r=e.height,n=new ld({width:t,height:r,viewbox:{x:0,y:-Su(this.contentDiv).position().top,width:t,height:r}});this.drawSVGWithContect(n,t,r);var i=n.getSerializedSvg(!0),a=URL.createObjectURL(new Blob([i],{type:"application/octet-stream"}));Gn("".concat(this.trackView.track.id,".svg"),a)}},{key:"drawSVGWithContect",value:function(e,t,r){var n={ctx:e,width:t,height:r,genome:this.browser.genome,referenceFrame:this.referenceFrame,ideogramWidth:this.$content.width()};e.save(),pd(n),e.restore()}},{key:"repaint",value:function(){pd({ctx:this.ctx,width:this.$canvas.width(),height:this.$canvas.height(),genome:this.browser.genome,referenceFrame:this.referenceFrame,ideogramWidth:this.$content.width()})}}]),r}(od);function pd(e){var t=e.ctx,r=e.width,n=e.height,i=e.genome,a=e.referenceFrame,o=e.ideogramWidth,s=a.chr,c=i.getChromosome(s);if(!(!c||r<=0||n<=0||"all"===s.toLowerCase())){Jp.fillRect(t,0,0,r,n,{fillStyle:ei.greyScale(255)}),function(e){var t,r,n,i,a,o,s,c,u,h,l,f,p=e.ctx,d=e.chr,g=e.referenceFrame,v=e.genome,m=e.width,b=e.height,y=e.stainColors;if(r=.5*(t=1),n=0,void 0===v)return;if(Jp.fillRect(p,0,0,m,b,{fillStyle:ei.greyScale(255)}),i=v.getCytobands(d)){if(o=n+b/2,s=[],c=[],0===i.length)return;for(u=m/g.genome.getChromosome(d).bpLength,p.beginPath(),Jp.roundRect(p,r,r+n,m-2*r,b-2*r,(b-2*r)/2,0,1),p.clip(),f=0;f<i.length;f++)h=u*(a=i[f]).start,l=u*a.end,"c"===a.type?("p"===a.name.charAt(0)?(s[0]=h,c[0]=b+n,s[1]=h,c[1]=n,s[2]=l,c[2]=o):(s[0]=l,c[0]=b+n,s[1]=l,c[1]=n,s[2]=h,c[2]=o),p.fillStyle="rgb(150, 0, 0)",p.strokeStyle="rgb(150, 0, 0)",Jp.polygon(p,s,c,1,0)):(p.fillStyle=dd(y,a),Jp.fillRect(p,h,t+n,l-h,b-2*t))}p.strokeStyle=ei.greyScale(41),Jp.roundRect(p,r,r+n,m-2*r,b-2*r,(b-2*r)/2,0,1)}({ctx:t,chr:s,referenceFrame:a,genome:i,width:r,height:n,stainColors:[]});var u=Math.round(a.bpPerPixel*o),h=a.start,l=c.bpLength,f=i.getCytobands(s);if(f&&f.length>0&&(l=Math.max(l,f[f.length-1].end)),u<l){var p=u/l,d=h/l,g=Math.floor(d*r),v=Math.floor(p*r);g=Math.max(0,g),g=Math.min(r-v,g),t.save(),t.strokeStyle="red",t.lineWidth=v<2?1:2;var m=g+t.lineWidth/2;v=v<2?1:v-t.lineWidth;var b=t.lineWidth/2,y=n-t.lineWidth;t.strokeRect(m,b,v,y),t.restore()}}}function dd(e,t){if("c"===t.type)return"rgb(150, 10, 10)";var r=t.stain,n=230;"p"===t.type&&(n=Math.floor(230-r/100*230));var i=e[n];return i||(i="rgb("+n+","+n+","+n+")",e[n]=i),i}var gd=function(e){return function(t,r,n,i){Fe(r);var a=Oe(t),o=p(a),s=he(a.length),c=e?s-1:0,u=e?-1:1;if(n<2)for(;;){if(c in o){i=o[c],c+=u;break}if(c+=u,e?c<0:s<=c)throw TypeError("Reduce of empty array with no initial value")}for(;e?c>=0:s>c;c+=u)c in o&&(i=r(i,o[c],c,a));return i}},vd={left:gd(!1),right:gd(!0)},md=vd.left,bd=ct("reduce"),yd=it("reduce",{1:0});Me({target:"Array",proto:!0,forced:!bd||!yd||!fh&&Qe>79&&Qe<83},{reduce:function(e){return md(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var wd=Tu.trim,kd=n.parseInt,xd=/^[+-]?0[Xx]/,Sd=8!==kd(_u+"08")||22!==kd(_u+"0x16")?function(e,t){var r=wd(String(e));return kd(r,t>>>0||(xd.test(r)?16:10))}:kd;Me({target:"Number",stat:!0,forced:Number.parseInt!=Sd},{parseInt:Sd}),Me({target:"Object",stat:!0,forced:Object.assign!==Ol},{assign:Ol});var _d=c.f,Cd=function(e){return function(t){for(var r,n=g(t),i=si(n),o=i.length,s=0,c=[];o>s;)r=i[s++],a&&!_d.call(n,r)||c.push(e?[r,n[r]]:n[r]);return c}},Rd={entries:Cd(!0),values:Cd(!1)},Ed=Rd.values;Me({target:"Object",stat:!0},{values:function(e){return Ed(e)}});var Ad,Td="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Id=A.f,Ld=n.Int8Array,Md=Ld&&Ld.prototype,Fd=n.Uint8ClampedArray,Dd=Fd&&Fd.prototype,Od=Ld&&Ia(Ld),Bd=Md&&Ia(Md),Nd=Object.prototype,Pd=Nd.isPrototypeOf,zd=je("toStringTag"),Ud=q("TYPED_ARRAY_TAG"),Hd=Td&&!!Na&&"Opera"!==_o(n.opera),jd=!1,qd={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Vd={BigInt64Array:8,BigUint64Array:8},Wd=function(e){if(!v(e))return!1;var t=_o(e);return y(qd,t)||y(Vd,t)};for(Ad in qd)n[Ad]||(Hd=!1);if((!Hd||"function"!=typeof Od||Od===Function.prototype)&&(Od=function(){throw TypeError("Incorrect invocation")},Hd))for(Ad in qd)n[Ad]&&Na(n[Ad],Od);if((!Hd||!Bd||Bd===Nd)&&(Bd=Od.prototype,Hd))for(Ad in qd)n[Ad]&&Na(n[Ad].prototype,Bd);if(Hd&&Ia(Dd)!==Bd&&Na(Dd,Bd),a&&!y(Bd,zd))for(Ad in jd=!0,Id(Bd,zd,{get:function(){return v(this)?this[Ud]:void 0}}),qd)n[Ad]&&T(n[Ad],Ud,Ad);var Gd={NATIVE_ARRAY_BUFFER_VIEWS:Hd,TYPED_ARRAY_TAG:jd&&Ud,aTypedArray:function(e){if(Wd(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(Na){if(Pd.call(Od,e))return e}else for(var t in qd)if(y(qd,Ad)){var r=n[t];if(r&&(e===r||Pd.call(r,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r){if(a){if(r)for(var i in qd){var o=n[i];o&&y(o.prototype,e)&&delete o.prototype[e]}Bd[e]&&!r||re(Bd,e,r?t:Hd&&Md[e]||t)}},exportTypedArrayStaticMethod:function(e,t,r){var i,o;if(a){if(Na){if(r)for(i in qd)(o=n[i])&&y(o,e)&&delete o[e];if(Od[e]&&!r)return;try{return re(Od,e,r?t:Hd&&Ld[e]||t)}catch(e){}}for(i in qd)!(o=n[i])||o[e]&&!r||re(o,e,t)}},isView:function(e){if(!v(e))return!1;var t=_o(e);return"DataView"===t||y(qd,t)||y(Vd,t)},isTypedArray:Wd,TypedArray:Od,TypedArrayPrototype:Bd},$d=Gd.NATIVE_ARRAY_BUFFER_VIEWS,Zd=n.ArrayBuffer,Yd=n.Int8Array,Xd=!$d||!i((function(){Yd(1)}))||!i((function(){new Yd(-1)}))||!hh((function(e){new Yd,new Yd(null),new Yd(1.5),new Yd(e)}),!0)||i((function(){return 1!==new Yd(new Zd(2),1,void 0).length})),Kd=function(e){if(void 0===e)return 0;var t=ce(e),r=he(t);if(t!==r)throw RangeError("Wrong length or index");return r},Qd=1/0,Jd=Math.abs,eg=Math.pow,tg=Math.floor,rg=Math.log,ng=Math.LN2,ig=function(e,t,r){var n,i,a,o=new Array(r),s=8*r-t-1,c=(1<<s)-1,u=c>>1,h=23===t?eg(2,-24)-eg(2,-77):0,l=e<0||0===e&&1/e<0?1:0,f=0;for((e=Jd(e))!=e||e===Qd?(i=e!=e?1:0,n=c):(n=tg(rg(e)/ng),e*(a=eg(2,-n))<1&&(n--,a*=2),(e+=n+u>=1?h/a:h*eg(2,1-u))*a>=2&&(n++,a/=2),n+u>=c?(i=0,n=c):n+u>=1?(i=(e*a-1)*eg(2,t),n+=u):(i=e*eg(2,u-1)*eg(2,t),n=0));t>=8;o[f++]=255&i,i/=256,t-=8);for(n=n<<t|i,s+=t;s>0;o[f++]=255&n,n/=256,s-=8);return o[--f]|=128*l,o},ag=function(e,t){var r,n=e.length,i=8*n-t-1,a=(1<<i)-1,o=a>>1,s=i-7,c=n-1,u=e[c--],h=127&u;for(u>>=7;s>0;h=256*h+e[c],c--,s-=8);for(r=h&(1<<-s)-1,h>>=-s,s+=t;s>0;r=256*r+e[c],c--,s-=8);if(0===h)h=1-o;else{if(h===a)return r?NaN:u?-1/0:Qd;r+=eg(2,t),h-=o}return(u?-1:1)*r*eg(2,h-t)},og=we.f,sg=A.f,cg=te.get,ug=te.set,hg="ArrayBuffer",lg="DataView",fg="Wrong index",pg=n.ArrayBuffer,dg=pg,gg=n.DataView,vg=gg&&gg.prototype,mg=Object.prototype,bg=n.RangeError,yg=ig,wg=ag,kg=function(e){return[255&e]},xg=function(e){return[255&e,e>>8&255]},Sg=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},_g=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},Cg=function(e){return yg(e,23,4)},Rg=function(e){return yg(e,52,8)},Eg=function(e,t){sg(e.prototype,t,{get:function(){return cg(this)[t]}})},Ag=function(e,t,r,n){var i=Kd(r),a=cg(e);if(i+t>a.byteLength)throw bg(fg);var o=cg(a.buffer).bytes,s=i+a.byteOffset,c=o.slice(s,s+t);return n?c:c.reverse()},Tg=function(e,t,r,n,i,a){var o=Kd(r),s=cg(e);if(o+t>s.byteLength)throw bg(fg);for(var c=cg(s.buffer).bytes,u=o+s.byteOffset,h=n(+i),l=0;l<t;l++)c[u+l]=h[a?l:t-l-1]};if(Td){if(!i((function(){pg(1)}))||!i((function(){new pg(-1)}))||i((function(){return new pg,new pg(1.5),new pg(NaN),pg.name!=hg}))){for(var Ig,Lg=(dg=function(e){return Zu(this,dg),new pg(Kd(e))}).prototype=pg.prototype,Mg=og(pg),Fg=0;Mg.length>Fg;)(Ig=Mg[Fg++])in dg||T(dg,Ig,pg[Ig]);Lg.constructor=dg}Na&&Ia(vg)!==mg&&Na(vg,mg);var Dg=new gg(new dg(2)),Og=vg.setInt8;Dg.setInt8(0,2147483648),Dg.setInt8(1,2147483649),!Dg.getInt8(0)&&Dg.getInt8(1)||$u(vg,{setInt8:function(e,t){Og.call(this,e,t<<24>>24)},setUint8:function(e,t){Og.call(this,e,t<<24>>24)}},{unsafe:!0})}else dg=function(e){Zu(this,dg,hg);var t=Kd(e);ug(this,{bytes:Qp.call(new Array(t),0),byteLength:t}),a||(this.byteLength=t)},gg=function(e,t,r){Zu(this,gg,lg),Zu(e,dg,lg);var n=cg(e).byteLength,i=ce(t);if(i<0||i>n)throw bg("Wrong offset");if(i+(r=void 0===r?n-i:he(r))>n)throw bg("Wrong length");ug(this,{buffer:e,byteLength:r,byteOffset:i}),a||(this.buffer=e,this.byteLength=r,this.byteOffset=i)},a&&(Eg(dg,"byteLength"),Eg(gg,"buffer"),Eg(gg,"byteLength"),Eg(gg,"byteOffset")),$u(gg.prototype,{getInt8:function(e){return Ag(this,1,e)[0]<<24>>24},getUint8:function(e){return Ag(this,1,e)[0]},getInt16:function(e){var t=Ag(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Ag(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return _g(Ag(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return _g(Ag(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return wg(Ag(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return wg(Ag(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){Tg(this,1,e,kg,t)},setUint8:function(e,t){Tg(this,1,e,kg,t)},setInt16:function(e,t){Tg(this,2,e,xg,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){Tg(this,2,e,xg,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){Tg(this,4,e,Sg,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){Tg(this,4,e,Sg,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){Tg(this,4,e,Cg,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){Tg(this,8,e,Rg,t,arguments.length>2?arguments[2]:void 0)}});_i(dg,hg),_i(gg,lg);var Bg={ArrayBuffer:dg,DataView:gg},Ng=function(e,t){var r=function(e){var t=ce(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}(e);if(r%t)throw RangeError("Wrong offset");return r},Pg=Gd.aTypedArrayConstructor,zg=function(e){var t,r,n,i,a,o,s=Oe(e),c=arguments.length,u=c>1?arguments[1]:void 0,h=void 0!==u,l=Ju(s);if(null!=l&&!Ku(l))for(o=(a=l.call(s)).next,s=[];!(i=o.call(a)).done;)s.push(i.value);for(h&&c>2&&(u=De(u,arguments[2],2)),r=he(s.length),n=new(Pg(this))(r),t=0;r>t;t++)n[t]=h?u(s[t],t):s[t];return n},Ug=t((function(e){var t=we.f,r=$e.forEach,i=te.get,o=te.set,s=A.f,c=C.f,h=Math.round,l=n.RangeError,f=Bg.ArrayBuffer,p=Bg.DataView,d=Gd.NATIVE_ARRAY_BUFFER_VIEWS,g=Gd.TYPED_ARRAY_TAG,b=Gd.TypedArray,w=Gd.TypedArrayPrototype,k=Gd.aTypedArrayConstructor,x=Gd.isTypedArray,S="BYTES_PER_ELEMENT",_="Wrong length",R=function(e,t){for(var r=0,n=t.length,i=new(k(e))(n);n>r;)i[r]=t[r++];return i},E=function(e,t){s(e,t,{get:function(){return i(this)[t]}})},I=function(e){var t;return e instanceof f||"ArrayBuffer"==(t=_o(e))||"SharedArrayBuffer"==t},L=function(e,t){return x(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},M=function(e,t){return L(e,t=m(t,!0))?u(2,e[t]):c(e,t)},F=function(e,t,r){return!(L(e,t=m(t,!0))&&v(r)&&y(r,"value"))||y(r,"get")||y(r,"set")||r.configurable||y(r,"writable")&&!r.writable||y(r,"enumerable")&&!r.enumerable?s(e,t,r):(e[t]=r.value,e)};a?(d||(C.f=M,A.f=F,E(w,"buffer"),E(w,"byteOffset"),E(w,"byteLength"),E(w,"length")),Me({target:"Object",stat:!0,forced:!d},{getOwnPropertyDescriptor:M,defineProperty:F}),e.exports=function(e,a,c){var u=e.match(/\d+$/)[0]/8,m=e+(c?"Clamped":"")+"Array",y="get"+e,k="set"+e,C=n[m],E=C,A=E&&E.prototype,L={},M=function(e,t){s(e,t,{get:function(){return function(e,t){var r=i(e);return r.view[y](t*u+r.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var n=i(e);c&&(r=(r=h(r))<0?0:r>255?255:255&r),n.view[k](t*u+n.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};d?Xd&&(E=a((function(e,t,r,n){return Zu(e,E,m),Ro(v(t)?I(t)?void 0!==n?new C(t,Ng(r,u),n):void 0!==r?new C(t,Ng(r,u)):new C(t):x(t)?R(E,t):zg.call(E,t):new C(Kd(t)),e,E)})),Na&&Na(E,b),r(t(C),(function(e){e in E||T(E,e,C[e])})),E.prototype=A):(E=a((function(e,t,r,n){Zu(e,E,m);var i,a,s,c=0,h=0;if(v(t)){if(!I(t))return x(t)?R(E,t):zg.call(E,t);i=t,h=Ng(r,u);var d=t.byteLength;if(void 0===n){if(d%u)throw l(_);if((a=d-h)<0)throw l(_)}else if((a=he(n)*u)+h>d)throw l(_);s=a/u}else s=Kd(t),i=new f(a=s*u);for(o(e,{buffer:i,byteOffset:h,byteLength:a,length:s,view:new p(i)});c<s;)M(e,c++)})),Na&&Na(E,b),A=E.prototype=di(w)),A.constructor!==E&&T(A,"constructor",E),g&&T(A,g,m),L[m]=E,Me({global:!0,forced:E!=C,sham:!d},L),S in E||T(E,S,u),S in A||T(A,S,u),Ao(m)}):e.exports=function(){}}));Ug("Uint8",(function(e){return function(t,r,n){return e(this,t,r,n)}}));var Hg=Math.min,jg=[].copyWithin||function(e,t){var r=Oe(this),n=he(r.length),i=pe(e,n),a=pe(t,n),o=arguments.length>2?arguments[2]:void 0,s=Hg((void 0===o?n:pe(o,n))-a,n-i),c=1;for(a<i&&i<a+s&&(c=-1,a+=s-1,i+=s-1);s-- >0;)a in r?r[i]=r[a]:delete r[i],i+=c,a+=c;return r},qg=Gd.aTypedArray;(0,Gd.exportTypedArrayMethod)("copyWithin",(function(e,t){return jg.call(qg(this),e,t,arguments.length>2?arguments[2]:void 0)}));var Vg=$e.every,Wg=Gd.aTypedArray;(0,Gd.exportTypedArrayMethod)("every",(function(e){return Vg(Wg(this),e,arguments.length>1?arguments[1]:void 0)}));var Gg=Gd.aTypedArray;(0,Gd.exportTypedArrayMethod)("fill",(function(e){return Qp.apply(Gg(this),arguments)}));var $g=$e.filter,Zg=Gd.aTypedArray,Yg=Gd.aTypedArrayConstructor;(0,Gd.exportTypedArrayMethod)("filter",(function(e){for(var t=$g(Zg(this),e,arguments.length>1?arguments[1]:void 0),r=tr(this,this.constructor),n=0,i=t.length,a=new(Yg(r))(i);i>n;)a[n]=t[n++];return a}));var Xg=$e.find,Kg=Gd.aTypedArray;(0,Gd.exportTypedArrayMethod)("find",(function(e){return Xg(Kg(this),e,arguments.length>1?arguments[1]:void 0)}));var Qg=$e.findIndex,Jg=Gd.aTypedArray;(0,Gd.exportTypedArrayMethod)("findIndex",(function(e){return Qg(Jg(this),e,arguments.length>1?arguments[1]:void 0)}));var ev=$e.forEach,tv=Gd.aTypedArray;(0,Gd.exportTypedArrayMethod)("forEach",(function(e){ev(tv(this),e,arguments.length>1?arguments[1]:void 0)}));var rv=ge.includes,nv=Gd.aTypedArray;(0,Gd.exportTypedArrayMethod)("includes",(function(e){return rv(nv(this),e,arguments.length>1?arguments[1]:void 0)}));var iv=ge.indexOf,av=Gd.aTypedArray;(0,Gd.exportTypedArrayMethod)("indexOf",(function(e){return iv(av(this),e,arguments.length>1?arguments[1]:void 0)}));var ov=je("iterator"),sv=n.Uint8Array,cv=Ya.values,uv=Ya.keys,hv=Ya.entries,lv=Gd.aTypedArray,fv=Gd.exportTypedArrayMethod,pv=sv&&sv.prototype[ov],dv=!!pv&&("values"==pv.name||null==pv.name),gv=function(){return cv.call(lv(this))};fv("entries",(function(){return hv.call(lv(this))})),fv("keys",(function(){return uv.call(lv(this))})),fv("values",gv,!dv),fv(ov,gv,!dv);var vv=Gd.aTypedArray,mv=[].join;(0,Gd.exportTypedArrayMethod)("join",(function(e){return mv.apply(vv(this),arguments)}));var bv=Gd.aTypedArray;(0,Gd.exportTypedArrayMethod)("lastIndexOf",(function(e){return St.apply(bv(this),arguments)}));var yv=$e.map,wv=Gd.aTypedArray,kv=Gd.aTypedArrayConstructor;(0,Gd.exportTypedArrayMethod)("map",(function(e){return yv(wv(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(kv(tr(e,e.constructor)))(t)}))}));var xv=vd.left,Sv=Gd.aTypedArray;(0,Gd.exportTypedArrayMethod)("reduce",(function(e){return xv(Sv(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}));var _v=vd.right,Cv=Gd.aTypedArray;(0,Gd.exportTypedArrayMethod)("reduceRight",(function(e){return _v(Cv(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}));var Rv=Gd.aTypedArray,Ev=Gd.exportTypedArrayMethod,Av=Math.floor;Ev("reverse",(function(){for(var e,t=this,r=Rv(t).length,n=Av(r/2),i=0;i<n;)e=t[i],t[i++]=t[--r],t[r]=e;return t}));var Tv=Gd.aTypedArray;(0,Gd.exportTypedArrayMethod)("set",(function(e){Tv(this);var t=Ng(arguments.length>1?arguments[1]:void 0,1),r=this.length,n=Oe(e),i=he(n.length),a=0;if(i+t>r)throw RangeError("Wrong length");for(;a<i;)this[t+a]=n[a++]}),i((function(){new Int8Array(1).set({})})));var Iv=Gd.aTypedArray,Lv=Gd.aTypedArrayConstructor,Mv=[].slice;(0,Gd.exportTypedArrayMethod)("slice",(function(e,t){for(var r=Mv.call(Iv(this),e,t),n=tr(this,this.constructor),i=0,a=r.length,o=new(Lv(n))(a);a>i;)o[i]=r[i++];return o}),i((function(){new Int8Array(1).slice()})));var Fv=$e.some,Dv=Gd.aTypedArray;(0,Gd.exportTypedArrayMethod)("some",(function(e){return Fv(Dv(this),e,arguments.length>1?arguments[1]:void 0)}));var Ov=Gd.aTypedArray,Bv=[].sort;(0,Gd.exportTypedArrayMethod)("sort",(function(e){return Bv.call(Ov(this),e)}));var Nv=Gd.aTypedArray;(0,Gd.exportTypedArrayMethod)("subarray",(function(e,t){var r=Nv(this),n=r.length,i=pe(e,n);return new(tr(r,r.constructor))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,he((void 0===t?n:pe(t,n))-i))}));var Pv=n.Int8Array,zv=Gd.aTypedArray,Uv=Gd.exportTypedArrayMethod,Hv=[].toLocaleString,jv=[].slice,qv=!!Pv&&i((function(){Hv.call(new Pv(1))}));Uv("toLocaleString",(function(){return Hv.apply(qv?jv.call(zv(this)):zv(this),arguments)}),i((function(){return[1,2].toLocaleString()!=new Pv([1,2]).toLocaleString()}))||!i((function(){Pv.prototype.toLocaleString.call([1,2])})));var Vv=Gd.exportTypedArrayMethod,Wv=n.Uint8Array,Gv=Wv&&Wv.prototype||{},$v=[].toString,Zv=[].join;i((function(){$v.call({})}))&&($v=function(){return Zv.call(this)});var Yv=Gv.toString!=$v;Vv("toString",$v,Yv);var Xv=function(e,t,r,n){this.start=e,this.end=t,this.name=r,this.stain=0,"acen"===n?this.type="c":(this.type=n.charAt(1),"p"===this.type&&(this.stain=parseInt(n.substring(4))))},Kv=function(e,t,r,n){this.chr=e,this.start=t,this.end=r,this.features=n};Kv.prototype.contains=function(e,t,r){return this.chr===e&&this.start<=t&&this.end>=r},Kv.prototype.containsRange=function(e){return this.chr===e.chr&&this.start<=e.start&&this.end>=e.end};var Qv=function(e,t,r,n,i){this.name=e,this.order=t,this.bpStart=r,this.bpLength=n,this.rangeLocus=i},Jv=ge.includes,em=it("indexOf",{ACCESSORS:!0,1:0});Me({target:"Array",proto:!0,forced:!em},{includes:function(e){return Jv(this,e,arguments.length>1?arguments[1]:void 0)}}),ba("includes");var tm=String.fromCharCode,rm=String.fromCodePoint,nm=!!rm&&1!=rm.length;Me({target:"String",stat:!0,forced:nm},{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,i=0;n>i;){if(t=+arguments[i++],pe(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?tm(t):tm(55296+((t-=65536)>>10),t%1024+56320))}return r.join("")}}),Me({target:"String",proto:!0,forced:!zt("includes")},{includes:function(e){return!!~String(d(this)).indexOf(Nt(e),arguments.length>1?arguments[1]:void 0)}});var im="googleapis",am={oauthTokens:{},setToken:function(e,t){t=t||im,this.oauthTokens[t]=e,t===im&&(this.google.access_token=e)},getToken:function(e){var t;e=e||im;for(var r=0,n=Object.keys(this.oauthTokens);r<n.length;r++){var i=n[r];if(om(i).test(e)){t=this.oauthTokens[i];break}}return t},removeToken:function(e){e=e||im;for(var t=0,r=Object.keys(this.oauthTokens);t<r.length;t++){var n=r[t];om(n).test(e)&&(this.oauthTokens[n]=void 0)}e===im&&(this.google.access_token=void 0)},google:{setToken:function(e){am.setToken(e)}}};function om(e){return new RegExp("^"+e.split(/\*+/).map(sm).join(".*")+"$")}function sm(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}function cm(e,t){var r=[],n=0,i=0;for(t=t||e.byteLength-18;n<t;)try{var a=new Uint8Array(e,n,18),o=a[11]<<8|a[10],s=(a[12],a[13],a[15],a[14],1+(a[17]<<8|a[16])),c=12+o+n,u=e.byteLength-c,h=s-o-19;if(u<h||h<=0)break;var l=new Uint8Array(e,c,h),f=new wn.RawInflate(l),p=f.decompress();n+=f.ip+26,i+=p.byteLength,r.push(p)}catch(e){console.error(e);break}if(1===r.length)return r[0];for(var d=new Uint8Array(i),g=0,v=0;v<r.length;++v){var m=new Uint8Array(r[v]);lm(m,0,d,g,m.length),g+=m.length}return d}function um(e){var t=new Uint8Array(e);return t[17]<<8|t[16]+1}var hm="function"==typeof new Uint8Array(1).subarray;function lm(e,t,r,n,i){if(0!==i){if(!e)throw"Undef src";if(!r)throw"Undef dest";0===t&&i===e.length?fm(e,r,n):hm?fm(e.subarray(t,t+i),r,n):1===e.BYTES_PER_ELEMENT&&i>100?fm(new Uint8Array(e.buffer,e.byteOffset+t,i),r,n):function(e,t,r,n,i){for(var a=0;a<i;++a)r[n+a]=e[t+a]}(e,t,r,n,i)}}function fm(e,t,r){t.set(e,r)}var pm=n.isFinite,dm=Number.isFinite||function(e){return"number"==typeof e&&pm(e)};Me({target:"Number",stat:!0},{isFinite:dm}),Me({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var gm="".repeat||function(e){var t=String(d(this)),r="",n=ce(e);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(r+=t);return r},vm=1..toFixed,mm=Math.floor,bm=function(e,t,r){return 0===t?r:t%2==1?bm(e,t-1,r*e):bm(e*e,t/2,r)},ym=vm&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!i((function(){vm.call({})}));function wm(e){var t=new Set(["boolean","number","string","symbol"]),r=dr(e);return void 0!==e&&(t.has(r)||e.substring||e.toFixed)}function km(e,t){var r={oauthToken:e.oauthToken,headers:e.headers,withCredentials:e.withCredentials,filename:e.filename};return Object.assign(r,t)}Me({target:"Number",proto:!0,forced:ym},{toFixed:function(e){var t,r,n,i,a=function(e){if("number"!=typeof e&&"Number"!=l(e))throw TypeError("Incorrect invocation");return+e}(this),o=ce(e),s=[0,0,0,0,0,0],c="",u="0",h=function(e,t){for(var r=-1,n=t;++r<6;)n+=e*s[r],s[r]=n%1e7,n=mm(n/1e7)},f=function(e){for(var t=6,r=0;--t>=0;)r+=s[t],s[t]=mm(r/e),r=r%e*1e7},p=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==s[e]){var r=String(s[e]);t=""===t?r:t+gm.call("0",7-r.length)+r}return t};if(o<0||o>20)throw RangeError("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return String(a);if(a<0&&(c="-",a=-a),a>1e-21)if(r=(t=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t}(a*bm(2,69,1))-69)<0?a*bm(2,-t,1):a/bm(2,t,1),r*=4503599627370496,(t=52-t)>0){for(h(0,r),n=o;n>=7;)h(1e7,0),n-=7;for(h(bm(10,n,1),0),n=t-1;n>=23;)f(1<<23),n-=23;f(1<<n),h(1,1),f(2),u=p()}else h(0,r),h(1<<-t,0),u=p()+gm.call("0",o);return u=o>0?c+((i=u.length)<=o?"0."+gm.call("0",o-i)+u:u.slice(0,i-o)+"."+u.slice(i-o)):c+u}});var xm=function(e){var t,r;return e.length>0?(t=Number.MAX_VALUE,r=-Number.MAX_VALUE,e.forEach((function(e){Number.isNaN(e.value)||(t=Math.min(t,e.value),r=Math.max(r,e.value))})),r>0&&(t=Math.min(0,t)),r<0&&(r=0)):(t=0,r=100),{min:t,max:r}},Sm=function(e,t,r){var n=t.start,i=t.end;if(void 0===i)(i=(n-=r/2)+r)>e?n=(i=e)-r:n<0&&(n=0,i=r);else if(i-n<r){var a=(i+n)/2;a-r/2<0?i=(n=0)+r:a+r/2>e?n=(i=e)-r:i=(n=a-r/2)+r}t.start=Math.ceil(n),t.end=Math.floor(i)};function _m(e){if(function(e){e.featureType&&(e.type=e.type||e.featureType,e.featureType=void 0);"junctions"===e.type?e.type="spliceJunctions":"bed"===e.type?(e.type="annotation",e.format=e.format||"bed"):"annotations"===e.type?e.type="annotation":"alignments"===e.type?e.type="alignment":"bam"===e.type?(e.type="alignment",e.format="bam"):"vcf"===e.type?(e.type="variant",e.format="vcf"):"t2d"===e.type?e.type="gwas":"FusionJuncSpan"!==e.type||e.format?"aed"===e.type&&(e.type="annotation",e.format=e.format||"aed"):e.format="fusionjuncspan"}(e),e.type)return e.type;var t;("file"===e.sourceType||void 0===e.sourceType&&e.url)&&(t=void 0===e.format?Yn(Wn(e.url)?e.url.name:e.url):e.format.toLowerCase());if(t)switch(t){case"bw":case"bigwig":case"wig":case"bedgraph":case"tdf":return"wig";case"vcf":return"variant";case"seg":return"seg";case"bam":case"cram":return"alignment";case"bedpe":case"bedpe-loop":return"interaction";case"bp":return"arc";case"gwas":return"gwas";case"bed":case"bigbed":case"bb":return"bedtype";default:return"annotation"}}function Cm(e){return Rm.apply(this,arguments)}function Rm(){return(Rm=vr(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Sn(t)||!t.startsWith("https://drive.google.com")){e.next=9;break}if(void 0!==Pn()){e.next=3;break}throw Error("Google drive is referenced, but API key is not defined.  An API key is required for Google Drive access");case 3:return e.next=5,zn(t);case 5:return r=e.sent,e.abrupt("return",r.originalFileName||r.name);case 9:return e.abrupt("return",Vn(t));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Em,Am,Tm,Im=new(function(){function e(t){mr(this,e),this.requestsPerSecond=t.requestsPerSecond||10,this.lastStartTime=0,this.queued=[]}var t;return yr(e,[{key:"add",value:function(e,t){var r=this;return new Promise((function(t,n){r.queued.push({resolve:t,reject:n,asyncFunction:e}),r.dequeue()}))}},{key:"addAll",value:function(e,t){var r=e.map(function(e){return this.add(e,t)}.bind(this));return Promise.all(r)}},{key:"dequeue",value:function(){if(this.queued.length>0){var e=new Date,t=1e3/this.requestsPerSecond+1,r=e-this.lastStartTime;r>=t?this._execute():setTimeout(function(){this.dequeue()}.bind(this),t-r)}}},{key:"_execute",value:(t=vr(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastStartTime=new Date,t=this.queued.shift(),r=t.asyncFunction,e.prev=3,e.next=6,r();case 6:n=e.sent,t.resolve(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),t.reject(e.t0);case 13:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(){return t.apply(this,arguments)})}]),e}())({requestsPerSecond:9}),Lm={apiKey:void 0,setApiKey:function(e){this.apiKey=e},load:Mm,loadArrayBuffer:(Tm=vr(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=r||{}).responseType||(r.responseType="arraybuffer"),!(t instanceof File)){e.next=6;break}return e.abrupt("return",Bm(t,r));case 6:return e.abrupt("return",Mm(t,r));case 7:case"end":return e.stop()}}),e)}))),function(e,t){return Tm.apply(this,arguments)}),loadJson:(Am=vr(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"POST"===((r=r||{}).method||(r.sendData?"POST":"GET"))&&(r.contentType="application/json"),e.next=5,this.loadString(t,r);case 5:if(!(n=e.sent)){e.next=10;break}return e.abrupt("return",JSON.parse(n));case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return Am.apply(this,arguments)}),loadString:(Em=vr(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=r||{},!(t instanceof File)){e.next=5;break}return e.abrupt("return",Pm(t,r));case 5:return e.abrupt("return",Vm(t,r));case 6:case"end":return e.stop()}}),e)}))),function(e,t){return Em.apply(this,arguments)})};function Mm(e,t){return Fm.apply(this,arguments)}function Fm(){return(Fm=vr(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=r||{},n=dr(t),e.next=4,"function"==typeof t?t():t;case 4:if(!((t=e.sent)instanceof File)){e.next=9;break}return e.abrupt("return",Bm(t,r));case 9:if("function"!=typeof t.startsWith){e.next=22;break}if(!t.startsWith("data:")){e.next=14;break}return e.abrupt("return",Un(t));case 14:if(t.startsWith("https://drive.google.com")&&(t=Ln(t)),!Tn(t)){e.next=19;break}return e.abrupt("return",Im.add(vr(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dm(t,r));case 1:case"end":return e.stop()}}),e)})))));case 19:return e.abrupt("return",Dm(t,r));case 20:e.next=23;break;case 22:throw Error("url must be either a 'File', 'string', 'function', or 'Promise'.  Actual type: ".concat(n));case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dm(e,t){return Om.apply(this,arguments)}function Om(){return(Om=vr(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=eb(t),!(n=(r=r||{}).oauthToken||$m(t))){e.next=7;break}return e.next=6,"function"==typeof n?n():n;case 6:n=e.sent;case 7:return e.abrupt("return",new Promise((function(e,i){En(t)&&(t.startsWith("gs://")?t=In(t):An(t)&&(t.includes("altMedia=")||(t+=t.includes("?")?"&altMedia=true":"?altMedia=true")),Tn(t=Qm(t))&&Jm(t),n||(n=Xm()));var a=r.headers||{};n&&Km(a,n);var o=r.range,s=navigator.userAgent.indexOf("Chrome")>-1;0===navigator.vendor.indexOf("Apple")&&/\sSafari\//.test(navigator.userAgent);o&&s&&!Gm(t)&&(t+=t.includes("?")?"&":"?",t+="someRandomSeed="+Math.random().toString(36));var c=new XMLHttpRequest,u=r.sendData||r.body,h=r.method||(u?"POST":"GET"),l=r.responseType,f=r.contentType,p=r.mimeType;if(c.open(h,t),o){var d=o.size?o.start+o.size-1:"";c.setRequestHeader("Range","bytes="+o.start+"-"+d)}if(f&&c.setRequestHeader("Content-Type",f),p&&c.overrideMimeType(p),l&&(c.responseType=l),a)for(var g=0,v=Object.keys(a);g<v.length;g++){var m=v[g],b=a[m];c.setRequestHeader(m,b)}!0===r.withCredentials&&(c.withCredentials=!0),c.onload=function(){var n=vr(regeneratorRuntime.mark((function n(i){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:0===c.status||c.status>=200&&c.status<=300?o&&206!==c.status&&0!==o.start?(c.response.length>1e5&&alert("Warning: Range header ignored for URL: ".concat(t,".  This can have performance impacts.")),e(c.response.slice(o.start,o.start+o.size))):e(c.response):"undefined"==typeof gapi||404!==c.status&&401!==c.status&&403!==c.status||!En(t)||r.retries?403===c.status?y("Access forbidden: "+t):416===c.status?y("Unsatisfiable range"):y(c.status):w();case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),c.onerror=function(e){En(t)&&!r.retries&&w(),y("Error accessing resource: "+t+" Status: "+c.status)},c.ontimeout=function(e){y("Timed out")},c.onabort=function(e){i(e)};try{c.send(u)}catch(e){i(e)}function y(e){if(!i)throw e;i(e)}function w(){return k.apply(this,arguments)}function k(){return(k=vr(regeneratorRuntime.mark((function n(){var i,a,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Zm(t);case 3:return i=n.sent,r.retries=1,r.oauthToken=i,n.next=8,Mm(t,r);case 8:a=n.sent,e(a),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),n.t0.error?(o=n.t0.error.startsWith("popup_blocked")?"Google login popup blocked by browser.":n.t0.error,alert(o)):y(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,12]])})))).apply(this,arguments)}})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bm(e,t){return Nm.apply(this,arguments)}function Nm(){return(Nm=vr(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r&&r.range?t.slice(r.range.start,r.range.start+r.range.size):t,"arraybuffer"!==r.responseType){e.next=5;break}return e.abrupt("return",Um(n));case 5:return e.abrupt("return",new Promise((function(e,r){var i=new FileReader;i.onload=function(t){e(i.result)},i.onerror=function(e){console.error("reject uploading local file "+t.name),r(null,i)},i.readAsBinaryString(n),console.warn("Deprecated method used: readAsBinaryString")})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pm(e,t){return zm.apply(this,arguments)}function zm(){return(zm=vr(regeneratorRuntime.mark((function e(t,r){var n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.range?t.slice(r.range.start,r.range.start+r.range.size):t,i=0,r&&r.bgz||t.name.endsWith(".bgz")?i=2:t.name.endsWith(".gz")&&(i=1),0!==i){e.next=7;break}return e.abrupt("return",jm(n));case 7:return e.next=9,Um(n);case 9:return a=e.sent,e.abrupt("return",tb(a,i));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Um(e){return Hm.apply(this,arguments)}function Hm(){return(Hm=vr(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof t.arrayBuffer){e.next=2;break}return e.abrupt("return",t.arrayBuffer());case 2:return e.abrupt("return",new Promise((function(e,r){var n=new FileReader;n.onload=function(t){e(n.result)},n.onerror=function(e){console.error("reject uploading local file "+localfile.name),r(null,n)},n.readAsArrayBuffer(t)})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jm(e){return qm.apply(this,arguments)}function qm(){return(qm=vr(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof t.text){e.next=2;break}return e.abrupt("return",t.text());case 2:return e.abrupt("return",new Promise((function(e,r){var n=new FileReader;n.onload=function(t){e(n.result)},n.onerror=function(e){console.error("reject uploading local file "+localfile.name),r(null,n)},n.readAsText(t)})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vm(e,t){return Wm.apply(this,arguments)}function Wm(){return(Wm=vr(regeneratorRuntime.mark((function e(t,r){var n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=r||{},e.t0=r.filename,e.t0){e.next=6;break}return e.next=5,Cm(t);case 5:e.t0=e.sent;case 6:return n=e.t0,i=3,r.bgz?i=2:n.endsWith(".gz")&&(i=1),r.responseType="arraybuffer",e.next=12,Lm.load(t,r);case 12:return a=e.sent,e.abrupt("return",tb(a,i));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gm(e){return e.indexOf("X-Amz-Signature")>-1}function $m(e){var t=En(e)?void 0:Hn(e).host,r=am.getToken(t);if(r)return r;if(void 0===t){var n=Xm();if(n&&n.expires_at>Date.now())return n.access_token}}function Zm(e){return Ym.apply(this,arguments)}function Ym(){return(Ym=vr(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Dn()){e.next=8;break}return r=Nn(t),e.next=4,Bn(r);case 4:return n=e.sent,e.abrupt("return",n?n.access_token:void 0);case 8:throw Error("Authorization is required, but Google oAuth has not been initalized. Contact your site administrator for assistance.");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xm(){if(Dn()){var e=function(){let e=gapi.auth2.getAuthInstance().currentUser.get();if(e&&e.isSignedIn()){const{access_token:t,expires_at:r}=e.getAuthResponse();return{access_token:t,expires_at:r}}}();return e?e.access_token:void 0}}function Km(e,t){return t&&(e["Cache-Control"]="no-cache",e.Authorization="Bearer "+t),e}function Qm(e){var t=Lm.apiKey;if(t||"undefined"==typeof gapi||(t=gapi.apiKey),void 0!==t&&!e.includes("key=")){var r=e.includes("?")?"&":"?";e=e+r+"key="+t}return e}function Jm(e){if(e.includes("supportsTeamDrive"))return e;var t=e.includes("?")?"&":"?";e=e+t+"supportsTeamDrive=true"}function eb(e){return e.includes("//www.dropbox.com")?e.replace("//www.dropbox.com","//dl.dropboxusercontent.com"):e.includes("//drive.google.com")?Ln(e):e.includes("//www.broadinstitute.org/igvdata")?e.replace("//www.broadinstitute.org/igvdata","//data.broadinstitute.org/igvdata"):e.includes("//igvdata.broadinstitute.org")?e.replace("//igvdata.broadinstitute.org","https://dn7ywbm9isq8j.cloudfront.net"):e.startsWith("ftp://ftp.ncbi.nlm.nih.gov/geo")?e.replace("ftp://","https://"):e}function tb(e,t){if(3===t&&e.byteLength>2){var r=new Uint8Array(e,0,2);31===r[0]&&139===r[1]&&(t=1)}var n;1===t?n=new wn.Gunzip(new Uint8Array(e)).decompress():n=2===t?cm(e):new Uint8Array(e);return"TextDecoder"in function(){if("undefined"!=typeof self)return self;return"undefined"!=typeof global?global:window}()?(new TextDecoder).decode(n):function(e){var t="",r=0;for(;r<e.length;){var n=e[r],i=0,a=0;if(n<=127?(i=0,a=255&n):n<=223?(i=1,a=31&n):n<=239?(i=2,a=15&n):n<=244&&(i=3,a=7&n),e.length-r-i>0)for(var o=0;o<i;)a=a<<6|63&(n=e[r+o+1]),o+=1;else a=65533,i=e.length-r;t+=String.fromCodePoint(a),r+=i+1}return t}(n)}var rb=Cn,nb=new Set(["fastaURL","indexURL","cytobandURL","indexed"]),ib=function(){function e(t){mr(this,e),"string"==typeof t.fastaURL&&t.fastaURL.startsWith("data:")?(this.file=function(e){var t=e.split(","),r=t[0].split(":")[1],n=t[1];n=r.indexOf("base64")>=0?atob(n):decodeURI(n);for(var i=new Uint8Array(n.length),a=0;a<n.length;a++)i[a]=n.charCodeAt(a);for(var o=new wn.Gunzip(i).decompress(),s="",c=o.length,u=0;u<c;u++)s+=String.fromCharCode(o[u]);return s}(t.fastaURL),this.indexed=!1,this.isDataURI=!0):(this.file=t.fastaURL,this.indexed=!1!==t.indexed,this.indexed&&(this.indexFile=t.indexURL||t.indexFile||this.file+".fai")),this.withCredentials=t.withCredentials,this.chromosomeNames=[],this.chromosomes={},this.sequences={},this.offsets={};var r={};for(var n in t)t.hasOwnProperty(n)&&!nb.has(n)&&(r[n]=t[n]);this.config=r}var t,r,n,i,a,o,s;return yr(e,[{key:"init",value:(s=vr(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.indexed){e.next=4;break}return e.abrupt("return",this.getIndex());case 4:return e.abrupt("return",this.loadAll());case 5:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"getSequence",value:(o=vr(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.indexed){e.next=4;break}return e.abrupt("return",this.getSequenceIndexed(t,r,n));case 4:return e.abrupt("return",this.getSequenceNonIndexed(t,r,n));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return o.apply(this,arguments)})},{key:"getSequenceIndexed",value:(a=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a,o,s,c,u,h,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.interval&&this.interval.contains(t,r,n)){e.next=8;break}return i=r,a=n,n-r<5e4&&(o=n-r,s=Math.round(r+o/2),i=Math.max(0,s-25e3),a=s+25e3),e.next=6,this.readSequence(t,i,a);case 6:c=e.sent,this.interval=new Kv(t,i,a,c);case 8:return u=r-this.interval.start,h=n-r,l=this.interval.features?this.interval.features.substr(u,h):null,e.abrupt("return",l);case 12:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return a.apply(this,arguments)})},{key:"getSequenceNonIndexed",value:(i=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.offsets[t]&&(r-=this.offsets[t],n-=this.offsets[t]),i="",r<0)for(a=r;a<Math.min(n,0);a++)i+="*";if(!(n<=0)){e.next=5;break}return e.abrupt("return",Promise.resolve(i));case 5:return o=this.sequences[t],s=Math.min(n,o.length),e.abrupt("return",i+o.substring(r,s));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return i.apply(this,arguments)})},{key:"getIndex",value:(n=vr(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,s,c,u,h,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.index){e.next=4;break}return e.abrupt("return",this.index);case 4:return e.next=6,Lm.load(this.indexFile,km(this.config));case 6:for(t=e.sent,r=rb(t),n=r.length,i=0,a=0,this.index={};i<n;)5===(o=r[i++].split("\t")).length&&(s=o[0],c=parseInt(o[1]),u=parseInt(o[2]),h=parseInt(o[3]),l=parseInt(o[4]),f={size:c,position:u,basesPerLine:h,bytesPerLine:l},this.chromosomeNames.push(s),this.index[s]=f,this.chromosomes[s]=new Qv(s,a++,0,c));return e.abrupt("return",this.index);case 14:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"loadAll",value:(r=vr(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,s,c,u,h,l,f,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDataURI){e.next=4;break}t=this.file,e.next=7;break;case 4:return e.next=6,Lm.load(this.file,km(this.config));case 6:t=e.sent;case 7:for(r=rb(t),n=r.length,i=0,s=0,c=0;i<n;)(u=r[i++].trim()).startsWith("#")||0===u.length||(u.startsWith(">")?(a&&(this.chromosomeNames.push(h),this.sequences[h]=a,this.chromosomes[h]=new Qv(h,c++,s,s+a.length,o)),l=u.substr(1).split(/\s+/),f=l[0].split(":"),h=f[0],a="",s=0,o=void 0,f.length>1&&f[1].indexOf("-")>0&&(2===(p=f[1].split("-")).length&&/^[0-9]+$/.test(p[0])&&/^[0-9]+$/.test(p[1]),d=Number.parseInt(p[0]),Number.parseInt(p[1])>d&&(s=d-1,this.offsets[h]=s,o=f[1]))):a+=u);a&&(this.chromosomeNames.push(h),this.sequences[h]=a,this.chromosomes[h]=new Qv(h,c++,s,s+a.length,o));case 14:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"readSequence",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a,o,s,c,u,h,l,f,p,d,g,v,m,b,y,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIndex();case 2:if(i=this.index[t]){e.next=8;break}return this.interval=new Kv(t,r,n,null),e.abrupt("return",null);case 8:if(a=Math.max(0,r),o=Math.min(i.size,n),s=i.bytesPerLine,c=i.basesPerLine,u=i.position,h=s-c,l=Math.floor(a/c),f=Math.floor(o/c),!((g=u+f*s+(o-f*c)-1-(d=u+l*s+(p=a-l*c))+1)<=0)){e.next=27;break}console.error("No sequence for "+t+":"+r+"-"+n),e.next=30;break;case 27:return e.next=29,Lm.load(this.file,km(this.config,{range:{start:d,size:g}}));case 29:v=e.sent;case 30:if(v){e.next=34;break}return e.abrupt("return",null);case 34:for(b="",y=0,w=v.length,p>0&&(m=Math.min(o-a,c-p),b+=v.substr(y,m),y+=m+h);y<w;)m=Math.min(c,w-y),b+=v.substr(y,m),y+=m+h;return e.abrupt("return",b);case 38:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})}]),e}();function ab(){return"2.7.4"}var ob,sb,cb=Cn,ub={loadGenome:(sb=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.cytobandURL,n=t.aliasURL,i=new ib(t),e.next=5,i.init();case 5:if(!r){e.next=9;break}return e.next=8,lb(r,i.config);case 8:a=e.sent;case 9:if(!n){e.next=13;break}return e.next=12,fb(n,i.config);case 12:o=e.sent;case 13:return e.abrupt("return",new hb(t,i,a,o));case 14:case"end":return e.stop()}}),e)}))),function(e){return sb.apply(this,arguments)}),initializeGenomes:(ob=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ub.KNOWN_GENOMES){e.next=20;break}if(s=function(e){return e.forEach((function(e){r[e.id]=e})),r},r={},!1===t.loadDefaultGenomes){e.next=9;break}return n="https://igv.org/genomes/genomes.json"+"?randomSeed=".concat(Math.random().toString(36),"&version=").concat("2.7.4"),e.next=7,Lm.loadJson(n,{});case 7:i=e.sent,s(i);case 9:if(!(a=t.genomeList||t.genomes)){e.next=19;break}if("string"!=typeof a){e.next=18;break}return e.next=14,Lm.loadJson(a,{});case 14:o=e.sent,s(o),e.next=19;break;case 18:s(a);case 19:ub.KNOWN_GENOMES=r;case 20:case"end":return e.stop()}}),e)}))),function(e){return ob.apply(this,arguments)}),isWholeGenomeView:function(e){return"all"===e.toLowerCase()}},hb=function(){function e(t,r,n,i){mr(this,e),this.config=t,this.id=t.id,this.sequence=r,this.chromosomeNames=r.chromosomeNames,this.chromosomes=r.chromosomes,this.ideograms=n,this.featureDB={},this.wholeGenomeView=void 0===t.wholeGenomeView||t.wholeGenomeView,this.wholeGenomeView&&Object.keys(r.chromosomes).length>1?function(e,t){var r;if(t.chromosomeOrder)e.wgChromosomeNames=t.chromosomeOrder.split(",").map((function(e){return e.trim()})),r=e.wgChromosomeNames.map((function(t){return e.chromosomes[t]})).filter((function(e){return void 0!==e}));else{var n=Object.keys(e.chromosomes).map((function(t){return e.chromosomes[t].bpLength})).reduce((function(e,t){return Math.max(e,t)}))/50,i=(r=Object.values(e.chromosomes).filter((function(e){return e.bpLength>n}))).filter((function(e){return l(e.name.replace("chr",""))})),a=r.filter((function(e){return!l(e.name.replace("chr",""))}));i.sort((function(e,t){return Number.parseInt(e.name.replace("chr",""))-Number.parseInt(t.name.replace("chr",""))}));var o,s=i.map((function(e){return e.name})),c=Nr(a);try{for(c.s();!(o=c.n()).done;){var u=o.value;s.push(u.name)}}catch(e){c.e(e)}finally{c.f()}e.wgChromosomeNames=s}var h=r.reduce((function(e,t){return e+t.bpLength}),0);function l(e){return/^\d+$/.test(e)}e.chromosomes.all={name:"all",bpLength:h}}(this,t):this.wgChromosomeNames=r.chromosomeNames;var a={},o=this;a.all="all",this.chromosomeNames.forEach((function(e){var t=e.startsWith("chr")?e.substring(3):"chr"+e;a[t.toLowerCase()]=e,"chrM"===e&&(a.mt="chrM"),"MT"===e&&(a.chrm="MT"),a[e.toLowerCase()]=e})),i&&i.forEach((function(e){var t,r;for(r=0;r<e.length;r++)if(o.chromosomes[e[r]]){t=e[r];break}t&&e.forEach((function(e){e!==t&&(a[e.toLowerCase()]=t,a[e]=t)}))})),this.chrAliasTable=a}return yr(e,[{key:"showWholeGenomeView",value:function(){return!1!==this.config.wholeGenomeView}},{key:"toJSON",value:function(){return Object.assign({},this.config,{tracks:void 0})}},{key:"getInitialLocus",value:function(){}},{key:"getHomeChromosomeName",value:function(){if(this.showWholeGenomeView()&&this.chromosomes.hasOwnProperty("all"))return"all";var e=this.chromosomes[this.chromosomeNames[0]];return e.rangeLocus?e.name+":"+e.rangeLocus:this.chromosomeNames[0]}},{key:"getChromosomeName",value:function(e){var t=this.chrAliasTable[e.toLowerCase()];return t||e}},{key:"getChromosome",value:function(e){return e=this.getChromosomeName(e),this.chromosomes[e]}},{key:"getCytobands",value:function(e){return this.ideograms?this.ideograms[e]:null}},{key:"getLongestChromosome",value:function(){var e,t=this.chromosomes;for(var r in t){if(t.hasOwnProperty(r)){var n=t[r];(void 0===e||n.bpLength>e.bpLength)&&(e=n)}return e}}},{key:"getChromosomes",value:function(){return this.chromosomes}},{key:"getGenomeCoordinate",value:function(e,t){var r=this.getCumulativeOffset(e);if(void 0!==r)return r+t}},{key:"getChromosomeCoordinate",value:function(e){void 0===this.cumulativeOffsets&&(this.cumulativeOffsets=computeCumulativeOffsets.call(this));var t,r=void 0,n=0,i=Nr(this.wgChromosomeNames);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=this.cumulativeOffsets[a];if(o>e)return{chr:r,position:e-n};r=a,n=o}}catch(e){i.e(e)}finally{i.f()}return{chr:this.chromosomeNames[this.chromosomeNames.length-1],position:0}}},{key:"getCumulativeOffset",value:function(e){void 0===this.cumulativeOffsets&&(this.cumulativeOffsets=function(){var e,t=this,r={},n=0,i=Nr(t.wgChromosomeNames);try{for(i.s();!(e=i.n()).done;){var a=e.value;r[a]=Math.floor(n),n+=t.getChromosome(a).bpLength}}catch(e){i.e(e)}finally{i.f()}return r}.call(this));var t=this.getChromosomeName(e);return this.cumulativeOffsets[t]}},{key:"getGenomeLength",value:function(){var e=this;if(!this.bpLength){var t=0;e.wgChromosomeNames.forEach((function(r){var n=e.chromosomes[r];t+=n.bpLength})),this.bpLength=t}return this.bpLength}}]),e}();function lb(e,t){if(e.startsWith("data:")){var r=function(e){var t;if(e.startsWith("data:application/gzip;base64"))t=Un(e);else{var r,n=e.split(","),i=n[0].split(":")[1],a=n[1];a=i.indexOf("base64")>=0?atob(a):decodeURI(a),r=new Uint8Array(a.length);for(var o=0;o<a.length;o++)r[o]=a.charCodeAt(o);t=new wn.Gunzip(r).decompress()}for(var s="",c=t.length,u=0;u<c;u++)s+=String.fromCharCode(t[u]);return s}(e);return Promise.resolve(n(r))}return Lm.loadString(e,km(t)).then((function(e){return n(e)}));function n(e){for(var t,r=[],n=0,i=cb(e),a=i.length,o={},s=0;s<a;s++){var c=i[s].split("\t"),u=c[0];if(t||(t=u),u!==t&&(o[t]=r,r=[],t=u,n=0),5===c.length){var h=parseInt(c[1]),l=parseInt(c[2]),f=c[3],p=c[4];r[n++]=new Xv(h,l,f,p)}}return o}}function fb(e,t){return Lm.loadString(e,km(t)).then((function(e){var t=cb(e),r=[];return t.forEach((function(e){!e.startsWith("#")&&e.length>0&&r.push(e.split("\t"))})),r}))}function pb(e,t){var r=Su("<div>",{class:"igv-menu-popup-check-container"}),n=Su("<div>");r.append(n);var i=gb("check",!0===t?"#444":"transparent");n.append(i);var a=Su("<div>");return a.text(e),r.append(a),r}function db(e,t){return Su(gb(e,t))}function gb(e,t){t=t||"currentColor";var r=vb[e];r||(console.error("No icon named: ".concat(e)),r=vb.question);var n='<svg viewBox="0 0 '+r[0]+" "+r[1]+'">';return n+='<path fill="'+t+'" d="'+r[4]+'"></path>',n+="</svg>"}var vb={check:[512,512,[],"f00c","M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"],cog:[512,512,[],"f013","M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"],exclamation:[192,512,[],"f12a","M176 432c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80zM25.26 25.199l13.6 272C39.499 309.972 50.041 320 62.83 320h66.34c12.789 0 23.331-10.028 23.97-22.801l13.6-272C167.425 11.49 156.496 0 142.77 0H49.23C35.504 0 24.575 11.49 25.26 25.199z"],"exclamation-circle":[512,512,[],"f06a","M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],"exclamation-triangle":[576,512,[],"f071","M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],minus:[448,512,[],"f068","M424 318.2c13.3 0 24-10.7 24-24v-76.4c0-13.3-10.7-24-24-24H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h400z"],"minus-circle":[512,512,[],"f056","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"],"minus-square":[448,512,[],"f146","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM92 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H92z"],plus:[448,512,[],"f067","M448 294.2v-76.4c0-13.3-10.7-24-24-24H286.2V56c0-13.3-10.7-24-24-24h-76.4c-13.3 0-24 10.7-24 24v137.8H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h137.8V456c0 13.3 10.7 24 24 24h76.4c13.3 0 24-10.7 24-24V318.2H424c13.3 0 24-10.7 24-24z"],"plus-circle":[512,512,[],"f055","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],"plus-square":[448,512,[],"f0fe","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-32 252c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92H92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],question:[384,512,[],"f128","M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"],save:[448,512,[],"f0c7","M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"],search:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"],share:[512,512,[],"f064","M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"],spinner:[512,512,[],"f110","M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"],square:[448,512,[],"f0c8","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"],"square-full":[512,512,[],"f45c","M512 512H0V0h512v512z"],times:[384,512,[],"f00d","M323.1 441l53.9-53.9c9.4-9.4 9.4-24.5 0-33.9L279.8 256l97.2-97.2c9.4-9.4 9.4-24.5 0-33.9L323.1 71c-9.4-9.4-24.5-9.4-33.9 0L192 168.2 94.8 71c-9.4-9.4-24.5-9.4-33.9 0L7 124.9c-9.4 9.4-9.4 24.5 0 33.9l97.2 97.2L7 353.2c-9.4 9.4-9.4 24.5 0 33.9L60.9 441c9.4 9.4 24.5 9.4 33.9 0l97.2-97.2 97.2 97.2c9.3 9.3 24.5 9.3 33.9 0z"],"times-circle":[512,512,[],"f057","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"],wrench:[512,512,[],"f0ad","M481.156 200c9.3 0 15.12 10.155 10.325 18.124C466.295 259.992 420.419 288 368 288c-79.222 0-143.501-63.974-143.997-143.079C223.505 65.469 288.548-.001 368.002 0c52.362.001 98.196 27.949 123.4 69.743C496.24 77.766 490.523 88 481.154 88H376l-40 56 40 56h105.156zm-171.649 93.003L109.255 493.255c-24.994 24.993-65.515 24.994-90.51 0-24.993-24.994-24.993-65.516 0-90.51L218.991 202.5c16.16 41.197 49.303 74.335 90.516 90.503zM104 432c0-13.255-10.745-24-24-24s-24 10.745-24 24 10.745 24 24 24 24-10.745 24-24z"]},mb={trackMenuItemList:function(e){var t=new Set(["alignment","annotation","variant","eqtl","snp"]),r=e.track.config&&void 0!==e.track.config.visibilityWindow,n=[];return"sequence"!==e.track.config.type&&(n.push(function(e){var t=function(t){var r=function(){var t=e.browser.inputDialog.input.value;t=""===t||void 0===t?"untitled":t.trim(),e.browser.setTrackLabelName(e,t)},n={label:"Track Name",value:yb(e.track)||"unnamed",callback:r};e.browser.inputDialog.present(n,t)},r=Su("<div>");return r.text("Set track name"),{object:r,click:t}}(e)),n.push(function(e){var t=function(t){var r=function(){var t=parseFloat(e.browser.inputDialog.input.value,10);void 0!==t&&(void 0!==e.track.minHeight&&e.track.minHeight>t&&(e.track.minHeight=t),void 0!==e.track.maxHeight&&e.track.maxHeight<t&&(e.track.minHeight=t),e.setTrackHeight(t,!0),e.track.autoHeight=!1)},n={label:"Track Height",value:e.trackDiv.clientHeight,callback:r};e.browser.inputDialog.present(n,t)},r=Su("<div>");return r.text("Set track height"),{object:r,click:t}}(e))),this.showColorPicker(e.track)&&(n.push(bb({trackView:e,label:"Set track color",option:"color"})),n.push(bb({trackView:e,label:"Set alt color",option:"altColor"}))),e.track.menuItemList&&(n=n.concat(e.track.menuItemList())),(r||t.has(e.track.config.type))&&(n.push("<hr/>"),n.push(function(e){var t=function(t){var r=function(){var t=e.browser.inputDialog.input.value;t=""===t||void 0===t?-1:t.trim(),e.track.visibilityWindow=Number.parseInt(t),e.track.config.visibilityWindow=Number.parseInt(t),e.updateViews()},n={label:"Visibility Window",value:e.track.visibilityWindow,callback:r};e.browser.inputDialog.present(n,t)},r=Su("<div>");return r.text("Set visibility window"),{object:r,click:t}}(e))),!1!==e.track.removable&&(n.push("<hr/>"),n.push(function(e){var t;return(t=Su("<div>")).text("Remove track"),{object:t,click:function(){e.browser.removeTrack(e.track)}}}(e))),n},numericDataMenuItems:function(e){var t=[],r=Su("<div>");r.text("Set data range");return t.push({object:r,click:function(){e.browser.dataRangeDialog.configure({trackView:e}),e.browser.dataRangeDialog.present(Su(e.trackDiv))}}),void 0!==e.track.logScale&&t.push({object:pb("Log scale",e.track.logScale),click:function(){e.track.logScale=!e.track.logScale,e.repaintViews()}}),t.push({object:pb("Autoscale",e.track.autoscale),click:function(){e.track.autoscale=!e.track.autoscale,e.updateViews()}}),t},trackMenuItemListHelper:function(e,t){var r=[];return e.length>0&&(r=e.map((function(e,r){var n;if(e.name?(n=Su("<div>")).text(e.name):e.object?n=e.object:"string"==typeof e.label?(n=Su("<div>")).html(e.label):"string"==typeof e&&(n=e.startsWith("<")?Su(e):Su("<div>"+e+"</div>")),0===r&&n.addClass("igv-track-menu-border-top"),e.click){function i(r){e.click(r),t.hide(),r.preventDefault(),r.stopPropagation()}n.on("click",i),n.on("touchend",(function(e){i(e)})),n.on("mouseup",(function(e){e.preventDefault(),e.stopPropagation()}))}return{object:n,init:e.init||void 0}}))),r},showColorPicker:function(e){return void 0===e.type||"bedtype"===e.type||"alignment"===e.type||"annotation"===e.type||"variant"===e.type||"wig"===e.type}};function bb(e){var t=e.trackView,r=e.label,n=e.option,i=Su("<div>");return i.text(r),{object:i,click:function(){return t.presentColorPicker(n)}}}function yb(e){return e.trackView.viewports[0].$trackLabel.text()}var wb=mb.trackMenuItemListHelper,kb=function(e){var t=this;this.$popover=Su("<div>",{class:"igv-menu-popup"}),e.append(this.$popover);var r=Su("<div>",{class:"igv-menu-popup-header"});this.$popover.append(r),yn(r.get(0),(function(){return t.$popover.hide()})),this.$popoverContent=Su("<div>"),this.$popover.append(this.$popoverContent),ri(this.$popover.get(0),r.get(0)),r.on("click.menu-popup-dismiss",(function(e){e.stopPropagation(),e.preventDefault()}))};kb.prototype.presentMenuList=function(e,t,r){if(xb(),r.length>0){this.$popoverContent.empty();var n,i=Nr(r=wb(r,this.$popover));try{for(i.s();!(n=i.n()).done;){var a=n.value;a.init&&a.init();var o=a.object;0===r.indexOf(a)&&o.removeClass("igv-track-menu-border-top"),o.hasClass("igv-track-menu-border-top")||o.hasClass("igv-menu-popup-check-container")||o.is("div")&&o.addClass("igv-menu-popup-shim"),this.$popoverContent.append(o)}}catch(e){i.e(e)}finally{i.f()}this.$popover.css({left:e+"px",top:t+"px"}),this.$popover.show()}},kb.prototype.presentTrackContextMenu=function(e,t){this.$popoverContent.empty();var r,n,i,a=Nr((r=t,n=this.$popover.get(0),r.map((function(e){var t;if("string"==typeof e&&"<hr/>"===e)t=document.createElement("hr");else if("string"==typeof e)(t=fn({class:"context-menu"})).innerHTML=e;else if("Node"==typeof e)t=e;else{if("function"==typeof e.init&&e.init(),"checkbox"===e.type)t=Icon.createCheckbox("Show all bases",e.value);else if("color"===e.type){var r=new on({parent:n.parentElement,width:364,colorHandler:function(t){return e.click(t)}});t=fn({class:"context-menu"}),"string"==typeof e.label&&(t.innerHTML=e.label);var i=function(e){r.show(),pn(n),e.preventDefault(),e.stopPropagation()};t.addEventListener("click",i),t.addEventListener("touchend",i),t.addEventListener("mouseup",(function(e){e.preventDefault(),e.stopPropagation()}))}else t=fn({class:"context-menu"}),"string"==typeof e.label&&(t.innerHTML=e.label);if(e.click&&"color"!==e.type){function a(t){e.click(),pn(n),t.preventDefault(),t.stopPropagation()}t.addEventListener("click",a),t.addEventListener("touchend",a),t.addEventListener("mouseup",(function(e){e.preventDefault(),e.stopPropagation()}))}}return{object:t,init:e.init}}))));try{for(a.s();!(i=a.n()).done;){var o=i.value;this.$popoverContent.get(0).appendChild(o.object)}}catch(e){a.e(e)}finally{a.f()}!function(e,t){var r=vn(e,t.parentNode),n=r.x,i=r.y,a=t.parentNode.getBoundingClientRect().width,o=t.getBoundingClientRect().width,s=n+o;t.style.left="".concat(s>a?n-(s-a):n,"px"),t.style.top="".concat(i,"px")}(e,this.$popover.get(0)),this.$popover.show()},kb.prototype.dispose=function(){this.$popover.empty(),this.$popoverContent.empty(),Object.keys(this).forEach((function(e){this[e]=void 0}))};var xb=function(){return Su(".igv-menu-popup").hide()},Sb=function(e){wr(o,e);var t,r,n,i,a=Ar(o);function o(e,t,r,n){return mr(this,o),a.call(this,e,t,r,n)}return yr(o,[{key:"initializationHelper",value:function(){var e=this;this.menuPopup=new kb(this.trackView.$viewportContainer),this.menuPopup.$popover.hide(),this.addMouseHandlers(),this.$spinner=Su('<div class="igv-viewport-spinner">'),this.$spinner.append(db("spinner")),this.$viewport.append(this.$spinner),this.stopSpinner();var t=this.trackView.track;"sequence"!==t.type&&(this.$zoomInNotice=this.createZoomInNotice(this.$content)),t.name&&(this.$trackLabel=Su('<div class="igv-track-label">'),this.$viewport.append(this.$trackLabel),this.setTrackLabel(t.name),!1===this.browser.trackLabelsVisible&&this.$trackLabel.hide(),this.$trackLabel.click((function(r){var n;r.stopPropagation(),n="function"==typeof t.description?t.description():t.description?'<div title="'.concat(t.description,'"><div>').concat(t.description,"</div></div>"):'<div title="'.concat(t.name,'"><div>').concat(t.name,"</div></div>"),e.popover&&e.popover.dispose(),e.popover=new un(e.trackView.$viewportContainer.get(0)),e.popover.presentContentWithEvent(r,n)})),this.$trackLabel.mousedown((function(e){e.stopPropagation()})),this.$trackLabel.mouseup((function(e){e.stopPropagation()})),this.$trackLabel.mousemove((function(e){e.stopPropagation()})))}},{key:"setTrackLabel",value:function(e){this.trackView.track.name=this.trackView.track.config.name=e,this.$trackLabel.empty(),this.$trackLabel.html(e);var t=this.$trackLabel.text();this.$trackLabel.attr("title",t)}},{key:"startSpinner",value:function(){var e=this.$spinner;e&&(e.addClass("igv-fa5-spin"),e.show())}},{key:"stopSpinner",value:function(){var e=this.$spinner;e&&(e.hide(),e.removeClass("igv-fa5-spin"))}},{key:"checkZoomIn",value:function(){var e=this;if(!this.viewIsReady())return!1;if(this.$zoomInNotice){if(function(){var t=e.referenceFrame;if("all"!==e.referenceFrame.chr.toLowerCase()||e.trackView.track.supportsWholeGenome()){var r="function"==typeof e.trackView.track.getVisibilityWindow?e.trackView.track.getVisibilityWindow():e.trackView.track.visibilityWindow;return void 0!==r&&r>0&&t.bpPerPixel*e.$viewport.width()>r}return!0}()){if(this.canvas&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.tile=void 0),this.$zoomInNotice.show(),this.trackView.track.autoHeight){var t=this.trackView.minHeight||0;this.setContentHeight(t)}return!1}return this.$zoomInNotice.hide(),!0}return!0}},{key:"shift",value:function(){var e=this,t=e.referenceFrame;if(e.canvas&&e.tile&&e.tile.chr===e.referenceFrame.chr&&e.tile.bpPerPixel===t.bpPerPixel){var r=Math.round((e.tile.startBP-t.start)/t.bpPerPixel);e.canvas.style.left=r+"px"}}},{key:"setTop",value:function(e){var t=-e,r=t+this.$viewport.height();Su(this.contentDiv).css("top",e+"px"),(!this.canvasVerticalRange||this.canvasVerticalRange.bottom<r||this.canvasVerticalRange.top>t)&&this.repaint()}},{key:"loadFeatures",value:(i=vr(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,s,c,u,h,l,f,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.referenceFrame,r=t.chr,n=this.browser.genome.getChromosome(r).bpLength,i=3*Su(this.contentDiv).width(),a=i*t.bpPerPixel,o=Math.floor(Math.max(0,t.start-a/3)),s=Math.ceil(Math.min(n,o+a)),!this.loading||this.loading.start!==o||this.loading.end!==s){e.next=9;break}return e.abrupt("return",void 0);case 9:return this.loading={start:o,end:s},this.startSpinner(),e.prev=11,e.next=14,this.getFeatures(this.trackView.track,r,o,s,t.bpPerPixel);case 14:if(c=e.sent,u=[],!(h=Cb(this.browser.roi,this.trackView.track.roi))){e.next=37;break}l=Nr(h),e.prev=19,l.s();case 21:if((f=l.n()).done){e.next=29;break}return p=f.value,e.next=25,p.getFeatures(r,o,s,t.bpPerPixel);case 25:d=e.sent,u.push({track:p,features:d});case 27:e.next=21;break;case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(19),l.e(e.t0);case 34:return e.prev=34,l.f(),e.finish(34);case 37:return this.tile=new _b(r,o,s,t.bpPerPixel,c,u),this.loading=!1,this.hideMessage(),this.stopSpinner(),e.abrupt("return",this.tile);case 44:e.prev=44,e.t1=e.catch(11),this.trackView&&!0!==this.trackView.disposed&&(this.showMessage("Error loading track data"),nn.presentAlert(e.t1),console.error(e.t1));case 47:return e.prev=47,this.loading=!1,this.stopSpinner(),e.finish(47);case 51:case"end":return e.stop()}}),e,this,[[11,44,47,51],[19,31,34,37]])}))),function(){return i.apply(this,arguments)})},{key:"repaint",value:(n=vr(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,s,c,u,h,l,f,p,d,g,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.tile){e.next=2;break}return e.abrupt("return");case 2:if(t=this.tile,r=t.features,n=t.roiFeatures,i=t.bpPerPixel,a=t.startBP,o=t.endBP,ub.isWholeGenomeView(this.browser.referenceFrameList[0].chr)?(i=this.referenceFrame.initialEnd/this.$viewport.width(),a=0,o=this.referenceFrame.initialEnd,s=this.$viewport.width()):s=Math.ceil((o-a)/i),c=this.$viewport.height(),u=n?Math.max(this.getContentHeight(),c):this.getContentHeight(),h=Math.min(u,3*c),0!==s&&0!==h){e.next=11;break}return this.canvas&&Su(this.canvas).remove(),e.abrupt("return");case 11:l=Math.max(0,-Su(this.contentDiv).position().top-c),f="FILL"===this.trackView.track.displayMode?window.devicePixelRatio:!1===this.trackView.track.supportHiDPI?1:window.devicePixelRatio,p=Math.round((a-this.referenceFrame.start)/this.referenceFrame.bpPerPixel),d=Su('<canvas class="igv-canvas">').get(0),g=d.getContext("2d"),d.style.width=s+"px",d.style.height=h+"px",d.width=f*s,d.height=f*h,g.scale(f,f),d.style.left=p+"px",d.style.top=l+"px",g.translate(0,-l),v={context:g,features:r,pixelWidth:s,pixelHeight:h,pixelTop:l,bpStart:a,bpEnd:o,bpPerPixel:i,referenceFrame:this.referenceFrame,selection:this.selection,viewport:this,viewportWidth:this.$viewport.width(),viewportContainerX:this.referenceFrame.toPixels(this.referenceFrame.start-a),viewportContainerWidth:this.browser.viewportContainerWidth()},this.draw(v,r,n),this.canvasVerticalRange={top:l,bottom:l+h},this.canvas&&Su(this.canvas).remove(),Su(this.contentDiv).append(d),this.canvas=d,this.ctx=g;case 31:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"draw",value:function(e,t,r){if(t&&(e.features=t,this.trackView.track.draw(e)),r){var n,i=Nr(r);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.features=a.features,a.track.draw(e)}}catch(e){i.e(e)}finally{i.f()}}}},{key:"toSVG",value:(r=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s,c,u,h,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$zoomInNotice||!this.$zoomInNotice.is(":visible")){e.next=2;break}return e.abrupt("return");case 2:return r=this.referenceFrame,n=t.bpPerPixel,i=t.features,a=t.roiFeatures,o=this.$viewport.width(),s=this.$viewport.height(),c=r.start,u=r.start+o*r.bpPerPixel,h=new ld({width:o,height:s,viewbox:{x:0,y:-Su(this.contentDiv).position().top,width:o,height:s}}),l={viewport:this,context:h,top:-Su(this.contentDiv).position().top,pixelTop:0,pixelWidth:o,pixelHeight:s,bpStart:c,bpEnd:u,bpPerPixel:n,referenceFrame:this.referenceFrame,selection:this.selection,viewportWidth:o,viewportContainerX:0,viewportContainerWidth:this.browser.viewportContainerWidth()},this.draw(l,i,a),e.abrupt("return",h.getSerializedSvg(!0));case 14:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"setContentHeight",value:function(e){e=Math.min(e,32e3),Su(this.contentDiv).height(e),this.tile&&(this.tile.invalidate=!0)}},{key:"isLoading",value:function(){return this.loading}},{key:"saveImage",value:function(){if(this.ctx){var e=this.canvasVerticalRange?this.canvasVerticalRange.top:0,t=window.devicePixelRatio,r=this.$viewport.width()*t,n=this.$viewport.height()*t,i=-Su(this.canvas).position().left*t,a=(-Su(this.contentDiv).position().top-e)*t,o=this.ctx.getImageData(i,a,r,n),s=document.createElement("canvas"),c=s.getContext("2d");s.width=o.width,s.height=o.height,c.putImageData(o,0,0),Gn((this.$trackLabel.text()?this.$trackLabel.text():"image")+".png",s.toDataURL("image/png"))}}},{key:"saveSVG",value:function(){var e=this.$viewport.get(0).getBoundingClientRect(),t=e.width,r=e.height,n={width:t,height:r,viewbox:{x:0,y:-Su(this.contentDiv).position().top,width:t,height:r}},i=new ld(n);this.drawSVGWithContect(i,t,r);var a=i.getSerializedSvg(!0),o=URL.createObjectURL(new Blob([a],{type:"application/octet-stream"})),s=this.$trackLabel?this.$trackLabel.text():this.trackView.track.id;Gn("".concat(s,".svg"),o)}},{key:"drawSVGWithContect",value:function(e,t,r){var n=this.referenceFrame,i=n.start,a=n.bpPerPixel;e.save();var o={context:e,viewport:this,referenceFrame:this.referenceFrame,top:-Su(this.contentDiv).position().top,pixelTop:0,pixelWidth:t,pixelHeight:r,bpStart:i,bpEnd:i+t*a,bpPerPixel:a,viewportWidth:t,viewportContainerX:0,viewportContainerWidth:this.browser.viewportContainerWidth(),selection:this.selection},s=this.tile?this.tile.features:[],c=this.tile?this.tile.roiFeatures:void 0;this.draw(o,s,c),this.$trackLabel&&!0===this.browser.trackLabelsVisible&&this.renderTrackLabelSVG(e),e.restore()}},{key:"getCachedFeatures",value:function(){return this.tile?this.tile.features:[]}},{key:"checkContentHeight",value:function(){var e=this.trackView.track;if("FILL"===e.displayMode)this.setContentHeight(this.$viewport.height());else if("function"==typeof e.computePixelHeight){var t=this.cachedFeatures;if(t){var r=e.computePixelHeight(t);r!==Su(this.contentDiv).height()&&this.setContentHeight(r)}}}},{key:"getFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n,i,a){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.tile||!this.tile.containsRange(r,n,i,a)){e.next=4;break}return e.abrupt("return",this.tile.features);case 4:if("function"!=typeof t.getFeatures){e.next=13;break}return e.next=7,t.getFeatures(r,n,i,a,this);case 7:return o=e.sent,this.cachedFeatures=o,this.checkContentHeight(),e.abrupt("return",o);case 13:return e.abrupt("return",void 0);case 14:case"end":return e.stop()}}),e,this)}))),function(e,r,n,i,a){return t.apply(this,arguments)})},{key:"renderTrackLabelSVG",value:function(e){var t=((e,t)=>{const{x:r,y:n,width:i,height:a}=e.getBoundingClientRect(),{x:o,y:s,width:c,height:u}=t.getBoundingClientRect();return{x:o-r,y:s-n,width:c,height:u}})(this.$viewport.get(0),this.$trackLabel.get(0)),r=t.x,n=t.y,i=t.width,a=t.height,o=e.measureText(this.$trackLabel.text()).width;e.fillStyle="white",e.fillRect(r,n,i,a),e.font="12px Arial",e.fillStyle="rgb(68, 68, 68)";var s=.25*(i-o),c=.7*(a-12);e.fillText(this.$trackLabel.text(),r+s,n+a-c),e.strokeStyle="rgb(68, 68, 68)",e.strokeRect(r,n,i,a)}},{key:"createZoomInNotice",value:function(e){var t=Su('<div class="zoom-in-notice-container">');e.append(t);var r=Su("<div>");return t.append(r),r.text("Zoom in to see features"),t.hide(),t}},{key:"viewIsReady",value:function(){return this.browser&&this.browser.referenceFrameList&&this.referenceFrame}},{key:"addMouseHandlers",value:function(){var e,t=this,r=this.browser,n=0;function i(e){if(t.browser.dragObject||t.browser.isScrolling)return t.browser.cancelTrackPan(),e.preventDefault(),e.stopPropagation(),void(t.enableClick=!1);t.browser.cancelTrackPan(),t.browser.endTrackDrag()}function a(e,t){var r=t.referenceFrame,n=vn(e,t.contentDiv),i=vn(e,t.canvas),a=r.start+r.toBP(n.x);if(void 0!==a&&null!==t.tile)return{event:e,viewport:t,referenceFrame:r,genomicLocation:a,x:n.x,y:n.y,canvasX:i.x,canvasY:i.y}}this.$viewport.on("contextmenu",(function(e){if(t.browser.dragObject)return!1;var r=a(e,t);if(void 0===r)return!1;e.preventDefault();var n=[];"function"==typeof t.trackView.track.contextMenuItemList&&(n=t.trackView.track.contextMenuItemList(r)),n.length>0&&n.push({label:Su("<HR>")}),n.push({label:"Save Image (PNG)",click:function(){return t.saveImage()}}),n.push({label:"Save Image (SVG)",click:function(){return t.saveSVG()}}),t.menuPopup.presentTrackContextMenu(e,n)})),this.$viewport.on("mousedown",(function(e){t.enableClick=!0,r.mouseDownOnViewport(e,t),dn(e)})),this.$viewport.on("touchstart",(function(e){t.enableClick=!0,r.mouseDownOnViewport(e,t),dn(e)})),this.$viewport.on("mouseup",i),this.$viewport.on("touchend",i),this.$viewport.on("click",(function(i){t.enableClick&&function(i){if(3===i.which||i.ctrlKey)return;if(Su(".igv-popover").hide(),r.dragObject||r.isScrolling)return;i.preventDefault(),i.stopPropagation();var o=vn(i,t.$viewport.get(0)).x,s=vn(i,t.canvas).x,c=t.referenceFrame,u=Math.floor(c.start+c.toBP(s)),h=Date.now();if(h-n<r.constants.doubleClickDelay){e&&(window.clearTimeout(e),e=void 0);var l,f=Math.round(c.start+c.toBP(o));if("all"===t.referenceFrame.chr.toLowerCase()){var p=r.genome.getChromosomeCoordinate(f).chr;if(1===r.referenceFrameList.length)l=p;else{var d=r.referenceFrameList.map((function(e){return e.locusSearchString}));d[r.referenceFrameList.indexOf(t.referenceFrame)]=p,l=d.join(" ")}r.search(l)}else r.zoomWithScaleFactor(.5,f,t)}else i.shiftKey&&"function"==typeof t.trackView.track.shiftClick?t.trackView.track.shiftClick(u,i):"function"==typeof t.trackView.track.popupData&&(e=setTimeout((function(){var n=function(e,t){var n=a(e,t);if(void 0===n)return;var i,o=t.trackView.track,s=o.popupData(n),c=r.fireEvent("trackclick",[o,s]);void 0===c||!0===c?s&&s.length>0&&(i=s.map((function(e){if(e.name){var t="<span>".concat(e.name,"</span>&nbsp&nbsp&nbsp").concat(e.value);return'<div title="'.concat(e.value,'">').concat(t,"</div>")}return"<hr>"===e?e:'<div title="'.concat(e,'">').concat(e,"</div>")})).join("")):"string"==typeof c&&(i=c);return i}(i,t);n&&(t.popover&&t.popover.dispose(),t.popover=new un(t.trackView.$viewportContainer.get(0)),t.popover.presentContentWithEvent(i,n)),clearTimeout(e),e=void 0}),r.constants.doubleClickDelay));n=h}(i)}))}}]),o}(od),_b=function(e,t,r,n,i,a){this.chr=e,this.startBP=t,this.endBP=r,this.bpPerPixel=n,this.features=i,this.roiFeatures=a};function Cb(e,t){return e&&t?e.concat(t):e||t}_b.prototype.containsRange=function(e,t,r,n){return this.bpPerPixel===n&&t>=this.startBP&&r<=this.endBP&&e===this.chr},_b.prototype.overlapsRange=function(e,t,r){return this.chr===e&&r>=this.startBP&&t<=this.endBP};var Rb=function(){function e(t){mr(this,e),this.viewport=t,this.browser=t.browser,this.$rulerSweeper=Su('<div class="igv-ruler-sweeper-div">'),Su(t.contentDiv).append(this.$rulerSweeper),this.namespace=".sweeper_"+gn(),this.addMouseHandlers()}return yr(e,[{key:"disableMouseHandlers",value:function(){Su(document).off(this.namespace),this.viewport.$viewport.off(this.namespace)}},{key:"addMouseHandlers",value:function(){var e,t,r,n,i,a,o=this.browser,s=this;this.disableMouseHandlers(),e=t=r=void 0,Su(this.browser.$root).on("mousedown"+this.namespace,(function(a){t=!0,r=vn(a,s.viewport.$viewport.get(0)).x,!0===e&&(s.$rulerSweeper.show(),i=1,n=r,s.$rulerSweeper.css({left:n+"px"}),s.$rulerSweeper.width(i))})),Su(this.browser.$root).on("mousemove"+this.namespace,(function(o){var c;e&&t&&(c=vn(o,s.viewport.$viewport.get(0)).x,c=Math.min(c,s.viewport.$viewport.width()),c=Math.max(c,0),a=c-r,i=Math.abs(a),s.$rulerSweeper.width(i),a<0&&(n=r+a,s.$rulerSweeper.css({left:n+"px"})))})),Su(this.browser.$root).on("mouseup"+this.namespace,(function(r){var a;!0===e&&!0===t&&(e=t=void 0,s.$rulerSweeper.hide(),(a={}).start=s.bp(n),a.end=s.bp(n+i),i>1&&(Sm(o.genome.getChromosome(s.viewport.referenceFrame.chr).bpLength,a,o.minimumBases()),s.viewport.referenceFrame.bpPerPixel=(Math.round(a.end)-Math.round(a.start))/s.viewport.$viewport.width(),s.viewport.referenceFrame.start=Math.round(a.start),s.viewport.referenceFrame.initialEnd=Math.round(a.end),o.updateViews(s.viewport.referenceFrame)))})),this.viewport.$viewport.on("mousedown"+this.namespace,(function(t){e=!0}))}},{key:"dispose",value:function(){this.disableMouseHandlers()}},{key:"bp",value:function(e){return this.viewport.referenceFrame.start+e*this.viewport.referenceFrame.bpPerPixel}}]),e}(),Eb=function(e){wr(r,e);var t=Ar(r);function r(e,n,i,a){return mr(this,r),t.call(this,e,n,i,a)}return yr(r,[{key:"initializationHelper",value:function(){var e=this;this.rulerSweeper=new Rb(this),function(e,t,r){t.addClass("igv-viewport-ruler");var n=Su('<div class="igv-multi-locus-panel-close-container">');t.append(n),n.append(db("times-circle")),n.click((function(){return e.removeMultiLocusPanelWithReferenceFrame(r,!0)}))}(this.browser,this.$viewport,this.referenceFrame),this.$rulerLabel=Su('<div class = "igv-multi-locus-panel-label-div">'),this.$content.append(this.$rulerLabel),this.$rulerLabel.click((function(){return e.browser.selectMultiLocusPanelWithReferenceFrame(e.referenceFrame)})),this.namespace=".ruler_track_viewport_".concat(this.browser.referenceFrameList.indexOf(this.referenceFrame)),!0===ub.isWholeGenomeView(this.browser.referenceFrameList[0].chr)?Ab.call(this):this.$viewport.off(this.namespace)}},{key:"updateLocusLabel",value:function(){var e=this.referenceFrame.presentLocus(this.$viewport.width());this.$rulerLabel.text(e)}}]),r}(Sb);function Ab(){var e=this,t=this.browser.referenceFrameList.indexOf(this.referenceFrame),r="click".concat(this.namespace);this.$viewport.on(r,(function(r){var n,i=vn(r,e.$viewport.get(0)).x,a=Math.round(e.referenceFrame.start+e.referenceFrame.toBP(i)),o=e.browser.genome.getChromosomeCoordinate(a).chr;if(1===e.browser.referenceFrameList.length)n=o;else{var s=e.browser.referenceFrameList.map((function(e){return e.locusSearchString}));s[t]=o,n=s.join(" ")}e.browser.search(n)}))}var Tb=function(e,t,r,n){return"ruler"===e.track.type?new Eb(e,e.$viewportContainer,t[r],n):"ideogram"===e.track.type?new fd(e,e.$viewportContainer,t[r],n):new Sb(e,e.$viewportContainer,t[r],n)},Ib={color:1};Ib.parent=Ib,Ib.left=Ib,Ib.right=Ib;var Lb=function(){function e(){mr(this,e),this.root=Ib}return yr(e,[{key:"insert",value:function(e,t,r){var n=new Nb(new Bb(e,t,r));for(this.treeInsert(n),n.color=2;n!==this.root&&2===n.parent.color;)if(n.parent===n.parent.parent.left){var i=n.parent.parent.right;2===i.color?(n.parent.color=1,i.color=1,n.parent.parent.color=2,n=n.parent.parent):(n===n.parent.right&&(n=n.parent,Fb.call(this,n)),n.parent.color=1,n.parent.parent.color=2,Db.call(this,n.parent.parent))}else{var a=n.parent.parent.left;2===a.color?(n.parent.color=1,a.color=1,n.parent.parent.color=2,n=n.parent.parent):(n===n.parent.left&&(n=n.parent,Db.call(this,n)),n.parent.color=1,n.parent.parent.color=2,Fb.call(this,n.parent.parent))}this.root.color=1}},{key:"findOverlapping",value:function(e,t){var r=new Bb(e,t,0);if(this.root===Ib)return[];var n=Mb.call(this,r,this.root,[]);return n.length>1&&n.sort((function(e,t){return e.low-t.low})),n}},{key:"logIntervals",value:function(){!function e(t,r){t.left!==Ib&&e(t.left);t.right!==Ib&&e(t.right)}(this.root)}},{key:"mapIntervals",value:function(e){!function t(r){e(r.interval),r.left!==Ib&&t(r.left);r.right!==Ib&&t(r.right)}(this.root)}},{key:"treeInsert",value:function(e){for(var t=this.root,r=Ib;t!==Ib;)r=t,t=e.interval.low<=t.interval.low?t.left:t.right;e.parent=r,r===Ib?(this.root=e,e.left=e.right=Ib):e.interval.low<=r.interval.low?r.left=e:r.right=e,Ob.call(this,e)}}]),e}();function Mb(e,t,r){return t.interval.overlaps(e)&&r.push(t.interval),t.left!==Ib&&t.left.max>=e.low&&Mb.call(this,e,t.left,r),t.right!==Ib&&t.right.min<=e.high&&Mb.call(this,e,t.right,r),r}function Fb(e){var t=e.right;e.right=t.left,t.left!==Ib&&(t.left.parent=e),t.parent=e.parent,e.parent===Ib?this.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,Ob.call(this,e)}function Db(e){var t=e.left;e.left=t.right,t.right!==Ib&&(t.right.parent=e),t.parent=e.parent,e.parent===Ib?this.root=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,Ob.call(this,e)}function Ob(e){for(;e!==Ib;){var t=e.left.max>e.right.max?e.left.max:e.right.max,r=e.interval.high;e.max=t>r?t:r;var n=e.left.min<e.right.min?e.left.min:e.right.min,i=e.interval.low;e.min=n<i?n:i,e=e.parent}}var Bb=function(){function e(t,r,n){mr(this,e),this.low=t,this.high=r,this.value=n}return yr(e,[{key:"equals",value:function(e){return!!e&&(this===e||this.low===e.low&&this.high===e.high)}},{key:"compareTo",value:function(e){return this.low<e.low?-1:this.low>e.low?1:this.high<e.high?-1:this.high>e.high?1:0}},{key:"overlaps",value:function(e){try{return this.low<=e.high&&e.low<=this.high}catch(e){nn.presentAlert(e,void 0)}}}]),e}();function Nb(e){this.parent=Ib,this.left=Ib,this.right=Ib,this.interval=e,this.color=2}var Pb=function(e,t,r){if(e&&0!==e.length){var n=function(e){var t=new Lb,r=e.length,n=Math.max(10,Math.round(r/100));e.sort((function(e,t){return e.start===t.start?0:e.start>t.start?1:-1}));for(var i=function(i){var a=Math.min(r,i+n),o=e.slice(i,a),s=o[0].start,c=s;o.forEach((function(e){c=Math.max(c,e.end)})),t.insert(s,c,o)},a=0;a<r;a+=n)i(a);return t}(e).findOverlapping(t,r);return 0===n.length?[]:(e=[],n.forEach((function(n){for(var i=n.value,a=i.length,o=0;o<a;o++){var s=i[o];if(s.start>r)break;s.end>t&&e.push(s)}})),e.sort((function(e,t){return e.start-t.start})),e)}return[]};var zb=Math.log,Ub=Math.LOG10E;Me({target:"Math",stat:!0},{log10:function(e){return zb(e)*Ub}}),Me({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991});var Hb=_n,jb=function(){function e(t){mr(this,e),this.browser=t,this.height=40,this.name="",this.id="ruler",this.disableButtons=!0,this.ignoreTrackMenu=!0,this.order=.01*Number.MIN_SAFE_INTEGER,this.removable=!1,this.type="ruler"}var t;return yr(e,[{key:"updateLocusLabel",value:function(){var e,t=Nr(this.trackView.viewports);try{for(t.s();!(e=t.n()).done;){e.value.updateLocusLabel()}}catch(e){t.e(e)}finally{t.f()}}},{key:"getFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)}))),function(e,r,n){return t.apply(this,arguments)})},{key:"computePixelHeight",value:function(e){return this.height}},{key:"draw",value:function(e){if(ub.isWholeGenomeView(e.referenceFrame.chr))e.viewport.rulerSweeper.disableMouseHandlers(),this.drawWholeGenome(e);else{e.viewport.rulerSweeper.addMouseHandlers();var t=1+Math.floor(e.referenceFrame.toBP(e.pixelWidth));new qb(t,e).drawTicks(e,6,2,this.height),Jp.strokeLine(e.context,0,this.height-2,e.pixelWidth,this.height-2)}}},{key:"drawWholeGenome",value:function(e){e.context.save(),Jp.fillRect(e.context,0,0,e.pixelWidth,e.pixelHeight,{fillStyle:"white"});var t,r=e.pixelHeight,n=Nr(this.browser.genome.wgChromosomeNames);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=this.browser.genome.getCumulativeOffset(i),o=this.browser.genome.getChromosome(i).bpLength,s=Math.round(a/e.bpPerPixel),c=Math.round(o/e.bpPerPixel);this.renderChromosomeRect(e.context,s,0,c,r,i)}}catch(e){n.e(e)}finally{n.f()}e.context.restore()}},{key:"renderChromosomeRect",value:function(e,t,r,n,i,a){e.textAlign="center",e.textBaseline="middle",e.font="12px sans-serif",Jp.strokeLine(e,t+n,r,t+n,r+i,{strokeStyle:ei.greyScale(191)});var o=a.startsWith("chr")?a.substring(3):a;n>e.measureText(o).width&&Jp.fillText(e,o,t+n/2,r+i/2,{fillStyle:ei.greyScale(68)})}},{key:"supportsWholeGenome",value:function(){return!0}},{key:"dispose",value:function(){}}]),e}(),qb=function(){function e(t,r){function n(e,t,r,n){this.majorTick=!0===n?2*e:e,this.majorUnit=t,this.halfTick=e/2,this.unitMultiplier=r}mr(this,e),function(e,t){var r,i,a,o,s=t.context.isSVG||!1;e<10&&n.call(this,1,"bp",1,s);(r=Math.floor(Math.log10(e)))>9?(i="gb",a=1e9):r>6?(i="mb",a=1e6):r>3?(i="kb",a=1e3):(i="bp",a=1);o=Hb(Math.floor(e/a))+" "+i,this.labelWidthBP=Math.round(t.referenceFrame.toBP(t.context.measureText(o).width)),e/Math.pow(10,r-1)<25?n.call(this,Math.pow(10,r-1),i,a,s):n.call(this,Math.pow(10,r)/2,i,a,s)}.call(this,t,r)}return yr(e,[{key:"drawTicks",value:function(e,t,r,n){var i,a,o,s,c,u,h;for(i=Math.floor(e.bpStart/this.majorTick)-1,c=0,u=0,o=0;o<e.pixelWidth;)a=Math.floor(i*this.majorTick),o=Math.round(e.referenceFrame.toPixels(a-1-e.bpStart+.5)),s=Hb(Math.floor(a/this.unitMultiplier))+" "+this.majorUnit,c=e.context.measureText(s).width,u=Math.round(o-c/2),Jp.fillText(e.context,s,u,n-t/.75),Jp.strokeLine(e.context,o,n-t,o,n-r),++i;for(i=Math.floor(e.bpStart/this.halfTick)-1,o=0;o<e.pixelWidth;)a=Math.floor(i*this.halfTick),o=Math.round(e.referenceFrame.toPixels(a-1-e.bpStart+.5)),(h=a/this.unitMultiplier)===Math.floor(h)&&this.majorTick/this.labelWidthBP>8&&(s=Hb(Math.floor(h))+" "+this.majorUnit,u=o-(c=e.context.measureText(s).width)/2,Jp.fillText(e.context,s,u,n-t/.75)),Jp.strokeLine(e.context,o,n-t,o,n-r),++i}},{key:"description",value:function(e){}}]),e}(),Vb=new Set(["ruler","sequence","ideogram"]),Wb=function(){function e(t,r,n){var i=this;mr(this,e),this.browser=t,this.track=n,n.trackView=this;var a=Su('<div class="igv-track">');this.trackDiv=a.get(0),r.append(a),this.namespace=".trackview_"+gn(),n instanceof jb&&(this.trackDiv.dataset.rulerTrack="rulerTrack"),n.height&&(this.trackDiv.style.height=n.height+"px"),this.appendLeftHandGutter(a),this.$viewportContainer=Su('<div class="igv-viewport-container">'),a.append(this.$viewportContainer),$b(t,t.referenceFrameList,this),"ideogram"===n.type||"ruler"===n.type||this.attachDragWidget(a,this.$viewportContainer),!0===n.ignoreTrackMenu||this.appendRightHandGutter(a);var o=[],s=n.color||n.defaultColor;Sn(s)&&o.push(s),n.altColor&&Sn(n.altColor)&&o.push(n.altColor);var c=o.map((function(e){return e.startsWith("#")?e:e.startsWith("rgb(")?ei.rgbToHex(e):ei.colorNameToHex(e)})),u={parent:this.trackDiv,top:void 0,left:void 0,width:432,height:void 0,defaultColors:c,colorHandler:function(e){i.track.color=e,i.repaintViews()}};this.colorPicker=new on(u),u.colorHandler=function(e){i.track.altColor=e,i.repaintViews()},this.altColorPicker=new on(u)}var t,r;return yr(e,[{key:"renderSVGContext",value:function(e,t){var r,n=Nr(this.viewports);try{for(n.s();!(r=n.n()).done;){var i=r.value,a=i.browser.referenceFrameList.indexOf(i.referenceFrame),o=i.$viewport.get(0).getBoundingClientRect(),s=o.y,c=o.width,u={deltaX:t.deltaX+a*c,deltaY:t.deltaY+s};i.renderSVGContext(e,u)}}catch(e){n.e(e)}finally{n.f()}}},{key:"attachScrollbar",value:function(e,t,r){"hidden"===t.find(".igv-viewport").css("overflow-y")&&(this.scrollbar=new Kb(t,r),this.scrollbar.$outerScroll.insertAfter(t))}},{key:"removeViewportForReferenceFrame",value:function(e){for(var t=-1,r=0;r<this.viewports.length;r++)if(this.viewports[r].referenceFrame===e){t=r;break}t>=0&&(this.viewports[t].$viewport.remove(),this.viewports.splice(t,1),this.updateViewportForMultiLocus())}},{key:"updateViewportForMultiLocus",value:function(){"ruler"===this.track.type&&(this.viewports.length>1?(this.$viewportContainer.find(".igv-multi-locus-panel-close-container").show(),this.$viewportContainer.find(".igv-multi-locus-panel-label-div").show(),this.track.updateLocusLabel()):(this.$viewportContainer.find(".igv-multi-locus-panel-close-container").hide(),this.$viewportContainer.find(".igv-multi-locus-panel-label-div").hide()))}},{key:"appendLeftHandGutter",value:function(e){var t=this,r=Su('<div class="igv-left-hand-gutter">');if(this.leftHandGutter=r[0],e.append(r),"function"==typeof this.track.paintAxis){this.track.dataRange&&(r.click((function(e){t.browser.dataRangeDialog.configure({trackView:self}),t.browser.dataRangeDialog.present(Su(self.trackDiv))})),r.addClass("igv-clickable"));var n=Su('<canvas class ="igv-canvas">');r.append(n),this.controlCanvas=n.get(0),this.resizeControlCanvas(r.outerWidth(),r.outerHeight())}}},{key:"appendRightHandGutter",value:function(e){var t=Su('<div class="igv-right-hand-gutter">');e.append(t),this.createTrackGearPopup(t)}},{key:"dataRange",value:function(){return this.track.dataRange?this.track.dataRange:void 0}},{key:"setDataRange",value:function(e,t){void 0!==e&&(this.track.dataRange.min=e),void 0!==t&&(this.track.dataRange.max=t),this.track.autoscale=!1,this.repaintViews()}},{key:"presentColorPicker",value:function(e){"altColor"===e?this.altColorPicker.show():this.colorPicker.show()}},{key:"setTrackHeight",value:function(e,t){t||(this.track.minHeight&&(e=Math.max(this.track.minHeight,e)),this.track.maxHeight&&(e=Math.min(this.track.maxHeight,e))),this.track.height=e,this.track.config.height=e,Su(this.trackDiv).height(e),"function"!=typeof this.track.computePixelHeight&&(this.viewports.forEach((function(t){t.setContentHeight(e),t.tile&&(t.tile.invalidate=!0)})),this.repaintViews()),this.resizeControlCanvas(Su(this.leftHandGutter).outerWidth(),e),this.track.paintAxis&&this.track.paintAxis(this.controlCtx,Su(this.controlCanvas).width(),Su(this.controlCanvas).height()),this.scrollbar&&this.scrollbar.update()}},{key:"isLoading",value:function(){for(var e=0;e<this.viewports.length;e++)if(this.viewports[e].isLoading())return!0}},{key:"resize",value:function(e){var t,r=Nr(this.viewports);try{for(r.s();!(t=r.n()).done;){t.value.setWidth(e)}}catch(e){r.e(e)}finally{r.f()}var n=Su(this.leftHandGutter);this.resizeControlCanvas(n.outerWidth(),n.outerHeight()),this.updateViews(!0)}},{key:"repaintViews",value:function(){var e,t=Nr(this.viewports);try{for(t.s();!(e=t.n()).done;){e.value.repaint()}}catch(e){t.e(e)}finally{t.f()}this.track.paintAxis&&this.track.paintAxis(this.controlCtx,Su(this.controlCanvas).width(),Su(this.controlCanvas).height())}},{key:"updateViews",value:(r=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s,c,u,h,l,f,p,d,g,v,m,b,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.browser&&this.browser.referenceFrameList){e.next=2;break}return e.abrupt("return");case 2:(r=this.viewports.filter((function(e){return e.isVisible()}))).forEach((function(e){e.shift()})),n=this.viewportsToReload(t),i=Nr(n),e.prev=6,i.s();case 8:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=12,o.loadFeatures();case 12:e.next=8;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:if(!this.disposed){e.next=24;break}return e.abrupt("return");case 24:if(!(s=this.browser.dragObject)&&this.track.autoscale){c=[],u=Nr(r);try{for(u.s();!(h=u.n()).done;)l=h.value,f=l.referenceFrame,p=f.start,d=p+f.toBP(Su(l.contentDiv).width()),l.tile&&l.tile.features&&("function"==typeof l.tile.features.getMax?(g=l.tile.features.getMax(p,d),c.push({value:g})):c=c.concat(Pb(l.tile.features,p,d)))}catch(e){u.e(e)}finally{u.f()}"function"==typeof this.track.doAutoscale?this.track.dataRange=this.track.doAutoscale(c):this.track.dataRange=xm(c)}if(s||!this.track.autoscale&&!this.track.autoscaleGroup){b=Nr(n);try{for(b.s();!(y=b.n()).done;)y.value.repaint()}catch(e){b.e(e)}finally{b.f()}}else{v=Nr(r);try{for(v.s();!(m=v.n()).done;)m.value.repaint()}catch(e){v.e(e)}finally{v.f()}}this.adjustTrackHeight();case 28:case"end":return e.stop()}}),e,this,[[6,16,19,22]])}))),function(e){return r.apply(this,arguments)})},{key:"getInViewFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s,c,u,h,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.browser&&this.browser.referenceFrameList){e.next=2;break}return e.abrupt("return",[]);case 2:return r=this.viewportsToReload(t),n=r.map((function(e){return e.loadFeatures()})),e.next=6,Promise.all(n);case 6:i=[],a=Nr(this.viewports);try{for(a.s();!(o=a.n()).done;)(s=o.value).tile&&s.tile.features&&(c=s.referenceFrame,u=c.start,h=u+c.toBP(Su(s.contentDiv).width()),"function"==typeof s.tile.features.getMax?(l=s.tile.features.getMax(u,h),i.push({value:l})):i=i.concat(Pb(s.tile.features,u,h)))}catch(e){a.e(e)}finally{a.f()}return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"checkContentHeight",value:function(){this.viewports.forEach((function(e){e.checkContentHeight()})),this.adjustTrackHeight()}},{key:"adjustTrackHeight",value:function(){var e=Xb(this.viewports);if(this.track.autoHeight?this.setTrackHeight(e,!1):this.track.paintAxis&&this.track.paintAxis(this.controlCtx,Su(this.controlCanvas).width(),Su(this.controlCanvas).height()),this.scrollbar){var t=this.viewports[0].getContentTop(),r=this.viewports.map((function(e){return e.getContentHeight()})),n=Math.min.apply(Math,Lr(r)),i=Math.min(0,this.$viewportContainer.height()-n);t<i&&this.viewports.forEach((function(e){Su(e.contentDiv).css("top",i+"px")})),this.scrollbar.update()}}},{key:"resizeControlCanvas",value:function(e,t){var r=window.devicePixelRatio;if(this.leftHandGutter){this.controlCanvas&&Su(this.controlCanvas).remove();var n=Su('<canvas class ="igv-canvas">');this.controlCanvas=n[0],Su(this.leftHandGutter).append(n),this.controlCanvas.height=r*t,this.controlCanvas.width=r*e,this.controlCanvas.style.height=t+"px",this.controlCanvas.style.width=e+"px",this.controlCtx=this.controlCanvas.getContext("2d"),this.controlCtx.scale(r,r)}}},{key:"attachDragWidget",value:function(e,t){var r=this,n=this.browser;this.$trackDragScrim=Su('<div class="igv-track-drag-scrim">'),t.append(this.$trackDragScrim),this.$trackDragScrim.hide(),r.$trackManipulationHandle=Su('<div class="igv-track-manipulation-handle">'),e.append(r.$trackManipulationHandle),r.$trackManipulationHandle.on("mousedown",(function(e){e.preventDefault(),e.stopPropagation(),r.$trackDragScrim.show(),n.startTrackDrag(r)})),r.$trackManipulationHandle.on("mouseup",(function(e){e.preventDefault(),e.stopPropagation(),n.endTrackDrag(),r.$trackDragScrim.hide()})),e.on("mouseenter",(function(e){n.dragTrack&&(e.preventDefault(),e.stopPropagation(),n.updateTrackDrag(r))})),r.$trackManipulationHandle.on("mouseleave",(function(e){n.dragTrack||(e.preventDefault(),e.stopPropagation(),r.$trackDragScrim.hide())}))}},{key:"viewportsToReload",value:function(e){return this.viewports.filter((function(t){if(!t.isVisible())return!1;if(t.checkZoomIn()){var r=t.referenceFrame,n=t.referenceFrame.chr,i=r.start,a=i+r.toBP(Su(t.contentDiv).width()),o=r.bpPerPixel;return e||!t.tile||t.tile.invalidate||!t.tile.containsRange(n,i,a,o)}return!1}))}},{key:"createTrackGearPopup",value:function(e){var t=this,r=Su("<div>",{class:"igv-trackgear-container"});e.append(r),r.append(db("cog")),this.trackGearPopup=new kb(e),this.trackGearPopup.$popover.hide(),r.click((function(e){e.preventDefault(),e.stopPropagation(),t.trackGearPopup.presentMenuList(-t.trackGearPopup.$popover.width(),0,mb.trackMenuItemList(t))}))}},{key:"dispose",value:function(){var e=this;this.$trackManipulationHandle&&this.$trackManipulationHandle.off(),this.scrollbar&&this.scrollbar.dispose(),Su(document).off(this.namespace),"function"==typeof this.track.dispose&&this.track.dispose();var t=this.track;"function"==typeof t.dispose&&t.dispose(),Object.keys(t).forEach((function(e){t[e]=void 0})),this.viewports.forEach((function(e){e.dispose()})),Object.keys(this).forEach((function(t){e[t]=void 0})),this.disposed=!0}},{key:"scrollBy",value:function(e){this.scrollbar.moveScrollerBy(e)}}]),e}();function Gb(e){var t,r=Nr(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;n.scrollbar?(n.scrollbar.$outerScroll.remove(),n.scrollbar=null,n.scrollbar=void 0):Su(n.trackDiv).find(".igv-scrollbar-shim").remove();var i,a=Nr(n.viewports);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.rulerSweeper&&o.rulerSweeper.$rulerSweeper.remove(),o.popover&&o.popover.dispose(),o.$viewport.remove()}}catch(e){a.e(e)}finally{a.f()}delete n.viewports,delete n.scrollbar}}catch(e){r.e(e)}finally{r.f()}}function $b(e,t,r){var n=e.calculateViewportWidth(t.length);r.viewports=[];var i,a=Nr(t);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=Tb(r,t,t.indexOf(o),n);r.viewports.push(s)}}catch(e){a.e(e)}finally{a.f()}(Zb(r.viewports,r.$viewportContainer),r.updateViewportForMultiLocus(),!1===Vb.has(r.track.type))?r.attachScrollbar(Su(r.trackDiv),r.$viewportContainer,r.viewports):Su("<div>",{class:"igv-scrollbar-shim"}).insertAfter(r.$viewportContainer)}function Zb(e,t){var r=Su(".igv-track-container");r.find(".igv-multi-locus-separator").remove();var n=Yb(r.get(0)).x;if(t.find(".igv-viewport-multi-locus-gap-shim").remove(),e.length>1){var i,a=Nr(e);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(e.indexOf(o)<=e.length-2){var s=o.$viewport,c=Su('<div class="igv-viewport-multi-locus-gap-shim">');c.insertAfter(s);var u=Yb(c.get(0)).x,h=Su('<div class="igv-multi-locus-separator">');r.append(h),h.get(0).style.left="".concat(u-n,"px")}}}catch(e){a.e(e)}finally{a.f()}}}function Yb(e){var t=e.getBoundingClientRect(),r=t.x,n=t.y;return{x:r+(window.pageXOffset||document.documentElement.scrollLeft),y:n+(window.pageYOffset||document.documentElement.scrollTop)}}function Xb(e){var t=e.map((function(e){return e.getContentHeight()}));return Math.max.apply(Math,Lr(t))}var Kb=function(){function e(t,r){var n,i=this;mr(this,e);var a=function(e){e.preventDefault(),e.stopPropagation();var t=dn(e);i.moveScrollerBy(t.y-n),n=t.y},o=function(e){Su(document).off(i.namespace)},s=".trackscrollbar"+gn();this.namespace=s,this.$outerScroll=Su('<div class="igv-scrollbar-outer-div">'),this.$innerScroll=Su("<div>"),this.$outerScroll.append(this.$innerScroll),this.$viewportContainer=t,this.viewports=r,this.$innerScroll.on("mousedown",(function(e){e.preventDefault();var t=dn(e);n=t.y,Su(document).on("mousemove"+s,a),Su(document).on("mouseup"+s,o),Su(document).on("mouseleave"+s,o),e.stopPropagation()})),this.$innerScroll.on("click",(function(e){e.stopPropagation()})),this.$outerScroll.on("click",(function(e){i.moveScrollerBy(e.offsetY-i.$innerScroll.height()/2),e.stopPropagation()}))}return yr(e,[{key:"moveScrollerBy",value:function(e){var t=this.$innerScroll.position().top+e;this.moveScrollerTo(t)}},{key:"moveScrollerTo",value:function(e){var t=this.$outerScroll.height(),r=this.$innerScroll.height(),n=Math.min(Math.max(0,e),t-r),i=Xb(this.viewports),a=-Math.round(n*(i/this.$viewportContainer.height()));this.$innerScroll.css("top",n+"px");var o,s=Nr(this.viewports);try{for(s.s();!(o=s.n()).done;){o.value.setTop(a)}}catch(e){s.e(e)}finally{s.f()}}},{key:"dispose",value:function(){Su(window).off(this.namespace),this.$innerScroll.off()}},{key:"update",value:function(){var e=this.$viewportContainer.height(),t=Xb(this.viewports),r=Math.round(e/t*e);t>e?(this.$innerScroll.show(),this.$innerScroll.height(r)):this.$innerScroll.hide()}}]),e}(),Qb=function(e,t,r,n,i,a,o,s){for(var c,u=i,h=0,l=!!o&&De(o,s,3);h<n;){if(h in r){if(c=l?l(r[h],h,t):r[h],a>0&&Be(c))u=Qb(e,t,c,he(c.length),u,a-1)-1;else{if(u>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[u]=c}u++}h++}return u},Jb=Qb;Me({target:"Array",proto:!0},{flatMap:function(e){var t,r=Oe(this),n=he(r.length);return Fe(e),(t=Ve(r,0)).length=Jb(t,r,r,n,0,1,e,arguments.length>1?arguments[1]:void 0),t}}),ba("flatMap");var ey=Tu.trim,ty=n.parseFloat,ry=1/ty(_u+"-0")!=-1/0?function(e){var t=ey(String(e)),r=ty(t);return 0===r&&"-"==t.charAt(0)?-0:r}:ty;function ny(e,t){if(!(e.length<6)){var r={chr1:e[0],start1:Number.parseInt(e[1]),end1:Number.parseInt(e[2]),chr2:e[3],start2:Number.parseInt(e[4]),end2:Number.parseInt(e[5])};if(!(isNaN(r.start1)||isNaN(r.end1)||isNaN(r.start2)||isNaN(r.end2))){if(e.length>6&&"."!==e[6]&&(r.name=e[6]),e.length>7&&"."!==e[7]&&(r.score=parseFloat(e[7])),e.length>8&&"."!==e[8]&&(r.strand1=e[8]),e.length>9&&"."!==e[9]&&(r.strand2=e[9]),t){var n=t.colorColumn;n&&n<e.length&&(r.color=ei.createColorString(e[n]));var i=t.thicknessColumn;i&&i<e.length&&(r.thickness=e[i]),e.length>10&&t.columnNames&&t.columnNames.length===e.length&&(r.extras=e.slice(10))}return r.chr1===r.chr2&&(r.chr=r.chr1,r.start=Math.min(r.start1,r.start2),r.end=Math.max(r.end1,r.end2)),r}}}function iy(e){if(0!=e.length){var t,r=e[0];if(void 0===r.score&&void 0!==r.name){var n,i=Nr(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(!("number"==typeof(t=a.name)?t-t==0:"string"==typeof t&&""!==t.trim()&&(Number.isFinite?Number.isFinite(+t):isFinite(+t)))&&"."!==a.name)return}}catch(e){i.e(e)}finally{i.f()}var o,s=Nr(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;c.score=parseFloat(c.name),delete c.name}}catch(e){s.e(e)}finally{s.f()}}var u,h=Nr(e.filter((function(e){return e.chr1!==e.chr2})));try{for(h.s();!(u=h.n()).done;){var l=u.value,f=Object.assign({},l);f.dup=!0,e.push(f),l.chr=l.chr1,l.start=l.start1,l.end=l.end1,f.chr=f.chr2,f.start=f.start2,f.end=f.end2}}catch(e){h.e(e)}finally{h.f()}}}function ay(e,t){if(!(e.length<8))return{chr:e[0],start:Number.parseInt(e[1]),end:Number.parseInt(e[2]),color:ei.createColorString(e[6]),value:Number.parseFloat(e[7])}}function oy(e,t){if(!(e.length<6))return{chr:e[0],start:e[1],end:e[2],chr1:e[8],start1:Number.parseInt(e[9]),end1:Number.parseInt(e[10]),chr2:e[13],start2:Number.parseInt(e[14]),end2:Number.parseInt(e[15]),name:e[3],score:Number.parseFloat(e[4]),value:Number.parseFloat(e[5]),color:"."===e[7]?void 0:"0"===e[7]?"rgb(0,0,0)":e[7]}}Me({target:"Number",stat:!0,forced:Number.parseFloat!=ry},{parseFloat:ry});var sy=Rd.entries;Me({target:"Object",stat:!0},{entries:function(e){return sy(e)}});var cy=["Name","gene_name","gene","gene_id","alias","locus","name"];function uy(e,t){var r,n,i,a,o,s,c,u,h,l,f=t.format;if(e.length<9)return null;r=e[0],o=e[2],n=parseInt(e[3])-1,i=parseInt(e[4]),s="."===e[5]?0:parseFloat(e[5]),a=e[6],"."===e[7]||parseInt(e[7]);for(var p="gff3"===f?"=":/\s+/,d=hy(c=e[8],p),g=0,v=Object.entries(d);g<v.length;g++){var m=Ir(v[g],2),b=m[0],y=m[1],w=b.toLowerCase();if("color"===w||"colour"===w)u=ei.createColorString(y);else if("gff3"===f)try{d[b]=unescape(y)}catch(e){d[b]=y,console.error("Malformed gff3 attibute value: ".concat(y))}}if(t.nameField)h=d[t.nameField];else for(l=0;l<cy.length;l++)if(d.hasOwnProperty(cy[l])){t.nameField=cy[l],h=d[t.nameField];break}return{id:d.ID||d.transcript_id,parent:d.Parent,name:h,type:o,chr:r,start:n,end:i,score:s,strand:a,color:u,attributeString:c,delim:p,popupData:ly}}function hy(e,t){var r,n={},i=Nr(e.split(";"));try{for(i.s();!(r=i.n()).done;){var a=r.value.trim().split(t,2);if(2===a.length){var o=a[0].trim(),s=a[1].trim();s.startsWith('"')&&s.endsWith('"')&&(s=s.substr(1,s.length-2)),n[o]=s}}}catch(e){i.e(e)}finally{i.f()}return n}function ly(e){var t=this.attributeString.split(";"),r=[];this.name&&r.push({name:"name:",value:this.name}),r.push({name:"type:",value:this.type});var n,i=Nr(t);try{for(i.s();!(n=i.n()).done;){var a=n.value.trim().split(this.delim,2);if(2===a.length&&void 0!==a[1]){var o=a[0].trim();if("name"===o.toLowerCase())continue;var s=a[1].trim();s.startsWith('"')&&s.endsWith('"')&&(s=s.substr(1,s.length-2)),r.push({name:o+":",value:s})}}}catch(e){i.e(e)}finally{i.f()}return r.push({name:"position:",value:"".concat(this.chr,":").concat(_n(this.start+1),"-").concat(_n(this.end))}),r}function fy(e,t){if(!(e.length<3)){t&&t.gffTags;var r=e[0],n=parseInt(e[1]),i=e.length>2?parseInt(e[2]):n+1;if(isNaN(n)||isNaN(i))throw Error("Unparsable bed record: ".concat(e.join("\t")));var a={chr:r,start:n,end:i,score:1e3};try{if(e.length>3){if(e[3].indexOf(";")>0&&e[3].indexOf("=")>0){var o,s=hy(e[3],"="),c=Nr(cy);try{for(c.s();!(o=c.n()).done;){var u=o.value;if(s.hasOwnProperty(u)){a.name=s[u],delete s[u];break}}}catch(e){c.e(e)}finally{c.f()}a.attributes=s}a.name||(a.name="."===e[3]?"":e[3])}if(e.length>4&&(a.score="."===e[4]?0:parseFloat(e[4]),isNaN(a.score)))return a;if(e.length>5&&(a.strand=e[5],"."!==a.strand&&"+"!==a.strand&&"-"!==a.strand))return a;if(e.length>6&&(a.cdStart=parseInt(e[6]),isNaN(a.cdStart)))return a;if(e.length>7&&(a.cdEnd=parseInt(e[7]),isNaN(a.cdEnd)))return a;if(e.length>8&&"."!==e[8]&&"0"!==e[8]&&(a.color=ei.createColorString(e[8])),e.length>11){var h=parseInt(e[9]);if(h>1e3)return a;var l=e[10].replace(/,$/,"").split(","),f=e[11].replace(/,$/,"").split(",");if(l.length!==f.length||h!==l.length)return a;for(var p=[],d=0;d<h;d++){var g=n+parseInt(f[d]),v=g+parseInt(l[d]);p.push({start:g,end:v})}my(p,a.cdStart,a.cdEnd),a.exons=p}if(t){var m=t.thicknessColumn,b=t.colorColumn;b&&b<e.length&&(a.color=ei.createColorString(e[b])),m&&m<e.length&&(a.thickness=e[m])}}catch(e){}return a}}function py(e,t){if(!(e.length<=15))return{swScore:Number.parseInt(e[1]),milliDiv:Number.parseInt(e[2]),milliDel:Number.parseInt(e[3]),milliIns:Number.parseInt(e[4]),chr:e[5],start:Number.parseInt(e[6]),end:Number.parseInt(e[7]),strand:e[9],repName:e[10],repClass:e[11],repFamily:e[12],repStart:Number.parseInt(e[13]),repEnd:Number.parseInt(e[14]),repLeft:Number.parseInt(e[15])}}function dy(e,t){var r=void 0===t.shift?0:1;if(!(e.length<=9+r)){for(var n=parseInt(e[5+r]),i=parseInt(e[6+r]),a={name:e[0+r],chr:e[1+r],strand:e[2+r],start:parseInt(e[3+r]),end:parseInt(e[4+r]),cdStart:n,cdEnd:i,id:e[0+r]},o=parseInt(e[7+r]),s=e[8+r].split(","),c=e[9+r].split(","),u=[],h=0;h<o;h++){var l=parseInt(s[h]),f=parseInt(c[h]);u.push({start:l,end:f})}return my(u,n,i),a.exons=u,a}}function gy(e,t){var r=void 0===t.shift?0:1;if(!(e.length<=11+r)){for(var n=parseInt(e[5+r]),i=parseInt(e[6+r]),a={name:e[11+r],chr:e[1+r],strand:e[2+r],start:parseInt(e[3+r]),end:parseInt(e[4+r]),cdStart:n,cdEnd:i,id:e[0+r]},o=parseInt(e[7+r]),s=e[8+r].split(","),c=e[9+r].split(","),u=[],h=0;h<o;h++){var l=parseInt(s[h]),f=parseInt(c[h]);u.push({start:l,end:f})}return my(u,n,i),a.exons=u,a}}function vy(e,t){var r=void 0===t.shift?0:1;if(!(e.length<=10+r)){for(var n=parseInt(e[6+r]),i=parseInt(e[7+r]),a={name:e[0+r],id:e[1+r],chr:e[2+r],strand:e[3+r],start:parseInt(e[4+r]),end:parseInt(e[5+r]),cdStart:n,cdEnd:i},o=parseInt(e[8+r]),s=e[9+r].split(","),c=e[10+r].split(","),u=[],h=0;h<o;h++){var l=parseInt(s[h]),f=parseInt(c[h]);u.push({start:l,end:f})}return my(u,n,i),a.exons=u,a}}function my(e,t,r){var n,i=Nr(e);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.end,s=a.start;o<t||s>r?a.utr=!0:(t>=s&&t<=o&&(a.cdStart=t),r>=s&&r<=o&&(a.cdEnd=r))}}catch(e){i.e(e)}finally{i.f()}}function by(e,t){var r,n,i,a,o,s,c;if(!(e.length<9))return r=e[0],n=parseInt(e[1]),i=parseInt(e[2]),o=e[3],s=parseFloat(e[4]),a=e[5].trim(),c=parseFloat(e[6]),0===s&&(s=c),{chr:r,start:n,end:i,name:o,score:s,strand:a,signal:c,pValue:parseFloat(e[7]),qValue:parseFloat(e[8])}}function yy(e,t){if(!(e.length<=3)){var r={chr:e[0],start:parseInt(e[1]),end:parseInt(e[2]),value:parseFloat(e[3])};if(t){var n=t.colorColumn;n&&n<e.length&&(r.color=ei.createColorString(e[n]))}return r}}function wy(e,t){var r=t.wig;if(r&&"fixedStep"===r.format){var n=r.index*r.step+r.start,i=n+r.span,a=parseFloat(e[0]);return++r.index,isNaN(a)?null:{chr:r.chrom,start:n,end:i,value:a}}if(r&&"variableStep"===r.format){if(e.length<2)return null;var o=parseInt(e[0],10)-1,s=o+r.span,c=parseFloat(e[1]);return isNaN(c)?null:{chr:r.chrom,start:o,end:s,value:c}}return yy(e)}function ky(e,t){if(!(e.length<6)){for(var r=["bin","chr","start","end","name","score","strand","refNCBI","refUCSC","observed","molType","class","valid","avHet","avHetSE","func","locType","weight","exceptions","submitterCount","submitters","alleleFreqCount","alleles","alleleNs","alleleFreqs","bitfields"],n={chr:e[1],start:Number.parseInt(e[2]),end:Number.parseInt(e[3]),name:e[4],score:Number.parseInt(e[5])},i=Math.min(e.length,r.length),a=6;a<i;a++)n[r[a]]=e[a];return n}}function xy(e,t){if(!(e.length<7)){var r=e[0],n=e[1],i=parseInt(e[2]),a=parseInt(e[3]),o=parseInt(e[4]),s=parseInt(e[5]),c=e[6],u={chr:r,name:n,junction_left:i,junction_right:a,num_junction_reads:o,num_spanning_frags:s,spanning_frag_coords:[],start:-1,end:-1},h=i,l=a;if(s>0)for(var f=c.split(","),p=0;p<f.length;p++){var d=f[p].split("-"),g=d[0],v=d[1];g<h&&(h=g),v>l&&(l=v),u.spanning_frag_coords.push({left:g,right:v})}return u.start=h,u.end=l,u}}function Sy(e,t){if(e.length<7)return null;var r={chr:e[0],start:parseInt(e[1])-1,end:parseInt(e[2]),"Strongest SNP-risk allele":e[3],"Disease/Phenotype":e[4],"P-value":e[5],"Odds ratio or beta":e[6]};return e.length>6&&(r.PUBMEDID='<a target = "blank" href = "https://www.ncbi.nlm.nih.gov/pubmed/'.concat(e[7],'">').concat(e[7],"</a>")),r}function _y(e,t){var r=t.customFormat;if(!(e.length<r.fields.length)){var n=r.coords||0,i=e[r.chr],a=parseInt(e[r.start])-n,o={chr:i,start:a,end:void 0!==r.end?parseInt(e[r.end]):a+1};return r.fields&&r.fields.forEach((function(t,n){n!==r.chr&&n!==r.start&&n!==r.end&&(o[t]=e[n])})),o}}function Cy(e,t){var r=t.columnNames;if(!r)throw Error("Sample names are not defined.   Missing column headers?");var n=r.length-3,i=e[0],a=parseInt(e[1]),o=parseInt(e[2]),s=e.slice(3).map(parseFloat);return s.length==n?{chr:i,start:a,end:o,values:s}:void console.warn("".concat(i,":").concat(a,"-").concat(o," row contains ").concat(s.length," sample columns instead of the expected ").concat(n," columns. Skipping..."))}var Ry=function(){function e(t){mr(this,e),this.config=t,this.header={},t.nameField&&(this.header.nameField=t.nameField),this.skipRows=0,t.decode?(this.decode=t.decode,this.delimiter=t.delimiter||"\t"):t.format&&(this.header.format=t.format.toLowerCase(),this.setDecoder(this.header.format)),this.delimiter||(this.delimiter="\t")}var t,r;return yr(e,[{key:"parseHeader",value:(r=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s,c,u,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.header;case 1:return e.next=3,t.nextLine();case 3:if(e.t0=i=e.sent,e.t1=void 0,e.t0===e.t1){e.next=51;break}if(!i.startsWith("track")&&!i.startsWith("#track")){e.next=11;break}a=Ey(i),Object.assign(r,a),e.next=49;break;case 11:if(!i.startsWith("browser")){e.next=14;break}e.next=49;break;case 14:if(!i.startsWith("#columns")){e.next=19;break}o=Ay(i),Object.assign(r,o),e.next=49;break;case 19:if(!i.startsWith("##gff-version 3")){e.next=23;break}r.format="gff3",e.next=49;break;case 23:if(!i.startsWith("#gffTags")){e.next=27;break}r.gffTags=!0,e.next=49;break;case 27:if(!i.startsWith("fixedStep")&&!i.startsWith("variableStep")){e.next=31;break}return e.abrupt("break",51);case 31:if(!i.startsWith("#")){e.next=36;break}(s=i.split(this.delimiter||"\t")).length>1&&(n=s),e.next=49;break;case 36:if(this.setDecoder(r.format),e.prev=37,c=i.split(this.delimiter||"\t"),u=Object.assign({columnNames:n},r),!this.decode(c,u)){e.next=44;break}return e.abrupt("break",51);case 44:c.length>1&&(n=c);case 45:e.next=49;break;case 47:e.prev=47,e.t2=e.catch(37);case 49:e.next=1;break;case 51:if(n)for(r.columnNames=n,h=0;h<n.length;h++)"color"===n[h]||"colour"===n[h]?r.colorColumn=h:"thickness"===n[h]&&(r.thicknessColumn=h);return this.header=r,e.abrupt("return",r);case 54:case"end":return e.stop()}}),e,this,[[37,47]])}))),function(e){return r.apply(this,arguments)})},{key:"parseFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=this.decode,i=this.header.format,a=this.delimiter||"\t",o=0;case 5:return e.next=7,t.nextLine();case 7:if(e.t0=s=e.sent,e.t1=void 0,e.t0===e.t1){e.next=32;break}if(!(++o<=this.skipRows)){e.next=13;break}return e.abrupt("continue",5);case 13:if(s&&!s.startsWith("track")&&!s.startsWith("#")&&!s.startsWith("browser")){e.next=17;break}return e.abrupt("continue",5);case 17:if("wig"!==i||!s.startsWith("fixedStep")){e.next=22;break}return this.header.wig=Ty(s),e.abrupt("continue",5);case 22:if("wig"!==i||!s.startsWith("variableStep")){e.next=25;break}return this.header.wig=Iy(s),e.abrupt("continue",5);case 25:if(!((c=s.split(a)).length<1)){e.next=28;break}return e.abrupt("continue",5);case 28:(u=n(c,this.header))&&r.push(u),e.next=5;break;case 32:return n===ny&&iy(r),e.abrupt("return",r);case 34:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setDecoder",value:function(e){switch(e){case"narrowpeak":case"broadpeak":case"regionpeak":case"peaks":this.decode=by,this.delimiter=this.config.delimiter||/\s+/;break;case"bedgraph":this.decode=yy,this.delimiter=/\s+/;break;case"wig":this.decode=wy,this.delimiter=this.config.delimiter||/\s+/;break;case"gff3":case"gff":case"gtf":this.decode=uy,this.delimiter="\t";break;case"fusionjuncspan":this.decode=xy,this.delimiter=this.config.delimiter||/\s+/;break;case"gtexgwas":this.skipRows=1,this.decode=Sy,this.delimiter="\t";break;case"refflat":this.decode=vy,this.delimiter=this.config.delimiter||/\s+/;break;case"genepred":this.decode=dy,this.delimiter=this.config.delimiter||/\s+/;break;case"genepredext":this.decode=gy,this.delimiter=this.config.delimiter||/\s+/;break;case"ensgene":this.decode=dy,this.header.shift=1,this.delimiter=this.config.delimiter||/\s+/;break;case"refgene":this.decode=gy,this.delimiter=this.config.delimiter||/\s+/,this.header.shift=1;break;case"bed":this.decode=fy,this.delimiter=this.config.delimiter||/\s+/;break;case"bedpe":this.decode=ny,this.delimiter=this.config.delimiter||"\t";break;case"bedpe-domain":this.decode=ay,this.headerLine=!0,this.delimiter=this.config.delimiter||"\t";break;case"bedpe-loop":this.decode=ny,this.delimiter=this.config.delimiter||"\t",this.header={colorColumn:7};break;case"interact":this.decode=oy,this.delimiter=this.config.delimiter||/\s+/;break;case"snp":this.decode=ky,this.delimiter="\t";break;case"rmsk":this.decode=py,this.delimiter="\t";break;case"gcnv":this.decode=Cy,this.delimiter="\t";break;default:var t=(r=e,$n&&$n[r]?function(e){const t=e.fields,r=["chr","start","end"];for(let n=0;n<t.length;n++)for(let i of r)i===t[n]&&(e[i]=n);return e}($n[r]):void 0);void 0!==t?(this.decode=_y,this.header.customFormat=t,this.delimiter=t.delimiter||"\t"):(this.decode=fy,this.delimiter=this.config.delimiter||/\s+/)}var r}}]),e}();function Ey(e){var t,r,n={},i=[],a=Nr(e.split(/(?:")([^"]+)(?:")|([^\s"]+)(?=\s+|$)/g));try{for(a.s();!(r=a.n()).done;){var o=r.value;o&&0!==o.trim().length&&(o.endsWith("=")?t=o:t?(i.push(t+o),t=void 0):i.push(o))}}catch(e){a.e(e)}finally{a.f()}for(var s=0,c=i;s<c.length;s++){var u=c[s];if(!u)return;var h=u.split("=",2);if(2===h.length){var l=h[0].trim(),f=h[1].trim();if(n.hasOwnProperty(l)){var p=n[l];Array.isArray(p)?p.push(f):n[l]=[p,f]}else n[l]=f}}return"interact"==n.type?n.format="interact":"gcnv"===n.type&&(n.format="gcnv"),n}function Ay(e){var t={},r=e.split(/\s+/);2===r.length&&r[1].split(";").forEach((function(e){var r=e.split("=");"color"===r[0]?t.colorColumn=Number.parseInt(r[1])-1:"thickness"===r[0]&&(t.thicknessColumn=Number.parseInt(r[1])-1)}));return t}function Ty(e){var t=e.split(/\s+/);return{format:"fixedStep",chrom:t[1].split("=")[1],start:parseInt(t[2].split("=")[1],10)-1,step:parseInt(t[3].split("=")[1],10),span:t.length>4?parseInt(t[4].split("=")[1],10):1,index:0}}function Iy(e){var t=e.split(/\s+/);return{format:"variableStep",chrom:t[1].split("=")[1],span:t.length>2?parseInt(t[2].split("=")[1],10):1}}function Ly(e){return"string"==typeof e||e instanceof String?new My(e):new Fy(e)}var My=function(){function e(t){mr(this,e),this.data=t,this.ptr=0}return yr(e,[{key:"nextLine",value:function(){var e=this.ptr,t=this.data.indexOf("\n",e),r=this.data;if(t>0)return this.ptr=t+1,t>e&&"\r"===r.charAt(t-1)?r.substring(e,t-1):r.substring(e,t);var n=r.length;return this.ptr=n,e>=n?void 0:r.substring(e)}}]),e}(),Fy=function(){function e(t){mr(this,e),this.data=t,this.length=this.data.length,this.ptr=0}return yr(e,[{key:"nextLine",value:function(){var e,t;if(t="",!(this.ptr>=this.length)){for(var r=this.ptr;r<this.length;r++)if("\r"!==(e=String.fromCharCode(this.data[r]))){if("\n"===e)break;t+=e}return this.ptr=r+1,t}}}]),e}(),Dy=function(){function e(){mr(this,e)}var t,r;return yr(e,[{key:"parseHeader",value:(r=vr(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.nextLine();case 2:if(e.t0=r=e.sent,e.t1=void 0,e.t0===e.t1){e.next=13;break}if(!r.startsWith("#")){e.next=8;break}e.next=11;break;case 8:return n=r.split("\t"),this.header={headings:n},e.abrupt("break",13);case 11:e.next=0;break;case 13:return e.abrupt("return",this.header);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"parseFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],this.header){e.next=9;break}return e.t0=this,e.next=5,t.nextLine();case 5:return e.t1=e.sent,e.next=8,e.t0.parseHeader.call(e.t0,e.t1);case 8:this.header=e.sent;case 9:n=this.header.headings.length-1;case 10:return e.next=12,t.nextLine();case 12:if(e.t2=i=e.sent,e.t3=void 0,e.t2===e.t3){e.next=19;break}(a=i.split("\t")).length>n&&r.push({sampleKey:a[0],sample:a[0],chr:a[1],start:parseInt(a[2]),end:parseInt(a[3]),value:parseFloat(a[n])}),e.next=10;break;case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),Oy=function(){function e(t,r){mr(this,e),t.displayMode&&(t.displayMode=t.displayMode.toUpperCase()),this.config=t,this.browser=r,this.url=t.url,this.type=t.type,this.description=t.description,this.supportHiDPI=void 0===t.supportHiDPI||t.supportHiDPI,t.name||t.label?this.name=t.name||t.label:Wn(t.url)?this.name=t.url.name:this.name=t.url,this.id=void 0===this.config.id?this.name:this.config.id,this.order=t.order,this.color=t.color,this.altColor=t.altColor,"civic-ws"===t.sourceType?this.defaultColor="rgb(155,20,20)":this.defaultColor="rgb(0,0,150)",this.autoscaleGroup=t.autoscaleGroup,this.removable=void 0===t.removable||t.removable,this.height=t.height||100,this.autoHeight=t.autoHeight,this.minHeight=t.minHeight||Math.min(25,this.height),this.maxHeight=t.maxHeight||Math.max(1e3,this.height),this.visibilityWindow=t.visibilityWindow}return yr(e,[{key:"getState",value:function(){for(var e={},t=0,r=Object.keys(this.config);t<r.length;t++){var n=r[t];n.startsWith("_")||(e[n]=this.config[n])}for(var i=0,a=Object.keys(e);i<a.length;i++){var o=a[i];if(!o.startsWith("_")){var s=this[o];s&&(wm(s)||"boolean"==typeof s)&&(e[o]=s)}}this.color&&(e.color=this.color),this.altColor&&(e.altColor=this.altColor),!this.autoscale&&this.dataRange&&(e.min=this.dataRange.min,e.max=this.dataRange.max);for(var c=0,u=Object.keys(e);c<u.length;c++){var h=u[c];if("function"==typeof e[h])throw Error("Property '".concat(h,"' of track '").concat(this.name," is a function. Functions cannot be saved in sessions."));if(e[h]instanceof File)throw Error("Property '".concat(h,"' of track '").concat(this.name," is a local File. Local file references cannot be saved in sessions."));if(e[h]instanceof Promise)throw Error("Property '".concat(h,"' of track '").concat(this.name," is a Promise. Promises cannot be saved in sessions."))}return e}},{key:"supportsWholeGenome",value:function(){return!1}},{key:"getGenomeId",value:function(){return this.browser.genome?this.browser.genome.id:void 0}},{key:"setTrackProperties",value:function(e){for(var t,r={},n=0,i=Object.keys(e);n<i.length;n++){var a=i[n];switch(a.toLowerCase()){case"usescore":r.useScore=1===e[a]||"1"===e[a]||"on"===e[a]||!0===e[a];break;case"visibility":switch(e[a]){case"2":case"3":case"pack":case"full":r.displayMode="EXPANDED";break;case"4":case"squish":r.displayMode="SQUISHED";break;case"1":case"dense":r.displayMode="COLLAPSED"}break;case"color":case"altcolor":r[a]=e[a].startsWith("rgb(")?e[a]:"rgb("+e[a]+")";break;case"featurevisiblitywindow":case"visibilitywindow":r.visibilityWindow=Number.parseInt(e[a]);break;case"maxheightpixels":3===(t=e[a].split(":")).length&&(r.minHeight=Number.parseInt(t[2]),r.height=Number.parseInt(t[1]),r.maxHeight=Number.parseInt(t[0]));break;case"viewlimits":if(!this.config.autoscale){var o=0,s=void 0;1==(t=e[a].split(":")).length?s=Number.parseFloat(t[0]):2==t.length&&(o=Number.parseFloat(t[0]),s=Number.parseFloat(t[1])),r.autoscale=!1,r.dataRange={min:o,max:s}}case"name":r[a]=e[a]}}for(var c=0,u=Object.keys(r);c<u.length;c++){var h=u[c];this.config.hasOwnProperty(h)||(this[h]=r[h])}}},{key:"getVisibilityWindow",value:function(){return this.visibilityWindow}},{key:"clickedFeatures",value:function(e){var t=e.viewport.getCachedFeatures();if(!t||0===t.length)return[];var r=e.genomicLocation,n=e.referenceFrame.bpPerPixel>.2?3*e.referenceFrame.bpPerPixel:0,i=Math.floor(r)-n,a=Math.floor(r)+n;return Pb(t,i,a)}}],[{key:"extractPopupData",value:function(t,r){var n,i,a,o=new Set(["row","color","chr","start","end","cdStart","cdEnd","strand","alpha"]),s=[];for(var c in t)if(t.hasOwnProperty(c)&&!o.has(c)&&wm(t[c])){var u=t[c];s.push({name:(a=c,a.length>0?a.charAt(0).toUpperCase()+a.slice(1):a),value:u}),"alleles"===c?n=t[c]:"alleleFreqs"===c&&(i=t[c])}if(n&&i){n.endsWith(",")&&(n=n.substr(0,n.length-1)),i.endsWith(",")&&(i=i.substr(0,i.length-1));var h=n.split(","),l=i.split(",");if(l.length>1){for(var f=[],p=0;p<l.length;p++)f.push({a:h[p],af:Number.parseFloat(l[p])});f.sort((function(e,t){return e.af-t.af}));var d=f[f.length-1].a;if(1===d.length)for(var g=f.length-2;g>=0;g--){var v=f[g].a;if(1===v.length){var m=e.getCravatLink(t.chr,t.start+1,d,v,r);m&&(s.push("<hr/>"),s.push(m))}}}}if(t.attributes)for(var b=0,y=Object.keys(t.attributes);b<y.length;b++){var w=y[b];s.push({name:w,value:t.attributes[w]})}var k="".concat(t.chr,":").concat(_n(t.start+1),"-").concat(_n(t.end));return t.strand&&(k+=" (".concat(t.strand,")")),s.push("<hr>"),s.push(k),s}},{key:"getCravatLink",value:function(e,t,r,n,i){if("hg38"===i||"GRCh38"===i){var a=e.startsWith("chr")?e:"chr"+e;return'<a target="_blank" href="https://run.opencravat.org/result/nocache/variant.html'+"?chrom=".concat(a,"&pos=").concat(t,"&ref_base=").concat(r,"&alt_base=").concat(n,'">Cravat ').concat(r,"->").concat(n,"</a>")}}}]),e}(),By=new Set(["A","C","T","G"].map((function(e){return e.charCodeAt(0)})));function Ny(e){return new Py(e)}var Py=function(){function e(t){mr(this,e),this.chr=t[0],this.pos=parseInt(t[1]),this.names=t[2],this.referenceBases=t[3],this.alternateBases=t[4],this.quality=t[5],this.filter=t[6],this.info=function(e){var t={};e&&e.split(";").forEach((function(e){var r=e.split("=");t[r[0]]=r[1]}));return t}(t[7]),this.init()}return yr(e,[{key:"init",value:function(){var e=this.referenceBases,t=this.alternateBases;if(this.info&&(this.info.VT?this.type=this.info.VT:this.info.SVTYPE?this.type="SV":this.info.PERIOD&&(this.type="STR")),void 0===this.type&&(this.type=function(e,t){var r=e.length;if(void 0===t)return"UNKNOWN";if(0===t.trim().length||"<NON_REF>"===t||"<*>"===t||"."===t)return"NONVARIANT";var n,i=t.split(",").map((function(e){return 1===r&&1===e.length?"SNP":"<NON_REF>"===e?"NONVARIANT":"OTHER"})),a=i[0],o=Nr(i);try{for(o.s();!(n=o.n()).done;){if(n.value!==a)return"MIXED"}}catch(e){o.e(e)}finally{o.f()}return a}(e,t)),"NONVARIANT"===this.type&&(this.heterozygosity=0),this.info.END)this.start=this.pos-1,this.info.CHR2&&this.info.CHR2!==this.chr?this.end=this.start+1:this.end=Number.parseInt(this.info.END);else if("NONVARIANT"===this.type)this.start=this.pos-1,this.end=this.start+e.length;else{var r=t.split(",").filter((function(e){return e.length>0}));this.alleles=[],this.start=void 0,this.end=void 0;var n,i=Nr(r);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(this.alleles.push(a),"SV"!==this.type&&zy(a)){var o=a.length,s=e.length,c=0;for(e.charCodeAt(0)===a.charCodeAt(0)&&(c++,o--,s--);o>0&&s>0;){var u=c+o-1,h=c+s-1;if(a.charCodeAt(u)!==e.charCodeAt(h))break;o--,s--}for(;o>0&&s>0;){var l=c,f=c;if(a.charCodeAt(l)!==e.charCodeAt(f))break;c++,o--,s--}var p=this.pos+c-1,d=p+s;this.start=void 0===this.start?p:Math.min(this.start,p),this.end=void 0===this.end?d:Math.max(this.end,d)}}}catch(e){i.e(e)}finally{i.f()}void 0===this.start&&(this.start=this.pos-1,this.end=this.pos)}}},{key:"popupData",value:function(e,t){var r,n,i=this,a=this.end===this.pos?this.pos:"".concat(this.pos,"-").concat(this.end);if(r=[{name:"Chr",value:this.chr},{name:"Pos",value:a},{name:"Names",value:this.names?this.names:""},{name:"Ref",value:this.referenceBases},{name:"Alt",value:this.alternateBases.replace("<","&lt;")},{name:"Qual",value:this.quality},{name:"Filter",value:this.filter}],"SNP"===this.type){var o=this.referenceBases;if(1===o.length){var s,c=Nr(this.alternateBases.split(","));try{for(c.s();!(s=c.n()).done;){var u=s.value;if(1===u.length){var h=Oy.getCravatLink(this.chr,this.pos,o,u,t);h&&(r.push("<hr/>"),r.push(h))}}}catch(e){c.e(e)}finally{c.f()}}}return this.hasOwnProperty("heterozygosity")&&r.push({name:"Heterozygosity",value:this.heterozygosity}),this.info&&(r.push("<hr>"),Object.keys(this.info).forEach((function(e){r.push({name:e,value:Uy(i.info[e])})}))),this.calls&&1===this.calls.length&&(r.push("<hr>"),n=this.alleles[this.calls[0].genotype[0]]+this.alleles[this.calls[0].genotype[1]],r.push({name:"Genotype",value:n})),r}},{key:"isRefBlock",value:function(){return"NONVARIANT"===this.type}}]),e}();function zy(e){for(var t=0;t<e.length;t++)if(!By.has(e.charCodeAt(t)))return!1;return!0}function Uy(e,t){return void 0===t&&(t=","),Array.isArray(e)?e.join(t):e}var Hy=function(){function e(){mr(this,e)}var t,r;return yr(e,[{key:"construtor",value:function(){}},{key:"parseHeader",value:(r=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s,c,u,h,l,f,p,d,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.next=3,t.nextLine();case 3:if(!(n=e.sent).startsWith("##fileformat")){e.next=8;break}r.version=n.substr(13),e.next=9;break;case 8:throw new Error("Invalid VCF file: missing fileformat line");case 9:return e.next=11,t.nextLine();case 11:if(e.t0=n=e.sent,e.t1=void 0,e.t0===e.t1){e.next=39;break}if(!n.startsWith("#")){e.next=36;break}if(i=void 0,a={},!n.startsWith("##")){e.next=33;break}if(!(n.startsWith("##INFO")||n.startsWith("##FILTER")||n.startsWith("##FORMAT"))){e.next=31;break}if(o=n.indexOf("<"),s=n.lastIndexOf(">"),o>2&&s>0){e.next=23;break}return e.abrupt("continue",9);case 23:c=n.substring(2,o-1),r[c]||(r[c]={}),u=Rn(n.substring(o+1,s-1),","),h=Nr(u);try{for(h.s();!(l=h.n()).done;)f=l.value,(p=f.split("=")).length>1&&("ID"===p[0]?i=p[1]:a[p[0]]=p[1])}catch(e){h.e(e)}finally{h.f()}i&&(r[c][i]=a),e.next=31;break;case 31:e.next=34;break;case 33:if(n.startsWith("#CHROM")&&(d=n.split("\t")).length>8)for(r.callSets=[],g=9;g<d.length;g++)r.callSets.push({id:g,name:d[g]});case 34:e.next=37;break;case 36:return e.abrupt("break",39);case 37:e.next=9;break;case 39:return this.header=r,e.abrupt("return",r);case 41:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"parseFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=this.header.callSets,i=8+(n?n.length+1:0);case 3:return e.next=5,t.nextLine();case 5:if(e.t0=a=e.sent,e.t1=void 0,e.t0===e.t1){e.next=11;break}a&&!a.startsWith("#")&&(o=a.split("\t")).length===i&&((s=Ny(o)).header=this.header,r.push(s),o.length>9&&function(){var e=jy(o[8].split(":"));s.calls={};for(var t=9;t<o.length;t++){var r=o[t];c=n[t-9],u={callSetName:c.name,info:{}},s.calls[c.id]=u,r.split(":").forEach((function(t,r){switch(r){case e.genotypeIndex:u.genotype=[],t.split(/[\|\/]/).forEach((function(e){u.genotype.push("."===e?e:parseInt(e))}));break;default:u.info[e.fields[r]]=t}}))}}()),e.next=3;break;case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();function jy(e){for(var t={genotypeIndex:-1,fields:e},r=0;r<e.length;r++)"GT"===e[r]&&(t.genotypeIndex=r);return t}var qy=function(){function e(t){if(mr(this,e),this.config=t,t.columns){if(void 0===t.columns.chromosome||void 0===t.columns.position||void 0===t.columns.value)throw Error("columns property must define chrCol, posCol, and valueCol");this.posCol=t.columns.position-1,this.chrCol=t.columns.chromosome-1,this.pvalueCol=t.columns.value-1}else this.posCol=2,this.chrCol=1,this.pvalueCol=3}var t,r;return yr(e,[{key:"parseHeader",value:(r=vr(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.nextLine();case 2:return r=e.sent,e.abrupt("return",this.parseHeaderLine(r));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"parseHeaderLine",value:function(e){if(this.columns=e.split(/\t/),!this.config.columns)for(var t=0;t<this.columns.length;t++){switch(this.columns[t].toLowerCase()){case"chr":case"chromosome":case"chr_id":this.chrCol=t;break;case"bp":case"pos":case"position":case"chr_pos":this.posCol=t;break;case"p":case"pval":case"pvalue":case"p-value":case"p.value":this.pvalueCol=t}}return this.columns}},{key:"parseFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],n=t.nextLine(),this.columns||this.parseHeaderLine(n);void 0!==(i=t.nextLine());)(a=i.split(/\t/)).length===this.columns.length&&(o=a[this.chrCol],s=parseInt(a[this.posCol])-1,c=s+1,u=parseFloat(a[this.pvalueCol]),r.push(new Vy({chr:o,start:s,end:c,value:u,line:i,columns:this.columns})));return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),Vy=function(){function e(t){var r=t.chr,n=t.start,i=t.end,a=t.value,o=t.line,s=t.columns;mr(this,e),this.chr=r,this.start=n,this.end=i,this.value=a,this.line=o,this.columns=s}return yr(e,[{key:"popupData",value:function(){var e=this.line.split(/\t/);return this.columns.map((function(t,r){return{name:t,value:e[r]}}))}},{key:"getAttribute",value:function(e){for(var t=this.line.split(/\t/),r=0;r<this.columns.length;r++)if(this.columns[r]===e)return t[r]}}]),e}(),Wy=new RegExp("([^:]*)\\(([^)]*)\\)"),Gy=new RegExp("([^:]*):([^(]*)\\(([^)]*)\\)"),$y=function(){function e(t){mr(this,e);var r=t?t.decode:void 0;this.nameField=t?t.nameField:void 0,this.skipRows=0,this.decode=r||Jy,this.delimiter="\t"}var t,r;return yr(e,[{key:"parseHeader",value:(r=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.nextLine();case 2:if(!(r=e.sent)){e.next=10;break}if(!(r.startsWith("track")||r.startsWith("#")||r.startsWith("browser"))){e.next=7;break}r.startsWith("track")||r.startsWith("#track")?(i=Xy(r),n?Object.assign(n,i):n=i):r.startsWith("#columns")?(a=Ky(r),n?Object.assign(n,a):n=a):r.startsWith("##gff-version 3")&&(this.format="gff3",n||(n={}),n.format="gff3"),e.next=8;break;case 7:return e.abrupt("break",10);case 8:e.next=0;break;case 10:return this.header=n,e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"parseFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=function(){for(var e,t,r=[],n="",a=!1;o||""===o;){for(e=0;e<o.length;e++)(t=o.charAt(e))===i?a?n+=t:(r.push(n),n=""):'"'===t?e+1<o.length&&'"'===o.charAt(e+1)?(a&&(n+='"'),e++):a=!a:n+=t;if(!a)break;n+="\n",o=nextLine()}return r.push(n),r},r=[],n=this.decode,i=this.delimiter||"\t",a=0;case 6:if(void 0===(o=t.nextLine())){e.next=20;break}if(!(++a<=this.skipRows||o.startsWith("track")||o.startsWith("#")||o.startsWith("browser"))){e.next=10;break}return e.abrupt("continue",6);case 10:if(!((s=u()).length<1)){e.next=13;break}return e.abrupt("continue",6);case 13:if(this.aed){e.next=16;break}return this.aed=Yy(s),e.abrupt("continue",6);case 16:(c=n.call(this,s,void 0))&&r.push(c),e.next=6;break;case 20:return e.abrupt("return",r);case 21:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();function Zy(e){var t=Gy.exec(e);if(t)return{namespace:t[1],name:t[2],type:t[3]};if(t=Wy.exec(e))return{namespace:"?",name:t[1],type:t[2]};throw new Error("Error parsing the header row of AED file - column not in ns:name(ns:type) format")}function Yy(e){var t,r,n;for(t={columns:[],metadata:{}},r=0;r<e.length;r++)n=Zy(e[r]),t.columns.push(n);return t}function Xy(e){var t,r,n={},i=[],a=Nr(e.split(/(?:")([^"]+)(?:")|([^\s"]+)(?=\s+|$)/g));try{for(a.s();!(r=a.n()).done;){var o=r.value;o&&0!==o.trim().length&&(o.endsWith("=")>0?t=o:t?(i.push(t+o),t=void 0):i.push(o))}}catch(e){a.e(e)}finally{a.f()}for(var s=0,c=i;s<c.length;s++){var u=c[s];if(!u)return;var h=u.split("=",2);if(2===h.length){var l=h[0].trim(),f=h[1].trim();n[l]=f}}return n}function Ky(e){var t={},r=e.split(/\s+/);2===r.length&&r[1].split(";").forEach((function(e){var r=e.split("=");"color"===r[0]?t.colorColumn=Number.parseInt(r[1])-1:"thickness"===r[0]&&(t.thicknessColumn=Number.parseInt(r[1])-1)}));return t}function Qy(e,t){var r,n,i=e.columns;this.aed=e,this.allColumns=t,this.chr=null,this.start=null,this.end=null,this.score=1e3,this.strand=".",this.cdStart=null,this.cdEnd=null,this.name=null,this.color=null;for(var a=0;a<t.length;a++)if(r=t[a]){"aed:Integer"===(n=i[a]).type&&(r=parseInt(r));var o=[];if(n.namespace.length>0)for(var s=0;s<n.namespace.length;s++)o.push(n.namespace.charCodeAt(s));"bio"===n.namespace.trim()?"sequence"===n.name?this.chr=r:"start"===n.name?this.start=r:"end"===n.name?this.end=r:"cdsMin"===n.name?this.cdStart=r:"cdsMax"===n.name?this.cdEnd=r:"strand"===n.name&&(this.strand=r):"aed"===n.namespace?"name"===n.name&&(this.name=r):"style"===n.namespace&&"color"===n.name&&(this.color=ei.createColorString(r))}}function Jy(e,t){var r,n,i,a,o,s,c=0,u=this.aed.columns;if(e.length===u.length){for(s=0;s<e.length;s++)a=u[s],""!==(i=e[s])&&c++,"name"===a.name&&"aed"===a.namespace?r=i:"value"===a.name&&"aed"===a.namespace&&(n=i);if(2===c&&r&&n)return o=Zy(r),this.aed.metadata[o.namespace]||(this.aed.metadata[o.namespace]={}),void(this.aed.metadata[o.namespace][o.name]||(this.aed.metadata[o.namespace][o.name]={type:o.type,value:n}));var h=new Qy(this.aed,e);if(h.chr&&(h.start||0===h.start)&&h.end)return h}}Qy.prototype.popupData=function(){for(var e=[],t=this.aed,r=0;r<this.allColumns.length;r++){var n=this.allColumns[r],i=t.columns[r].name;"sequence"!==i&&"color"!==i&&n&&e.push({name:i,value:n})}return e};var ew=function(){function e(t,r){mr(this,e),this.littleEndian=void 0===r||r,this.position=0,this.view=t,this.length=t.byteLength}return yr(e,[{key:"available",value:function(){return this.length-this.position}},{key:"remLength",value:function(){return this.length-this.position}},{key:"hasNext",value:function(){return this.position<this.length-1}},{key:"getByte",value:function(){var e=this.view.getUint8(this.position,this.littleEndian);return this.position++,e}},{key:"getShort",value:function(){var e=this.view.getInt16(this.position,this.littleEndian);return this.position+=2,e}},{key:"getUShort",value:function(){var e=this.view.getUint16(this.position,this.littleEndian);return this.position+=2,e}},{key:"getInt",value:function(){var e=this.view.getInt32(this.position,this.littleEndian);return this.position+=4,e}},{key:"getUInt",value:function(){var e=this.view.getUint32(this.position,this.littleEndian);return this.position+=4,e}},{key:"getLong",value:function(){var e=[];e[0]=this.view.getUint8(this.position),e[1]=this.view.getUint8(this.position+1),e[2]=this.view.getUint8(this.position+2),e[3]=this.view.getUint8(this.position+3),e[4]=this.view.getUint8(this.position+4),e[5]=this.view.getUint8(this.position+5),e[6]=this.view.getUint8(this.position+6),e[7]=this.view.getUint8(this.position+7);var t=0;if(this.littleEndian)for(var r=e.length-1;r>=0;r--)t=256*t+e[r];else for(var n=0;n<e.length;n++)t=256*t+e[n];return this.position+=8,t}},{key:"getString",value:function(e){for(var t,r="";0!==(t=this.view.getUint8(this.position++))&&(r+=String.fromCharCode(t),!e||r.length!==e););return r}},{key:"getFixedLengthString",value:function(e){var t,r,n="";for(t=0;t<e;t++)(r=this.view.getUint8(this.position++))>0&&(n+=String.fromCharCode(r));return n}},{key:"getFixedLengthTrimmedString",value:function(e){var t,r,n="";for(t=0;t<e;t++)(r=this.view.getUint8(this.position++))>32&&(n+=String.fromCharCode(r));return n}},{key:"getFloat",value:function(){var e=this.view.getFloat32(this.position,this.littleEndian);return this.position+=4,e}},{key:"getDouble",value:function(){var e=this.view.getFloat64(this.position,this.littleEndian);return this.position+=8,e}},{key:"skip",value:function(e){return this.position+=e,this.position}},{key:"getVPointer",value:function(){var e=this.position,t=this.view.getUint8(e+1)<<8|this.view.getUint8(e),r=4294967296*(255&this.view.getUint8(e+6))+16777216*(255&this.view.getUint8(e+5))+65536*(255&this.view.getUint8(e+4))+256*(255&this.view.getUint8(e+3))+(255&this.view.getUint8(e+2));return this.position+=8,new tw(r,t)}}]),e}(),tw=function(){function e(t,r){mr(this,e),this.block=t,this.offset=r}return yr(e,[{key:"isLessThan",value:function(e){return this.block<e.block||this.block===e.block&&this.offset<e.offset}},{key:"isGreaterThan",value:function(e){return this.block>e.block||this.block===e.block&&this.offset>e.offset}},{key:"print",value:function(){return this.block+":"+this.offset}}]),e}();function rw(e,t){return nw.apply(this,arguments)}function nw(){return(nw=vr(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new iw).parse(t,r),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var iw=function(){function e(t){mr(this,e),this.tabix=!0}return yr(e,[{key:"parse",value:function(e,t){var r=new ew(new DataView(e)),n=r.getInt();if(21582659!==n)throw 38359875===n?Error("CSI version 2 is not supported.  Please enter an issue at https://github.com/igvteam/igv.js"):Error("Not a CSI index");if(this.indices=[],this.blockMin=Number.MAX_SAFE_INTEGER,this.blockMax=0,this.sequenceIndexMap={},this.minShift=r.getInt(),this.depth=r.getInt(),r.getInt()>=28){r.getInt(),r.getInt(),r.getInt(),r.getInt(),r.getInt(),r.getInt();for(var i=r.getInt(),a=r.position+i,o=0;r.position<a;){var s=r.getString();t&&(s=t.getChromosomeName(s)),this.sequenceIndexMap[s]=o,o++}}for(var c=this.bin_limit()+1,u=r.getInt(),h=0;h<u;h++){for(var l=[],f=[],p=r.getInt(),d=0;d<p;d++){var g=r.getInt();if(f[g]=r.getVPointer(),g>c)r.getInt(),r.getVPointer(),r.getVPointer(),r.getLong(),r.getLong();else{l[g]=[];for(var v=r.getInt(),m=0;m<v;m++){var b=r.getVPointer(),y=r.getVPointer();b&&y&&(b.block<this.blockMin&&(this.blockMin=b.block),y.block>this.blockMax&&(this.blockMax=y.block),l[g].push([b,y]))}}}p>0&&(this.indices[h]={binIndex:l,loffset:f})}}},{key:"blocksForRange",value:function(e,t,r){var n=this.indices[e];if(n){var i=this.reg2bins(t,r);if(0==i.length)return[];var a,o=[],s=Nr(i);try{for(s.s();!(a=s.n()).done;)for(var c=a.value,u=c[0];u<=c[1];u++)if(n.binIndex[u])for(var h=n.binIndex[u],l=h.length,f=0;f<l;++f){var p=h[f][0],d=h[f][1];o.push({minv:p,maxv:d,bin:u})}}catch(e){s.e(e)}finally{s.f()}return function(e,t){var r=[],n=null;return 0===e.length?e:(e.sort((function(e,t){var r=e.minv.block-t.minv.block;return 0!==r?r:e.minv.offset-t.minv.offset})),e.forEach((function(e){var i,a;t&&!e.maxv.isGreaterThan(t)||(null===n?(r.push(e),n=e):(i=n,(a=e).minv.block-i.maxv.block<65e3&&a.maxv.block-i.minv.block<5e6?e.maxv.isGreaterThan(n.maxv)&&(n.maxv=e.maxv):(r.push(e),n=e)))})),r)}(o,n.loffset[i[0]])}return[]}},{key:"reg2bins",value:function(e,t){(e-=1)<1&&(e=1),t>Math.pow(2,50)&&(t=Math.pow(2,34)),t-=1;for(var r=0,n=0,i=this.minShift+3*this.depth,a=[];r<=this.depth;i-=3,n+=1<<3*r,r+=1){var o=n+(e>>i),s=n+(t>>i);if(s-o+a.length>this.maxBinNumber)throw new Error("query ".concat(e,"-").concat(t," is too large for current binning scheme (shift ").concat(this.minShift,", depth ").concat(this.depth,"), try a smaller query or a coarser index binning scheme"));a.push([o,s])}return a}},{key:"bin_limit",value:function(){return((1<<3*(this.depth+1))-1)/7}}]),e}();var aw=21578050,ow=21578324;function sw(e,t){return cw.apply(this,arguments)}function cw(){return(cw=vr(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lw(t,!1,r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uw(e,t){return hw.apply(this,arguments)}function hw(){return(hw=vr(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lw(t,!0,r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lw(e,t,r){return fw.apply(this,arguments)}function fw(){return(fw=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a,o,s,c,u,h,l,f,p,d,g,v,m,b,y,w,k,x,S,_,C;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],a=Number.MAX_SAFE_INTEGER,o=0,s=new ew(new DataView(t)),c=s.getInt(),u={},!(c===aw||r&&c===ow)){e.next=12;break}if(h=s.getInt(),r)for(s.getInt(),s.getInt(),s.getInt(),s.getInt(),s.getInt(),s.getInt(),s.getInt(),l=0;l<h;l++)f=s.getString(),n&&(f=n.getChromosomeName(f)),u[f]=l;for(p=0;p<h;p++){for(d={},g=[],v=s.getInt(),m=0;m<v;m++)if(37450===(b=s.getInt()))s.getInt(),s.getVPointer(),s.getVPointer(),s.getLong(),s.getLong();else for(d[b]=[],y=s.getInt(),w=0;w<y;w++)k=s.getVPointer(),x=s.getVPointer(),k&&x&&(k.block<a&&(a=k.block),x.block>o&&(o=x.block),d[b].push([k,x]));for(S=s.getInt(),_=0;_<S;_++)C=s.getVPointer(),g.push(C);v>0&&(i[p]={binIndex:d,linearIndex:g})}e.next=13;break;case 12:throw new Error(indexURL+" is not a "+(r?"tabix":"bai")+" file");case 13:return e.abrupt("return",new pw(i,a,o,u,r));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pw=function(){function e(t,r,n,i,a){mr(this,e),this.firstAlignmentBlock=r,this.lastAlignmentBlock=n,this.indices=t,this.sequenceIndexMap=i,this.tabix=a}return yr(e,[{key:"blocksForRange",value:function(e,t,r){var n=this.indices[e];if(n){var i,a=[],o=Nr(function(e,t){var r=[];t>=1<<29&&(t=1<<29);return--t,r.push(0),r.push([1+(e>>26),1+(t>>26)]),r.push([9+(e>>23),9+(t>>23)]),r.push([73+(e>>20),73+(t>>20)]),r.push([585+(e>>17),585+(t>>17)]),r.push([4681+(e>>14),4681+(t>>14)]),r}(t,r));try{for(o.s();!(i=o.n()).done;)for(var s=i.value,c=s[0];c<=s[1];c++)if(n.binIndex[c])for(var u=n.binIndex[c],h=u.length,l=0;l<h;++l){var f=u[l][0],p=u[l][1];a.push({minv:f,maxv:p,bin:c})}}catch(e){o.e(e)}finally{o.f()}for(var d=n.linearIndex.length,g=null,v=Math.min(t>>14,d-1),m=Math.min(r>>14,d-1),b=v;b<=m;++b){var y=n.linearIndex[b];y&&(g&&!y.isLessThan(g)||(g=y))}return function(e,t){var r=[],n=null;return 0===e.length?e:(e.sort((function(e,t){var r=e.minv.block-t.minv.block;return 0!==r?r:e.minv.offset-t.minv.offset})),e.forEach((function(e){var i,a;t&&!e.maxv.isGreaterThan(t)||(null===n?(r.push(e),n=e):(i=n,(a=e).minv.block-i.maxv.block<65e3&&a.maxv.block-i.minv.block<5e6?e.maxv.isGreaterThan(n.maxv)&&(n.maxv=e.maxv):(r.push(e),n=e)))})),r)}(a,g)}return[]}}]),e}();function dw(e,t){return gw.apply(this,arguments)}function gw(){return(gw=vr(regeneratorRuntime.mark((function e(t,r){var n,i,a,o,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c=function(e){var t=e.getString();r&&(t=r.getChromosomeName(t));for(var n=e.getInt(),i=e.getInt(),a=e.getInt(),o=(e.getInt(),e.getInt(),e.getLong()),s=new Array,c=0;c<i;c++){var u=e.getLong();s.push({min:o,max:u}),o=u}return{chr:t,blocks:s,longestFeature:a,binWidth:n}},s=function(e){e.getInt(),e.getInt();var t=e.getInt();e.getString(),e.getLong(),e.getLong(),e.getString(),e.getInt();if(t>=3)for(var r=e.getInt();r-- >0;)e.getString(),e.getString()},n={},i=new ew(new DataView(t)),s(i),a=i.getInt();a-- >0;)o=c(i),n[o.chr]=o;return e.abrupt("return",new vw(n));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vw=function(){function e(t){mr(this,e),this.chrIndex=t}return yr(e,[{key:"blocksForRange",value:function(e,t,r){var n=this.chrIndex[e];if(n){var i=n.blocks,a=n.longestFeature,o=n.binWidth,s=Math.max(t-a,0),c=Math.floor(s/o);if(c>=i.length)return[];var u=Math.min(Math.floor((r-1)/o),i.length-1),h=i[c].min,l=i[u].max;return 0===l-h?[]:[{minv:{block:h,offset:0},maxv:{block:l,offset:0}}]}}}]),e}(),mw=21582659,bw=38359875,yw=21578050,ww=21578324,kw=1480870228;function xw(e,t,r){return Sw.apply(this,arguments)}function Sw(){return(Sw=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lm.loadArrayBuffer(t,km(r));case 2:i=e.sent,31===(a=new DataView(i)).getUint8(0)&&139===a.getUint8(1)&&(o=new wn.Gunzip(new Uint8Array(i)),i=o.decompress().buffer,a=new DataView(i)),s=a.getInt32(0,!0),e.t0=s,e.next=e.t0===yw?9:e.t0===ww?10:e.t0===mw?11:e.t0===kw?12:e.t0===bw?13:14;break;case 9:return e.abrupt("return",sw(i,n));case 10:return e.abrupt("return",uw(i,n));case 11:return e.abrupt("return",rw(i,n));case 12:return e.abrupt("return",dw(i,n));case 13:throw Error("CSI version 2 is not supported.");case 14:throw Error("Unrecognized index type: ".concat(t));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _w=function(){function e(t){mr(this,e),this.config=t,this.filePtr=0,this.bufferPtr=0,this.buffer}var t,r;return yr(e,[{key:"nextLine",value:(r=vr(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=void 0,e.prev=1;case 2:r=this.buffer?this.buffer.length:0;case 4:if(!(this.bufferPtr<r)){e.next=13;break}if("\r"!==(n=String.fromCharCode(this.buffer[this.bufferPtr++]))){e.next=8;break}return e.abrupt("continue",4);case 8:if("\n"!==n){e.next=10;break}return e.abrupt("return",t);case 10:t=t?t+n:n,e.next=4;break;case 13:if(!this.eof){e.next=17;break}return e.abrupt("return",t);case 17:return e.next=19,this.readNextBlock();case 19:e.next=2;break;case 21:e.next=28;break;case 23:return e.prev=23,e.t0=e.catch(1),console.warn(e.t0),this.eof=!0,e.abrupt("return",t);case 28:case"end":return e.stop()}}),e,this,[[1,23]])}))),function(){return r.apply(this,arguments)})},{key:"readNextBlock",value:(t=vr(regeneratorRuntime.mark((function e(){var t,r,n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=km(this.config,{range:{start:this.filePtr,size:26}}),e.next=3,Lm.loadArrayBuffer(this.config.url,t);case 3:if(r=e.sent,0!==(n=um(r))){e.next=10;break}this.eof=!0,this.buffer=void 0,e.next=18;break;case 10:return i=km(this.config,{range:{start:this.filePtr,size:n}}),e.next=13,Lm.loadArrayBuffer(this.config.url,i);case 13:(a=e.sent).byteLength<n&&(this.eof=!0),this.buffer=cm(a),this.bufferPtr=0,this.filePtr+=a.byteLength;case 18:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),Cw=Sn,Rw=function(){function e(t,r){var n;mr(this,e),this.config=t||{},this.genome=r,this.indexURL=t.indexURL,this.indexed=t.indexed,Wn(this.config.url)?this.filename=this.config.url.name:Cw(this.config.url)&&this.config.url.startsWith("data:")?(this.indexed=!1,this.dataURI=t.url):(n=Hn(this.config.url),this.filename=t.filename||n.file),this.parser=this.getParser(this.config),"vcf"!==this.config.format||this.config.indexURL||console.warn("Warning: index file not specified.  The entire vcf file will be loaded.")}var t,r,n,i,a,o,s;return yr(e,[{key:"readFeatures",value:(s=vr(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIndex();case 2:if(!e.sent){e.next=8;break}return this.indexed=!0,e.abrupt("return",this.loadFeaturesWithIndex(t,r,n));case 8:if(!this.dataURI){e.next=13;break}return this.indexed=!1,e.abrupt("return",this.loadFeaturesFromDataURI());case 13:return this.indexed=!1,e.abrupt("return",this.loadFeaturesNoIndex());case 15:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return s.apply(this,arguments)})},{key:"readHeader",value:(o=vr(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.dataURI){e.next=5;break}return this.loadFeaturesFromDataURI(this.dataURI),e.abrupt("return",this.header);case 5:if(!this.config.indexURL){e.next=27;break}return e.next=8,this.getIndex();case 8:if(t=e.sent){e.next=11;break}throw new Error("Unable to load index: "+this.config.indexURL);case 11:if(!t.tabix){e.next=15;break}r=new _w(this.config),e.next=21;break;case 15:return n=Object.values(t.chrIndex).flatMap((function(e){return e.blocks})).map((function(e){return e.max})).reduce((function(e,t){return Math.min(e,t)}),Number.MAX_SAFE_INTEGER),i=km(this.config,{bgz:t.tabix,range:{start:0,size:n}}),e.next=19,Lm.loadString(this.config.url,i);case 19:a=e.sent,r=Ly(a);case 21:return e.next=23,this.parser.parseHeader(r);case 23:return this.header=e.sent,e.abrupt("return",this.header);case 27:return o=km(this.config),e.next=30,Lm.loadString(this.config.url,o);case 30:return s=e.sent,c=Ly(s),e.next=34,this.parser.parseHeader(c);case 34:return this.header=e.sent,c=Ly(s),e.next=38,this.parser.parseFeatures(c);case 38:return this.features=e.sent,e.abrupt("return",this.header);case 40:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"getParser",value:function(e){switch(e.format){case"vcf":return new Hy(e);case"seg":return new Dy;case"gwas":return new qy(e);case"aed":return new $y(e);default:return new Ry(e)}}},{key:"loadFeaturesNoIndex",value:(a=vr(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.features){e.next=6;break}return t=this.features,delete this.features,e.abrupt("return",t);case 6:return r=km(this.config),e.next=9,Lm.loadString(this.config.url,r);case 9:if(n=e.sent,this.header){e.next=15;break}return i=Ly(n),e.next=14,this.parser.parseHeader(i);case 14:this.header=e.sent;case 15:return a=Ly(n),e.next=18,this.parser.parseFeatures(a);case 18:return o=e.sent,e.abrupt("return",o);case 20:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"loadFeaturesWithIndex",value:(i=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a,o,s,c,u,h,l,f,p,d,g,v,m,b,y,w,k,x,S,_,C,R,E,A,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.config,a=this.parser,o=this.index.tabix,void 0!==(s=o?this.index.sequenceIndexMap[t]:t)){e.next=6;break}return e.abrupt("return",[]);case 6:if(c=this.genome,(u=this.index.blocksForRange(s,r,n))&&0!==u.length){e.next=12;break}return e.abrupt("return",[]);case 12:h=[],l=Nr(u),e.prev=14,l.s();case 16:if((f=l.n()).done){e.next=71;break}if(p=f.value,d=p.minv.block,g=p.minv.offset,v=p.maxv.offset,m=void 0,!o){e.next=33;break}if(b=0,!(v>0)){e.next=30;break}return y=km(i,{range:{start:p.maxv.block,size:26}}),e.next=28,Lm.loadArrayBuffer(i.url,y);case 28:w=e.sent,b=um(w);case 30:m=p.maxv.block+b,e.next=34;break;case 33:m=p.maxv.block;case 34:if(k=km(i,{range:{start:d,size:m-d+1}}),x=void 0,!o){e.next=43;break}return e.next=39,Lm.loadArrayBuffer(i.url,k);case 39:S=e.sent,x=cm(S),e.next=46;break;case 43:return e.next=45,Lm.loadString(i.url,k);case 45:x=e.sent;case 46:return _=g?x.slice(g):x,C=Ly(_),e.next=50,a.parseFeatures(C);case 50:R=e.sent,E=!1,A=0;case 53:if(!(A<R.length)){e.next=69;break}if(T=R[A],(c?c.getChromosomeName(T.chr):T.chr)===t){e.next=62;break}if(0!==h.length){e.next=61;break}return e.abrupt("continue",66);case 61:return e.abrupt("break",69);case 62:if(!(T.start>n)){e.next=65;break}return h.push(T),e.abrupt("break",69);case 65:T.end>=r&&T.start<=n&&(E||(E=!0,A>0&&h.push(R[A-1])),h.push(T));case 66:A++,e.next=53;break;case 69:e.next=16;break;case 71:e.next=76;break;case 73:e.prev=73,e.t0=e.catch(14),l.e(e.t0);case 76:return e.prev=76,l.f(),e.finish(76);case 79:return h.sort((function(e,t){return e.start-t.start})),e.abrupt("return",h);case 81:case"end":return e.stop()}}),e,this,[[14,73,76,79]])}))),function(e,t,r){return i.apply(this,arguments)})},{key:"getIndex",value:(n=vr(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.index&&this.config.indexURL){e.next=4;break}return e.abrupt("return",this.index);case 4:return e.next=6,this.loadIndex();case 6:return this.index=e.sent,e.abrupt("return",this.index);case 8:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"loadIndex",value:(r=vr(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.config.indexURL,e.abrupt("return",xw(t,this.config,this.genome));case 2:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"loadFeaturesFromDataURI",value:(t=vr(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.features){e.next=6;break}return t=this.features,delete this.features,e.abrupt("return",t);case 6:return r=Un(this.dataURI),n=Ly(r),e.next=10,this.parser.parseHeader(n);case 10:return this.header=e.sent,this.header instanceof String&&this.header.startsWith("##gff-version 3")&&(this.format="gff3"),n=Ly(r),e.next=15,this.parser.parseFeatures(n);case 15:return this.features=e.sent,e.abrupt("return",this.features);case 17:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),Ew=function(){function e(t,r,n){mr(this,e),this.treeMap=this.buildTreeMap(t,r),this.range=n,this.count=t.length}return yr(e,[{key:"containsRange",value:function(e){return void 0===this.range||this.range.contains(e.chr,e.start,e.end)}},{key:"queryFeatures",value:function(e,t,r){var n=this.treeMap[e];if(!n)return[];var i=n.findOverlapping(t,r);if(0===i.length)return[];var a=[],o=this.allFeatures[e];if(o){var s,c=Nr(i);try{for(c.s();!(s=c.n()).done;)for(var u=s.value.value,h=u.start;h<u.end;h++){var l=o[h];if(l.start>r)break;l.end>=t&&a.push(l)}}catch(e){c.e(e)}finally{c.f()}a.sort((function(e,t){return e.start-t.start}))}return a}},{key:"getAllFeatures",value:function(){return this.allFeatures}},{key:"buildTreeMap",value:function(e,t){var r={},n=[];if(this.allFeatures={},e){var i,a=Nr(e);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.chr;t&&(s=t.getChromosomeName(s));var c=this.allFeatures[s];c||(n.push(s),c=[],this.allFeatures[s]=c),c.push(o)}}catch(e){a.e(e)}finally{a.f()}var u,h=Nr(n);try{for(h.s();!(u=h.n()).done;){var l=u.value,f=this.allFeatures[l];f.sort((function(e,t){return e.start===t.start?0:e.start>t.start?1:-1})),r[l]=Aw(f)}}catch(e){h.e(e)}finally{h.f()}}return r}}]),e}();function Aw(e){for(var t=new Lb,r=e.length,n=Math.max(10,Math.round(r/10)),i=0;i<r;i+=n){for(var a=Math.min(r,i+n),o=new Tw(i,a),s=e[i].start,c=s,u=i;u<a;u++)c=Math.max(c,e[u].end);t.insert(s,c,o)}return t}var Tw=function e(t,r){mr(this,e),this.start=t,this.end=r},Iw=Sn,Lw=function(){function e(t){mr(this,e),this.config=t}var t;return yr(e,[{key:"readFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a,o,s,c,u,h,l,f,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="function"==typeof this.config.url?this.config.url({chr:t,start:r,end:n}):this.config.url.replace("$CHR",t).replace("$START",r).replace("$END",n),a=Object.assign({},this.config),void 0!==this.config.body&&("function"==typeof this.config.body?a.body=this.config.body({chr:t,start:r,end:n}):a.body=this.config.body.replace("$CHR",t).replace("$START",r).replace("$END",n)),e.next=5,Lm.load(i,a);case 5:if((s=e.sent)&&(o="function"==typeof this.config.parser?this.config.parser(s):Iw(s)?JSON.parse(s):s),this.config.mappings){c=Object.keys(this.config.mappings),u=Nr(o);try{for(u.s();!(h=u.n()).done;){l=h.value,f=Nr(c);try{for(f.s();!(p=f.n()).done;)d=p.value,l[d]=l[this.config.mappings[d]]}catch(e){f.e(e)}finally{f.f()}}}catch(e){u.e(e)}finally{u.f()}}return e.abrupt("return",o);case 9:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})}]),e}(),Mw=function(e,t){this.config=e,this.genome=t,this.expandQueryInterval=!1};Mw.prototype.readFeatures=function(e,t,r){var n=Math.max(0,Math.floor(t)),i=Math.ceil(r);if(this.genome){var a=this.genome.getChromosome(e);a&&i>a.bpLength&&(i=a.bpLength)}var o=this.config.url+"?db="+this.config.db+"&table="+this.config.tableName+"&chr="+e+"&start="+n+"&end="+i;return Lm.loadJson(o,this.config).then((function(e){return e?(e.forEach((function(e){e.hasOwnProperty("exonStarts")&&e.hasOwnProperty("exonEnds")&&e.hasOwnProperty("exonCount")&&e.hasOwnProperty("cdsStart")&&e.hasOwnProperty("cdsEnd")&&function(e){var t,r,n,i,a,o;t=e.exonCount,r=e.exonStarts.split(","),n=e.exonEnds.split(","),i=[];for(var s=0;s<t;s++){var c={start:a=parseInt(r[s]),end:o=parseInt(n[s])};(e.cdsStart>o||e.cdsEnd<e.cdsStart)&&(c.utr=!0),e.cdsStart>=a&&e.cdsStart<=o&&(c.cdStart=e.cdsStart),e.cdsEnd>=a&&e.cdsEnd<=o&&(c.cdEnd=e.cdsEnd),i.push(c)}e.exons=i}(e)})),e):null}))};for(var Fw=new Set(["transcript","primary_transcript","processed_transcript","mRNA","mrna"]),Dw=new Set(["CDS","cds"]),Ow=new Set(["start_codon","stop_codon"]),Bw=new Set(["5UTR","3UTR","UTR","five_prime_UTR","three_prime_UTR","3'-UTR","5'-UTR"]),Nw=new Set(["exon","coding-exon"]),Pw=new Set,zw=0,Uw=[Fw,Dw,Ow,Bw,Nw];zw<Uw.length;zw++){var Hw,jw=Nr(Uw[zw]);try{for(jw.s();!(Hw=jw.n()).done;){var qw=Hw.value;Pw.add(qw)}}catch(e){jw.e(e)}finally{jw.f()}}var Vw=function(){function e(t){mr(this,e),this.format=t.format,this.filterTypes=void 0===t.filterTypes?new Set(["chromosome"]):new Set(t.filterTypes)}return yr(e,[{key:"combineFeatures",value:function(e){var t;if("gff3"===this.format){var r=this.combineFeaturesById(e);t=this.combineFeaturesGFF(r)}else t=this.combineFeaturesGTF(e);return t.sort((function(e,t){return e.start-t.start})),t}},{key:"combineFeaturesById",value:function(e){var t,r=[],n={},i=Nr(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(void 0===a.id)r.push(a);else{var o=n[a.chr];if(o||(o={},n[a.chr]=o),o.hasOwnProperty(a.id)){var s=o[a.id];if(s.hasOwnProperty("exons"))s.start=Math.min(s.start,a.start),s.end=Math.max(s.end,a.end),s.exons.push(a);else{var c={id:a.id,type:a.type,chr:a.chr,strand:a.strand,start:Math.min(a.start,s.start),end:Math.max(a.end,s.end),exons:[s,a]};a.parent&&""!==a.parent.trim()&&(c.parent=a.parent),o[a.id]=c}}else o[a.id]=a}}}catch(e){i.e(e)}finally{i.f()}for(var u=0,h=Object.keys(n);u<h.length;u++)for(var l=n[h[u]],f=0,p=Object.keys(l);f<p.length;f++){var d=p[f];r.push(l[d])}return r}},{key:"combineFeaturesGTF",value:function(e){var t,r=Object.create(null),n=[],i=new Set,a=this.filterTypes,o=Nr(e=e.filter((function(e){return void 0===a||!a.has(e.type)})));try{for(o.s();!(t=o.n()).done;){var s=t.value;if(Fw.has(s.type)){var c=s.id;if(void 0!==c){var u=new Ww(s);r[c]=u,n.push(u),i.add(s)}}}}catch(e){o.e(e)}finally{o.f()}var h,l=Nr(e);try{for(l.s();!(h=l.n()).done;){var f=h.value;if(Nw.has(f.type)){var p=f.id;if(p){var d=r[p];void 0===d&&(d=new Ww(f),r[p]=d,n.push(d)),d.addExon(f),i.add(f)}}}}catch(e){l.e(e)}finally{l.f()}var g,v=Nr(e);try{for(v.s();!(g=v.n()).done;){var m=g.value;if(Dw.has(m.type)||Bw.has(m.type)||Ow.has(m.type)){var b=m.id;if(b){var y=r[b];void 0===y&&(y=new Ww(m),r[b]=y,n.push(y)),Bw.has(m.type)?y.addUTR(m):Dw.has(m.type)?y.addCDS(m):Ow.has(m.type),i.add(m)}}}}catch(e){v.e(e)}finally{v.f()}for(var w=0,k=n;w<k.length;w++){var x=k[w];"function"==typeof x.finish&&x.finish()}var S,_=Nr(e.filter((function(e){return!i.has(e)})));try{for(_.s();!(S=_.n()).done;){var C=S.value;n.push(C)}}catch(e){_.e(e)}finally{_.f()}return n}},{key:"combineFeaturesGFF",value:function(e){var t,r=e.filter((function(e){return"gene"===e.type})),n=Object.create(null),i=Nr(r);try{for(i.s();!(t=i.n()).done;){var a=t.value;n[a.id]=a}}catch(e){i.e(e)}finally{i.f()}var o,s=Object.create(null),c=[],u=new Set,h=this.filterTypes,l=Nr(e=e.filter((function(e){return void 0===h||!h.has(e.type)})));try{for(l.s();!(o=l.n()).done;){var f=o.value;if(Fw.has(f.type)){var p=f.id;if(void 0!==p){var d=new Ww(f);s[p]=d,c.push(d),u.add(f);var g=n[f.parent];g&&(d.gene=n[f.parent],u.add(g))}}}}catch(e){l.e(e)}finally{l.f()}var v,m=Nr(e);try{for(m.s();!(v=m.n()).done;){var b=v.value;if(Nw.has(b.type)){var y=P(b);if(y){var w,k=Nr(y);try{for(k.s();!(w=k.n()).done;){var x=s[w.value];void 0!==x&&(x.addExon(b),u.add(b))}}catch(e){k.e(e)}finally{k.f()}}}}}catch(e){m.e(e)}finally{m.f()}var S,_=Nr(e);try{for(_.s();!(S=_.n()).done;){var C=S.value;if(Dw.has(C.type)||Bw.has(C.type)||Ow.has(C.type)){var R=P(C);if(R){var E,A=Nr(R);try{for(A.s();!(E=A.n()).done;){var T=s[E.value];void 0!==T&&(Bw.has(C.type)?T.addUTR(C):Dw.has(C.type)?T.addCDS(C):Ow.has(C.type),u.add(C))}}catch(e){A.e(e)}finally{A.f()}}}}}catch(e){_.e(e)}finally{_.f()}var I,L=Nr(e.filter((function(e){return"intron"===e.type})));try{for(L.s();!(I=L.n()).done;){var M,F=I.value,D=Nr(P(F));try{for(D.s();!(M=D.n()).done;){if(s[M.value]){u.add(F);break}}}catch(e){D.e(e)}finally{D.f()}}}catch(e){L.e(e)}finally{L.f()}c.forEach((function(e){"function"==typeof e.finish&&e.finish()}));var O,B=Nr(e.filter((function(e){return!u.has(e)})));try{for(B.s();!(O=B.n()).done;){var N=O.value;c.push(N)}}catch(e){B.e(e)}finally{B.f()}return c;function P(e){return e.parent&&""!==e.parent.trim()?e.parent.trim().split(","):null}}}]),e}(),Ww=function(e){Object.assign(this,e),this.exons=[]};Ww.prototype.addExon=function(e){this.exons.push(e),this.start=Math.min(this.start,e.start),this.end=Math.max(this.end,e.end)},Ww.prototype.addCDS=function(e){for(var t,r=this.exons,n=0;n<r.length;n++)if(r[n].start<=e.start&&r[n].end>=e.end){t=r[n];break}t?(t.cdStart=t.cdStart?Math.min(e.start,t.cdStart):e.start,t.cdEnd=t.cdEnd?Math.max(e.end,t.cdEnd):e.end,t.children||(t.children=[]),t.children.push(e)):(e.cdStart=e.start,e.cdEnd=e.end,r.push(e)),this.start=Math.min(this.start,e.start),this.end=Math.max(this.end,e.end),this.cdStart=this.cdStart?Math.min(e.start,this.cdStart):e.start,this.cdEnd=this.cdEnd?Math.max(e.end,this.cdEnd):e.end},Ww.prototype.addUTR=function(e){for(var t,r=this.exons,n=0;n<r.length;n++)if(r[n].start<=e.start&&r[n].end>=e.end){t=r[n];break}t?(e.start===t.start&&e.end===t.end?t.utr=!0:(e.end<t.end&&(t.cdStart=e.end),e.start>t.start&&(t.cdEnd=e.start)),t.children||(t.children=[]),t.children.push(e)):(e.utr=!0,r.push(e)),this.start=Math.min(this.start,e.start),this.end=Math.max(this.end,e.end)},Ww.prototype.finish=function(){var e=this.cdStart,t=this.cdEnd;this.exons.sort((function(e,t){return e.start-t.start})),e&&this.exons.forEach((function(r){(r.end<e||r.start>t)&&(r.utr=!0)}))},Ww.prototype.popupData=function(e){var t=this.attributeString.split(";"),r=[];if(this.gene&&"function"==typeof this.gene.popupData){var n,i=Nr(this.gene.popupData(e));try{for(i.s();!(n=i.n()).done;){var a=n.value;r.push(a)}}catch(e){i.e(e)}finally{i.f()}r.push("<hr>")}this.name&&r.push({name:"name",value:this.name}),r.push({name:"type",value:this.type});var o,s=Nr(t);try{for(s.s();!(o=s.n()).done;){var c=o.value.trim().split(this.delim,2);if(2===c.length&&void 0!==c[1]){var u=c[0].trim();if("name"===u.toLowerCase())continue;var h=c[1].trim();h.startsWith('"')&&h.endsWith('"')&&(h=h.substr(1,h.length-2)),r.push({name:u,value:h})}}}catch(e){s.e(e)}finally{s.f()}r.push({name:"position",value:"".concat(this.chr,":").concat(_n(this.start+1),"-").concat(_n(this.end))});var l,f=Nr(this.exons);try{for(f.s();!(l=f.n()).done;){var p=l.value;if(e>=p.start&&e<p.end&&"function"==typeof p.popupData){r.push("<hr>");var d,g=Nr(p.popupData(e));try{for(g.s();!(d=g.n()).done;){var v=d.value;r.push(v)}}catch(e){g.e(e)}finally{g.f()}if(p.children){var m,b=Nr(p.children);try{for(b.s();!(m=b.n()).done;){var y=m.value;r.push("<hr>");var w,k=Nr(y.popupData(e));try{for(k.s();!(w=k.n()).done;){var x=w.value;r.push(x)}}catch(e){k.e(e)}finally{k.f()}}}catch(e){b.e(e)}finally{b.f()}}}}}catch(e){f.e(e)}finally{f.f()}return r};var Gw=function(e){this.config=e,this.url=e.url,this.tissueId=e.tissueSiteDetailId,this.indexed=!0,this.datasetId=e.datasetId||"gtex_v8"};Gw.prototype.readFeatures=function(){var e=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a,o,s,c,u,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this,a=t.startsWith("chr")?t:"chr"+t,o=Math.floor(r),s=Math.ceil(n),c=this.datasetId,u=this.url+"?chromosome="+a+"&start="+o+"&end="+s+"&tissueSiteDetailId="+this.tissueId+"&datasetId="+c,e.next=3,Lm.loadJson(u,{withCredentials:i.config.withCredentials});case 3:if(!(h=e.sent)||!h.singleTissueEqtl){e.next=9;break}return h.singleTissueEqtl.forEach((function(e){e.chr=e.chromosome,e.position=e.pos,e.start=e.pos-1,e.end=e.start+1,e.snp=e.snpId,e.geneName=e.geneSymbol,e.geneId=e.gencodeId})),e.abrupt("return",h.singleTissueEqtl);case 9:return e.abrupt("return",void 0);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}();var $w=function(e){this.config=e,this.url=e.url,this.cellConditionId=e.cellConditionId,this.valueThreshold=e.valueThreshold?e.valueThreshold:.05};$w.prototype.readFeatures=function(e,t,r){var n=this,i=this.url+"?chromosome="+e+"&start="+t+"&end="+r+"&cell_condition_id="+this.cellConditionId;return new Promise((function(e,t){Lm.loadJson(i,{withCredentials:n.config.withCredentials}).then((function(t){t?(t.eqtls.forEach((function(e){e.chr=e.chromosome,e.start=e.position,e.end=e.position+1})),e(t.eqtls)):e(null)})).catch((function(e){t(e)}))}))};var Zw=Lm.apiKey;function Yw(e){var t=e.url+"/"+e.entity+"/"+e.entityId;return e.headers={"Cache-Control":"no-cache"},Lm.loadJson(t,e)}function Xw(e){return new Promise((function(t,r){var n=e.results?e.results:[],i=e.url,a=e.body,o=e.decode,s="?",c=e.fields;return Zw&&(i=i+s+"key="+Zw,s="&"),c&&(i=i+s+"fields="+c),function e(s){s?a.pageToken=s:void 0!==a.pageToken&&delete a.pageToken;var c=JSON.stringify(a);Lm.loadJson(i,{sendData:c,contentType:"application/json",headers:{"Cache-Control":"no-cache"}}).then((function(r){var i,a;r?((a=o?o(r):r)&&a.forEach((function(e){n.push(e)})),(i=r.nextPageToken)?e(i):t(n)):t(n)})).catch((function(e){r(e)}))}()}))}var Kw=function(e,t){this.config=e,this.genome=t,this.url=e.url,this.variantSetId=e.variantSetId,this.callSetIds=e.callSetIds,this.includeCalls=void 0===e.includeCalls||e.includeCalls};Kw.prototype.readHeader=function(){var e=this;return e.header?Promise.resolve(e.header):(e.header={},!1===e.includeCalls?Promise.resolve(e.header):Xw({url:e.url+"/callsets/search",fields:"nextPageToken,callSets(id,name)",body:{variantSetIds:Array.isArray(e.variantSetId)?e.variantSetId:[e.variantSetId],pageSize:"10000"},decode:function(t){if(e.callSetIds){var r=[],n=new Set;return e.callSetIds.forEach((function(e){n.add(e)})),t.callSets.forEach((function(e){n.has(e.id)&&r.push(e)})),r}return t.callSets}}).then((function(t){return e.header.callSets=t,e.header})))},Kw.prototype.readFeatures=function(e,t,r){var n=this,i=this.genome;return n.readHeader().then((function(e){return new Promise((function(e,t){n.chrAliasTable?e(n.chrAliasTable):n.readMetadata().then((function(t){n.metadata=t.metadata,n.chrAliasTable={},t.referenceBounds&&i&&t.referenceBounds.forEach((function(e){var t=e.referenceName,r=i.getChromosomeName(t);n.chrAliasTable[r]=t})),e(n.chrAliasTable)}))}))})).then((function(i){var a=i.hasOwnProperty(e)?i[e]:e;return Xw({url:n.url+"/variants/search",fields:n.includeCalls?void 0:"nextPageToken,variants(id,variantSetId,names,referenceName,start,end,referenceBases,alternateBases,quality,filter,info)",body:{variantSetIds:Array.isArray(n.variantSetId)?n.variantSetId:[n.variantSetId],callSetIds:n.callSetIds?n.callSetIds:void 0,referenceName:a,start:t.toString(),end:r.toString(),pageSize:"10000"},decode:function(e){var t,r=[];return e.variants.forEach((function(e){(t=function(e){var t,r=new Py;return r.chr=e.referenceName,r.start=parseInt(e.start),r.end=parseInt(e.end),r.pos=r.start+1,r.names=Uy(e.names,"; "),r.referenceBases=e.referenceBases,r.alternateBases=Uy(e.alternateBases),r.quality=e.quality,r.filter=Uy(e.filter),r.info={},e.info&&Object.keys(e.info).forEach((function(t){var n,i=e.info[t];n=Array.isArray(i)?i.join(","):i,r.info[t]=n})),r.calls={},e.calls&&e.calls.forEach((function(e){t=e.callSetId,r.calls[t]=e})),init(r),r}(e)).isRefBlock()||r.push(t)})),r}})}))},Kw.prototype.readMetadata=function(){return Yw({url:this.url,entity:"variantsets",entityId:this.variantSetId})};var Qw=function(){function e(t){mr(this,e),this.config=t}var t;return yr(e,[{key:"readFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a,o,s,c,u,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lm.loadJson(this.config.url+"/variants/?count=50000");case 2:i=e.sent,a=i.records,o=[],s=Nr(a);try{for(s.s();!(c=s.n()).done;)(u=c.value).coordinates&&(u.id,(h=u.coordinates).chromosome&&o.push(new Jw(h.chromosome,h.start-1,h.stop,u)),h.chromosome2&&o.push(new Jw(h.chromosome2,h.start2-1,h.stop2,u)))}catch(e){s.e(e)}finally{s.f()}return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})}]),e}(),Jw=function(){function e(t,r,n,i){if(mr(this,e),this.chr=t,this.start=r,this.end=n,this.id=i.id,this.entrezName=i.entrez_name,this.name=i.name,this.actionabilityScore=i.civic_actionability_score,i.coordinates.reference_bases&&(this.refBases=i.coordinates.reference_bases),i.coordinates.variant_bases&&(this.altBases=i.coordinates.variant_bases),i.variant_types&&(this.variant_types=i.variant_types),this.locationString=this.chr+":"+_n(this.start+1)+"-"+_n(this.end),void 0!==this.actionabilityScore){var a;if(this.actionabilityScore<=10)a=.2;else{var o=Math.min(30,this.actionabilityScore);a=.2+.8*Math.log10((o-10)/2)}this.alpha=a}}return yr(e,[{key:"popupData",value:function(){var e=s("CIViC","https://civicdb.org/links/variants/"+this.id),t=(this.refBases!==this.altBases&&this.refBases&&1===this.refBases.length&&this.altBases&&this.altBases.length,[e]);if(t.push({name:"Entrez",value:s(this.entrezName,"https://ghr.nlm.nih.gov/gene/"+this.entrezName)}),t.push({name:"Name",value:this.name}),this.variant_types&&this.variant_types.length>0){var r,n,i=1===this.variant_types.length?"Type":"Types",a=Nr(this.variant_types);try{for(a.s();!(n=a.n()).done;){var o=n.value;r?r+=", "+o.display_name:r=o.display_name}}catch(e){a.e(e)}finally{a.f()}t.push({name:i,value:r})}return t.push({name:"Actionability",value:this.actionabilityScore}),t.push({name:"Location",value:this.locationString}),t;function s(e,t){return"<a target='_blank' href='"+t+"'>"+e+"</a>"}}}]),e}();function ek(e,t){t=t||Number.MAX_SAFE_INTEGER;var r=[];e.sort((function(e,t){return e.start-t.start})),r.push(-1e3);var n,i=Nr(e);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=0,s=Math.min(r.length,t);for(o=0;o<s;o++)if(a.start>r[o]){a.row=o,r[o]=a.end;break}a.row=o,r[o]=a.end}}catch(e){i.e(e)}finally{i.f()}}var tk=function(){function e(t,r){mr(this,e),this.config=t||{},this.genome=r,this.sourceType=void 0===t.sourceType?"file":t.sourceType,this.visibilityWindow=t.visibilityWindow;var n=new Set(["bigwig","bw","bigbed","bb","tdf"]);if(t.features&&Array.isArray(t.features)){var i=function(e){if(!e||0===e.length)return;if(void 0===e[0].chr&&void 0!==e[0].chr1){var t,r=[],n=Nr(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.chr1===i.chr2?(i.chr=i.chr1,i.start=Math.min(i.start1,i.start2),i.end=Math.max(i.end1,i.end2)):r.push(i)}}catch(e){n.e(e)}finally{n.f()}for(var a=0,o=r;a<o.length;a++){var s=o[a],c=Object.assign({dup:!0},s);e.push(c),s.chr=s.chr1,s.start=s.start1,s.end=s.end1,c.chr=c.chr2,c.start=c.start2,c.end=c.end2}}return e}(t.features);rk(i),t.mappings&&function(e,t){var r=Object.keys(t);e.forEach((function(e){r.forEach((function(r){e[r]=e[t[r]]}))}))}(i,t.mappings),this.queryable=!1,this.featureCache=new Ew(i,r)}else t.reader?(this.reader=t.reader,this.queryable=void 0===t.queryable||t.queryable,this.expandQuery=!!t.expandQuery):"ga4gh"===t.sourceType?(this.reader=new Kw(t,r),this.queryable=!0):"immvar"===t.sourceType?(this.reader=new $w(t),this.queryable=!0):"eqtl"===t.type&&"gtex-ws"===t.sourceType?(this.reader=new Gw(t),this.queryable=!0,this.expandQuery=!!t.expandQuery):"ucscservice"===t.sourceType?(this.reader=new Mw(t.source),this.queryable=!0):"custom"===t.sourceType||void 0!==t.source?(this.reader=new Lw(t.source),this.queryable=void 0===t.source.queryable||t.source.queryable,this.expandQuery=!!t.expandQuery):"civic-ws"===t.sourceType?(this.reader=new Qw(t),this.queryable=!1,this.expandQuery=!!t.expandQuery):(this.reader=new Rw(t,r),void 0!==t.queryable?this.queryable=t.queryable:n.has(t.format)&&(this.queryable=n.has(t.format)||this.reader.indexed))}var t,r,n,i;return yr(e,[{key:"supportsWholeGenome",value:function(){return!this.queryable&&(void 0===this.visibilityWindow||this.visibilityWindow<=0)}},{key:"trackType",value:(i=vr(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:if(!(t=e.sent)){e.next=7;break}return e.abrupt("return",t.type);case 7:return e.abrupt("return",void 0);case 8:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getHeader",value:(n=vr(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.header){e.next=9;break}if(!this.reader||"function"!=typeof this.reader.readHeader){e.next=8;break}return e.next=4,this.reader.readHeader();case 4:(t=e.sent)?(this.header=t,t.format&&(this.config.format=t.format)):this.header={},e.next=9;break;case 8:this.header={};case 9:return e.abrupt("return",this.header);case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getFeatures",value:(r=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.chr,n=t.start,i=t.end,t.bpPerPixel,a=t.visibilityWindow,o=this.genome,s=o?o.getChromosomeName(r):r,!((c="all"===s.toLowerCase())&&!this.getWGFeatures||this.config.disableCache)&&this.featureCache&&this.featureCache.containsRange(new Kv(s,n,i))){e.next=7;break}return e.next=7,this.loadFeatures(n,i,a,s);case 7:if(!c){e.next=12;break}return this.wgFeatures||(this.queryable?this.wgFeatures=[]:this.wgFeatures=this.getWGFeatures(this.featureCache.getAllFeatures())),e.abrupt("return",this.wgFeatures);case 12:return e.abrupt("return",this.featureCache.queryFeatures(s,n,i));case 13:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"loadFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n,i){var a,o,s,c,u,h,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.reader,o=t,s=r,(!n||n<=0)&&!1!==this.expandQuery?(c=this.genome?this.genome.getChromosome(i):void 0,o=0,s=c?c.bpLength:Number.MAX_SAFE_INTEGER):n>r-t&&!1!==this.expandQuery&&(u=Math.min(4.1*(r-t),n),o=Math.max(0,(t+r-u)/2),s=t+u),e.next=6,a.readFeatures(i,o,s);case 6:h=e.sent,void 0===this.queryable&&(this.queryable=a.indexed),l=this.queryable?new Kv(i,o,s):void 0,h?("gtf"!==this.config.format&&"gff3"!==this.config.format&&"gff"!==this.config.format||(h=new Vw(this.config).combineFeatures(h)),"wig"!==this.config.format&&"junctions"!==this.config.type&&(f=this.config.maxRows||Number.MAX_SAFE_INTEGER,rk(h,f)),this.featureCache=new Ew(h,this.genome,l),this.config.searchable&&this.addFeaturesToDB(h)):this.featureCache=new Ew([],l);case 10:case"end":return e.stop()}}),e,this)}))),function(e,r,n,i){return t.apply(this,arguments)})},{key:"addFeaturesToDB",value:function(e){var t,r=Nr(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;n.name&&(this.genome.featureDB[n.name.toUpperCase()]=n),n.gene&&n.gene.name&&(this.genome.featureDB[n.gene.name.toUpperCase()]=n)}}catch(e){r.e(e)}finally{r.f()}}},{key:"getWGFeatures",value:function(e){var t,r=this.genome,n=new Set(r.wgChromosomeNames),i=[],a=Nr(r.wgChromosomeNames);try{for(a.s();!(t=a.n()).done;){var o=e[t.value];if(o){var s,c=Nr(o);try{for(c.s();!(s=c.n()).done;){var u=s.value,h=r.getChromosomeName(u.chr);if(n.has(h)){var l=Object.assign({},u);l.chr="all",l.start=r.getGenomeCoordinate(u.chr,u.start),l.end=r.getGenomeCoordinate(u.chr,u.end),l._f=u,l.exons&&delete l.exons,l.popupData=function(e){return"function"==typeof this._f.popupData?this._f.popupData():Oy.extractPopupData(this._f,r.id)},i.push(l)}}}catch(e){c.e(e)}finally{c.f()}}}}catch(e){a.e(e)}finally{a.f()}return i.sort((function(e,t){return e.start-t.start})),i}}]),e}();function rk(e,t){if(t=t||1e3,null!=e&&0!==e.length){var r,n={},i=[],a=Nr(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.chr,c=n[s];c||(c=[],n[s]=c,i.push(s)),c.push(o)}}catch(e){a.e(e)}finally{a.f()}for(var u=0,h=i;u<h.length;u++){ek(n[h[u]],t)}}}var nk=function(){function e(t,r,n){mr(this,e),this.path=t.url,this.bufferSize=n||512e3,this.range={start:-1,size:-1},this.config=t}var t;return yr(e,[{key:"dataViewForRange",value:(t=vr(regeneratorRuntime.mark((function e(t,r){var n,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.data&&this.range.start<=t.start&&this.range.start+this.range.size>=t.start+t.size){e.next=9;break}return n=t.size?Math.max(this.bufferSize,t.size):this.bufferSize,i={start:t.start,size:n},e.next=6,Lm.loadArrayBuffer(this.path,km(this.config,{range:i}));case 6:a=e.sent,this.data=a,this.range=i;case 9:return o=this.data.byteLength,s=t.start-this.range.start,e.abrupt("return",r?new Uint8Array(this.data,s,o-s):new DataView(this.data,s,o-s));case 12:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),e}();function ik(e){var t,r,n=[],i=!1,a=Nr(e.trim().split(/\s*[\r\n]+\s*/g));try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o.startsWith("table"))t=o.split(/\s+/)[1].trim();else if(o.startsWith("("))i=!0;else if(o.startsWith(")"));else if(i&&o.length>0){var s=o.indexOf(";"),c=o.substr(0,s).split(/\s+/),u=o.substr(s+1).replace(/"/g,"").trim();n.push({type:c[0],name:c[1],description:u})}}}catch(e){a.e(e)}finally{a.f()}return{table:t,fields:n}}var ak=512e3,ok=function(){function e(t,r){mr(this,e),this.path=t.url,this.genome=r,this.rpTreeCache={},this.config=t}var t,r,n,i,a,o,s;return yr(e,[{key:"readWGFeatures",value:(s=vr(regeneratorRuntime.mark((function e(t,r){var n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadHeader();case 2:return n=this.chromTree.idToChrom.length-1,i=this.chromTree.idToChrom[0],a=this.chromTree.idToChrom[n],e.abrupt("return",this.readFeatures(i,0,a,Number.MAX_VALUE,t,r));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"readFeatures",value:(o=vr(regeneratorRuntime.mark((function e(t,r,n,i,a,o){var s,c,u,h,l,f,p,d,g,v,m,b,y,w,k,x,S,_,C,R,E,A,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadHeader();case 2:if(s=this.chromTree.chromToID[t],c=this.chromTree.chromToID[n],void 0!==s&&void 0!==c){e.next=6;break}return e.abrupt("return",[]);case 6:if("bigwig"!==this.type){e.next=14;break}return e.next=9,this.getZoomHeaders();case 9:l=e.sent,(f=a?dk(a,l):void 0)?(u=f.indexOffset,h=mk):(u=this.header.fullIndexOffset,h=gk),e.next=16;break;case 14:u=this.header.fullIndexOffset,h=vk.call(this);case 16:return e.next=18,this.loadRPTree(u);case 18:return p=e.sent,e.next=21,p.findLeafItemsOverlapping(s,r,c,i);case 21:if((d=e.sent)&&0!==d.length){e.next=26;break}return e.abrupt("return",[]);case 26:g=Number.MAX_VALUE,v=0,m=Nr(d);try{for(m.s();!(b=m.n()).done;)y=b.value,g=Math.min(g,y.dataOffset),v=Math.max(v,y.dataOffset+y.dataSize)}catch(e){m.e(e)}finally{m.f()}return w=v-g,e.next=33,Lm.loadArrayBuffer(this.config.url,km(this.config,{range:{start:g,size:w}}));case 33:k=e.sent,x=[],S=new Uint8Array(k),_=Nr(d);try{for(_.s();!(C=_.n()).done;)R=C.value,E=S.subarray(R.dataOffset-g,R.dataOffset+R.dataSize),A=void 0,this.header.uncompressBuffSize>0?(T=new wn.Inflate(E),A=T.decompress()):A=E,h.call(this,new DataView(A.buffer),s,r,c,i,x,this.chromTree.idToChrom,o)}catch(e){_.e(e)}finally{_.f()}return x.sort((function(e,t){return e.start-t.start})),e.abrupt("return",x);case 40:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n,i,a){return o.apply(this,arguments)})},{key:"getZoomHeaders",value:(a=vr(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.zoomLevelHeaders){e.next=4;break}return e.abrupt("return",this.zoomLevelHeaders);case 4:return e.next=6,this.loadHeader();case 6:return e.abrupt("return",this.zoomLevelHeaders);case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"loadHeader",value:(i=vr(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,s,c,u,h,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.header){e.next=4;break}return e.abrupt("return",this.header);case 4:return e.next=6,Lm.loadArrayBuffer(this.path,km(this.config,{range:{start:0,size:64}}));case 6:return t=e.sent,this.littleEndian=!0,n=new ew(new DataView(t)),2291137574===(i=n.getUInt())?this.type="bigwig":2273964779===i?this.type="bigbed":(this.littleEndian=!1,n.littleEndian=!1,n.position=0,654085990===(a=n.getUInt())?this.type="bigwig":3958540679===a&&(this.type="bigbed")),r={bwVersion:n.getUShort(),nZoomLevels:n.getUShort(),chromTreeOffset:n.getLong(),fullDataOffset:n.getLong(),fullIndexOffset:n.getLong(),fieldCount:n.getUShort(),definedFieldCount:n.getUShort(),autoSqlOffset:n.getLong(),totalSummaryOffset:n.getLong(),uncompressBuffSize:n.getInt(),extensionOffset:n.getLong()},s={start:o=64,size:r.fullDataOffset-o+5},e.next=16,Lm.loadArrayBuffer(this.path,km(this.config,{range:s}));case 16:for(t=e.sent,c=r.nZoomLevels,n=new ew(new DataView(t)),this.zoomLevelHeaders=[],this.firstZoomDataOffset=Number.MAX_SAFE_INTEGER,u=1;u<=c;u++)l=new sk(h=c-u,n),this.firstZoomDataOffset=Math.min(l.dataOffset,this.firstZoomDataOffset),this.zoomLevelHeaders[h]=l;if(r.autoSqlOffset>0&&(n.position=r.autoSqlOffset-o,(f=n.getString())&&(this.autoSql=ik(f))),r.totalSummaryOffset>0&&(n.position=r.totalSummaryOffset-o,this.totalSummary=new fk(n)),!(r.chromTreeOffset>0)){e.next=29;break}n.position=r.chromTreeOffset-o,this.chromTree=new hk(n,o,this.genome),e.next=30;break;case 29:throw"BigWig chromosome tree offset <= 0";case 30:return n.position=r.fullDataOffset-o,r.dataCount=n.getInt(),this.setDefaultVisibilityWindow(r),this.header=r,e.abrupt("return",this.header);case 35:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"loadRPTree",value:(n=vr(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.rpTreeCache[t])){e.next=5;break}return e.abrupt("return",r);case 5:return r=new ck(t,this.config,this.littleEndian),e.next=8,r.load();case 8:return this.rpTreeCache[t]=r,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getType",value:(r=vr(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadHeader();case 2:return e.abrupt("return",this.type);case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getTrackType",value:(t=vr(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadHeader();case 2:if("bigwig"!==this.type){e.next=6;break}return e.abrupt("return","wig");case 6:return e.abrupt("return",this.autoSql&&"chromatinInteract"===this.autoSql.table?"interact":"annotation");case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setDefaultVisibilityWindow",value:function(e){if("bigwig"===this.type)this.visibilityWindow=-1;else{var t=this.genome?this.genome.getGenomeLength():3088286401;this.visibilityWindow=e.dataCount<1e3?-1:t/e.dataCount*1e3}}}]),e}(),sk=function e(t,r){mr(this,e),this.index=t,this.reductionLevel=r.getInt(),this.reserved=r.getInt(),this.dataOffset=r.getLong(),this.indexOffset=r.getLong()},ck=function(){function e(t,r,n){mr(this,e),this.config=r,this.fileOffset=t,this.path=r.url,this.littleEndian=n}var t,r;return yr(e,[{key:"load",value:function(){var e=vr(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.fileOffset+48,r=new nk(this.config,ak),e.next=4,this.readNode(t,r);case 4:return this.rootNode=e.sent,e.abrupt("return",this);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readNode",value:(r=vr(regeneratorRuntime.mark((function e(t,r){var n,i,a,o,s,c,u,h,l,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.dataViewForRange({start:t,size:4},!1);case 2:return n=e.sent,i=new ew(n,this.littleEndian),a=i.getByte(),o=1===a,i.getByte(),s=i.getUShort(),c={start:t+=4,size:s*(o?32:24)},e.next=13,r.dataViewForRange(c,!1);case 13:if(n=e.sent,u=new Array(s),i=new ew(n),!o){e.next=21;break}for(h=0;h<s;h++)l={isLeaf:!0,startChrom:i.getInt(),startBase:i.getInt(),endChrom:i.getInt(),endBase:i.getInt(),dataOffset:i.getLong(),dataSize:i.getLong()},u[h]=l;return e.abrupt("return",new uk(u));case 21:for(f=0;f<s;f++)p={isLeaf:!1,startChrom:i.getInt(),startBase:i.getInt(),endChrom:i.getInt(),endBase:i.getInt(),childOffset:i.getLong()},u[f]=p;return e.abrupt("return",new uk(u));case 23:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"findLeafItemsOverlapping",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n,i){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this,e.abrupt("return",new Promise((function(e,o){var s=[],c=new Set,u=new nk(a.config,ak);c.add(0),function h(l,f){lk(l,t,r,n,i)&&l.items.forEach((function(e){lk(e,t,r,n,i)&&(e.isLeaf?s.push(e):e.childNode?h(e.childNode):(c.add(e.childOffset),a.readNode(e.childOffset,u).then((function(t){e.childNode=t,h(t,e.childOffset)})).catch(o)))})),void 0!==f&&c.delete(f),0===c.size&&e(s)}(a.rootNode,0)})));case 2:case"end":return e.stop()}}),e,this)}))),function(e,r,n,i){return t.apply(this,arguments)})}]),e}(),uk=function e(t){mr(this,e),this.items=t;var r,n,i=Number.MAX_SAFE_INTEGER,a=0,o=Number.MAX_SAFE_INTEGER,s=0;for(r=0;r<t.length;r++)n=t[r],i=Math.min(i,n.startChrom),a=Math.max(a,n.endChrom),o=Math.min(o,n.startBase),s=Math.max(s,n.endBase);this.startChrom=i,this.endChrom=a,this.startBase=o,this.endBase=s},hk=function e(t,r,n){mr(this,e);var i=t.getInt(),a=t.getInt(),o=t.getInt(),s=t.getInt(),c=t.getLong(),u=t.getLong(),h={},l=[];this.header={magic:i,blockSize:a,keySize:o,valSize:s,itemCount:c,reserved:u},this.chromToID=h,this.idToChrom=l,function e(t,i){i>=0&&(t.position=i);var a,s,c,u,f,p,d=t.getByte(),g=(t.getByte(),t.getUShort());if(1===d)for(a=0;a<g;a++)s=t.getFixedLengthTrimmedString(o),c=t.getInt(),t.getInt(),n&&(s=n.getChromosomeName(s)),h[s]=c,l[c]=s;else for(a=0;a<g;a++)s=t.getFixedLengthTrimmedString(o),u=t.getLong(),f=u-r,p=t.position,e(t,f),t.position=p}(t,-1)};function lk(e,t,r,n,i){return!!e&&((n>e.startChrom||n===e.startChrom&&i>=e.startBase)&&(t<e.endChrom||t===e.endChrom&&r<=e.endBase))}var fk=function e(t){mr(this,e),t?(this.basesCovered=t.getLong(),this.minVal=t.getDouble(),this.maxVal=t.getDouble(),this.sumData=t.getDouble(),this.sumSquares=t.getDouble(),pk.call(this)):(this.basesCovered=0,this.minVal=0,this.maxVal=0,this.sumData=0,this.sumSquares=0,this.mean=0,this.stddev=0)};function pk(){var e=this.basesCovered;if(e>0){this.mean=this.sumData/e,this.stddev=Math.sqrt(this.sumSquares/(e-1));var t=this.minVal<0?this.mean-2*this.stddev:0,r=this.maxVal>0?this.mean+2*this.stddev:0;this.defaultRange={min:t,max:r}}}function dk(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];if(i.reductionLevel<e){r=i;break}}return r}function gk(e,t,r,n,i,a,o){var s=new ew(e),c=s.getInt(),u=s.getInt(),h=s.getInt(),l=s.getInt(),f=s.getInt(),p=s.getByte(),d=(s.getByte(),s.getUShort());if(c>=t&&c<=n)for(;d-- >0;){var g=void 0;switch(p){case 1:u=s.getInt(),h=s.getInt(),g=s.getFloat();break;case 2:u=s.getInt(),g=s.getFloat(),h=u+f;break;case 3:g=s.getFloat(),h=u+f,u+=l}if(!(c<t||c===t&&h<r)){if(c>n||c===n&&u>=i)break;if(Number.isFinite(g)){var v=o[c];a.push({chr:v,start:u,end:h,value:g})}}}}function vk(){var e=function(e,t,r){if(r&&"chromatinInteract"===r.table)return function(e,t){return e.chr1=t[5],e.start1=Number.parseInt(t[6]),e.end1=Number.parseInt(t[7]),e.chr2=t[10],e.start2=Number.parseInt(t[11]),e.end2=Number.parseInt(t[12]),e.name=t[0],e.score=Number.parseFloat(t[1]),e.value=Number.parseFloat(t[2]),e.color="."===t[4]?void 0:"0"===t[4]?"rgb(0,0,0)":t[4],e};var n=e-3;return function(i,a){if(n>0&&(i.name=a[0]),n>1&&(i.score=parseFloat(a[1])),n>2&&(i.strand=a[2]),n>3&&(i.cdStart=parseInt(a[3])),n>4&&(i.cdEnd=parseInt(a[4])),n>5&&"."!==a[5]&&"0"!==a[5]&&"-1"!==a[5]){var o=ei.createColorString(a[5]);i.color=o.startsWith("rgb")?o:void 0}if(n>8){for(var s=parseInt(a[6]),c=a[7].split(","),u=a[8].split(","),h=[],l=0;l<s;l++){var f=i.start+parseInt(u[l]),p=f+parseInt(c[l]);h.push({start:f,end:p})}i.exons=h}if(r)for(var d=e;d<t;d++)if(d<r.fields.length){var g=r.fields[d].name,v=a[d-3];i[g]=v}}}(this.header.definedFieldCount,this.header.fieldCount,this.autoSql);return function(t,r,n,i,a,o,s){for(var c=new ew(t);c.remLength()>=13;){var u=c.getInt(),h=s[u],l=c.getInt(),f=c.getInt(),p=c.getString();if(!(u<r||u===r&&f<n)){if(u>i||u===i&&l>=a)break;if(f>0){var d={chr:h,start:l,end:f};o.push(d);var g=p.split("\t");e(d,g)}}}}}function mk(e,t,r,n,i,a,o,s){for(var c=new ew(e);c.remLength()>=32;){var u=c.getInt(),h=o[u],l=c.getInt(),f=c.getInt(),p=c.getInt(),d=c.getFloat(),g=c.getFloat(),v=c.getFloat(),m=(c.getFloat(),void 0);switch(s){case"min":m=d;break;case"max":m=g;break;default:m=0===p?0:v/p}if(!(u<t||u===t&&f<r)){if(u>n||u===n&&l>=i)break;Number.isFinite(m)&&a.push({chr:h,start:l,end:f,value:m})}}}var bk=function(){function e(t,r){mr(this,e),this.reader=new ok(t,r),this.genome=r,this.format=t.format||"bigwig",this.wgValues={}}var t,r,n,i,a;return yr(e,[{key:"getFeatures",value:(a=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.chr,n=t.start,i=t.end,a=t.bpPerPixel,o=t.windowFunction,"all"!==r.toLowerCase()){e.next=7;break}return e.next=4,this.getWGValues(o);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,this.reader.readFeatures(r,n,r,i,a,o);case 9:e.t0=e.sent;case 10:return s=e.t0,"bigwig"===this.reader.type||ek(s),e.abrupt("return",s);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"getHeader",value:(i=vr(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.reader.loadHeader());case 1:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getDefaultRange",value:function(){return void 0!==this.reader.totalSummary?this.reader.totalSummary.defaultRange:void 0}},{key:"defaultVisibilityWindow",value:(n=vr(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.reader.defaultVisibilityWindow);case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getWGValues",value:(r=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s,c,u,h,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=1e3,n=this.genome,!this.wgValues[t]){e.next=6;break}return e.abrupt("return",this.wgValues[t]);case 6:return i=n.getGenomeLength()/r,e.next=9,this.reader.readWGFeatures(i,t);case 9:a=e.sent,o=[],s=Nr(a);try{for(s.s();!(c=s.n()).done;)u=c.value,h=u.chr,l=n.getCumulativeOffset(h),(f=Object.assign({},u)).chr="all",f.start=l+u.start,f.end=l+u.end,o.push(f)}catch(e){s.e(e)}finally{s.f()}return this.wgValues[t]=o,e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"supportsWholeGenome",value:function(){return"bigwig"===this.reader.type||this.defaultVisibilityWindow()<=0}},{key:"trackType",value:(t=vr(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.reader.getTrackType());case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();a&&("g"!=/./g.flags||Rt.UNSUPPORTED_Y)&&A.f(RegExp.prototype,"flags",{configurable:!0,get:_t});var yk=function(){function e(t,r){mr(this,e),this.config=t,this.genome=r,this.path=t.url,this.groupCache={},this.datasetCache={}}var t,r,n,i,a,o;return yr(e,[{key:"readHeader",value:(o=vr(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,s,c,u,h,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.magic){e.next=2;break}return e.abrupt("return",this);case 2:return e.next=4,Lm.loadArrayBuffer(this.path,km(this.config,{range:{start:0,size:64e3}}));case 4:if(t=e.sent,r=new ew(new DataView(t)),this.magic=r.getInt(),this.version=r.getInt(),this.indexPos=r.getLong(),this.indexSize=r.getInt(),r.getInt(),this.version>=2)for(n=r.getInt(),this.windowFunctions=[];n-- >0;)this.windowFunctions.push(r.getString());for(this.trackType=r.getString(),this.trackLine=r.getString(),i=r.getInt(),this.trackNames=[];i-- >0;)this.trackNames.push(r.getString());return this.genomeID=r.getString(),this.flags=r.getInt(),this.compressed=0!=(1&this.flags),e.next=22,Lm.loadArrayBuffer(this.path,km(this.config,{range:{start:this.indexPos,size:this.indexSize}}));case 22:for(t=e.sent,r=new ew(new DataView(t)),this.datasetIndex={},a=r.getInt();a-- >0;)o=r.getString(),s=r.getLong(),c=r.getInt(),this.datasetIndex[o]={position:s,size:c};for(this.groupIndex={},a=r.getInt();a-- >0;)u=r.getString(),h=r.getLong(),l=r.getInt(),this.groupIndex[u]={position:h,size:l};return e.abrupt("return",this);case 31:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"readDataset",value:(a=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a,o,s,c,u,h,l,f,p,d,g,v,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t+"_"+r+"_"+n,!this.datasetCache[i]){e.next=5;break}return e.abrupt("return",this.datasetCache[i]);case 5:return e.next=7,this.readHeader();case 7:if(a=this.version<2?"":"/"+r,o="all"===t.toLowerCase()||void 0===n?"0":n.toString(),s="raw"===r?"/"+t+"/raw":"/"+t+"/z"+o+a,void 0!==(c=this.datasetIndex[s])){e.next=13;break}return e.abrupt("return",void 0);case 13:return e.next=15,Lm.loadArrayBuffer(this.path,km(this.config,{range:{start:c.position,size:c.size}}));case 15:if(u=e.sent){e.next=18;break}return e.abrupt("return",void 0);case 18:for(h=new ew(new DataView(u)),l=h.getInt(),f={};l-- >0;)f[h.getString()]=h.getString();for(p=h.getString(),d=h.getFloat(),g=h.getInt(),v=[];g-- >0;)v.push({position:h.getLong(),size:h.getInt()});return m={name:s,attributes:f,dataType:p,tileWidth:d,tiles:v},this.datasetCache[i]=m,e.abrupt("return",m);case 30:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return a.apply(this,arguments)})},{key:"readRootGroup",value:(i=vr(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.genome,!(r=this.groupCache["/"])){e.next=6;break}return e.abrupt("return",r);case 6:return e.next=8,this.readGroup("/");case 8:return n=e.sent,i=n.chromosomes,(a=n.maxZoom)&&(this.maxZoom=Number(a)),(o=n.totalCount)&&(n.totalCount=Number.parseFloat(o)),s={},i&&i.split(",").forEach((function(e){var r=t.getChromosomeName(e);s[r]=e})),this.chrAliasTable=s,this.groupCache["/"]=n,e.abrupt("return",n);case 19:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"readGroup",value:(n=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.groupCache[t])){e.next=5;break}return e.abrupt("return",r);case 5:return e.next=7,this.readHeader();case 7:if(void 0!==(n=this.groupIndex[t])){e.next=10;break}return e.abrupt("return",void 0);case 10:return e.next=12,Lm.loadArrayBuffer(this.path,km(this.config,{range:{start:n.position,size:n.size}}));case 12:if(i=e.sent){e.next=15;break}return e.abrupt("return",void 0);case 15:for(a=new ew(new DataView(i)),o={name:t},s=a.getInt();s-- >0;)c=a.getString(),u=a.getString(),o[c]=u;return this.groupCache[t]=o,e.abrupt("return",o);case 21:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"readTiles",value:(r=vr(regeneratorRuntime.mark((function e(t,r){var n,i,a,o,s,c,u,h,l,f,p,d,g,v,m,b,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.sort((function(e,t){return e.position-t.position})),0!==(t=t.filter((function(e){return e.size>0}))).length){e.next=4;break}return e.abrupt("return",Promise.resolve([]));case 4:return n=t[0],i=t[t.length-1],a=n.position,o=i.position+i.size-a,e.next=10,Lm.loadArrayBuffer(this.path,km(this.config,{range:{start:a,size:o}}));case 10:s=e.sent,c=[],u=Nr(t),e.prev=13,u.s();case 15:if((h=u.n()).done){e.next=38;break}if(l=h.value,f=l.position-a,!((p=l.size)>0)){e.next=36;break}d=void 0,this.compressed?(g=new wn.Inflate(new Uint8Array(s,f,p)),v=g.decompress(),d=v.buffer):d=s.slice(f,f+p),m=new ew(new DataView(d)),b=m.getString(),y=void 0,e.t0=b,e.next="fixedStep"===e.t0?28:"variableStep"===e.t0?30:"bed"===e.t0||"bedWithName"===e.t0?32:34;break;case 28:return y=wk(m,r),e.abrupt("break",35);case 30:return y=kk(m,r),e.abrupt("break",35);case 32:return y=xk(m,r,b),e.abrupt("break",35);case 34:throw"Unknown tile type: "+b;case 35:c.push(y);case 36:e.next=15;break;case 38:e.next=43;break;case 40:e.prev=40,e.t1=e.catch(13),u.e(e.t1);case 43:return e.prev=43,u.f(),e.finish(43);case 46:return e.abrupt("return",c);case 47:case"end":return e.stop()}}),e,this,[[13,40,43,46]])}))),function(e,t){return r.apply(this,arguments)})},{key:"readTile",value:(t=vr(regeneratorRuntime.mark((function e(t,r){var n,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lm.loadArrayBuffer(this.path,km(this.config,{range:{start:t.position,size:t.size}}));case 2:n=e.sent,this.compressed&&(i=new wn.Inflate(new Uint8Array(n)),a=i.decompress(),n=a.buffer),o=new ew(new DataView(n)),s=o.getString(),e.t0=s,e.next="fixedStep"===e.t0?9:"variableStep"===e.t0?10:"bed"===e.t0||"bedWithName"===e.t0?11:12;break;case 9:return e.abrupt("return",wk(o,r));case 10:return e.abrupt("return",kk(o,r));case 11:return e.abrupt("return",xk(o,r,s));case 12:throw"Unknown tile type: "+s;case 13:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),e}();function wk(e,t){for(var r=e.getInt(),n=e.getInt(),i=e.getFloat(),a=[],o=t;o-- >0;){for(var s=r,c=[];s-- >0;)c.push(e.getFloat());a.push(c)}return{type:"fixedStep",start:n,span:i,data:a,nTracks:t,nPositions:r}}function kk(e,t){for(var r=e.getInt(),n=e.getFloat(),i=e.getInt(),a=[],o=i;o-- >0;)a.push(e.getInt());e.getInt();for(var s=[],c=t;c-- >0;){o=i;for(var u=[];o-- >0;)u.push(e.getFloat());s.push(u)}return{type:"variableStep",tileStart:r,span:n,start:a,data:s,nTracks:t,nPositions:i}}function xk(e,t,r){for(var n=e.getInt(),i=n,a=[];i-- >0;)a.push(e.getInt());i=n;for(var o=[];i-- >0;)o.push(e.getInt());e.getInt();for(var s=[],c=t;c-- >0;){for(var u=n,h=[];u-- >0;)h.push(e.getFloat());s.push(h)}if("bedWithName"===r){i=n;for(var l=[];i-- >0;)l.push(e.getString())}return{type:r,start:a,end:o,data:s,nTracks:t,nPositions:n}}var Sk=function(){function e(t,r){mr(this,e),this.genome=r,this.windowFunction=t.windowFunction||"mean",this.reader=new yk(t,r)}var t;return yr(e,[{key:"getFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s,c,u,h,l,f,p,d,g,v,m,b,y,w,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.chr,n=t.start,i=t.end,a=t.bpPerPixel,o=new Kv(r,n,i),s=this.genome,this.rootGroup){e.next=8;break}return e.next=6,this.reader.readRootGroup();case 6:this.rootGroup=e.sent,this.normalizationFactor||(c=this.rootGroup.totalCount)&&(this.normalizationFactor=1e6/c);case 8:if("all"!==r.toLowerCase()){e.next=10;break}return e.abrupt("return",[]);case 10:return o.bpPerPixel=a,u=Ak(r,a,s),h=this.reader.chrAliasTable[r],l=this.reader.maxZoom,void 0===h&&(h=r),void 0===l&&(l=-1),f=u>l?"raw":this.windowFunction,e.next=19,this.reader.readDataset(h,f,u);case 19:if(null!=(p=e.sent)){e.next=22;break}return e.abrupt("return",[]);case 22:return d=p.tileWidth,g=Math.floor(n/d),v=Math.floor(i/d),e.next=28,this.reader.readTiles(p.tiles.slice(g,v+1),1);case 28:m=e.sent,b=[],y=Nr(m),e.prev=31,y.s();case 33:if((w=y.n()).done){e.next=47;break}k=w.value,e.t0=k.type,e.next="bed"===e.t0?38:"variableStep"===e.t0?40:"fixedStep"===e.t0?42:44;break;case 38:return _k(k,r,n,i,a,b),e.abrupt("break",45);case 40:return Ck(k,r,n,i,a,b),e.abrupt("break",45);case 42:return Rk(k,r,n,i,a,b),e.abrupt("break",45);case 44:throw"Unknown tile type: "+k.type;case 45:e.next=33;break;case 47:e.next=52;break;case 49:e.prev=49,e.t1=e.catch(31),y.e(e.t1);case 52:return e.prev=52,y.f(),e.finish(52);case 55:return b.sort((function(e,t){return e.start-t.start})),e.abrupt("return",b);case 57:case"end":return e.stop()}}),e,this,[[31,49,52,55]])}))),function(e){return t.apply(this,arguments)})},{key:"supportsWholeGenome",value:function(){return!1}}]),e}();function _k(e,t,r,n,i,a){for(var o=e.nPositions,s=e.start,c=e.end,u=e.data[0],h=0;h<o;h++){var l=s[h],f=c[h];if(!(f<r)){if(l>n)break;a.push({chr:t,start:l,end:f,value:u[h]})}}}function Ck(e,t,r,n,i,a){for(var o=e.nPositions,s=e.start,c=e.span,u=e.data[0],h=0;h<o;h++){var l=s[h],f=l+c;if(!(f<r)){if(l>n)break;a.push({chr:t,start:l,end:f,value:u[h]})}}}function Rk(e,t,r,n,i,a){for(var o=e.nPositions,s=e.start,c=e.span,u=e.data[0],h=0;h<o;h++){var l=s+c;if(s>n)break;l>=r&&(Number.isNaN(u[h])||a.push({chr:t,start:s,end:l,value:u[h]})),s=l}}var Ek=Math.log(2);function Ak(e,t,r){var n=r.getChromosome(e).bpLength;return Math.ceil(Math.log(Math.max(0,n/(700*t)))/Ek)}function Tk(e,t){var r=e.format?e.format.toLowerCase():void 0;return"bigwig"===r||"bigbed"===r||"bb"===r?new bk(e,t):"tdf"===r?new Sk(e,t):new tk(e,t)}var Ik={Set1:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(166,86,40)","rgb(152,78,163)","rgb(255,127,0)","rgb(247,129,191)","rgb(153,153,153)","rgb(255,255,51)"],Dark2:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)","rgb(230,171,2)","rgb(166,118,29)","rgb(102,102,102)"],Set2:["rgb(102, 194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)","rgb(255,217,47)","rgb(229,196,148)","rgb(179,179,179)"],Set3:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)","rgb(217,217,217)","rgb(188,128,189)","rgb(204,235,197)","rgb(255,237,111)"],Pastel1:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)","rgb(255,255,204)","rgb(229,216,189)","rgb(253,218,236)"],Pastel2:["rgb(173,226,207)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)","rgb(255,242,174)","rgb(243,225,206)"],Accent:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)","rgb(240,2,127)","rgb(191,91,23)"]};function Lk(e){this.colors=Ik[e],Array.isArray(this.colors)||(this.colors=[]),this.colorTable={},this.nextIdx=0,this.colorGenerator=new Mk}function Mk(){this.hue=Math.random(),this.goldenRatio=.618033988749895,this.hexwidth=2}Lk.prototype.getColor=function(e){return this.colorTable.hasOwnProperty(e)||(this.nextIdx<this.colors.length?this.colorTable[e]=this.colors[this.nextIdx]:this.colorTable[e]=this.colorGenerator.get(),this.nextIdx++),this.colorTable[e]},Mk.prototype.hsvToRgb=function(e,t,r){var n=Math.floor(6*e),i=6*e-n,a=r*(1-t),o=r*(1-i*t),s=r*(1-(1-i)*t),c=255,u=255,h=255;switch(n){case 0:c=r,u=s,h=a;break;case 1:c=o,u=r,h=a;break;case 2:c=a,u=r,h=s;break;case 3:c=a,u=o,h=r;break;case 4:c=s,u=a,h=r;break;case 5:c=r,u=a,h=o}return[Math.floor(256*c),Math.floor(256*u),Math.floor(256*h)]},Mk.prototype.padHex=function(e){return e.length>this.hexwidth?e:new Array(this.hexwidth-e.length+1).join("0")+e},Mk.prototype.get=function(e,t){this.hue+=this.goldenRatio,this.hue%=1,"number"!=typeof e&&(e=.5),"number"!=typeof t&&(t=.95);var r=this.hsvToRgb(this.hue,e,t);return"#"+this.padHex(r[0].toString(16))+this.padHex(r[1].toString(16))+this.padHex(r[2].toString(16))};var Fk=new Mk;var Dk={getTissueInfo:function(e,t){var r=(t=t||"https://gtexportal.org/rest/v1")+"/dataset/tissueInfo?datasetId="+(e=e||"gtex_v8");return Lm.loadJson(r,{})},trackConfiguration:function(e,t){return{type:"eqtl",sourceType:"gtex-ws",url:(t=t||"https://gtexportal.org/rest/v1")+"/association/singleTissueEqtlByLocation",tissueSiteDetailId:e.tissueSiteDetailId,name:e.tissueSiteDetailId.split("_").join(" "),visibilityWindow:25e4}}},Ok=new Lk("Dark2");["GT/AG","CT/AC","GC/AG","CT/GC","AT/AC","GT/AT","non-canonical"].forEach((function(e){Ok.getColor(e)}));var Bk={},Nk=function(e){wr(i,e);var t,r,n=Ar(i);function i(e,t){var r;return mr(this,i),(r=n.call(this,e,t)).maxRows=void 0===e.maxRows?1e3:e.maxRows,r.displayMode=e.displayMode||"EXPANDED",r.labelDisplayMode=e.labelDisplayMode,e._featureSource?(r.featureSource=e._featureSource,delete e._featureSource):r.featureSource=e.featureSource?e.featureSource:Tk(e,t.genome),r.autoHeight=e.autoHeight,r.margin=void 0===e.margin?10:e.margin,r.featureHeight=e.featureHeight||14,"FusionJuncSpan"===e.type?(r.squishedRowHeight=e.squishedRowHeight||50,r.expandedRowHeight=e.expandedRowHeight||50,r.height=e.height||r.margin+2*r.expandedRowHeight):"snp"===e.type?(r.expandedRowHeight=e.expandedRowHeight||10,r.squishedRowHeight=e.squishedRowHeight||5,r.height=e.height||30):(r.squishedRowHeight=e.squishedRowHeight||15,r.expandedRowHeight=e.expandedRowHeight||30,r.height=e.height||r.margin+2*r.expandedRowHeight),void 0!==r.height&&r.height||(r.height=100),"spliceJunctions"===e.type&&void 0===e.colorByNumReadsThreshold&&(e.colorByNumReadsThreshold=5),e.render?r.render=e.render:"FusionJuncSpan"===e.type?r.render=jk:"spliceJunctions"===e.type?(r.render=qk,r.displayMode="COLLAPSED"):"snp"===e.type?(r.render=Zk,r.snpColors=["rgb(0,0,0)","rgb(0,0,255)","rgb(0,255,0)","rgb(255,0,0)"],r.colorBy="function"):(r.render=Uk,r.arrowSpacing=30,function(e){e.browser.on&&(e.browser.on("trackdragend",t),e.browser.on("trackremoved",r));function t(){e.trackView&&e.trackView.tile&&"SQUISHED"!==e.displayMode&&e.trackView.repaintViews()}function r(n){e.browser.un&&e===n&&(e.browser.un("trackdrag",t),e.browser.un("trackremoved",r))}}(Rr(r))),r.useScore=e.useScore,r}return yr(i,[{key:"postInit",value:(r=vr(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof this.featureSource.getHeader){e.next=4;break}return e.next=3,this.featureSource.getHeader();case 3:this.header=e.sent;case 4:if(this.header&&this.setTrackProperties(this.header),void 0!==this.visibilityWindow||"function"!=typeof this.featureSource.defaultVisibilityWindow){e.next=10;break}return e.next=8,this.featureSource.defaultVisibilityWindow();case 8:this.visibilityWindow=e.sent,this.featureSource.visibilityWindow=this.visibilityWindow;case 10:return e.abrupt("return",this);case 11:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"supportsWholeGenome",value:function(){return(!1===this.config.indexed||!this.config.indexURL)&&!1!==this.config.supportsWholeGenome}},{key:"getFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n,i){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.visibilityWindow,e.abrupt("return",this.featureSource.getFeatures({chr:t,start:r,end:n,bpPerPixel:i,visibilityWindow:a}));case 2:case"end":return e.stop()}}),e,this)}))),function(e,r,n,i){return t.apply(this,arguments)})},{key:"computePixelHeight",value:function(e){if("spliceJunctions"===this.type)return this.height;if("COLLAPSED"===this.displayMode)return this.margin+this.expandedRowHeight;var t=0;if(e&&"function"==typeof e.forEach){var r,n=Nr(e);try{for(n.s();!(r=n.n()).done;){var i=r.value;i.row&&i.row>t&&(t=i.row)}}catch(e){n.e(e)}finally{n.f()}}return this.margin+(t+1)*("SQUISHED"===this.displayMode?this.squishedRowHeight:this.expandedRowHeight)}},{key:"draw",value:function(e){var t=e.features,r=e.context,n=e.bpPerPixel,i=e.bpStart,a=e.pixelWidth,o=e.pixelHeight,s=i+a*n+1;if(this.config.isMergedTrack||Jp.fillRect(r,0,e.pixelTop,a,o,{fillStyle:"rgb(255, 255, 255)"}),t){var c=[];e.rowLastX=[];var u,h=Nr(t);try{for(h.s();!(u=h.n()).done;){var l=u.value.row||0;void 0===c[l]?c[l]=1:c[l]++,e.rowLastX[l]=-Number.MAX_SAFE_INTEGER}}catch(e){h.e(e)}finally{h.f()}"spliceJunctions"==this.config.type&&(Bk.referenceFrame=e.viewport.referenceFrame,Bk.referenceFrameStart=Bk.referenceFrame.start,Bk.referenceFrameEnd=Bk.referenceFrameStart+Bk.referenceFrame.toBP(Su(e.viewport.contentDiv).width()),Bk.featureZoomOutTracker={});var f,p=[],d=Nr(t);try{for(d.s();!(f=d.n()).done;){var g=f.value;if(!(g.end<i)){if(g.start>s)break;var v="COLLAPSED"===this.displayMode?0:g.row,m=a/c[v];e.drawLabel=e.labelAllFeatures||m>10;var b=Math.ceil((g.end-i)/n),y=p[v];if((!y||b>y||"spliceJunctions"===this.config.type)&&(this.render.call(this,g,i,n,o,r,e),"spliceJunctions"!==this.config.type)){var w=Math.floor((g.start-i)/n);y&&w-y<=0&&(r.globalAlpha=.5,Jp.strokeLine(r,w,0,w,o,{strokeStyle:"rgb(255, 255, 255)"}),r.globalAlpha=1),p[v]=b}}}}catch(e){d.e(e)}finally{d.f()}}}},{key:"clickedFeatures",value:function(e){var t,r=e.y-this.margin,n=Tr(kr(i.prototype),"clickedFeatures",this).call(this,e);switch(this.displayMode){case"SQUISHED":t=Math.floor(r/this.squishedRowHeight);break;case"EXPANDED":t=Math.floor(r/this.expandedRowHeight);break;default:t=void 0}return n.filter((function(e){return void 0===t||void 0===e.row||t===e.row}))}},{key:"popupData",value:function(e,t){t||(t=this.clickedFeatures(e));var r,n=e.genomicLocation,i=[],a=Nr(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;if("spliceJunctions"!==this.config.type||o.isVisible&&o.attributes){var s="function"==typeof o.popupData?o.popupData(n):Oy.extractPopupData(o,this.getGenomeId());s&&(i.length>0&&i.push("<HR>"),Array.prototype.push.apply(i,s))}}}catch(e){a.e(e)}finally{a.f()}return i}},{key:"menuItemList",value:function(){var e=this,t=[];return this.render===Zk&&(["function","class"].forEach((function(r){t.push({object:pb("Color by "+r,r===e.colorBy),click:function(){e.colorBy=r,e.trackView.repaintViews()}})})),t.push({object:Su('<div class="igv-track-menu-border-top">')})),t.push({object:Su('<div class="igv-track-menu-border-top">')}),["COLLAPSED","SQUISHED","EXPANDED"].forEach((function(r){t.push({object:pb({COLLAPSED:"Collapse",SQUISHED:"Squish",EXPANDED:"Expand"}[r],r===e.displayMode),click:function(){e.displayMode=r,e.config.displayMode=r,e.trackView.checkContentHeight(),e.trackView.repaintViews()}})})),t}},{key:"description",value:function(){if(Zk===this.render){var e="<html>"+this.name+"<hr>";return e+="<em>Color By Function:</em><br>",e+='<span style="color:red">Red</span>: Coding-Non-Synonymous, Splice Site<br>',e+='<span style="color:green">Green</span>: Coding-Synonymous<br>',e+='<span style="color:blue">Blue</span>: Untranslated<br>',e+='<span style="color:black">Black</span>: Intron, Locus, Unknown<br><br>',e+="<em>Color By Class:</em><br>",e+='<span style="color:red">Red</span>: Deletion<br>',e+='<span style="color:green">Green</span>: MNP<br>',e+='<span style="color:blue">Blue</span>: Microsatellite, Named<br>',e+='<span style="color:black">Black</span>: Indel, Insertion, SNP',e+="</html>"}return this.name}},{key:"dispose",value:function(){this.trackView=void 0}}]),i}(Oy);function Pk(e,t,r){var n=(e.start-t)/r,i=(e.end-t)/r,a=i-n;return a<3&&(a=3,n-=1.5),{px:n,px1:i,pw:a}}function zk(e){var t;if(this.altColor&&"-"===e.strand)t=this.altColor;else if(this.color)t=this.color;else if(this.config.colorBy){var r=e[this.config.colorBy.field];r&&(t=this.config.colorBy.pallete[r])}else t=e.color?e.color:this.defaultColor;if(e.alpha&&1!==e.alpha)t=ei.addAlpha(t,e.alpha);else if(this.useScore&&e.score&&!Number.isNaN(e.score)){var n=function(e,t,r){var n=(t-e)/9,i=Math.floor((r-e)/n);return Math.min(1,.2+.8*i/9)}(this.config.min?this.config.min:0,this.config.max?this.config.max:1e3,e.score);e.alpha=n,t=ei.addAlpha(t,n)}return t}function Uk(e,t,r,n,i,a){this.browser;var o,s,c=zk.call(this,e);i.fillStyle=c,i.strokeStyle=c,"SQUISHED"===this.displayMode&&void 0!==e.row?(o=this.featureHeight/2,s=this.margin+this.squishedRowHeight*e.row):"EXPANDED"===this.displayMode&&void 0!==e.row?(o=this.featureHeight,s=this.margin+this.expandedRowHeight*e.row):(o=this.featureHeight,s=this.margin);var u=s+o/2,h=o/2,l=u-h/2,f=e.exons?e.exons.length:0,p=Pk(e,t,r),d=this.arrowSpacing,g="+"===e.strand?1:"-"===e.strand?-1:0;if(0===f){if(i.fillRect(p.px,s,p.pw,o),0!==g){i.fillStyle="white",i.strokeStyle="white";for(var v=p.px+d/2;v<p.px1;v+=d)Jp.strokeLine(i,v-2*g,u-2,v,u),Jp.strokeLine(i,v-2*g,u+2,v,u);i.fillStyle=c,i.strokeStyle=c}}else{Jp.strokeLine(i,p.px+1,u,p.px1-1,u);for(var m=a.pixelWidth,b=Math.max(0,p.px)+d/2,y=Math.min(m,p.px1),w=b;w<y;w+=d)Jp.strokeLine(i,w-2*g,u-2,w,u),Jp.strokeLine(i,w-2*g,u+2,w,u);for(var k=0;k<f;k++){var x=e.exons[k],S=Math.round((x.start-t)/r),_=Math.round((x.end-t)/r),C=Math.max(1,_-S),R=void 0;if(!(S+C<0)){if(S>m)break;if(x.utr)i.fillRect(S,l,C,h);else if(x.cdStart&&(R=Math.round((x.cdStart-t)/r),i.fillRect(S,l,R-S,h),C-=R-S,S=R),x.cdEnd&&(R=Math.round((x.cdEnd-t)/r),i.fillRect(R,l,_-R,h),C-=_-R,_=R),i.fillRect(S,s,C,o),C>d+5&&0!==g){i.fillStyle="white",i.strokeStyle="white";for(var E=S+d/2;E<_;E+=d)Jp.strokeLine(i,E-2*g,u-2,E,u),Jp.strokeLine(i,E-2*g,u+2,E,u);i.fillStyle=c,i.strokeStyle=c}}}}var A=Math.round(a.viewportContainerX),T=A+a.viewportWidth;a.drawLabel&&Hk.call(this,i,e,p.px,p.px1,s,A,T,a.referenceFrame,a)}function Hk(e,t,r,n,i,a,o,s,c){var u=t.name;if(void 0===u&&t.gene&&(u=t.gene.name),void 0===u&&(u=t.id||t.ID),u&&"."!==u){var h,l;n<a||r>o?(h=r,l=n):(h=Math.max(r,a),l=Math.min(n,o));var f,p=zk.call(this,t),d=!1;if(s.selection&&Dk.gtexLoaded&&(d=!0,f=s.selection.colorForGene(u)),"SQUISHED"!==this.displayMode){var g,v={textAlign:"SLANT"===this.labelDisplayMode?void 0:"center",fillStyle:f||p,strokeStyle:f||p};"COLLAPSED"===this.displayMode&&"SLANT"===this.labelDisplayMode&&(g={rotate:{angle:45}});var m=h+(l-h)/2,b=function(e,t){return t?e+20:e+25}(i,g),y=e.measureText(u),w=m-y.width/2,k=m+y.width/2;(c.labelAllFeatures||w>c.rowLastX[t.row]||d)&&(c.rowLastX[t.row]=k,c.labelTransform?(e.save(),c.labelTransform(e,m),Jp.fillText(e,u,m,b,v,void 0),e.restore()):Jp.fillText(e,u,m,b,v,g))}}}function jk(e,t,r,n,i){var a,o="EXPANDED"===this.displayMode?this.expandedRowHeight:this.squishedRowHeight;"COLLAPSED"===this.display&&(a=this.margin),("SQUISHED"===this.displayMode&&void 0!==e.row||"EXPANDED"===this.displayMode&&void 0!==e.row)&&(a=this.margin+o*e.row);var s=a+.5*o,c=s-.5*o,u=s+.5*o,h=Math.round((e.junction_left-t)/r),l=Math.round((e.junction_right-t)/r);i.beginPath(),i.moveTo(h,s),i.bezierCurveTo(h,c,l,c,l,s),i.lineWidth=1+Math.log(e.num_junction_reads)/Math.log(2),i.strokeStyle="blue",i.stroke();for(var f=e.spanning_frag_coords,p=0;p<f.length;p++){var d=f[p],g=Math.round((d.left-t)/r),v=Math.round((d.right-t)/r);i.beginPath(),i.moveTo(g,s),i.bezierCurveTo(g,u,v,u,v,s),i.lineWidth=1,i.strokeStyle="purple",i.stroke()}}function qk(e,t,r,n,i){e.isVisible=!1;var a=Math.round((e.start-t)/r),o=Math.round((e.end-t)/r),s=(a+o)/2;if(o-a<=3){if(s in Bk.featureZoomOutTracker)return;Bk.featureZoomOutTracker[s]=!0}if(!(this.config.hideAnnotatedJunctions&&"true"===e.attributes.annotated_junction||this.config.hideUnannotatedJunctions&&"false"===e.attributes.annotated_junction||this.config.hideMotifs&&this.config.hideMotifs.includes(e.attributes.motif)||this.config.hideStrand===e.strand)){if(this.config.minJunctionEndsVisible){var c=0;if(e.start>=Bk.referenceFrameStart&&e.start<=Bk.referenceFrameEnd&&(c+=1),e.end>=Bk.referenceFrameStart&&e.end<=Bk.referenceFrameEnd&&(c+=1),c<this.config.minJunctionEndsVisible)return}var u,h,l,f;if(e.attributes.uniquely_mapped){if((u=parseInt(e.attributes.uniquely_mapped))<this.config.minUniquelyMappedReads)return;if((l=u+(h=parseInt(e.attributes.multi_mapped)))<this.config.minTotalReads)return;if(l>0&&h/l>this.config.maxFractionMultiMappedReads)return;if(e.attributes.maximum_spliced_alignment_overhang&&parseInt(e.attributes.maximum_spliced_alignment_overhang)<this.config.minSplicedAlignmentOverhang)return}if(e.attributes.num_samples_with_this_junction){if(f=parseInt(e.attributes.num_samples_with_this_junction),this.config.minSamplesWithThisJunction&&f<this.config.minSamplesWithThisJunction)return;if(this.config.maxSamplesWithThisJunction&&f>this.config.maxSamplesWithThisJunction)return;if(e.attributes.num_samples_total&&(e.attributes.percent_samples_with_this_junction=100*f/parseFloat(e.attributes.num_samples_total),this.config.minPercentSamplesWithThisJunction&&(e.attributes.percent_samples_with_this_junction<this.config.minPercentSamplesWithThisJunction||e.attributes.percent_samples_with_this_junction>this.config.maxPercentSamplesWithThisJunction)))return}var p,d,g=this.margin,v=this.height,m=g+.5*v,b=g,y=g+v-10,w=(a+s)/2,k=(s+o)/2,x=1;e.attributes.line_width?x=parseFloat(e.attributes.line_width):(void 0===this.config.thicknessBasedOn||"numUniqueReads"===this.config.thicknessBasedOn?x=u:"numReads"===this.config.thicknessBasedOn?x=l:"numSamplesWithThisJunction"===this.config.thicknessBasedOn&&void 0!==f&&(x=f),x=1+Math.log(x+1)/Math.log(12)),void 0===this.config.bounceHeightBasedOn||"random"===this.config.bounceHeightBasedOn?p=(e.start+e.end)%7:"distance"===this.config.bounceHeightBasedOn?p=6*(e.end-e.start)/(Bk.referenceFrameEnd-Bk.referenceFrameStart):"thickness"===this.config.bounceHeightBasedOn&&(p=2*x),b+=v*Math.max(7-p,0)/10,d=e.attributes.color?e.attributes.color:void 0===this.config.colorBy||"numUniqueReads"===this.config.colorBy?u>this.config.colorByNumReadsThreshold?"blue":"#AAAAAA":"numReads"===this.config.colorBy?l>this.config.colorByNumReadsThreshold?"blue":"#AAAAAA":"isAnnotatedJunction"===this.config.colorBy?"true"===e.attributes.annotated_junction?"#b0b0ec":"orange":"strand"===this.config.colorBy?"+"===e.strand?"#b0b0ec":"#ecb0b0":"motif"===this.config.colorBy?Ok.getColor(e.attributes.motif):"#AAAAAA";var S="";e.attributes.label?S=e.attributes.label.replace(/_/g," "):void 0===this.config.labelWith||"uniqueReadCount"===this.config.labelWith?S=u:"totalReadCount"===this.config.labelWith?S=l:"numSamplesWithThisJunction"===this.config.labelWith?void 0!==f&&(S=f):"percentSamplesWithThisJunction"===this.config.labelWith?void 0!==e.attributes.percent_samples_with_this_junction&&(S=e.attributes.percent_samples_with_this_junction.toFixed(0)+"%"):"motif"===this.config.labelWith&&void 0!==e.attributes.motif&&(S+=e.attributes.motif),"uniqueReadCount"===this.config.labelWithInParen?S+=" ("+u+")":"totalReadCount"===this.config.labelWithInParen?S+=" ("+l+")":"multiMappedReadCount"===this.config.labelWithInParen?h>0&&(S+=" (+"+h+")"):"numSamplesWithThisJunction"===this.config.labelWithInParen?void 0!==f&&(S+=" ("+f+")"):"percentSamplesWithThisJunction"===this.config.labelWithInParen?void 0!==e.attributes.percent_samples_with_this_junction&&(S+=" ("+e.attributes.percent_samples_with_this_junction.toFixed(0)+"%)"):"motif"===this.config.labelWithInParen&&void 0!==e.attributes.motif&&(S+=" ".concat(e.attributes.motif)),e.isVisible=!0,i.beginPath(),i.moveTo(a,y),i.bezierCurveTo(w,b,k,b,o,y),i.lineWidth=x,i.strokeStyle=d,i.stroke();var _=function(e,t,r,n){e.beginPath(),e.moveTo(t,r),e.lineTo(t-n/2,r-n),e.lineTo(t+n/2,r-n),e.lineTo(t,r),e.closePath(),e.fill()};if(e.attributes.left_shape||e.attributes.right_shape){i.fillStyle=d;var C=i.lineWidth>2?10:7;e.attributes.left_shape&&_(i,a,y,C),e.attributes.right_shape&&_(i,o,y,C)}i.fillText(S,s-i.measureText(S).width/2,(7*b+m)/8)}}var Vk=new Set(["nonsense","missense","stop-loss","frameshift","cds-indel"]),Wk=new Set(["coding-synon"]),Gk=new Set(["splice-3","splice-5"]),$k=new Set(["untranslated-5","untranslated-3"]);function Zk(e,t,r,n,i){var a,o,s,c,u=Pk(e,t,r),h=this.margin,l=this.snpColors.length;switch(a="squished"===this.displayMode?this.squishedRowHeight:this.expandedRowHeight,this.colorBy){case"function":c=e.func,o=c.split(",").map((function(e){return Vk.has(e)||Gk.has(e)?l-1:Wk.has(e)?l-2:$k.has(e)?l-3:0})).reduce((function(e,t){return Math.max(e,t)}));break;case"class":o="deletion"===(s=e.class)?l-1:"mnp"===s?l-2:"microsatellite"===s||"named"===s?l-3:0}i.fillStyle=this.snpColors[o],i.fillRect(u.px,h,u.pw,a)}var Yk=1e-4*Number.MIN_SAFE_INTEGER,Xk={A:"T",C:"G",G:"C",T:"A"},Kk={TTT:"F",TTC:"F",TTA:"L",TTG:"L",CTT:"L",CTC:"L",CTA:"L",CTG:"L",ATT:"I",ATC:"I",ATA:"I",ATG:"M",GTT:"V",GTC:"V",GTA:"V",GTG:"V",TCT:"S",TCC:"S",TCA:"S",TCG:"S",CCT:"P",CCC:"P",CCA:"P",CCG:"P",ACT:"T",ACC:"T",ACA:"T",ACG:"T",GCT:"A",GCC:"A",GCA:"A",GCG:"A",TAT:"Y",TAC:"Y",TAA:"STOP",TAG:"STOP",CAT:"H",CAC:"H",CAA:"Q",CAG:"Q",AAT:"N",AAC:"N",AAA:"K",AAG:"K",GAT:"D",GAC:"D",GAA:"E",GAG:"E",TGT:"C",TGC:"C",TGA:"STOP",TGG:"W",CGT:"R",CGC:"R",CGA:"R",CGG:"R",AGT:"S",AGC:"S",AGA:"R",AGG:"R",GGT:"G",GGC:"G",GGA:"G",GGG:"G"},Qk=function(){function e(t,r){mr(this,e),this.type="sequence",this.browser=r,this.removable=!1,this.config=t,this.name="",this.id="sequence",this.sequenceType=t.sequenceType||"dna",this.height=25,this.disableButtons=!1,this.order=t.order||Yk,this.ignoreTrackMenu=!1,this.reversed=!1,this.frameTranslate=!1}var t;return yr(e,[{key:"menuItemList",value:function(){var e=this;return[{name:this.reversed?"Forward":"Reverse",click:function(){e.reversed=!e.reversed,e.trackView.repaintViews()}},{name:this.frameTranslate?"Close Translation":"Three-frame Translate",click:function(){if(e.frameTranslate=!e.frameTranslate,e.frameTranslate){var t,r=Nr(e.trackView.viewports);try{for(r.s();!(t=r.n()).done;){t.value.setContentHeight(115)}}catch(e){r.e(e)}finally{r.f()}e.trackView.setTrackHeight(115)}else{var n,i=Nr(e.trackView.viewports);try{for(i.s();!(n=i.n()).done;){n.value.setContentHeight(25)}}catch(e){i.e(e)}finally{i.f()}e.trackView.setTrackHeight(25)}e.trackView.repaintViews()}}]}},{key:"translateSequence",value:function(e){for(var t=[[],[],[]],r=0,n=[0,1,2];r<n.length;r++)for(var i,a,o=n[r],s=o;e.length-s>=3;)i={},a=e.slice(s,s+3),this.reversed&&(a=a.split("").reverse().join("")),i.codons=a,i.aminoA=Kk[a.toUpperCase()],t[o].push(i),i=null,s+=3;return t}},{key:"getFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n,i){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i&&i>1)){e.next=4;break}return e.abrupt("return",null);case 4:return e.next=6,this.browser.genome.sequence.getSequence(t,r,n);case 6:return a=e.sent,e.abrupt("return",{bpStart:r,sequence:a});case 8:case"end":return e.stop()}}),e,this)}))),function(e,r,n,i){return t.apply(this,arguments)})},{key:"draw",value:function(e){var t=e.context;if(e.features){for(var r=e.features.sequence,n=e.features.bpStart,i=1+e.bpStart+e.pixelWidth*e.bpPerPixel,a=n;a<=i;a++){var o=Math.floor(a-n);if(o<r.length){var s=r[o];this.reversed&&(s=Xk[s.toUpperCase()]);var c=a-e.bpStart,u=c/e.bpPerPixel,h=(c+1)/e.bpPerPixel,l=this.fillColor(s);if(e.bpPerPixel>.1)Jp.fillRect(t,u,5,h-u,10,{fillStyle:l});else{var f=.5*(u+h-t.measureText(s).width);Jp.strokeText(t,s,f,15,{strokeStyle:l})}}}if(this.frameTranslate){var p;p=this.reversed?(p=r.split("").map((function(e){return Xk[e]}))).join(""):r;var d,g=15,v=this.translateSequence(p),m=Nr(v);try{for(m.s();!(d=m.n()).done;){var b=d.value,y=v.indexOf(b),w=y;g=0===y?g+10:g+30;var k,x=Nr(b);try{for(x.s();!(k=x.n()).done;){var S=k.value,_=void 0,C=b.indexOf(S),R=C+w+2*C,E=0==C%2?"rgb(160,160,160)":"rgb(224,224,224)",A=Math.floor(R/e.bpPerPixel),T=Math.floor((R+3)/e.bpPerPixel),I=Math.round((A+T)/2);S.aminoA.indexOf("STOP")>-1?(E="rgb(255, 0, 0)",_="STOP"):_=S.aminoA,"M"===S.aminoA&&(E="rgb(0, 153, 0)",_="START"),Jp.fillRect(t,A,g,T-A,25,{fillStyle:E}),e.bpPerPixel<=.1&&Jp.strokeText(t,_,I-t.measureText(_).width/2,g+15)}}catch(e){x.e(e)}finally{x.f()}}}catch(e){m.e(e)}finally{m.f()}}}}},{key:"supportsWholeGenome",value:function(){return!1}},{key:"computePixelHeight",value:function(e){return this.height}},{key:"fillColor",value:function(e){return this.color?this.color:"dna"===this.sequenceType?this.browser.nucleotideColors[e]||"gray":"rgb(0, 0, 150)"}}]),e}();function Jk(e,t,r){var n,i,a,o,s,c,u,h={font:"normal 10px Arial",textAlign:"right",strokeStyle:"black"};function l(e){return 0===e?"0":Math.abs(e)>=10?e.toFixed():Math.abs(e)>=1?e.toFixed(1):e.toFixed(2)}void 0!==this.dataRange&&void 0!==this.dataRange.max&&void 0!==this.dataRange.min&&(Jp.fillRect(e,0,0,t,r,{fillStyle:"rgb(255, 255, 255)"}),n=(u=.95*t)-8,.01,s={x:i=u,y:a=o=.01*r},Jp.strokeLine(e,n,a,i,o,h),Jp.fillText(e,l(this.dataRange.max),n+4,a+12,h),c={x:i,y:a=o=.99*r},Jp.strokeLine(e,n,a,i,o,h),Jp.fillText(e,l(this.dataRange.min),n+4,a-4,h),Jp.strokeLine(e,s.x,s.y,c.x,c.y,h))}var ex=function(e){wr(a,e);var t,r,n,i=Ar(a);function a(e,t){var r;mr(this,a),(r=i.call(this,e,t)).type="wig",r.height=e.height||50,r.featureType="numeric";var n=e.format?e.format.toLowerCase():e.format;return r.featureSource="bigwig"===n?new bk(e,t.genome):"tdf"===n?new Sk(e,t.genome):Tk(e,t.genome),r.autoscale=e.autoscale||void 0===e.max,r.autoscale||(r.dataRange={min:e.min||0,max:e.max}),r.windowFunction=e.windowFunction||"mean",r.paintAxis=Jk,r.graphType=e.graphType||"bar",r.normalize=e.normalize,r.scaleFactor=e.scaleFactor,r}return yr(a,[{key:"postInit",value:(n=vr(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:(t=e.sent)&&this.setTrackProperties(t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getFeatures",value:(r=vr(regeneratorRuntime.mark((function e(t,r,n,i){var a,o,s,c,u,h,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.featureSource.getFeatures({chr:t,start:r,end:n,bpPerPixel:i,windowFunction:this.windowFunction});case 2:if(a=e.sent,this.normalize&&this.featureSource.normalizationFactor){o=this.featureSource.normalizationFactor,s=Nr(a);try{for(s.s();!(c=s.n()).done;)c.value.value*=o}catch(e){s.e(e)}finally{s.f()}}if(this.scaleFactor){u=this.scaleFactor,h=Nr(a);try{for(h.s();!(l=h.n()).done;)l.value.value*=u}catch(e){h.e(e)}finally{h.f()}}return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,n,i){return r.apply(this,arguments)})},{key:"menuItemList",value:function(){return mb.numericDataMenuItems(this.trackView)}},{key:"getHeader",value:(t=vr(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof this.featureSource.getHeader){e.next=4;break}return e.next=3,this.featureSource.getHeader();case 3:this.header=e.sent;case 4:return e.abrupt("return",this.header);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"draw",value:function(e){var t,r=this,n=e.features,i=e.context,a=e.bpPerPixel,o=e.bpStart,s=e.pixelWidth,c=e.pixelHeight,u=o+s*a+1,h=-1,l=-1,f=this.color||"rgb(150,150,150)";"string"==typeof f&&f.startsWith("rgb(")&&(t=ei.addAlpha(f,.1));var p=function(e){return(r.dataRange.max-e)/(r.dataRange.max-r.dataRange.min)*c};if(n&&n.length>0&&(void 0===this.dataRange.min&&(this.dataRange.min=0),this.dataRange.max>this.dataRange.min)){var d,g=0==this.dataRange.min?c:p(0),v=Nr(n);try{for(v.s();!(d=v.n()).done;){var m=d.value;if(!(m.end<o)){if(m.start>u)break;var b=Math.floor((m.start-o)/a);if(!isNaN(b)){var y=p(m.value),w=Math.ceil((m.end-o)/a),k=Math.max(1,w-b),x=m.value<0&&this.altColor?this.altColor:f,S="function"==typeof x?x(m.value):x;if("points"===this.graphType){var _=this.config.pointSize||3,C=b+k/2;Jp.fillCircle(i,C,y,_/2,{fillStyle:S,strokeStyle:S})}else{var R=y-g;Math.abs(R)<1&&(R=R<0?-1:1);var E=b+k;(E>h||m.value>=0&&m.value>l||m.value<0&&m.value<1)&&Jp.fillRect(i,b,g,k,R,{fillStyle:S}),l=m.value,h=E}}}}}catch(e){v.e(e)}finally{v.f()}if(this.dataRange.min<0){var A=this.dataRange.max/(this.dataRange.max-this.dataRange.min)*e.pixelHeight;Jp.strokeLine(i,0,A,e.pixelWidth,A,{strokeStyle:t})}}if(this.config.hasOwnProperty("guideLines")){var T,I=Nr(this.config.guideLines);try{for(I.s();!(T=I.n()).done;){var L=T.value;if(L.hasOwnProperty("color")&&L.hasOwnProperty("y")&&L.hasOwnProperty("dotted")){var M=p(L.y),F={strokeStyle:L.color,strokeWidth:2};L.dotted?Jp.dashedLine(e.context,0,M,e.pixelWidth,M,5,F):Jp.strokeLine(e.context,0,M,e.pixelWidth,M,F)}}}catch(e){I.e(e)}finally{I.f()}}}},{key:"popupData",value:function(e,t){if(t||(t=this.clickedFeatures(e)),t&&t.length>0){var r=[],n=function(e,t,r){var n,i,a=0,o=e.length-1,s=a+o>>1;for(;!c(e[s],t,r)&&a<o;)t<e[s].start?o=s-1:t>e[s].end&&(a=s+1),s=a+o>>1;if(c(e[s],t,r)){if(c(n=e[s],t,0))return n;for(i=s;i-- >=0&&(c(e[i]),!r);){if(c(e[i],t,0))return e[i];for(u(e[i],t)<u(n,t)&&(n=e[i]),i=s;i++<e.length&&(c(e[i]),!r);){if(c(e[i],t,0))return e[i];u(e[i],t)<u(n,t)&&(n=e[i])}}return n}return;function c(e,t,r){return t>=e.start-r&&t<=e.end+r}function u(e,t){return Math.min(Math.abs(e.start-t),Math.abs(e.end-t))}}(t,e.genomicLocation,2*e.viewport.referenceFrame.bpPerPixel);if(n){var i=n.end-n.start==1?_n(n.start+1):_n(n.start+1)+"-"+_n(n.end);r.push({name:"Position:",value:i}),r.push({name:"Value:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",value:_n(n.value)})}return r}return[]}},{key:"supportsWholeGenome",value:function(){return"function"==typeof this.featureSource.supportsWholeGenome&&this.featureSource.supportsWholeGenome()}},{key:"dispose",value:function(){this.trackView=void 0}}]),a}(Oy);function tx(e){this.thresholds=e.thresholds,this.colors=e.colors}function rx(e){this.scale=e,this.lowColor="rgb("+e.lowR+","+e.lowG+","+e.lowB+")",this.highColor="rgb("+e.highR+","+e.highG+","+e.highB+")",this.diff=e.high-e.low}tx.prototype.getColor=function(e){var t,r=Nr(this.thresholds);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(e<n)return this.colors[this.thresholds.indexOf(n)]}}catch(e){r.e(e)}finally{r.f()}return this.colors[this.colors.length-1]},rx.prototype.getColor=function(e){var t,r=this.scale;return e<=r.low?this.lowColor:e>=r.high?this.highColor:(t=(e-r.low)/this.diff,"rgb("+Math.floor(r.lowR+t*(r.highR-r.lowR))+","+Math.floor(r.lowG+t*(r.highG-r.lowG))+","+Math.floor(r.lowB+t*(r.highB-r.lowB))+")")};var nx=function(){function e(t){mr(this,e),this.color=t}return yr(e,[{key:"getColor",value:function(){return this.color}}]),e}(),ix=function(e){wr(a,e);var t,r,n,i=Ar(a);function a(e,t){var r;return mr(this,a),(r=i.call(this,e,t)).isLog=e.isLog,r.displayMode=e.displayMode||"SQUISHED",r.maxHeight=e.maxHeight||500,r.squishedRowHeight=e.sampleSquishHeight||e.squishedRowHeight||2,r.expandedRowHeight=e.sampleExpandHeight||e.expandedRowHeight||12,r.posColorScale=e.posColorScale||new rx({low:.1,lowR:255,lowG:255,lowB:255,high:1.5,highR:255,highG:0,highB:0}),r.negColorScale=e.negColorScale||new rx({low:-1.5,lowR:0,lowG:0,lowB:255,high:-.1,highR:255,highG:255,highB:255}),e.samples?(r.sampleKeys=e.samples,r.explicitSamples=!0):r.sampleKeys=[],r.featureSource=Tk(r.config,t.genome),r.initialSort=e.sort,r}return yr(a,[{key:"postInit",value:(n=vr(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof this.featureSource.getHeader){e.next=4;break}return e.next=3,this.featureSource.getHeader();case 3:this.header=e.sent;case 4:this.header&&this.setTrackProperties(this.header);case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"menuItemList",value:function(){var e=this,t=[],r={SQUISHED:"Squish",EXPANDED:"Expand",FILL:"Fill"};return t.push("<hr/>"),t.push("Sample Height"),["SQUISHED","EXPANDED","FILL"].forEach((function(n){t.push({object:pb(r[n],n===e.displayMode),click:function(){e.displayMode=n,e.config.displayMode=n,e.trackView.checkContentHeight(),e.trackView.repaintViews()}})})),t}},{key:"getFeatures",value:(r=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.featureSource.getFeatures({chr:t,start:r,end:n});case 2:return i=e.sent,this.initialSort&&(a=this.initialSort,this.sortSamples(a.chr,a.start,a.end,a.direction,i),this.initialSort=void 0),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"draw",value:function(e){var t=this,r=(Qn(2),e.context),n=e.pixelTop,i=e.pixelWidth,a=e.pixelHeight;Jp.fillRect(r,0,e.pixelTop,i,a,{fillStyle:"rgb(255, 255, 255)"});var o=e.features;if(o&&o.length>0){void 0===t.isLog&&function(e){if(void 0===t.isLog){t.isLog=!1;var r,n=Nr(e);try{for(n.s();!(r=n.n()).done;){if(r.value.value<0)return void(t.isLog=!0)}}catch(e){n.e(e)}finally{n.f()}}}(o);var s=e.bpPerPixel,c=e.bpStart,u=c+i*s+1,h=s;this.updateSampleKeys(o);var l,f,p={};switch(this.sampleKeys.forEach((function(e,t){p[e]=t})),this.displayMode){case"FILL":l=e.pixelHeight/this.sampleKeys.length,f=0;break;case"SQUISHED":l=this.squishedRowHeight,f=0;break;default:l=this.expandedRowHeight,f=1}var d,g=e.pixelTop+e.pixelHeight,v=Nr(o);try{for(v.s();!(d=v.n()).done;){var m=d.value;if(!(m.end<c)){if(m.start>u)break;var b=m.sampleKey||m.sample;m.row=p[b];var y=n+m.row*l+f;if(!(y+l<n||y>g)){var w=m.value;t.isLog||(w=Qn(w/2));var k=Math.max(m.start,c),x=Math.round((k-c)/h),S=Math.min(m.end,u),_=Math.round((S-c)/h),C=Math.max(1,_-x),R=void 0;R=w<-.1?t.negColorScale.getColor(w):w>.1?t.posColorScale.getColor(w):"white",r.fillStyle=R;var E=l;if(l<.25){var A=.1+2*Math.abs(w);E=Math.min(1,A*l)}m.pixelRect={x:x,y:y,w:C,h:E-2*f},r.fillRect(x,y,C,E-2*f)}}}}catch(e){v.e(e)}finally{v.f()}}}},{key:"computePixelHeight",value:function(e){if(!e)return 0;var t="SQUISHED"===this.displayMode?this.squishedRowHeight:this.expandedRowHeight;return this.updateSampleKeys(e),this.sampleKeys.length*t}},{key:"sortSamples",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n,i,a){var o,s,c,u,h,l,f,p,d,g,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=4;break}return e.next=3,this.featureSource.getFeatures({chr:t,start:r,end:n});case 3:a=e.sent;case 4:if(a){e.next=6;break}return e.abrupt("return");case 6:this.updateSampleKeys(a),o={},s=n-r+1,c=Nr(a),e.prev=10,c.s();case 12:if((u=c.n()).done){e.next=26;break}if(!((h=u.value).end<r)){e.next=16;break}return e.abrupt("continue",24);case 16:if(!(h.start>n)){e.next=18;break}return e.abrupt("break",26);case 18:l=Math.max(r,h.start),f=Math.min(n,h.end),p=(f-l)/s,d=h.sampleKey||h.sample,g=o[d]||0,o[d]=g+p*h.value;case 24:e.next=12;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(10),c.e(e.t0);case 31:return e.prev=31,c.f(),e.finish(31);case 34:v="ASC"===i?1:-1,this.sampleKeys.sort((function(e,t){var r=o[e],n=o[t];return r||(r=v*Number.MAX_VALUE),n||(n=v*Number.MAX_VALUE),r===n?0:r>n?v:-1*v})),this.trackView.repaintViews();case 37:case"end":return e.stop()}}),e,this,[[10,28,31,34]])}))),function(e,r,n,i,a){return t.apply(this,arguments)})},{key:"clickedFeatures",value:function(e){var t,r,n=Tr(kr(a.prototype),"clickedFeatures",this).call(this,e);return t=n,r=e.y,t.filter((function(e){var t=e.pixelRect;return t&&r>=t.y&&r<=t.y+t.h}))}},{key:"popupData",value:function(e,t){t||(t=this.clickedFeatures(e));var r,n=[],i=Nr(t);try{for(i.s();!(r=i.n()).done;)r.value}catch(e){i.e(e)}finally{i.f()}return t.forEach((function(e){!function(e,t){var r,n=new Set(["row","color","sampleKey","uniqueSampleKey","uniquePatientKey"]);e.hasOwnProperty("realChr")?((r=Object.assign({},e)).chr=e.realChr,r.start=e.realStart,r.end=e.realEnd,delete r.realChr,delete r.realStart,delete r.realEnd):r=e;for(var i=0,a=Object.keys(r);i<a.length;i++){var o=a[i];!n.has(o)&&wm(r[o])&&t.push({name:o,value:r[o]})}}(e,n)})),n}},{key:"contextMenuItemList",value:function(e){var t=this,r=e.viewport.referenceFrame,n=e.genomicLocation,i=this.config.sort?"ASC"===this.config.sort.direction?"DESC":"ASC":"DESC",a=r.toBP(2.5);return[{label:"Sort by value",click:function(r){var o={direction:i,chr:e.viewport.referenceFrame.chr,start:n-a,end:n+a};!function(r){var n=e.viewport.getCachedFeatures();t.sortSamples(r.chr,r.start,r.end,r.direction,n)}(o),t.config.sort=o}}]}},{key:"supportsWholeGenome",value:function(){return(!1===this.config.indexed||!this.config.indexURL)&&!1!==this.config.supportsWholeGenome}},{key:"updateSampleKeys",value:function(e){if(!this.explicitSamples){var t,r=new Set(this.sampleKeys),n=Nr(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=i.sampleKey||i.sample;r.has(a)||(r.add(a),this.sampleKeys.push(a))}}catch(e){n.e(e)}finally{n.f()}}}}]),a}(Oy),ax=function(e){wr(i,e);var t,r,n=Ar(i);function i(e,t){if(mr(this,i),!e.tracks)throw Error("Error: no tracks defined for merged track"+e);return n.call(this,e,t)}return yr(i,[{key:"postInit",value:(r=vr(regeneratorRuntime.mark((function e(){var t,r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.tracks=[],t=Nr(this.config.tracks),e.prev=2,t.s();case 4:if((r=t.n()).done){e.next=14;break}return(n=r.value).type||_m(n),n.isMergedTrack=!0,e.next=10,this.browser.createTrack(n);case 10:(i=e.sent)?(i.autoscale=!1,this.tracks.push(i)):console.warn("Could not create track "+n);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),t.e(e.t0);case 19:return e.prev=19,t.f(),e.finish(19);case 22:Object.defineProperty(this,"height",{get:function(){return this._height},set:function(e){this._height=e;var t,r=Nr(this.tracks);try{for(r.s();!(t=r.n()).done;){var n=t.value;n.height=e,n.config.height=e}}catch(e){r.e(e)}finally{r.f()}}}),this.height=this.config.height||100;case 24:case"end":return e.stop()}}),e,this,[[2,16,19,22]])}))),function(){return r.apply(this,arguments)})},{key:"getFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n,i){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.tracks.map((function(e){return e.getFeatures(t,r,n,i)})),e.abrupt("return",Promise.all(a));case 2:case"end":return e.stop()}}),e,this)}))),function(e,r,n,i){return t.apply(this,arguments)})},{key:"draw",value:function(e){var t,r,n,i,a;for(n=e.features,a=function(e,t){var r=0,n=-Number.MAX_VALUE;return t.forEach((function(e,t){e.forEach((function(e){void 0===e.value||Number.isNaN(e.value)||(r=Math.min(r,e.value),n=Math.max(n,e.value))}))})),{min:r,max:n}}(e.referenceFrame.chr,n),t=0,r=this.tracks.length;t<r;t++)(i=Object.assign({},e)).features=n[t],this.tracks[t].dataRange=a,this.tracks[t].draw(i)}},{key:"paintAxis",value:function(e,t,r){var n,i,a;for(!0,n=0,i=this.tracks.length;n<i;n++)if("function"==typeof(a=this.tracks[n]).paintAxis){a.paintAxis(e,t,r);break}}},{key:"popupData",value:function(e,t){var r=t||e.viewport.getCachedFeatures();if(r&&r.length===this.tracks.length){for(var n=[],i=0;i<this.tracks.length;i++){i>0&&n.push("<hr/>"),n.push("<b>".concat(this.tracks[i].name,"</b>"));var a=this.tracks[i].popupData(e,r[i]);n.push.apply(n,Lr(a))}return n}}}]),i}(Oy);var ox=function(){function e(t){mr(this,e),this.paired=!0,this.firstAlignment=t,this.chr=t.chr,this.readName=t.readName,t.start<t.mate.position?(this.start=t.start,this.scStart=t.scStart,this.connectingStart=t.start+t.lengthOnRef,this.connectingEnd=t.mate.position):(this.start=t.mate.position,this.scStart=this.start,this.connectingStart=t.mate.position,this.connectingEnd=t.start),this.end=Math.max(t.mate.position,t.start+t.lengthOnRef),this.lengthOnRef=this.end-this.start;var r=Math.max(this.end,t.scStart+t.scLengthOnRef);this.scLengthOnRef=r-this.scStart}return yr(e,[{key:"setSecondAlignment",value:function(e){this.secondAlignment=e;var t=this.firstAlignment;e.start>t.start?this.connectingEnd=e.start:this.connectingStart=e.start+e.lengthOnRef,this.start=Math.min(t.start,e.start),this.end=Math.max(t.start+t.lengthOnRef,e.start+e.lengthOnRef),this.lengthOnRef=this.end-this.start,this.scStart=Math.min(t.scStart,e.scStart);var r=Math.max(t.scStart+t.scLengthOnRef,e.scStart+e.scLengthOnRef);this.scLengthOnRef=r-this.scStart}},{key:"containsLocation",value:function(e,t){var r=t?this.scStart:this.start,n=t?this.scLengthOnRef:this.lengthOnRef;return e>=r&&e<=r+n}},{key:"alignmentContaining",value:function(e,t){return this.firstAlignment.containsLocation(e,t)?this.firstAlignment:this.secondAlignment&&this.secondAlignment.containsLocation(e,t)?this.secondAlignment:void 0}},{key:"popupData",value:function(e){var t=this.firstAlignment.popupData(e);return this.secondAlignment&&(t.push("-------------------------------"),t=t.concat(this.secondAlignment.popupData(e))),t}},{key:"isPaired",value:function(){return!0}},{key:"firstOfPairStrand",value:function(){return this.firstAlignment.isFirstOfPair()?this.firstAlignment.strand:this.secondAlignment&&this.secondAlignment.isFirstOfPair()?this.secondAlignment.strand:this.firstAlignment.mate.strand}}]),e}(),sx=Sn,cx=function(e){return e.split("").reduce((function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e}),0)},ux=function(){function e(){mr(this,e),this.alignments=[],this.score=void 0}return yr(e,[{key:"findAlignment",value:function(e){for(var t,r=function(e,t){return t>=e.start&&t<e.start+e.lengthOnRef},n=0;n<this.alignments.length;n++){var i=this.alignments[n];if(e>=i.start&&e<i.start+i.lengthOnRef){i.paired?i.firstAlignment&&r(i.firstAlignment,e)?t=i.firstAlignment:i.secondAlignment&&r(i.secondAlignment,e)&&(t=i.secondAlignment):t=i;break}}return t}},{key:"updateScore",value:function(e,t){this.score=this.calculateScore(e,t)}},{key:"calculateScore",value:function(e,t){var r=e.position,n=e.sortOption,i=e.direction,a=e.tag;n||(n="BASE");var o,s=this.findAlignment(r);if(void 0===s)return i?Number.MAX_VALUE:-Number.MAX_VALUE;switch(n){case"NUCLEOTIDE":case"BASE":var c=s.readBaseAt(r),u=s.readBaseQualityAt(r);return c?function(e,t,r,n){var i,a=Math.floor(n)-r.start;a<r.sequence.length&&(i=r.sequence.charAt(a));if(!i)return;if(void 0===e)return Number.MAX_VALUE;if("N"===e)return 2;if(i===e||"="===e)return 4-t/1e3;if("X"===e||i!==e){var o=Math.floor(n)-r.coverageMap.bpStart;if(o>0&&o<r.coverageMap.coverage.length){var s=r.coverageMap.coverage[o];return-(s["pos"+e]+s["neg"+e]+t/1e3)}return-(1+t/1e3)}return 0}(c,u,t,r):i?Number.MAX_VALUE:-Number.MAX_VALUE;case"STRAND":return s.strand?1:-1;case"START":return s.start;case"TAG":var h=s.tags()[a];return void 0!==h?sx(h)?cx(h):h:Number.MAX_VALUE;case"INSERT_SIZE":return-Math.abs(s.fragmentLength);case"GAP_SIZE":return-s.gapSizeAt(r);case"MATE_CHR":return(o=s.mate)?o.chr===s.chr?Number.MAX_VALUE-1:cx(o.chr):Number.MAX_VALUE;case"MQ":return void 0===s.mq?Number.MAX_VALUE:-s.mq;default:return Number.MAX_VALUE}}}]),e}();function hx(e){return e.isPaired()&&e.mate&&e.isMateMapped()&&e.chr===e.mate.chr&&(e.isFirstOfPair()||e.isSecondOfPair())&&!(e.isSecondary()||e.isSupplementary())}function lx(e){var t,r=[],n=Nr(e);try{for(n.s();!(t=n.n()).done;){var i,a=Nr(t.value.alignments);try{for(a.s();!(i=a.n()).done;){var o=i.value;o instanceof ox?(o.firstAlignment&&r.push(o.firstAlignment),o.secondAlignment&&r.push(o.secondAlignment)):r.push(o)}}catch(e){a.e(e)}finally{a.f()}}}catch(e){n.e(e)}finally{n.f()}return r}function fx(e,t,r,n){if(e){if(0===e.length)return[];e.sort((function(e,t){return n?e.scStart-t.scStart:e.start-t.start}));var i,a=e[0],o=Math.max(t,n?a.scStart:a.start),s=o,c=[],u=Nr(e);try{for(u.s();!(i=u.n()).done;){var h=i.value,l=n?h.scStart:h.start,f=Math.max(0,l-o);void 0===c[f]&&(c[f]=[]),c[f].push(h)}}catch(e){u.e(e)}finally{u.f()}var p=0,d=0,g=[];try{for(;p<e.length;){for(var v=new ux;s<=r;){for(var m=void 0,b=void 0;!m&&s<=r;)void 0===c[b=s-o]?++s:m=c[b];if(!m)break;var y=m.pop();0===m.length&&(c[b]=void 0),v.alignments.push(y),s=n?y.scStart+y.scLengthOnRef+2:y.start+y.lengthOnRef+2,++p}if(v.alignments.length>0&&g.push(v),s=o,p===d)break;d=p}}catch(e){throw console.error(e),e}return g}}var px=function(){function e(t,r,n,i,a,o,s){mr(this,e),this.chr=t,this.start=Math.floor(r),this.end=Math.ceil(n),this.length=n-r,this.alleleFreqThreshold=void 0===s?.2:s,this.coverageMap=new gx(t,r,n,this.alleleFreqThreshold),this.alignments=[],this.downsampledIntervals=[],this.samplingWindowSize=void 0===i?100:i,this.samplingDepth=void 0===a?1e3:a,this.pairsSupported=void 0===o||o,this.paired=!1,this.pairsCache={},this.downsampledReads=new Set,this.currentBucket=new dx(this.start,this.start+this.samplingWindowSize,this),this.filter=function(e){return e.isMapped()&&!e.isFailsVendorQualityCheck()},this.pairedEndStats=new bx}return yr(e,[{key:"push",value:function(e){!1!==this.filter(e)&&(e.isPaired()&&this.pairedEndStats.push(e),this.coverageMap.incCounts(e),this.pairsSupported&&this.downsampledReads.has(e.readName)||(e.start>=this.currentBucket.end&&(this.finishBucket(),this.currentBucket=new dx(e.start,e.start+this.samplingWindowSize,this)),this.currentBucket.addAlignment(e)))}},{key:"forEach",value:function(e){this.alignments.forEach(e)}},{key:"finish",value:function(){void 0!==this.currentBucket&&this.finishBucket(),this.alignments.sort((function(e,t){return e.start-t.start})),this.pairsCache=void 0,this.downsampledReads=void 0,this.pairedEndStats.compute()}},{key:"contains",value:function(e,t,r){return this.chr===e&&this.start<=t&&this.end>=r}},{key:"hasDownsampledIntervals",value:function(){return this.downsampledIntervals&&this.downsampledIntervals.length>0}},{key:"finishBucket",value:function(){this.alignments=this.alignments.concat(this.currentBucket.alignments),this.currentBucket.downsampledCount>0&&this.downsampledIntervals.push(new mx(this.currentBucket.start,this.currentBucket.end,this.currentBucket.downsampledCount)),this.paired=this.paired||this.currentBucket.paired}},{key:"setViewAsPairs",value:function(e){var t;t=e?function(e){var t,r={},n=[],i=Nr(e);try{for(i.s();!(t=i.n()).done;){var a,o=Nr(t.value.alignments);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(hx(s)){var c=r[s.readName];c?(c.setSecondAlignment(s),r[s.readName]=void 0):(c=new ox(s),r[s.readName]=c,n.push(c))}else n.push(s)}}catch(e){o.e(e)}finally{o.f()}}}catch(e){i.e(e)}finally{i.f()}return n}(this.packedAlignmentRows):lx(this.packedAlignmentRows),this.packedAlignmentRows=fx(t,this.start,this.end)}},{key:"setShowSoftClips",value:function(e){var t=this.allAlignments();this.packedAlignmentRows=fx(t,this.start,this.end,e)}},{key:"allAlignments",value:function(){var e,t=[],r=Nr(this.packedAlignmentRows);try{for(r.s();!(e=r.n()).done;){var n,i=Nr(e.value.alignments);try{for(i.s();!(n=i.n()).done;){var a=n.value;t.push(a)}}catch(e){i.e(e)}finally{i.f()}}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"getMax",value:function(e,t){return this.coverageMap.getMax(e,t)}}]),e}(),dx=function(){function e(t,r,n){mr(this,e),this.start=t,this.end=r,this.alignments=[],this.downsampledCount=0,this.samplingDepth=n.samplingDepth,this.pairsSupported=n.pairsSupported,this.downsampledReads=n.downsampledReads,this.pairsCache=n.pairsCache}return yr(e,[{key:"addAlignment",value:function(e){var t,r,n;if(this.pairsSupported&&hx(e)&&(n=this.pairsCache[e.readName]))return n.setSecondAlignment(e),void(this.pairsCache[e.readName]=void 0);this.alignments.length<this.samplingDepth?this.pairsSupported&&hx(e)?(n=new ox(e),this.paired=!0,this.pairsCache[e.readName]=n,this.alignments.push(n)):this.alignments.push(e):((t=Math.floor(Math.random()*(this.samplingDepth+this.downsampledCount-1)))<this.samplingDepth?(r=this.alignments[t],this.pairsSupported&&hx(e)?(void 0!==this.pairsCache[r.readName]&&(this.pairsCache[r.readName]=void 0),n=new ox(e),this.paired=!0,this.pairsCache[e.readName]=n,this.alignments[t]=n):this.alignments[t]=e,this.downsampledReads.add(r.readName)):this.downsampledReads.add(e.readName),this.downsampledCount++)}}]),e}(),gx=function(){function e(t,r,n,i){mr(this,e),this.chr=t,this.bpStart=r,this.length=n-r,this.coverage=new Array(this.length),this.maximum=0,this.threshold=i,this.qualityWeight=!0}return yr(e,[{key:"getMax",value:function(e,t){for(var r=0,n=this.coverage.length,i=0;i<n;i++){var a=this.bpStart+i;if(a>t)break;var o=this.coverage[i];a>=e&&o&&(r=Math.max(r,o.total))}return r}},{key:"incCounts",value:function(e){var t=this;if(void 0===e.blocks?h(e):e.blocks.forEach((function(e){h(e)})),e.gaps){var r,n=Nr(e.gaps);try{for(n.s();!(r=n.n()).done;){var i=r.value;if("D"===i.type)for(var a=i.start-t.bpStart,o=a;o<a+i.len;o++)o<0||(this.coverage[o]||(this.coverage[o]=new vx(t.threshold)),this.coverage[o].del++)}}catch(e){n.e(e)}finally{n.f()}}if(e.insertions){var s,c=Nr(e.insertions);try{for(c.s();!(s=c.n()).done;){var u=s.value.start-this.bpStart;u<0||(this.coverage[u]||(this.coverage[u]=new vx(t.threshold)),this.coverage[u].ins++)}}catch(e){c.e(e)}finally{c.f()}}function h(r){if("S"!==r.type)for(var n=e.seq,i=e.qual,a=r.seqOffset,o=r.start-t.bpStart,s=0;s<r.len;o++,s++){t.coverage[o]||(t.coverage[o]=new vx(t.threshold));var c=n.charAt(a+s),u=e.strand?"pos"+c:"neg"+c,h=i&&a+s<i.length?i[a+s]:30;t.coverage[o][u]+=1,t.coverage[o]["qual"+c]+=h,t.coverage[o].total+=1,t.coverage[o].qual+=h,t.maximum=Math.max(t.coverage[o].total,t.maximum)}}}}]),e}(),vx=function(){function e(t){mr(this,e),this.qualityWeight=!0,this.posA=0,this.negA=0,this.posT=0,this.negT=0,this.posC=0,this.negC=0,this.posG=0,this.negG=0,this.posN=0,this.negN=0,this.pos=0,this.neg=0,this.qualA=0,this.qualT=0,this.qualC=0,this.qualG=0,this.qualN=0,this.qual=0,this.total=0,this.del=0,this.ins=0,this.threshold=t}return yr(e,[{key:"isMismatch",value:function(e){for(var t=this.threshold*(this.qualityWeight&&this.qual?this.qual:this.total),r=0,n=0,i=["A","T","C","G"];n<i.length;n++){var a=i[n];a!==e&&(r+=this.qualityWeight&&this.qual?this["qual"+a]:this["pos"+a]+this["neg"+a])}return r>=t}}]),e}(),mx=function(){function e(t,r,n){mr(this,e),this.start=t,this.end=r,this.counts=n}return yr(e,[{key:"popupData",value:function(e){return[{name:"start",value:this.start+1},{name:"end",value:this.end},{name:"# downsampled:",value:this.counts}]}}]),e}(),bx=function(){function e(t,r){mr(this,e),this.totalCount=0,this.frCount=0,this.rfCount=0,this.ffCount=0,this.sumF=0,this.sumF2=0}return yr(e,[{key:"push",value:function(e){if(e.isProperPair()){var t=Math.abs(e.fragmentLength);this.sumF+=t,this.sumF2+=t*t;var r=e.pairOrientation;if("string"==typeof r&&4===r.length)switch(""+r.charAt(0)+r.charAt(2)){case"FF":case"RR":this.ffCount++;break;case"FR":this.frCount++;break;case"RF":this.rfCount++}this.totalCount++}}},{key:"compute",value:function(){if(this.totalCount>100){this.ffCount/this.totalCount>.9?this.orienation="ff":this.frCount/this.totalCount>.9?this.orienation="fr":this.rfCount/this.totalCount>.9&&(this.orienation="rf");var e=this.sumF/this.totalCount,t=Math.sqrt((this.totalCount*this.sumF2-this.sumF*this.sumF)/(this.totalCount*this.totalCount));this.lowerFragmentLength=e-3*t,this.upperFragmentLength=e+3*t}}}]),e}(),yx={c:1,C:1,s:2,S:2,i:4,I:4,f:4},wx=function(){function e(){mr(this,e),this.hidden=!1}return yr(e,[{key:"isMapped",value:function(){return 0==(4&this.flags)}},{key:"isPaired",value:function(){return 0!=(1&this.flags)}},{key:"isProperPair",value:function(){return 0!=(2&this.flags)}},{key:"isFirstOfPair",value:function(){return 0!=(64&this.flags)}},{key:"isSecondOfPair",value:function(){return 0!=(128&this.flags)}},{key:"isSecondary",value:function(){return 0!=(256&this.flags)}},{key:"isSupplementary",value:function(){return 0!=(2048&this.flags)}},{key:"isFailsVendorQualityCheck",value:function(){return 0!=(512&this.flags)}},{key:"isDuplicate",value:function(){return 0!=(1024&this.flags)}},{key:"isMateMapped",value:function(){return 0==(8&this.flags)}},{key:"isNegativeStrand",value:function(){return 0!=(16&this.flags)}},{key:"isMateNegativeStrand",value:function(){return 0!=(32&this.flags)}},{key:"tags",value:function(){return this.tagDict||(this.tagBA?(this.tagDict=function(e){var t=0,r=e.length,n={};for(;t<r;){var i=String.fromCharCode(e[t])+String.fromCharCode(e[t+1]);t+=2;var a=String.fromCharCode(e[t++]),o=void 0;if("A"===a)o=String.fromCharCode(e[t]),t++;else if("i"===a||"I"===a)o=xx(e,t),t+=4;else if("c"===a||"C"===a)o=e[t],t++;else if("s"===a||"S"===a)o=Sx(e,t),t+=2;else if("f"===a)o=_x(e,t),t+=4;else if("Z"===a)for(o="";;){var s=e[t++];if(0===s)break;o+=String.fromCharCode(s)}else{if("B"!==a){o="Error unknown type: "+a,n[i]=o;break}var c=String.fromCharCode(e[t++]),u=yx[c];if(void 0===u){n[i]="Error: unknown element type '".concat(c,"'");break}t+=4+xx(e,t)*u,o="[not shown]"}n[i]=o}return n}(this.tagBA),this.tagBA=void 0):this.tagDict={}),this.tagDict}},{key:"containsLocation",value:function(e,t){var r=t?this.scStart:this.start,n=t?this.scLengthOnRef:this.lengthOnRef;return e>=r&&e<=r+n}},{key:"popupData",value:function(e){var t=[];if(e=Math.floor(e),this.insertions){var r,n=this.seq,i=Nr(this.insertions);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.start;if(e===o||e===o-1)return t.push({name:"Insertion",value:n.substr(a.seqOffset,a.len)}),t.push({name:"Location",value:o}),t}}catch(e){i.e(e)}finally{i.f()}}t.push({name:"Read Name",value:this.readName}),t.push("<hr>"),t.push({name:"Alignment Start",value:_n(1+this.start),borderTop:!0}),t.push({name:"Read Strand",value:!0===this.strand?"(+)":"(-)",borderTop:!0}),t.push({name:"Cigar",value:this.cigar}),t.push({name:"Mapped",value:h(this.isMapped())}),t.push({name:"Mapping Quality",value:this.mq}),t.push({name:"Secondary",value:h(this.isSecondary())}),t.push({name:"Supplementary",value:h(this.isSupplementary())}),t.push({name:"Duplicate",value:h(this.isDuplicate())}),t.push({name:"Failed QC",value:h(this.isFailsVendorQualityCheck())}),this.isPaired()&&(t.push("<hr>"),t.push({name:"First in Pair",value:!this.isSecondOfPair(),borderTop:!0}),t.push({name:"Mate is Mapped",value:h(this.isMateMapped())}),this.pairOrientation&&t.push({name:"Pair Orientation",value:this.pairOrientation}),this.isMateMapped()&&(t.push({name:"Mate Chromosome",value:this.mate.chr}),t.push({name:"Mate Start",value:this.mate.position+1}),t.push({name:"Mate Strand",value:!0===this.mate.strand?"(+)":"(-)"}),t.push({name:"Insert Size",value:this.fragmentLength}))),t.push("<hr>");var s=this.tags(),c=!0;for(var u in s)s.hasOwnProperty(u)&&(c?(t.push({name:u,value:s[u],borderTop:!0}),c=!1):t.push({name:u,value:s[u]}));return t.push("<hr>"),t.push({name:"Genomic Location: ",value:_n(1+e)}),t.push({name:"Read Base:",value:this.readBaseAt(e)}),t.push({name:"Base Quality:",value:this.readBaseQualityAt(e)}),t;function h(e){return e?"Yes":"No"}}},{key:"readBaseAt",value:function(e){var t=kx(this.blocks,e);if(t){if("*"===this.seq)return"*";var r=t.seqIndexAt(e);return this.seq[r]}}},{key:"readBaseQualityAt",value:function(e){var t=kx(this.blocks,e);if(t){if("*"===this.qual)return 30;var r=t.seqIndexAt(e);return r>=0&&this.qual&&r<this.qual.length?this.qual[r]:30}}},{key:"gapSizeAt",value:function(e){if(this.gaps){var t,r=Nr(this.gaps);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(e>=n.start&&e<n.start+n.len)return n.len}}catch(e){r.e(e)}finally{r.f()}}return 0}}]),e}();function kx(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(t>=n.start&&t<n.start+n.len)return n}}function xx(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function Sx(e,t){return e[t+1]<<8|e[t]}function _x(e,t){return new DataView(e.buffer).getFloat32(t,!0)}var Cx=function(){function e(t){mr(this,e),t&&Object.assign(this,t)}return yr(e,[{key:"seqIndexAt",value:function(e){return Math.floor(e)-this.start+this.seqOffset}}]),e}(),Rx=function(){function e(t){mr(this,e),t||(t={}),this.vendorFailed=void 0===t.vendorFailed||t.vendorFailed,this.duplicates=void 0===t.duplicates||t.duplicates,this.secondary=t.secondary||!1,this.supplementary=t.supplementary||!1,this.mqThreshold=void 0===t.mqThreshold?0:t.mqThreshold,t.readgroups&&(this.readgroups=new Set(t.readgroups))}return yr(e,[{key:"pass",value:function(e){if(this.vendorFailed&&e.isFailsVendorQualityCheck())return!1;if(this.duplicates&&e.isDuplicate())return!1;if(this.secondary&&e.isSecondary())return!1;if(this.supplementary&&e.isSupplementary())return!1;if(e.mq<this.mqThreshold)return!1;if(this.readgroups){var t=e.tags().RG;return this.readgroups.has(t)}return!0}}]),e}(),Ex=["=","A","C","x","G","x","x","x","T","x","x","x","x","x","x","N"],Ax=["M","I","D","N","S","H","P","=","X","?","?","?","?","?","?","?"],Tx=Mx(new Uint8Array([66,65,77,1]),0),Ix={readHeader:function(e,t,r){return Lm.loadArrayBuffer(e,t).then((function(e){var t;return t=cm(e),Ix.decodeBamHeader(t,r)}))},decodeBamHeader:function(e,t){var r,n,i,a,o;if((r=Mx(e,0))!==Tx)throw new Error("BAM header errror: bad magic number.  This could be caused by either a corrupt or missing file.");n=Mx(e,4);for(var s=0;s<n;++s)String.fromCharCode(e[s+8]);var c=Mx(e,n+8),u=n+12;for(i={},a=[],o={},s=0;s<c;++s){for(var h=Mx(e,u),l="",f=0;f<h-1;++f)l+=String.fromCharCode(e[u+4+f]);Mx(e,u+h+4);i[l]=s,a[s]=l,t&&(o[t.getChromosomeName(l)]=l),u=u+8+h}return{magicNumber:r,size:u,chrNames:a,chrToIndex:i,chrAliasTable:o}},bam_tag2cigar:function(e,t,r,n,i,a){function o(e){return"C"===e||"c"===e||"A"===e?1:"S"===e||"s"===e?2:"I"===e||"i"===e||"f"===e?4:0}if(1!==a.length||i.start<0)return!1;for(var s=r+(n+1>>1)+n;s+4<t;){if("CG"===String.fromCharCode(e[s])+String.fromCharCode(e[s+1]))break;var c=String.fromCharCode(e[s+2]);if("B"===c)s+=8+o(c=String.fromCharCode(e[s+3]))*Mx(e,s+4);else if("Z"===c||"H"===c)for(s+=3;0!==e[s++];);else s+=3+o(c)}if(s>=t)return!1;if("B"!==String.fromCharCode(e[s+2])||"I"!==String.fromCharCode(e[s+3]))return!1;var u=Mx(e,s+4),h=s+8;if(h+4*u>t)return!1;var l="",f=0;a.length=0,s=h;for(var p=0;p<u;++p,s+=4){var d=Mx(e,s),g=d>>4,v=Ax[15&d];"M"!==v&&"EQ"!==v&&"X"!==v&&"D"!==v&&"N"!==v&&"="!==v||(f+=g),l=l+g+v,a.push({len:g,ltr:v})}return i.cigar=l,i.lengthOnRef=f,!0},decodeBamRecords:function(e,t,r,n,i,a,o,s){for(;t<e.length;){var c=t+Mx(e,t)+4,u=new wx,h=Mx(e,t+4),l=Mx(e,t+8);if(c>e.length)return;if(h<0)t=c;else{if(void 0!==i&&(h>i||l>o))return!0;if(void 0!==i&&h<i)t=c;else{for(var f=Mx(e,t+12),p=(65280&f)>>8,d=255&f,g=Mx(e,t+16),v=(4294901760&g)>>16,m=65535&g,b=Mx(e,t+20),y=Mx(e,t+24),w=Mx(e,t+28),k=Mx(e,t+32),x=[],S=0;S<d-1;++S)x.push(String.fromCharCode(e[t+36+S]));x=x.join("");for(var _=0,C="",R=t+36+d,E=[],A=void 0,T=0;T<m;++T){var I=Mx(e,R),L=I>>4,M=Ax[15&I];"M"!==M&&"EQ"!==M&&"X"!==M&&"D"!==M&&"N"!==M&&"="!==M||(_+=L),C=C+L+M,R+=4,A={len:L,ltr:M},E.push(A)}if(u.chr=n[h],u.start=l,u.flags=v,u.strand=!(16&v),u.readName=x,u.cigar=C,u.lengthOnRef=_,u.fragmentLength=k,u.mq=p,Ix.bam_tag2cigar(e,c,R,b,u,E),u.end=u.start+u.lengthOnRef,u.end<a)t=c;else{for(var F=[],D=b+1>>1,O=0;O<D;++O){var B=e[R+O];F.push(Ex[(240&B)>>4]),F.push(Ex[15&B])}F=F.slice(0,b).join(""),R+=D;for(var N=[],P=0;P<b;++P)N.push(e[R+P]);R+=b,y>=0&&(u.mate={chr:n[y],position:w,strand:!(32&v)}),u.seq=F,u.qual=N,u.tagBA=new Uint8Array(e.buffer.slice(R,c)),this.setPairOrientation(u),(void 0===s||s.pass(u))&&(Lx(u,E),r.push(u)),t=c}}}}},decodeSamRecords:function(e,t,r,n,i,a){var o,s,c,u,h,l,f,p,d,g;for(u=(o=Cn(e)).length,!1,s=0;s<u;s++)if(h=o[s].split("\t"),(d=new wx).chr=h[2],d.start=Number.parseInt(h[3])-1,d.flags=Number.parseInt(h[1]),d.readName=h[0],d.strand=!(16&d.flags),d.mq=Number.parseInt(h[4]),d.cigar=h[5],d.fragmentLength=Number.parseInt(h[8]),d.seq=h[9],"*"!==d.chr&&d.isMapped()&&d.chr===r){if(d.start>i)break;if(p=0,(g=Fx(d.cigar)).forEach((function(e){var t=e.len,r=e.ltr;"M"!==r&&"EQ"!==r&&"X"!==r&&"D"!==r&&"N"!==r&&"="!==r||(p+=t)})),d.lengthOnRef=p,!(d.start+p<n)){for(l=h[10],d.qual=[],c=0;c<l.length;c++)d.qual[c]=l.charCodeAt(c)-33;d.tagDict=h.length<11?{}:Dx(h.slice(11)),d.isMateMapped()&&(f=h[6],d.mate={chr:"="===f?d.chr:f,position:Number.parseInt(h[7]),strand:!(32&d.flags)}),this.setPairOrientation(d),(void 0===a||a.pass(d))&&(Lx(d,g),t.push(d))}}},setReaderDefaults:function(e,t){e.filter=new Rx(t.filter),t.readgroup&&(e.filter.readgroups=new Set([t.readgroup])),e.alleleFreqThreshold=void 0===t.alleleFreqThreshold?.2:t.alleleFreqThreshold,e.samplingWindowSize=void 0===t.samplingWindowSize?100:t.samplingWindowSize,e.samplingDepth=void 0===t.samplingDepth?500:t.samplingDepth,e.samplingDepth>1e4&&(e.samplingDepth=1e4),t.viewAsPairs?e.pairsSupported=!0:e.pairsSupported=void 0===t.pairsSupported||t.pairsSupported},setPairOrientation:function(e){if(e.isMapped()&&e.mate&&e.isMateMapped()&&e.mate.chr===e.chr){var t=e.strand?"F":"R",r=e.mate,n=r.strand?"F":"R",i=" ",a=" ";e.isFirstOfPair()?(i="1",a="2"):e.isSecondOfPair()&&(i="2",a="1");var o=[],s=e.fragmentLength,c=e.end-e.start;if(0===s)s=(e.start<r.position?r.position+c:r.position-c)-e.start;s>0?(o[0]=t,o[1]=i,o[2]=n,o[3]=a):(o[2]=t,o[3]=i,o[0]=n,o[1]=a),e.pairOrientation=o.join("")}}};function Lx(e,t){var r,n,i=[],a=0,o=e.start;e.scStart=e.start,e.scLengthOnRef=e.lengthOnRef;var s,c=Nr(t);try{for(c.s();!(s=c.n()).done;){var u=s.value,h=void 0;switch(u.ltr){case"H":case"P":break;case"S":h=o,e.scLengthOnRef+=u.len,0===i.length&&(e.scStart-=u.len,h-=u.len),i.push(new Cx({start:h,seqOffset:a,len:u.len,type:"S"})),a+=u.len;break;case"N":case"D":void 0===n&&(n=[]),n.push({start:o,len:u.len,type:u.ltr}),o+=u.len;break;case"I":void 0===r&&(r=[]),r.push(new Cx({start:o,len:u.len,seqOffset:a,type:"I"})),a+=u.len;break;case"M":case"EQ":case"=":case"X":i.push(new Cx({start:o,seqOffset:a,len:u.len,type:"M"})),a+=u.len,o+=u.len}}}catch(e){c.e(e)}finally{c.f()}e.blocks=i,e.insertions=r,e.gaps=n}function Mx(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function Fx(e){var t,r,n,i,a,o,s,c,u;for(t=[],r=[],a=null,i=e.length,n=0;n<i;n++)o=e.charAt(n),u=void 0,(u=o.charCodeAt(0))>=48&&u<=57?r.push(o):(s=o,c=Number.parseInt(r.join("")),r=[],null!==a&&a.ltr===s?a.len+=c:(a={len:c,ltr:s},t.push(a)));return t}function Dx(e){var t={};return e.forEach((function(e){var r=e.split(":");t[r[0]]=r[2]})),t}var Ox=Sn,Bx=function(){function e(t,r){mr(this,e),this.config=t,this.genome=r,this.bamPath=t.url,this.isDataUri=Ox(t.url)&&t.url.startsWith("data:"),Ix.setReaderDefaults(this,t)}var t;return yr(e,[{key:"readAlignments",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a,o,s,c,u,h,l,f,p,d,g,v,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m=function(e,t,r){var n,i,a,o;i=(n=this.header).chrAliasTable.hasOwnProperty(e)?n.chrAliasTable[e]:e,a=this.alignmentCache.queryFeatures(i,t,r),o=new px(e,t,r,this.samplingWindowSize,this.samplingDepth,this.pairsSupported);var s,c=Nr(a);try{for(c.s();!(s=c.n()).done;){var u=s.value;o.push(u)}}catch(e){c.e(e)}finally{c.f()}return o.finish(),o},v=function(e){var t=[];this.header=Ix.decodeBamHeader(e),Ix.decodeBamRecords(e,this.header.size,t,this.header.chrNames),this.alignmentCache=new Ew(t,i)},i=this.genome,!this.alignmentCache){e.next=14;break}a=this.header,o=a.chrAliasTable.hasOwnProperty(t)?a.chrAliasTable[t]:t,s=this.alignmentCache.queryFeatures(o,r,n),c=new px(t,r,n,this.samplingWindowSize,this.samplingDepth,this.pairsSupported,this.alleleFreqThreshold),u=Nr(s);try{for(u.s();!(h=u.n()).done;)l=h.value,c.push(l)}catch(e){u.e(e)}finally{u.f()}return c.finish(),e.abrupt("return",c);case 14:if(!this.isDataUri){e.next=21;break}return f=Nx(this.bamPath),p=cm(f.buffer),v.call(this,p),e.abrupt("return",m.call(this,t,r,n));case 21:return e.next=23,Lm.loadArrayBuffer(this.bamPath,km(this.config));case 23:return d=e.sent,g=cm(d),v.call(this,g),e.abrupt("return",m.call(this,t,r,n));case 27:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})}]),e}();function Nx(e){var t=e.split(","),r=t[0].split(":")[1],n=t[1];n=r.indexOf("base64")>=0?atob(n):decodeURI(n);for(var i=new Uint8Array(n.length),a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i}var Px=function(){function e(t,r){mr(this,e),this.config=t,this.genome=r,this.bamPath=t.url,this.baiPath=t.indexURL,this.baiPath||!1===t.indexed||this.bamPath instanceof File||(this.baiPath=function(e,t){var r;if(e instanceof File)throw new Error("Cannot infer an index path for a local File.  Please select explicitly");return e.includes("?")?(r=e.indexOf("?"),e.substring(0,r)+"."+t+e.substring(r)):e+"."+t}(this.bamPath,"bai"),console.error("Warning: no indexURL specified for ".concat(this.config.url,".  Guessing ").concat(this.baiPath))),Ix.setReaderDefaults(this,t)}var t,r,n,i;return yr(e,[{key:"readAlignments",value:(i=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a,o,s,c,u,h,l,f,p,d,g,v,m,b,y,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getChrIndex();case 2:if(i=e.sent,a=this.chrAliasTable.hasOwnProperty(t)?this.chrAliasTable[t]:t,o=i[a],s=new px(t,r,n,this.config.samplingWindowSize,this.config.samplingDepth,this.config.pairsSupported,this.config.alleleFreqThreshold),void 0!==o){e.next=10;break}return e.abrupt("return",s);case 10:return e.next=12,this.getIndex();case 12:if(c=e.sent,(u=c.blocksForRange(o,r,n))&&0!==u.length){e.next=16;break}return e.abrupt("return",s);case 16:h=Nr(u),e.prev=18,h.s();case 20:if((l=h.n()).done){e.next=45;break}if(f=l.value,p=void 0,0!==f.maxv.offset){e.next=27;break}p=0,e.next=32;break;case 27:return d=km(this.config,{range:{start:f.maxv.block,size:26}}),e.next=30,Lm.loadArrayBuffer(this.bamPath,d);case 30:g=e.sent,p=um(g);case 32:return v=f.minv.block,m=f.maxv.block+p,b={start:v,size:m-v+1},e.next=37,Lm.loadArrayBuffer(this.bamPath,km(this.config,{range:b}));case 37:if(y=e.sent,w=cm(y),!Ix.decodeBamRecords(w,f.minv.offset,s,this.indexToChr,o,r,n,this.filter)){e.next=42;break}return e.abrupt("break",45);case 42:case 43:e.next=20;break;case 45:e.next=50;break;case 47:e.prev=47,e.t0=e.catch(18),h.e(e.t0);case 50:return e.prev=50,h.f(),e.finish(50);case 53:return s.finish(),e.abrupt("return",s);case 55:case"end":return e.stop()}}),e,this,[[18,47,50,53]])}))),function(e,t,r){return i.apply(this,arguments)})},{key:"getHeader",value:(n=vr(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.header){e.next=19;break}return t=this.genome,e.next=4,this.getIndex();case 4:if(!(r=e.sent).firstAlignmentBlock){e.next=14;break}return i=km(this.config,{range:{start:r.firstAlignmentBlock,size:26}}),e.next=9,Lm.loadArrayBuffer(this.bamPath,i);case 9:a=e.sent,o=um(a),n=r.firstAlignmentBlock+o,e.next=15;break;case 14:n=64e3;case 15:return s=km(this.config,{range:{start:0,size:n}}),e.next=18,Ix.readHeader(this.bamPath,s,t);case 18:this.header=e.sent;case 19:return e.abrupt("return",this.header);case 20:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getIndex",value:(r=vr(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.genome,this.index){e.next=5;break}return e.next=4,xw(this.baiPath,this.config,t);case 4:this.index=e.sent;case 5:return e.abrupt("return",this.index);case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getChrIndex",value:(t=vr(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.chrToIndex){e.next=4;break}return e.abrupt("return",this.chrToIndex);case 4:return e.next=6,this.getHeader();case 6:return t=e.sent,this.chrToIndex=t.chrToIndex,this.indexToChr=t.chrNames,this.chrAliasTable=t.chrAliasTable,e.abrupt("return",this.chrToIndex);case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),zx=function(){function e(t,r){mr(this,e),this.config=t,this.genome=r;var n={},i={};t.sources.sequences.forEach((function(e){if(n[e]=null,r){var t=r.getChromosomeName(e);i[t]=e}})),this.chrAliasTable=i,this.bamReaders=n,Ix.setReaderDefaults(this,t)}var t;return yr(e,[{key:"readAlignments",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a,o,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.genome,a=(i=this).chrAliasTable.hasOwnProperty(t)?i.chrAliasTable[t]:t,this.bamReaders.hasOwnProperty(a)&&"none"!==this.bamReaders[a]){e.next=7;break}return e.abrupt("return",Promise.resolve(new px(t,r,n)));case 7:return(o=i.bamReaders[a])||(s={url:i.config.sources.url.replace("$CHR",a)},i.config.sources.indexURL&&(s.indexURL=i.config.sources.indexURL.replace("$CHR",a)),c=Object.assign(i.config,s),o=new Px(c),i.bamReaders[a]=o),e.abrupt("return",o.readAlignments(a,r,n).catch((function(e){console.error(e);var o="Error reading BAM or index file for: ".concat(s?s.url:"");return nn.presentAlert(new Error(o)),i.bamReaders[a]="none",new px(t,r,n)})));case 10:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})}]),e}(),Ux=function(e,t){this.config=e,this.genome=t,Ix.setReaderDefaults(this,e)};function Hx(){var e=this,t=this.genome;if(this.header)return Promise.resolve(this.header);var r=this.config.url+"?file="+this.config.alignmentFile+"&options=-b,-H",n=km(this.config);return Ix.readHeader(r,n,t).then((function(t){return e.header=t,t}))}Ux.prototype.readAlignments=function(e,t,r){var n=this;return Hx.call(n).then((function(i){var a,o;return a=i.chrAliasTable.hasOwnProperty(e)?i.chrAliasTable[e]:e,o=n.config.url+"?reference="+n.config.referenceFile+"&file="+n.config.alignmentFile+"&region="+a+":"+t+"-"+r,Lm.loadString(o,km(n.config)).then((function(o){var s;return i.chrToIndex[a],s=new px(e,t,r,n.samplingWindowSize,n.samplingDepth,n.pairsSupported,n.alleleFreqThreshold),Ix.decodeSamRecords(o,s,a,t,r,n.filter),s}))}))};var jx=function(){function e(t,r){mr(this,e),this.config=t,this.genome=r,Ix.setReaderDefaults(this,t)}var t;return yr(e,[{key:"readAlignments",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n,i){var a,o,s,c,u,h,l,f,p,d,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.config.format||"BAM"===this.config.format.toUpperCase()){e.next=2;break}throw Error("htsget format ".concat(this.config.format," is not supported"));case 2:return a=this.genome,o=this.header&&this.header.chrAliasTable.hasOwnProperty(t)?this.header.chrAliasTable[t]:t,s=this.config.url?this.config.url+this.config.endpoint:this.config.endpoint+"/reads/",c=s+this.config.id+"?format=BAM&referenceName="+o+"&start="+r+"&end="+n,e.next=8,Lm.loadJson(c,this.config);case 8:return u=e.sent,e.next=11,qx(u.htsget.urls);case 11:if(h=e.sent,l=Wx(h),f=cm(l.buffer),p=f,this.header=Ix.decodeBamHeader(p,a),d=this.header.chrToIndex[t],g=new px(t,r,n,this.samplingWindowSize,this.samplingDepth,this.pairsSupported,this.alleleFreqThreshold),Ix.decodeBamRecords(p,this.header.size,g,this.header.chrNames,d,r,n),g.finish(),0!==g.alignments.length){e.next=29;break}if(void 0!==d||!this.header.chrAliasTable.hasOwnProperty(t)||i){e.next=26;break}return o=this.header.chrAliasTable[t],e.abrupt("return",this.readAlignments(o,r,n,1));case 26:return e.abrupt("return",g);case 27:e.next=30;break;case 29:return e.abrupt("return",g);case 30:case"end":return e.stop()}}),e,this)}))),function(e,r,n,i){return t.apply(this,arguments)})}]),e}();function qx(e){return Vx.apply(this,arguments)}function Vx(){return(Vx=vr(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],t.forEach((function(e){if(e.url.startsWith("data:"))r.push(Promise.resolve(Gx(e.url)));else{var t={};e.headers&&(t.headers=e.headers,t.headers.hasOwnProperty("referer")&&delete t.headers.referer),r.push(new Promise((function(r,n){Lm.loadArrayBuffer(e.url,t).then((function(e){r(new Uint8Array(e))}))})))}})),e.abrupt("return",Promise.all(r));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wx(e){var t=0;e.forEach((function(e){t+=e.length}));var r=0,n=new Uint8Array(t);return e.forEach((function(e){n.set(e,r),r+=e.length})),n}function Gx(e){var t=e.split(","),r=t[0].split(":")[1],n=t[1];n=r.indexOf("base64")>=0?atob(n):decodeURI(n);for(var i=new Uint8Array(n.length),a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i}Gp("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Kp);ki("hasInstance"),ki("species"),ki("toStringTag");var $x=$e.some,Zx=ct("some"),Yx=it("some");Me({target:"Array",proto:!0,forced:!Zx||!Yx},{some:function(e){return $x(this,e,arguments.length>1?arguments[1]:void 0)}}),Ao("Array");var Xx="ArrayBuffer",Kx=Bg.ArrayBuffer,Qx=n.ArrayBuffer;Me({global:!0,forced:Qx!==Kx},{ArrayBuffer:Kx}),Ao(Xx);var Jx=je("hasInstance"),eS=Function.prototype;Jx in eS||A.f(eS,Jx,{value:function(e){if("function"!=typeof this||!v(e))return!1;if(!v(this.prototype))return e instanceof this;for(;e=Ia(e);)if(this.prototype===e)return!0;return!1}}),_i(n.JSON,"JSON",!0),_i(Math,"Math",!0);var tS=Wp.onFreeze,rS=Object.freeze,nS=i((function(){rS(1)}));Me({target:"Object",stat:!0,forced:nS,sham:!Vp},{freeze:function(e){return rS&&v(e)?rS(tS(e)):e}});var iS=C.f,aS=i((function(){iS(1)}));Me({target:"Object",stat:!0,forced:!a||aS,sham:!a},{getOwnPropertyDescriptor:function(e,t){return iS(g(e),t)}});var oS=/"/g;Me({target:"String",proto:!0,forced:function(e){return i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}("sub")},{sub:function(){return e="sub",t="",r="",n=String(d(this)),i="<"+e,""!==t&&(i+=" "+t+'="'+String(r).replace(oS,"&quot;")+'"'),i+">"+n+"</"+e+">";var e,t,r,n,i}}),Ug("Float32",(function(e){return function(t,r,n){return e(this,t,r,n)}})),Ug("Float64",(function(e){return function(t,r,n){return e(this,t,r,n)}})),Ug("Int32",(function(e){return function(t,r,n){return e(this,t,r,n)}})),Ug("Uint16",(function(e){return function(t,r,n){return e(this,t,r,n)}}));var sS=!n.setImmediate||!n.clearImmediate;Me({global:!0,bind:!0,enumerable:!0,forced:sS},{setImmediate:Dh.set,clearImmediate:Dh.clear});var cS=eval,uS=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==dr(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=35)}([function(e,t){var r=function(e){wr(r,e);var t=Ar(r);function r(){return mr(this,r),t.apply(this,arguments)}return r}(Cr(Error)),n=function(e){wr(r,e);var t=Ar(r);function r(){return mr(this,r),t.apply(this,arguments)}return r}(r);e.exports={CramBufferOverrunError:function(e){wr(r,e);var t=Ar(r);function r(){return mr(this,r),t.apply(this,arguments)}return r}(n),CramMalformedError:n,CramUnimplementedError:function(e){wr(r,e);var t=Ar(r);function r(){return mr(this,r),t.apply(this,arguments)}return r}(Cr(Error)),CramSizeLimitError:function(e){wr(r,e);var t=Ar(r);function r(){return mr(this,r),t.apply(this,arguments)}return r}(r),CramArgumentError:function(e){wr(r,e);var t=Ar(r);function r(){return mr(this,r),t.apply(this,arguments)}return r}(r)}},function(e,t,r){(function(e){
/*!
	     * The buffer module from node.js, for the browser.
	     *
	     * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	     * @license  MIT
	     */
var n=r(37),i=r(38),a=r(19);function o(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return u(this,e,t,r)}function u(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=f(e,t),e}(e,t,r,n):"string"==typeof t?function(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(t,r),i=(e=s(e,n)).write(t,r);return i!==n&&(e=e.slice(0,i)),e}(e,t,r):function(e,t){if(c.isBuffer(t)){var r=0|p(t.length);return 0===(e=s(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?s(e,0):f(e,t);if("Buffer"===t.type&&a(t.data))return f(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t){if(h(t),e=s(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function f(e,t){var r=t.length<0?0:0|p(t.length);e=s(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function p(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function d(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return H(e).length;default:if(n)return U(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:m(e,t,r,n,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):m(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,r,n,i){var a,o=1,s=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,c/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var h=-1;for(a=r;a<s;a++)if(u(e,a)===u(t,-1===h?0:a-h)){if(-1===h&&(h=a),a-h+1===c)return h*o}else-1!==h&&(a-=a-h),h=-1}else for(r+c>s&&(r=s-c),a=r;a>=0;a--){for(var l=!0,f=0;f<c;f++)if(u(e,a+f)!==u(t,f)){l=!1;break}if(l)return a}return-1}function b(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[r+o]=s}return o}function y(e,t,r,n){return j(U(t,e.length-r),e,r,n)}function w(e,t,r,n){return j(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function k(e,t,r,n){return w(e,t,r,n)}function x(e,t,r,n){return j(H(t),e,r,n)}function S(e,t,r,n){return j(function(e,t){for(var r,n,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,i=r%256,a.push(i),a.push(n);return a}(t,e.length-r),e,r,n)}function _(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function C(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a,o,s,c,u=e[i],h=null,l=u>239?4:u>223?3:u>191?2:1;if(i+l<=r)switch(l){case 1:u<128&&(h=u);break;case 2:128==(192&(a=e[i+1]))&&(c=(31&u)<<6|63&a)>127&&(h=c);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(c=(15&u)<<12|(63&a)<<6|63&o)>2047&&(c<55296||c>57343)&&(h=c);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(c=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&c<1114112&&(h=c)}null===h?(h=65533,l=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),i+=l}return function(e){var t=e.length;if(t<=R)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=R));return r}(n)}t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,r){return u(null,e,t,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,r){return function(e,t,r,n){return h(t),t<=0?s(e,t):void 0!==r?"string"==typeof n?s(e,t).fill(r,n):s(e,t).fill(r):s(e,t)}(null,e,t,r)},c.allocUnsafe=function(e){return l(null,e)},c.allocUnsafeSlow=function(e){return l(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=c.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},c.byteLength=d,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,r);case"utf8":case"utf-8":return C(this,t,r);case"ascii":return E(this,t,r);case"latin1":case"binary":return A(this,t,r);case"base64":return _(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,r,n,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),s=Math.min(a,o),u=this.slice(n,i),h=e.slice(t,r),l=0;l<s;++l)if(u[l]!==h[l]){a=u[l],o=h[l];break}return a<o?-1:o<a?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return y(this,e,t,r);case"ascii":return w(this,e,t,r);case"latin1":case"binary":return k(this,e,t,r);case"base64":return x(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function E(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function A(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function T(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=t;a<r;++a)i+=z(e[a]);return i}function I(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function L(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,r,n,i,a){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function F(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-r,2);i<a;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function D(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-r,4);i<a;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function O(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function B(e,t,r,n,a){return a||O(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function N(e,t,r,n,a){return a||O(e,0,r,8),i.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;r=new c(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},c.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},c.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},c.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},c.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||M(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},c.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||M(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+r},c.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);M(this,e,t,r,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<r&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);M(this,e,t,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,r){return B(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return B(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return N(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return N(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&r<t&&t<n)for(i=a-1;i>=0;--i)e[i+t]=this[i+r];else if(a<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var o=c.isBuffer(e)?e:U(new c(e,n).toString()),s=o.length;for(a=0;a<r-t;++a)this[a+t]=o[a%s]}return this};var P=/[^+\/0-9A-Za-z-_]/g;function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var r;t=t||1/0;for(var n=e.length,i=null,a=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function H(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(P,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(2))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==("undefined"==typeof window?"undefined":dr(window))&&(r=window)}e.exports=r},function(e,t){var r,n,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var c,u=[],h=!1,l=-1;function f(){h&&c&&(h=!1,c.length?u=c.concat(u):l=-1,u.length&&p())}function p(){if(!h){var e=s(f);h=!0;for(var t=u.length;t;){for(c=u,u=[];++l<t;)c&&c[l].run();l=-1,t=u.length}c=null,h=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new d(e,t)),1!==u.length||h||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){var n=r(9),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=l;var a=r(7);a.inherits=r(4);var o=r(21),s=r(16);a.inherits(l,o);for(var c=i(s.prototype),u=0;u<c.length;u++){var h=c[u];l.prototype[h]||(l.prototype[h]=s.prototype[h])}function l(e){if(!(this instanceof l))return new l(e);o.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||n.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),l.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},function(e,t,r){var n=r(0).CramBufferOverrunError,i={int:!0,byte:!0,long:!0,byteArray:!0,byteArrayBlock:!0};e.exports=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(mr(this,e),this.parameters=t,this.dataType=r,!r)throw new TypeError("must provide a data type to codec constructor");if(!i[r])throw new TypeError("invalid data type ".concat(r))}return yr(e,[{key:"_getBits",value:function(e,t,r){var i=0;if(t.bytePosition+(7-t.bitPosition+r)/8>e.length)throw new n("read error during decoding. the file seems to be truncated.");for(var a=r;a;a-=1)i<<=1,i|=e[t.bytePosition]>>t.bitPosition&1,t.bitPosition-=1,t.bitPosition<0&&(t.bytePosition+=1),t.bitPosition&=7;return i}}]),e}()},function(e,t,r){(function(e){function r(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==dr(e)},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===r(e)},t.isObject=function(e){return"object"==dr(e)&&null!==e},t.isDate=function(e){return"[object Date]"===r(e)},t.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==dr(e)||void 0===e},t.isBuffer=e.isBuffer}).call(this,r(1).Buffer)},function(e,t,r){var n=r(72),i=r(0).CramBufferOverrunError;e.exports={itf8Size:function(e){return-128&e?-16384&e?-2097152&e?-268435456&e?5:4:3:2:1},parseItf8:function(e,t){var r,n=t,a=e[n];if(a<128?(r=a,n+=1):a<192?(r=16383&(a<<8|e[n+1]),n+=2):a<224?(r=2097151&(a<<16|e[n+1]<<8|e[n+2]),n+=3):a<240?(r=268435455&(a<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),n+=4):(r=(15&a)<<28|e[n+1]<<20|e[n+2]<<12|e[n+3]<<4|15&e[n+4],n+=5),n>e.length)throw new i("Attempted to read beyond end of buffer; this file seems truncated.");return[r,n-t]},parseItem:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.parse(e),a=i.offset,o=i.result;return o._endPosition=a+n,o._size=a-r,o},tinyMemoize:function(e,t){var r=e.prototype[t],n="_memo_".concat(t);e.prototype[t]=function(){return n in this||(this[n]=r.call(this)),this[n]}},sequenceMD5:function(e){return n(e.toUpperCase().replace(/[^\x21-\x7e]/g,""))}}},function(e,t,r){(function(t){!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,r,n,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var a,o,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,r)}));case 3:return t.nextTick((function(){e.call(null,r,n)}));case 4:return t.nextTick((function(){e.call(null,r,n,i)}));default:for(a=new Array(s-1),o=0;o<a.length;)a[o++]=arguments[o];return t.nextTick((function(){e.apply(null,a)}))}}}:e.exports=t}).call(this,r(3))},function(e,t,r){var n=r(1),i=n.Buffer;function a(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=o),a(i,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t,r){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=dr(r))throw new TypeError(r+"must be non-object");for(var n in r)i(r,n)&&(e[n]=r[n])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var a=0;a<n;a++)e[i+a]=t[r+a]},flattenChunks:function(e){var t,r,n,i,a,o;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(o=new Uint8Array(n),i=0,t=0,r=e.length;t<r;t++)a=e[t],o.set(a,i),i+=a.length;return o}},o={arraySet:function(e,t,r,n,i){for(var a=0;a<n;a++)e[i+a]=t[r+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(n)},function(e,t,r){var n=r(0).CramMalformedError,i=r(13),a=function e(){mr(this,e),this.F=void 0,this.C=void 0};function o(e,t,r,n){return r*(e>>n)+(e&(1<<n)-1)-t}var s={FC:a,AriDecoder:function e(){mr(this,e),this.fc=new Array(256);for(var t=0;t<this.fc.length;t+=1)this.fc[t]=new a;this.R=null},Symbol:function e(){mr(this,e),this.start=void 0,this.freq=void 0},symbolInit:function(e,t,r){if(!(t<=65536))throw new n("assertion failed: start <= 1<<16");if(!(r<=65536-t))throw new n("assertion failed: freq <= 1<<16");e.start=t,e.freq=r},advanceStep:o,advanceSymbolStep:function(e,t,r){return o(e,t.start,t.freq,r)},get:function(e,t){return e&(1<<t)-1},advanceSymbol:function(e,t,r,n){return function(e,t,r,n,a){if((e=n*(e>>a)+(e&(1<<a)-1)-r)<i.RANS_BYTE_L)do{e=e<<8|255&t.get()}while(e<i.RANS_BYTE_L);return e}(e,t,r.start,r.freq,n)},renormalize:function(e,t){if(e<i.RANS_BYTE_L)do{e=e<<8|255&t.get()}while(e<i.RANS_BYTE_L);return e}};e.exports=s},function(e,t){e.exports={TF_SHIFT:12,TOTFREQ:4096,RANS_BYTE_L:1<<23}},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"object"==dr(e)&&null!==e}function a(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,o,s,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var h=new Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h}if(a(r=this._events[e]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(i(r))for(s=Array.prototype.slice.call(arguments,1),o=(u=r.slice()).length,c=0;c<o;c++)u[c].apply(this,s);return!0},r.prototype.addListener=function(e,t){var o;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var r=!1;function i(){this.removeListener(e,i),r||(r=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},r.prototype.removeListener=function(e,t){var r,a,o,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(r=this._events[e]).length,a=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(s=o;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){a=s;break}if(a<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){(t=e.exports=r(21)).Stream=t,t.Readable=t,t.Writable=r(16),t.Duplex=r(5),t.Transform=r(25),t.PassThrough=r(46)},function(e,t,r){(function(t,n,i){var a=r(9);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(undefined),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=b;var s,c=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?n:a.nextTick;b.WritableState=m;var u=r(7);u.inherits=r(4);var h,l={deprecate:r(45)},f=r(22),p=r(10).Buffer,d=i.Uint8Array||function(){},g=r(23);function v(){}function m(e,t){s=s||r(5),e=e||{};var n=t instanceof s;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,u=e.writableHighWaterMark,h=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(u||0===u)?u:h,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===e.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(a.nextTick(i,n),a.nextTick(_,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),_(e,t))}(e,r,n,t,i);else{var o=x(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||k(e,r),n?c(w,e,r,o,i):w(e,r,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function b(e){if(s=s||r(5),!(h.call(b,this)||this instanceof s))return new b(e);this._writableState=new m(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),f.call(this)}function y(e,t,r,n,i,a,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function w(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),_(e,t)}function k(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var s=0,c=!0;r;)i[s]=r,r.isBuf||(c=!1),r=r.next,s+=1;i.allBuffers=c,y(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,h=r.encoding,l=r.callback;if(y(e,t,!1,t.objectMode?1:u.length,u,h,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function x(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function S(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),_(e,t)}))}function _(e,t){var r=x(t);return r&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,a.nextTick(S,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}u.inherits(b,f),m.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(m.prototype,"buffer",{get:l.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(e){return!!h.call(this,e)||this===b&&e&&e._writableState instanceof m}})):h=function(e){return e instanceof this},b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},b.prototype.write=function(e,t,r){var n,i=this._writableState,o=!1,s=!i.objectMode&&(n=e,p.isBuffer(n)||n instanceof d);return s&&!p.isBuffer(e)&&(e=function(e){return p.from(e)}(e)),"function"==typeof t&&(r=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=v),i.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),a.nextTick(t,r)}(this,r):(s||function(e,t,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),a.nextTick(n,o),i=!1),i}(this,i,e,r))&&(i.pendingcb++,o=function(e,t,r,n,i,a){if(!r){var o=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=p.from(t,r)),t}(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var s=t.objectMode?1:n.length;t.length+=s;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:a,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else y(e,t,!1,s,n,i,a);return c}(this,i,s,e,t,r)),o},b.prototype.cork=function(){this._writableState.corked++},b.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||k(this,e))},b.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),b.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},b.prototype._writev=null,b.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,_(e,t),r&&(t.finished?a.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,n,r)},Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,r(3),r(43).setImmediate,r(2))},function(e,t){e.exports={CRAM_FLAG_PRESERVE_QUAL_SCORES:1,CRAM_FLAG_DETACHED:2,CRAM_FLAG_MATE_DOWNSTREAM:4,CRAM_FLAG_NO_SEQ:8,CRAM_FLAG_MASK:15,CRAM_M_REVERSE:1,CRAM_M_UNMAP:2,BAM_FPAIRED:1,BAM_FPROPER_PAIR:2,BAM_FUNMAP:4,BAM_FMUNMAP:8,BAM_FREVERSE:16,BAM_FMREVERSE:32,BAM_FREAD1:64,BAM_FREAD2:128,BAM_FSECONDARY:256,BAM_FQCFAIL:512,BAM_FDUP:1024,BAM_FSUPPLEMENTARY:2048,BAM_CMATCH:0,BAM_CINS:1,BAM_CDEL:2,BAM_CREF_SKIP:3,BAM_CSOFT_CLIP:4,BAM_CHARD_CLIP:5,BAM_CPAD:6,BAM_CEQUAL:7,BAM_CDIFF:8,BAM_CBACK:9,BAM_CIGAR_STR:"MIDNSHP:XB",BAM_CIGAR_SHIFT:4,BAM_CIGAR_MASK:15,BAM_CIGAR_TYPE:246183}},function(e,t,r){var n=r(36);e.exports=n},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){(function(e){var n=r(1).Buffer,i=r(39).Transform,a=r(51),o=r(27),s=r(26).ok,c=r(1).kMaxLength,u="Cannot create final Buffer. It would be larger than 0x"+c.toString(16)+" bytes";a.Z_MIN_WINDOWBITS=8,a.Z_MAX_WINDOWBITS=15,a.Z_DEFAULT_WINDOWBITS=15,a.Z_MIN_CHUNK=64,a.Z_MAX_CHUNK=1/0,a.Z_DEFAULT_CHUNK=16384,a.Z_MIN_MEMLEVEL=1,a.Z_MAX_MEMLEVEL=9,a.Z_DEFAULT_MEMLEVEL=8,a.Z_MIN_LEVEL=-1,a.Z_MAX_LEVEL=9,a.Z_DEFAULT_LEVEL=a.Z_DEFAULT_COMPRESSION;for(var h=Object.keys(a),l=0;l<h.length;l++){var f=h[l];f.match(/^Z/)&&Object.defineProperty(t,f,{enumerable:!0,value:a[f],writable:!1})}for(var p={Z_OK:a.Z_OK,Z_STREAM_END:a.Z_STREAM_END,Z_NEED_DICT:a.Z_NEED_DICT,Z_ERRNO:a.Z_ERRNO,Z_STREAM_ERROR:a.Z_STREAM_ERROR,Z_DATA_ERROR:a.Z_DATA_ERROR,Z_MEM_ERROR:a.Z_MEM_ERROR,Z_BUF_ERROR:a.Z_BUF_ERROR,Z_VERSION_ERROR:a.Z_VERSION_ERROR},d=Object.keys(p),g=0;g<d.length;g++){var v=d[g];p[p[v]]=v}function m(e,t,r){var i=[],a=0;function o(){for(var t;null!==(t=e.read());)i.push(t),a+=t.length;e.once("readable",o)}function s(){var t,o=null;a>=c?o=new RangeError(u):t=n.concat(i,a),i=[],e.close(),r(o,t)}e.on("error",(function(t){e.removeListener("end",s),e.removeListener("readable",o),r(t)})),e.on("end",s),e.end(t),o()}function b(e,t){if("string"==typeof t&&(t=n.from(t)),!n.isBuffer(t))throw new TypeError("Not a string or buffer");var r=e._finishFlushFlag;return e._processChunk(t,r)}function y(e){if(!(this instanceof y))return new y(e);E.call(this,e,a.DEFLATE)}function w(e){if(!(this instanceof w))return new w(e);E.call(this,e,a.INFLATE)}function k(e){if(!(this instanceof k))return new k(e);E.call(this,e,a.GZIP)}function x(e){if(!(this instanceof x))return new x(e);E.call(this,e,a.GUNZIP)}function S(e){if(!(this instanceof S))return new S(e);E.call(this,e,a.DEFLATERAW)}function _(e){if(!(this instanceof _))return new _(e);E.call(this,e,a.INFLATERAW)}function C(e){if(!(this instanceof C))return new C(e);E.call(this,e,a.UNZIP)}function R(e){return e===a.Z_NO_FLUSH||e===a.Z_PARTIAL_FLUSH||e===a.Z_SYNC_FLUSH||e===a.Z_FULL_FLUSH||e===a.Z_FINISH||e===a.Z_BLOCK}function E(e,r){var o=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,i.call(this,e),e.flush&&!R(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!R(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||a.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:a.Z_FINISH,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!n.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new a.Zlib(r);var s=this;this._hadError=!1,this._handle.onerror=function(e,r){A(s),s._hadError=!0;var n=new Error(e);n.errno=r,n.code=t.codes[r],s.emit("error",n)};var c=t.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(c=e.level);var u=t.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(u=e.strategy),this._handle.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,c,e.memLevel||t.Z_DEFAULT_MEMLEVEL,u,e.dictionary),this._buffer=n.allocUnsafe(this._chunkSize),this._offset=0,this._level=c,this._strategy=u,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!o._handle},configurable:!0,enumerable:!0})}function A(t,r){r&&e.nextTick(r),t._handle&&(t._handle.close(),t._handle=null)}function T(e){e.emit("close")}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(p),writable:!1}),t.Deflate=y,t.Inflate=w,t.Gzip=k,t.Gunzip=x,t.DeflateRaw=S,t.InflateRaw=_,t.Unzip=C,t.createDeflate=function(e){return new y(e)},t.createInflate=function(e){return new w(e)},t.createDeflateRaw=function(e){return new S(e)},t.createInflateRaw=function(e){return new _(e)},t.createGzip=function(e){return new k(e)},t.createGunzip=function(e){return new x(e)},t.createUnzip=function(e){return new C(e)},t.deflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),m(new y(t),e,r)},t.deflateSync=function(e,t){return b(new y(t),e)},t.gzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),m(new k(t),e,r)},t.gzipSync=function(e,t){return b(new k(t),e)},t.deflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),m(new S(t),e,r)},t.deflateRawSync=function(e,t){return b(new S(t),e)},t.unzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),m(new C(t),e,r)},t.unzipSync=function(e,t){return b(new C(t),e)},t.inflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),m(new w(t),e,r)},t.inflateSync=function(e,t){return b(new w(t),e)},t.gunzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),m(new x(t),e,r)},t.gunzipSync=function(e,t){return b(new x(t),e)},t.inflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),m(new _(t),e,r)},t.inflateRawSync=function(e,t){return b(new _(t),e)},o.inherits(E,i),E.prototype.params=function(r,n,i){if(r<t.Z_MIN_LEVEL||r>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+r);if(n!=t.Z_FILTERED&&n!=t.Z_HUFFMAN_ONLY&&n!=t.Z_RLE&&n!=t.Z_FIXED&&n!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+n);if(this._level!==r||this._strategy!==n){var o=this;this.flush(a.Z_SYNC_FLUSH,(function(){s(o._handle,"zlib binding closed"),o._handle.params(r,n),o._hadError||(o._level=r,o._strategy=n,i&&i())}))}else e.nextTick(i)},E.prototype.reset=function(){return s(this._handle,"zlib binding closed"),this._handle.reset()},E.prototype._flush=function(e){this._transform(n.alloc(0),"",e)},E.prototype.flush=function(t,r){var i=this,o=this._writableState;("function"==typeof t||void 0===t&&!r)&&(r=t,t=a.Z_FULL_FLUSH),o.ended?r&&e.nextTick(r):o.ending?r&&this.once("end",r):o.needDrain?r&&this.once("drain",(function(){return i.flush(t,r)})):(this._flushFlag=t,this.write(n.alloc(0),"",r))},E.prototype.close=function(t){A(this,t),e.nextTick(T,this)},E.prototype._transform=function(e,t,r){var i,o=this._writableState,s=(o.ending||o.ended)&&(!e||o.length===e.length);return null===e||n.isBuffer(e)?this._handle?(s?i=this._finishFlushFlag:(i=this._flushFlag,e.length>=o.length&&(this._flushFlag=this._opts.flush||a.Z_NO_FLUSH)),void this._processChunk(e,i,r)):r(new Error("zlib binding closed")):r(new Error("invalid input"))},E.prototype._processChunk=function(e,t,r){var i=e&&e.length,a=this._chunkSize-this._offset,o=0,h=this,l="function"==typeof r;if(!l){var f,p=[],d=0;this.on("error",(function(e){f=e})),s(this._handle,"zlib binding closed");do{var g=this._handle.writeSync(t,e,o,i,this._buffer,this._offset,a)}while(!this._hadError&&b(g[0],g[1]));if(this._hadError)throw f;if(d>=c)throw A(this),new RangeError(u);var v=n.concat(p,d);return A(this),v}s(this._handle,"zlib binding closed");var m=this._handle.write(t,e,o,i,this._buffer,this._offset,a);function b(c,u){if(this&&(this.buffer=null,this.callback=null),!h._hadError){var f=a-u;if(s(f>=0,"have should not go down"),f>0){var g=h._buffer.slice(h._offset,h._offset+f);h._offset+=f,l?h.push(g):(p.push(g),d+=g.length)}if((0===u||h._offset>=h._chunkSize)&&(a=h._chunkSize,h._offset=0,h._buffer=n.allocUnsafe(h._chunkSize)),0===u){if(o+=i-c,i=c,!l)return!0;var v=h._handle.write(t,e,o,i,h._buffer,h._offset,h._chunkSize);return v.callback=b,void(v.buffer=e)}if(!l)return!1;r()}}m.buffer=e,m.callback=b},o.inherits(y,E),o.inherits(w,E),o.inherits(k,E),o.inherits(x,E),o.inherits(S,E),o.inherits(_,E),o.inherits(C,E)}).call(this,r(3))},function(e,t,r){(function(t,n){var i=r(9);e.exports=y;var a,o=r(19);y.ReadableState=b,r(14).EventEmitter;var s=function(e,t){return e.listeners(t).length},c=r(22),u=r(10).Buffer,h=t.Uint8Array||function(){},l=r(7);l.inherits=r(4);var f=r(40),p=void 0;p=f&&f.debuglog?f.debuglog("stream"):function(){};var d,g=r(41),v=r(23);l.inherits(y,c);var m=["error","close","destroy","pause","resume"];function b(e,t){e=e||{};var n=t instanceof(a=a||r(5));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,o=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(o||0===o)?o:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=r(24).StringDecoder),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function y(e){if(a=a||r(5),!(this instanceof y))return new y(e);this._readableState=new b(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),c.call(this)}function w(e,t,r,n,i){var a,o=e._readableState;return null===t?(o.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,_(e)}}(e,o)):(i||(a=function(e,t){var r,n;return n=t,u.isBuffer(n)||n instanceof h||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}(o,t)),a?e.emit("error",a):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t)),n?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):k(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||0!==t.length?k(e,o,t,!1):R(e,o)):k(e,o,t,!1))):n||(o.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function k(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&_(e)),R(e,t)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),y.prototype.destroy=v.destroy,y.prototype._undestroy=v.undestroy,y.prototype._destroy=function(e,t){this.push(null),t(e)},y.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=u.from(e,t),t=""),r=!0),w(this,e,t,!1,r)},y.prototype.unshift=function(e){return w(this,e,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(e){return d||(d=r(24).StringDecoder),this._readableState.decoder=new d(e),this._readableState.encoding=e,this};var x=8388608;function S(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=x?e=x:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function _(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(p("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(C,e):C(e))}function C(e){p("emit readable"),e.emit("readable"),I(e)}function R(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(E,e,t))}function E(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(p("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function A(e){p("readable nexttick read 0"),e.read(0)}function T(e,t){t.reading||(p("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),I(e),t.flowing&&!t.reading&&e.read(0)}function I(e){var t=e._readableState;for(p("flow",t.flowing);t.flowing&&null!==e.read(););}function L(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(o===a.length?i+=a:i+=a.slice(0,e),0==(e-=o)){o===a.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(o));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=u.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(a.copy(r,r.length-e,0,o),0==(e-=o)){o===a.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(o));break}++i}return t.length-=i,r}(e,t),n}(e,t.buffer,t.decoder),r);var r}function M(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(F,t,e))}function F(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function D(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}y.prototype.read=function(e){p("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return p("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?M(this):_(this),null;if(0===(e=S(e,t))&&t.ended)return 0===t.length&&M(this),null;var n,i=t.needReadable;return p("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&p("length less than watermark",i=!0),t.ended||t.reading?p("reading or ended",i=!1):i&&(p("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=S(r,t))),null===(n=e>0?L(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&M(this)),null!==n&&this.emit("data",n),n},y.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(e,t){var r=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,p("pipe count=%d opts=%j",a.pipesCount,t);var c=t&&!1===t.end||e===n.stdout||e===n.stderr?b:u;function u(){p("onend"),e.end()}a.endEmitted?i.nextTick(c):r.once("end",c),e.on("unpipe",(function t(n,i){p("onunpipe"),n===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,p("cleanup"),e.removeListener("close",v),e.removeListener("finish",m),e.removeListener("drain",h),e.removeListener("error",g),e.removeListener("unpipe",t),r.removeListener("end",u),r.removeListener("end",b),r.removeListener("data",d),l=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||h())}));var h=function(e){return function(){var t=e._readableState;p("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,I(e))}}(r);e.on("drain",h);var l=!1,f=!1;function d(t){p("ondata"),f=!1,!1!==e.write(t)||f||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==D(a.pipes,e))&&!l&&(p("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,f=!0),r.pause())}function g(t){p("onerror",t),b(),e.removeListener("error",g),0===s(e,"error")&&e.emit("error",t)}function v(){e.removeListener("finish",m),b()}function m(){p("onfinish"),e.removeListener("close",v),b()}function b(){p("unpipe"),r.unpipe(e)}return r.on("data",d),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",g),e.once("close",v),e.once("finish",m),e.emit("pipe",r),a.flowing||(p("pipe resume"),r.resume()),e},y.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)n[a].emit("unpipe",this,r);return this}var o=D(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},y.prototype.on=function(e,t){var r=c.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&_(this):i.nextTick(A,this))}return r},y.prototype.addListener=y.prototype.on,y.prototype.resume=function(){var e=this._readableState;return e.flowing||(p("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(T,e,t))}(this,e)),this},y.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(p("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){p("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<m.length;a++)e.on(m[a],this.emit.bind(this,m[a]));return this._read=function(t){p("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),y._fromList=L}).call(this,r(2),r(3))},function(e,t,r){e.exports=r(14).EventEmitter},function(e,t,r){var n=r(9);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,a=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return a||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(n.nextTick(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,r){var n=r(10).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=u,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=h,this.end=l,t=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"ï¿½";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"ï¿½";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"ï¿½"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function h(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function l(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"ï¿½":t},a.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=o(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=o(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=o(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,r){e.exports=o;var n=r(5),i=r(7);function a(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);n.call(this,e),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"==typeof this._flush?this._flush((function(t,r){c(e,t,r)})):c(this,null,null)}function c(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=r(4),i.inherits(o,n),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},function(e,t,r){(function(t){
/*!
	     * The buffer module from node.js, for the browser.
	     *
	     * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	     * @license  MIT
	     */
function n(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}function i(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var a=r(27),o=Object.prototype.hasOwnProperty,s=Array.prototype.slice,c="foo"===function(){}.name;function u(e){return Object.prototype.toString.call(e)}function h(e){return!i(e)&&"function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)))}var l=e.exports=m,f=/\s*function\s+([^\(\s]*)\s*/;function p(e){if(a.isFunction(e)){if(c)return e.name;var t=e.toString().match(f);return t&&t[1]}}function d(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function g(e){if(c||!a.isFunction(e))return a.inspect(e);var t=p(e);return"[Function"+(t?": "+t:"")+"]"}function v(e,t,r,n,i){throw new l.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}function m(e,t){e||v(e,!0,t,"==",l.ok)}function b(e,t,r,o){if(e===t)return!0;if(i(e)&&i(t))return 0===n(e,t);if(a.isDate(e)&&a.isDate(t))return e.getTime()===t.getTime();if(a.isRegExp(e)&&a.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==dr(e)||null!==t&&"object"==dr(t)){if(h(e)&&h(t)&&u(e)===u(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===n(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;var c=(o=o||{actual:[],expected:[]}).actual.indexOf(e);return-1!==c&&c===o.expected.indexOf(t)||(o.actual.push(e),o.expected.push(t),function(e,t,r,n){if(null==e||null==t)return!1;if(a.isPrimitive(e)||a.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=y(e),o=y(t);if(i&&!o||!i&&o)return!1;if(i)return b(e=s.call(e),t=s.call(t),r);var c,u,h=x(e),l=x(t);if(h.length!==l.length)return!1;for(h.sort(),l.sort(),u=h.length-1;u>=0;u--)if(h[u]!==l[u])return!1;for(u=h.length-1;u>=0;u--)if(!b(e[c=h[u]],t[c],r,n))return!1;return!0}(e,t,r,o))}return r?e===t:e==t}function y(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function w(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function k(e,t,r,n){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&v(i,r,"Missing expected exception"+n);var o="string"==typeof n,s=!e&&i&&!r;if((!e&&a.isError(i)&&o&&w(i,r)||s)&&v(i,r,"Got unwanted exception"+n),e&&i&&r&&!w(i,r)||!e&&i)throw i}l.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=d(g(this.actual),128)+" "+this.operator+" "+d(g(this.expected),128),this.generatedMessage=!0);var t=e.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,i=p(t),a=n.indexOf("\n"+i);if(a>=0){var o=n.indexOf("\n",a+1);n=n.substring(o+1)}this.stack=n}}},a.inherits(l.AssertionError,Error),l.fail=v,l.ok=m,l.equal=function(e,t,r){e!=t&&v(e,t,r,"==",l.equal)},l.notEqual=function(e,t,r){e==t&&v(e,t,r,"!=",l.notEqual)},l.deepEqual=function(e,t,r){b(e,t,!1)||v(e,t,r,"deepEqual",l.deepEqual)},l.deepStrictEqual=function(e,t,r){b(e,t,!0)||v(e,t,r,"deepStrictEqual",l.deepStrictEqual)},l.notDeepEqual=function(e,t,r){b(e,t,!1)&&v(e,t,r,"notDeepEqual",l.notDeepEqual)},l.notDeepStrictEqual=function e(t,r,n){b(t,r,!0)&&v(t,r,n,"notDeepStrictEqual",e)},l.strictEqual=function(e,t,r){e!==t&&v(e,t,r,"===",l.strictEqual)},l.notStrictEqual=function(e,t,r){e===t&&v(e,t,r,"!==",l.notStrictEqual)},l.throws=function(e,t,r){k(!0,e,t,r)},l.doesNotThrow=function(e,t,r){k(!1,e,t,r)},l.ifError=function(e){if(e)throw e};var x=Object.keys||function(e){var t=[];for(var r in e)o.call(e,r)&&t.push(r);return t}}).call(this,r(2))},function(e,t,r){(function(e,n){var i=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(s(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,a=n.length,o=String(e).replace(i,(function(e){if("%%"===e)return"%";if(r>=a)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),c=n[r];r<a;c=n[++r])g(c)||!w(c)?o+=" "+c:o+=" "+s(c);return o},t.deprecate=function(r,i){if(b(e.process))return function(){return t.deprecate(r,i).apply(this,arguments)};if(!0===n.noDeprecation)return r;var a=!1;return function(){if(!a){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),a=!0}return r.apply(this,arguments)}};var a,o={};function s(e,r){var n={seen:[],stylize:u};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),d(r)?n.showHidden=r:r&&t._extend(n,r),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),h(n,e,n.depth)}function c(e,t){var r=s.styles[t];return r?"["+s.colors[r][0]+"m"+e+"["+s.colors[r][1]+"m":e}function u(e,t){return e}function h(e,r,n){if(e.customInspect&&r&&S(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,e);return m(i)||(i=h(e,i,n)),i}var a=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(m(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return v(t)?e.stylize(""+t,"number"):d(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}(e,r);if(a)return a;var o=Object.keys(r),s=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(r)),x(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return l(r);if(0===o.length){if(S(r)){var c=r.name?": "+r.name:"";return e.stylize("[Function"+c+"]","special")}if(y(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(k(r))return e.stylize(Date.prototype.toString.call(r),"date");if(x(r))return l(r)}var u,w="",_=!1,R=["{","}"];return p(r)&&(_=!0,R=["[","]"]),S(r)&&(w=" [Function"+(r.name?": "+r.name:"")+"]"),y(r)&&(w=" "+RegExp.prototype.toString.call(r)),k(r)&&(w=" "+Date.prototype.toUTCString.call(r)),x(r)&&(w=" "+l(r)),0!==o.length||_&&0!=r.length?n<0?y(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),u=_?function(e,t,r,n,i){for(var a=[],o=0,s=t.length;o<s;++o)C(t,String(o))?a.push(f(e,t,r,n,String(o),!0)):a.push("");return i.forEach((function(i){i.match(/^\d+$/)||a.push(f(e,t,r,n,i,!0))})),a}(e,r,n,s,o):o.map((function(t){return f(e,r,n,s,t,_)})),e.seen.pop(),function(e,t,r){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(u,w,R)):R[0]+w+R[1]}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,i,a){var o,s,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),C(n,i)||(o="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=g(r)?h(e,c.value,null):h(e,c.value,r-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),b(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function p(e){return Array.isArray(e)}function d(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return"number"==typeof e}function m(e){return"string"==typeof e}function b(e){return void 0===e}function y(e){return w(e)&&"[object RegExp]"===_(e)}function w(e){return"object"==dr(e)&&null!==e}function k(e){return w(e)&&"[object Date]"===_(e)}function x(e){return w(e)&&("[object Error]"===_(e)||e instanceof Error)}function S(e){return"function"==typeof e}function _(e){return Object.prototype.toString.call(e)}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.debuglog=function(e){if(b(a)&&(a=n.env.NODE_DEBUG||""),e=e.toUpperCase(),!o[e])if(new RegExp("\\b"+e+"\\b","i").test(a)){var r=n.pid;o[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else o[e]=function(){};return o[e]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=d,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=v,t.isString=m,t.isSymbol=function(e){return"symbol"==dr(e)},t.isUndefined=b,t.isRegExp=y,t.isObject=w,t.isDate=k,t.isError=x,t.isFunction=S,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==dr(e)||void 0===e},t.isBuffer=r(52),t.log=function(){},t.inherits=r(4),t._extend=function(e,t){if(!t||!w(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,r(2),r(3))},function(e,t,r){e.exports=function(e,t,r,n){for(var i=65535&e|0,a=e>>>16&65535|0,o=0;0!==r;){r-=o=r>2e3?2e3:r;do{a=a+(i=i+t[n++]|0)|0}while(--o);i%=65521,a%=65521}return i|a<<16|0}},function(e,t,r){var n=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();e.exports=function(e,t,r,i){var a=n,o=i+r;e^=-1;for(var s=i;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}},function(e,t,r){e.exports=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(mr(this,e),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=t.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}return yr(e,[{key:"_set",value:function(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}},{key:"get",value:function(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){var t=this.oldCache.get(e);return this._set(e,t),t}}},{key:"set",value:function(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}},{key:"has",value:function(e){return this.cache.has(e)||this.oldCache.has(e)}},{key:"peek",value:function(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}},{key:"delete",value:function(e){var t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}},{key:"clear",value:function(){this.cache.clear(),this.oldCache.clear(),this._size=0}},{key:"keys",value:regeneratorRuntime.mark((function e(){var t,r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Nr(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=Ir(r.value,1),i=n[0],e.next=7,i;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"values",value:regeneratorRuntime.mark((function e(){var t,r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Nr(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=Ir(r.value,2),i=n[1],e.next=7,i;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:Symbol.iterator,value:regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Nr(this.cache),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=r.value,e.next=7,n;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:i=Nr(this.oldCache),e.prev=18,i.s();case 20:if((a=i.n()).done){e.next=29;break}if(o=a.value,s=Ir(o,1),c=s[0],e.t1=this.cache.has(c),e.t1){e.next=27;break}return e.next=27,o;case 27:e.next=20;break;case 29:e.next=34;break;case 31:e.prev=31,e.t2=e.catch(18),i.e(e.t2);case 34:return e.prev=34,i.f(),e.finish(34);case 37:case"end":return e.stop()}}),e,this,[[1,11,14,17],[18,31,34,37]])}))},{key:"size",get:function(){var e,t=0,r=Nr(this.oldCache.keys());try{for(r.s();!(e=r.n()).done;){var n=e.value;this.cache.has(n)||t++}}catch(e){r.e(e)}finally{r.f()}return this._size+t}}]),e}()},function(e,t){e.exports=n;var r=null;try{r=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function i(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=i;var a={},o={};function s(e,t){var r,n,i;return t?(i=0<=(e>>>=0)&&e<256)&&(n=o[e])?n:(r=u(e,(0|e)<0?-1:0,!0),i&&(o[e]=r),r):(i=-128<=(e|=0)&&e<128)&&(n=a[e])?n:(r=u(e,e<0?-1:0,!1),i&&(a[e]=r),r)}function c(e,t){if(isNaN(e))return t?b:m;if(t){if(e<0)return b;if(e>=d)return S}else{if(e<=-g)return _;if(e+1>=g)return x}return e<0?c(-e,t).neg():u(e%p|0,e/p|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=s,n.fromNumber=c,n.fromBits=u;var h=Math.pow;function l(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return l(e.substring(1),t,r).neg();for(var i=c(h(r,8)),a=m,o=0;o<e.length;o+=8){var s=Math.min(8,e.length-o),u=parseInt(e.substring(o,o+s),r);if(s<8){var f=c(h(r,s));a=a.mul(f).add(c(u))}else a=(a=a.mul(i)).add(c(u))}return a.unsigned=t,a}function f(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?l(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=f;var p=4294967296,d=p*p,g=d/2,v=s(1<<24),m=s(0);n.ZERO=m;var b=s(0,!0);n.UZERO=b;var y=s(1);n.ONE=y;var w=s(1,!0);n.UONE=w;var k=s(-1);n.NEG_ONE=k;var x=u(-1,2147483647,!1);n.MAX_VALUE=x;var S=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=S;var _=u(0,-2147483648,!1);n.MIN_VALUE=_;var C=n.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(_)){var t=c(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=c(h(e,6),this.unsigned),a=this,o="";;){var s=a.div(i),u=(a.sub(s.mul(i)).toInt()>>>0).toString(e);if((a=s).isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1==(1&this.low)},C.isEven=function(){return 0==(1&this.low)},C.equals=function(e){return i(e)||(e=f(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(e){return this.comp(e)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return this.comp(e)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(e){if(i(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(_)?_:this.not().add(y)},C.neg=C.negate,C.add=function(e){i(e)||(e=f(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,a=65535&this.low,o=e.high>>>16,s=65535&e.high,c=e.low>>>16,h=0,l=0,p=0,d=0;return p+=(d+=a+(65535&e.low))>>>16,l+=(p+=n+c)>>>16,h+=(l+=r+s)>>>16,h+=t+o,u((p&=65535)<<16|(d&=65535),(h&=65535)<<16|(l&=65535),this.unsigned)},C.subtract=function(e){return i(e)||(e=f(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return m;if(i(e)||(e=f(e)),r)return u(r.mul(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(_))return e.isOdd()?_:m;if(e.eq(_))return this.isOdd()?_:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(v)&&e.lt(v))return c(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,o=65535&this.low,s=e.high>>>16,h=65535&e.high,l=e.low>>>16,p=65535&e.low,d=0,g=0,b=0,y=0;return b+=(y+=o*p)>>>16,g+=(b+=a*p)>>>16,b&=65535,g+=(b+=o*l)>>>16,d+=(g+=n*p)>>>16,g&=65535,d+=(g+=a*l)>>>16,g&=65535,d+=(g+=o*h)>>>16,d+=t*p+n*l+a*h+o*s,u((b&=65535)<<16|(y&=65535),(d&=65535)<<16|(g&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(e){if(i(e)||(e=f(e)),e.isZero())throw Error("division by zero");var t,n,a;if(r)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?r.div_u:r.div_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?b:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return b;if(e.gt(this.shru(1)))return w;a=b}else{if(this.eq(_))return e.eq(y)||e.eq(k)?_:e.eq(_)?y:(t=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?y:k:(n=this.sub(e.mul(t)),a=t.add(n.div(e)));if(e.eq(_))return this.unsigned?b:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();a=m}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),s=o<=48?1:h(2,o-48),l=c(t),p=l.mul(e);p.isNegative()||p.gt(n);)p=(l=c(t-=s,this.unsigned)).mul(e);l.isZero()&&(l=y),a=a.add(l),n=n.sub(p)}return a},C.div=C.divide,C.modulo=function(e){return i(e)||(e=f(e)),r?u((this.unsigned?r.rem_u:r.rem_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return u(~this.low,~this.high,this.unsigned)},C.and=function(e){return i(e)||(e=f(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return i(e)||(e=f(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return i(e)||(e=f(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){if(i(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},function(e,t){var r={utf8:{stringToBytes:function(e){return r.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(r.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=r},function(e,t,r){var n=r(87),i=r(94),a=r(97);function o(e){var t=n.parse(e),r=t.protocol,o=t.pathname;return"file:"===r?new a(unescape(o)):new i(e)}e.exports={LocalFile:a,RemoteFile:i,fromUrl:o,open:function(e,t,r){if(r)return r;if(e)return o(e);if(t)return new a(t);throw new Error("no url, path, or filehandle provided, cannot open")}}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n="__ES6-PROMISIFY--CUSTOM-ARGUMENTS__";function i(e){if("function"!=typeof e)throw new TypeError("Argument to promisify must be a function");var t=e[n],r=i.Promise||Promise;if("function"!=typeof r)throw new Error("No Promise implementation found; do you need a polyfill?");return function(){for(var n=this,i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return new r((function(r,i){a.push((function(e){if(e)return i(e);for(var n=arguments.length,a=Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];if(1===a.length||!t)return r(a[0]);var s={};a.forEach((function(e,r){var n=t[r];n&&(s[n]=e)})),r(s)})),e.call.apply(e,[n].concat(a))}))}}i.argumentNames=n,i.Promise=void 0,t.promisify=i},function(e,t,r){var n=r(18),i=r(99),a=r(100);e.exports={CramFile:n,IndexedCramFile:i,CraiIndex:a}},function(e,t,r){(function(t){var n=r(20),i=r(61),a=r(30),o=r(0),s=o.CramUnimplementedError,c=o.CramMalformedError,u=r(62),h=r(66),l=h.cramFileDefinition,f=h.getSectionParsers,p=r(71),d=r(33).open,g=r(8),v=g.parseItem,m=g.tinyMemoize,b=r(98).parseHeaderText,y=function(){function e(t){mr(this,e),this.file=d(t.url,t.path,t.filehandle),this.validateChecksums=!0,this.fetchReferenceSequenceCallback=t.seqFetch,this.options={checkSequenceMD5:!1!==t.checkSequenceMD5,cacheSize:void 0!==t.cacheSize?t.cacheSize:2e4},this.featureCache=new a({maxSize:this.options.cacheSize})}var r,o,h,g,m,y,w,k,x;return yr(e,[{key:"toString",value:function(){return this.file.filename?this.file.filename:this.file.url?this.file.url:"(cram file)"}},{key:"read",value:function(e,t,r,n){return this.file.read(e,t,r,n)}},{key:"stat",value:function(){return this.file.stat()}},{key:"getDefinition",value:(x=vr(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.allocUnsafe(l.maxLength),e.next=3,this.file.read(r,0,l.maxLength,0);case 3:if(2===(n=l.parser.parse(r).result).majorVersion||3===n.majorVersion){e.next=6;break}throw new s("CRAM version ".concat(n.majorVersion," not supported"));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:"getSamHeader",value:(k=vr(regeneratorRuntime.mark((function e(){var t,r,n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContainerById(0);case 2:if(t=e.sent){e.next=5;break}throw new c("file contains no containers");case 5:return e.next=7,t.getFirstBlock();case 7:return r=e.sent,n=r.content,i=n.readInt32LE(0),a=n.toString("utf8",4,4+i),e.abrupt("return",b(a));case 12:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"getSectionParsers",value:(w=vr(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDefinition();case 2:return t=e.sent,r=t.majorVersion,e.abrupt("return",f(r));case 5:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)})},{key:"getContainerById",value:(y=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s,u,h,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSectionParsers();case 2:return r=e.sent,n=r.cramFileDefinition.maxLength,e.next=6,this.file.stat();case 6:i=e.sent,a=i.size,o=r.cramContainerHeader1,u=0;case 10:if(!(u<=t)){e.next=35;break}if(!(n+o.maxLength+8>=a)){e.next=13;break}return e.abrupt("return");case 13:return s=this.getContainerAtPosition(n),e.next=16,s.getHeader();case 16:if(h=e.sent){e.next=19;break}throw new c("container ".concat(t," not found in file"));case 19:if(0!==u){e.next=31;break}n=h._endPosition,l=0;case 22:if(!(l<h.numBlocks)){e.next=29;break}return e.next=25,this.readBlock(n);case 25:n=e.sent._endPosition;case 26:l+=1,e.next=22;break;case 29:e.next=32;break;case 31:n+=h._size+h.length;case 32:u+=1,e.next=10;break;case 35:return e.abrupt("return",s);case 36:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"checkCrc32",value:(m=vr(regeneratorRuntime.mark((function e(r,n,a,o){var s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.allocUnsafe(n),e.next=3,this.file.read(s,0,n,r);case 3:if((u=i.unsigned(s))===a){e.next=6;break}throw new c("crc mismatch in ".concat(o,": recorded CRC32 = ").concat(a,", but calculated CRC32 = ").concat(u));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return m.apply(this,arguments)})},{key:"containerCount",value:(g=vr(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSectionParsers();case 2:return t=e.sent,e.next=5,this.file.stat();case 5:r=e.sent,n=r.size,i=t.cramContainerHeader1,a=0,o=t.cramFileDefinition.maxLength;case 9:if(!(o+i.maxLength+8<n)){e.next=31;break}return e.next=12,this.getContainerAtPosition(o).getHeader();case 12:if(s=e.sent){e.next=15;break}return e.abrupt("break",31);case 15:if(0!==a){e.next=27;break}o=s._endPosition,c=0;case 18:if(!(c<s.numBlocks)){e.next=25;break}return e.next=21,this.readBlock(o);case 21:o=e.sent._endPosition;case 22:c+=1,e.next=18;break;case 25:e.next=28;break;case 27:o+=s._size+s.length;case 28:a+=1;case 29:e.next=9;break;case 31:return e.abrupt("return",a);case 32:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"getContainerAtPosition",value:function(e){return new p(this,e)}},{key:"readBlockHeader",value:(h=vr(regeneratorRuntime.mark((function e(r){var n,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSectionParsers();case 2:return n=e.sent,i=n.cramBlockHeader,e.next=6,this.file.stat();case 6:if(a=e.sent,o=a.size,!(r+i.maxLength>=o)){e.next=10;break}return e.abrupt("return");case 10:return s=t.allocUnsafe(i.maxLength),e.next=13,this.file.read(s,0,i.maxLength,r);case 13:return e.abrupt("return",v(s,i.parser,0,r));case 14:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"_parseSection",value:(o=vr(regeneratorRuntime.mark((function e(r,n){var i,a,o,s,u,h,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=l.length>2&&void 0!==l[2]?l[2]:r.maxLength,!(a=l.length>3?l[3]:void 0)){e.next=6;break}o=a,e.next=15;break;case 6:return e.next=8,this.file.stat();case 8:if(s=e.sent,u=s.size,!(n+i>=u)){e.next=12;break}return e.abrupt("return");case 12:return o=t.allocUnsafe(i),e.next=15,this.file.read(o,0,i,n);case 15:if((h=v(o,r.parser,0,n))._size===i){e.next=18;break}throw new c("section read error: requested size ".concat(i," does not equal parsed size ").concat(h._size));case 18:return e.abrupt("return",h);case 19:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"_uncompress",value:function(e,t,r){if("gzip"===e)n.gunzipSync(t).copy(r);else{if("rans"!==e)throw new s("".concat(e," decompression not yet implemented"));u.uncompress(t,r)}}},{key:"readBlock",value:(r=vr(regeneratorRuntime.mark((function e(r){var n,i,a,o,s,c,u,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDefinition();case 2:return n=e.sent,i=n.majorVersion,e.next=6,this.getSectionParsers();case 6:return a=e.sent,e.next=9,this.readBlockHeader(r);case 9:if(o=e.sent,s=o._endPosition,o.contentPosition=o._endPosition,c=t.allocUnsafe(o.uncompressedSize),"raw"===o.compressionMethod){e.next=20;break}return u=t.allocUnsafe(o.compressedSize),e.next=17,this.read(u,0,o.compressedSize,s);case 17:this._uncompress(o.compressionMethod,u,c),e.next=22;break;case 20:return e.next=22,this.read(c,0,o.uncompressedSize,s);case 22:if(o.content=c,!(i>=3)){e.next=35;break}return e.next=25,this._parseSection(a.cramBlockCrc32,s+o.compressedSize);case 25:if(h=e.sent,o.crc32=h.crc32,e.t0=this.validateChecksums,!e.t0){e.next=31;break}return e.next=31,this.checkCrc32(r,o._size+o.compressedSize,o.crc32,"block data");case 31:o._endPosition=h._endPosition,o._size=o.compressedSize+a.cramBlockCrc32.maxLength,e.next=36;break;case 35:o._endPosition=s+o.compressedSize,o._size=o.compressedSize;case 36:return e.abrupt("return",o);case 37:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}]),e}();"getDefinition getSectionParsers getSamHeader".split(" ").forEach((function(e){return m(y,e)})),e.exports=y}).call(this,r(1).Buffer)},function(e,t,r){t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){for(var t,r=u(e),n=r[0],o=r[1],s=new a(function(e,t,r){return 3*(t+r)/4-r}(0,n,o)),c=0,h=o>0?n-4:n,l=0;l<h;l+=4)t=i[e.charCodeAt(l)]<<18|i[e.charCodeAt(l+1)]<<12|i[e.charCodeAt(l+2)]<<6|i[e.charCodeAt(l+3)],s[c++]=t>>16&255,s[c++]=t>>8&255,s[c++]=255&t;return 2===o&&(t=i[e.charCodeAt(l)]<<2|i[e.charCodeAt(l+1)]>>4,s[c++]=255&t),1===o&&(t=i[e.charCodeAt(l)]<<10|i[e.charCodeAt(l+1)]<<4|i[e.charCodeAt(l+2)]>>2,s[c++]=t>>8&255,s[c++]=255&t),s},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,a=[],o=0,s=r-i;o<s;o+=16383)a.push(h(e,o,o+16383>s?s:o+16383));return 1===i?(t=e[r-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),a.join("")};for(var n=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=o.length;s<c;++s)n[s]=o[s],i[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function h(e,t,r){for(var i,a,o=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(n[(a=i)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,i){var a,o,s=8*i-n-1,c=(1<<s)-1,u=c>>1,h=-7,l=r?i-1:0,f=r?-1:1,p=e[t+l];for(l+=f,a=p&(1<<-h)-1,p>>=-h,h+=s;h>0;a=256*a+e[t+l],l+=f,h-=8);for(o=a&(1<<-h)-1,a>>=-h,h+=n;h>0;o=256*o+e[t+l],l+=f,h-=8);if(0===a)a=1-u;else{if(a===c)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),a-=u}return(p?-1:1)*o*Math.pow(2,a-n)},t.write=function(e,t,r,n,i,a){var o,s,c,u=8*a-i-1,h=(1<<u)-1,l=h>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:a-1,d=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+l>=1?f/c:f*Math.pow(2,1-l))*c>=2&&(o++,c/=2),o+l>=h?(s=0,o=h):o+l>=1?(s=(t*c-1)*Math.pow(2,i),o+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,i),o=0));i>=8;e[r+p]=255&s,p+=d,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;e[r+p]=255&o,p+=d,o/=256,u-=8);e[r+p-d]|=128*g}},function(e,t,r){e.exports=i;var n=r(14).EventEmitter;function i(){n.call(this)}r(4)(i,n),i.Readable=r(15),i.Writable=r(47),i.Duplex=r(48),i.Transform=r(49),i.PassThrough=r(50),i.Stream=i,i.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function a(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",a),e._isStdio||t&&!1===t.end||(r.on("end",s),r.on("close",c));var o=!1;function s(){o||(o=!0,e.end())}function c(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(h(),0===n.listenerCount(this,"error"))throw e}function h(){r.removeListener("data",i),e.removeListener("drain",a),r.removeListener("end",s),r.removeListener("close",c),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",h),r.removeListener("close",h),e.removeListener("close",h)}return r.on("error",u),e.on("error",u),r.on("end",h),r.on("close",h),e.on("close",h),e.emit("pipe",r),e}},function(e,t){},function(e,t,r){var n=r(10).Buffer,i=r(42);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,r,i=n.allocUnsafe(e>>>0),a=this.head,o=0;a;)t=i,r=o,a.data.copy(t,r),o+=a.data.length,a=a.next;return i},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(44),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(2))},function(e,t,r){(function(e,t){!function(e,r){if(!e.setImmediate){var n,i,a,o,s,c=1,u={},h=!1,l=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){d(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(o="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&d(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),n=function(t){e.postMessage(o+t,"*")}):e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){d(e.data)},n=function(e){a.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(i=l.documentElement,n=function(e){var t=l.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):n=function(e){setTimeout(d,0,e)},f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return u[c]=i,n(c),c++},f.clearImmediate=p}function p(e){delete u[e]}function d(e){if(h)setTimeout(d,0,e);else{var t=u[e];if(t){h=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(undefined,r)}}(t)}finally{p(e),h=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(2),r(3))},function(e,t,r){(function(t){function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,r(2))},function(e,t,r){e.exports=a;var n=r(25),i=r(7);function a(e){if(!(this instanceof a))return new a(e);n.call(this,e)}i.inherits=r(4),i.inherits(a,n),a.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){e.exports=r(16)},function(e,t,r){e.exports=r(5)},function(e,t,r){e.exports=r(15).Transform},function(e,t,r){e.exports=r(15).PassThrough},function(e,t,r){(function(e,n){var i=r(26),a=r(53),o=r(54),s=r(57),c=r(60);for(var u in c)t[u]=c[u];function h(e){if("number"!=typeof e||e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7,h.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,i(this.init_done,"close before init"),i(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?o.deflateEnd(this.strm):this.mode!==t.INFLATE&&this.mode!==t.GUNZIP&&this.mode!==t.INFLATERAW&&this.mode!==t.UNZIP||s.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null)},h.prototype.write=function(e,t,r,n,i,a,o){return this._write(!0,e,t,r,n,i,a,o)},h.prototype.writeSync=function(e,t,r,n,i,a,o){return this._write(!1,e,t,r,n,i,a,o)},h.prototype._write=function(r,a,o,s,c,u,h,l){if(i.equal(arguments.length,8),i(this.init_done,"write before init"),i(this.mode!==t.NONE,"already finalized"),i.equal(!1,this.write_in_progress,"write already in progress"),i.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,i.equal(!1,void 0===a,"must provide flush value"),this.write_in_progress=!0,a!==t.Z_NO_FLUSH&&a!==t.Z_PARTIAL_FLUSH&&a!==t.Z_SYNC_FLUSH&&a!==t.Z_FULL_FLUSH&&a!==t.Z_FINISH&&a!==t.Z_BLOCK)throw new Error("Invalid flush value");if(null==o&&(o=e.alloc(0),c=0,s=0),this.strm.avail_in=c,this.strm.input=o,this.strm.next_in=s,this.strm.avail_out=l,this.strm.output=u,this.strm.next_out=h,this.flush=a,!r)return this._process(),this._checkError()?this._afterSync():void 0;var f=this;return n.nextTick((function(){f._process(),f._after()})),this},h.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},h.prototype._process=function(){var e=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=o.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=t.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=s.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=s.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=s.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=s.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},h.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},h.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},h.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},h.prototype.init=function(e,r,n,a,o){i(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),i(e>=8&&e<=15,"invalid windowBits"),i(r>=-1&&r<=9,"invalid compression level"),i(n>=1&&n<=9,"invalid memlevel"),i(a===t.Z_FILTERED||a===t.Z_HUFFMAN_ONLY||a===t.Z_RLE||a===t.Z_FIXED||a===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(r,e,n,a,o),this._setDictionary()},h.prototype.params=function(){throw new Error("deflateParams Not supported")},h.prototype.reset=function(){this._reset(),this._setDictionary()},h.prototype._init=function(e,r,n,i,c){switch(this.level=e,this.windowBits=r,this.memLevel=n,this.strategy=i,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new a,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=o.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=s.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=c,this.write_in_progress=!1,this.init_done=!0},h.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=o.deflateSetDictionary(this.strm,this.dictionary)}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},h.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=o.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=s.inflateReset(this.strm)}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=h}).call(this,r(1).Buffer,r(3))},function(e,t){e.exports=function(e){return e&&"object"==dr(e)&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t,r){e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,r){var n,i=r(11),a=r(55),o=r(28),s=r(29),c=r(56),u=-2,h=258,l=262,f=103,p=113,d=666;function g(e,t){return e.msg=c[t],t}function v(e){return(e<<1)-(e>4?9:0)}function m(e){for(var t=e.length;--t>=0;)e[t]=0}function b(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(i.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function y(e,t){a._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,b(e.strm)}function w(e,t){e.pending_buf[e.pending++]=t}function k(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function x(e,t){var r,n,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-l?e.strstart-(e.w_size-l):0,u=e.window,f=e.w_mask,p=e.prev,d=e.strstart+h,g=u[a+o-1],v=u[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(r=t)+o]===v&&u[r+o-1]===g&&u[r]===u[a]&&u[++r]===u[a+1]){a+=2,r++;do{}while(u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&a<d);if(n=h-(d-a),a=d-h,n>o){if(e.match_start=t,o=n,n>=s)break;g=u[a+o-1],v=u[a+o]}}}while((t=p[t&f])>c&&0!=--i);return o<=e.lookahead?o:e.lookahead}function S(e){var t,r,n,a,c,u,h,f,p,d,g=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=g+(g-l)){i.arraySet(e.window,e.window,g,g,0),e.match_start-=g,e.strstart-=g,e.block_start-=g,t=r=e.hash_size;do{n=e.head[--t],e.head[t]=n>=g?n-g:0}while(--r);t=r=g;do{n=e.prev[--t],e.prev[t]=n>=g?n-g:0}while(--r);a+=g}if(0===e.strm.avail_in)break;if(u=e.strm,h=e.window,f=e.strstart+e.lookahead,p=a,d=void 0,(d=u.avail_in)>p&&(d=p),r=0===d?0:(u.avail_in-=d,i.arraySet(h,u.input,u.next_in,d,f),1===u.state.wrap?u.adler=o(u.adler,h,d,f):2===u.state.wrap&&(u.adler=s(u.adler,h,d,f)),u.next_in+=d,u.total_in+=d,d),e.lookahead+=r,e.lookahead+e.insert>=3)for(c=e.strstart-e.insert,e.ins_h=e.window[c],e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+3-1])&e.hash_mask,e.prev[c&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=c,c++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<l&&0!==e.strm.avail_in)}function _(e,t){for(var r,n;;){if(e.lookahead<l){if(S(e),e.lookahead<l&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-l&&(e.match_length=x(e,r)),e.match_length>=3)if(n=a._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}function C(e,t){for(var r,n,i;;){if(e.lookahead<l){if(S(e),e.lookahead<l&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-l&&(e.match_length=x(e,r),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,n=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(y(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=a._tr_tally(e,0,e.window[e.strstart-1]))&&y(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}function R(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function E(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),m(this.dyn_ltree),m(this.dyn_dtree),m(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),m(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),m(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function A(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:p,e.adler=2===t.wrap?0:1,t.last_flush=0,a._tr_init(t),0):g(e,u)}function T(e){var t,r=A(e);return 0===r&&((t=e.state).window_size=2*t.w_size,m(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),r}function I(e,t,r,n,a,o){if(!e)return u;var s=1;if(-1===t&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),a<1||a>9||8!==r||n<8||n>15||t<0||t>9||o<0||o>4)return g(e,u);8===n&&(n=9);var c=new E;return e.state=c,c.strm=e,c.wrap=s,c.gzhead=null,c.w_bits=n,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=a+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+3-1)/3),c.window=new i.Buf8(2*c.w_size),c.head=new i.Buf16(c.hash_size),c.prev=new i.Buf16(c.w_size),c.lit_bufsize=1<<a+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new i.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=o,c.method=r,T(e)}n=[new R(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(S(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,y(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-l&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(y(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(y(e,!1),e.strm.avail_out),1)})),new R(4,4,8,4,_),new R(4,5,16,8,_),new R(4,6,32,32,_),new R(4,4,16,16,C),new R(8,16,32,32,C),new R(8,16,128,128,C),new R(8,32,128,256,C),new R(32,128,258,1024,C),new R(32,258,258,4096,C)],t.deflateInit=function(e,t){return I(e,t,8,15,8,0)},t.deflateInit2=I,t.deflateReset=T,t.deflateResetKeep=A,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?u:(e.state.gzhead=t,0):u},t.deflate=function(e,t){var r,i,o,c;if(!e||!e.state||t>5||t<0)return e?g(e,u):u;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||i.status===d&&4!==t)return g(e,0===e.avail_out?-5:u);if(i.strm=e,r=i.last_flush,i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,w(i,31),w(i,139),w(i,8),i.gzhead?(w(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),w(i,255&i.gzhead.time),w(i,i.gzhead.time>>8&255),w(i,i.gzhead.time>>16&255),w(i,i.gzhead.time>>24&255),w(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),w(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(w(i,255&i.gzhead.extra.length),w(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(w(i,0),w(i,0),w(i,0),w(i,0),w(i,0),w(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),w(i,3),i.status=p);else{var l=8+(i.w_bits-8<<4)<<8;l|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(l|=32),l+=31-l%31,i.status=p,k(i,l),0!==i.strstart&&(k(i,e.adler>>>16),k(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),b(e),o=i.pending,i.pending!==i.pending_buf_size));)w(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),b(e),o=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,w(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===c&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),b(e),o=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,w(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===c&&(i.status=f)}else i.status=f;if(i.status===f&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&b(e),i.pending+2<=i.pending_buf_size&&(w(i,255&e.adler),w(i,e.adler>>8&255),e.adler=0,i.status=p)):i.status=p),0!==i.pending){if(b(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&v(t)<=v(r)&&4!==t)return g(e,-5);if(i.status===d&&0!==e.avail_in)return g(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&i.status!==d){var x=2===i.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(S(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var r,n,i,o,s=e.window;;){if(e.lookahead<=h){if(S(e),e.lookahead<=h&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(n=s[i=e.strstart-1])===s[++i]&&n===s[++i]&&n===s[++i]){o=e.strstart+h;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<o);e.match_length=h-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=a._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}(i,t):n[i.level].func(i,t);if(3!==x&&4!==x||(i.status=d),1===x||3===x)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===x&&(1===t?a._tr_align(i):5!==t&&(a._tr_stored_block(i,0,0,!1),3===t&&(m(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),b(e),0===e.avail_out))return i.last_flush=-1,0}return 4!==t?0:i.wrap<=0?1:(2===i.wrap?(w(i,255&e.adler),w(i,e.adler>>8&255),w(i,e.adler>>16&255),w(i,e.adler>>24&255),w(i,255&e.total_in),w(i,e.total_in>>8&255),w(i,e.total_in>>16&255),w(i,e.total_in>>24&255)):(k(i,e.adler>>>16),k(i,65535&e.adler)),b(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},t.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&t!==f&&t!==p&&t!==d?g(e,u):(e.state=null,t===p?g(e,-3):0):u},t.deflateSetDictionary=function(e,t){var r,n,a,s,c,h,l,f,p=t.length;if(!e||!e.state)return u;if(2===(s=(r=e.state).wrap)||1===s&&42!==r.status||r.lookahead)return u;for(1===s&&(e.adler=o(e.adler,t,p,0)),r.wrap=0,p>=r.w_size&&(0===s&&(m(r.head),r.strstart=0,r.block_start=0,r.insert=0),f=new i.Buf8(r.w_size),i.arraySet(f,t,p-r.w_size,r.w_size,0),t=f,p=r.w_size),c=e.avail_in,h=e.next_in,l=e.input,e.avail_in=p,e.next_in=0,e.input=t,S(r);r.lookahead>=3;){n=r.strstart,a=r.lookahead-2;do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+3-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--a);r.strstart=n,r.lookahead=2,S(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=h,e.input=l,e.avail_in=c,r.wrap=s,0},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,r){var n=r(11);function i(e){for(var t=e.length;--t>=0;)e[t]=0}var a=256,o=286,s=30,c=15,u=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],h=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],f=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],p=new Array(576);i(p);var d=new Array(60);i(d);var g=new Array(512);i(g);var v=new Array(256);i(v);var m=new Array(29);i(m);var b,y,w,k=new Array(s);function x(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function S(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function _(e){return e<256?g[e]:g[256+(e>>>7)]}function C(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function R(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,C(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function E(e,t,r){R(e,r[2*t],r[2*t+1])}function A(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function T(e,t,r){var n,i,a=new Array(16),o=0;for(n=1;n<=c;n++)a[n]=o=o+r[n-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=A(a[s]++,s))}}function I(e){var t;for(t=0;t<o;t++)e.dyn_ltree[2*t]=0;for(t=0;t<s;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function L(e){e.bi_valid>8?C(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function M(e,t,r,n){var i=2*t,a=2*r;return e[i]<e[a]||e[i]===e[a]&&n[t]<=n[r]}function F(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&M(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!M(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function D(e,t,r){var n,i,o,s,c=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],i=e.pending_buf[e.l_buf+c],c++,0===n?E(e,i,t):(E(e,(o=v[i])+a+1,t),0!==(s=u[o])&&R(e,i-=m[o],s),E(e,o=_(--n),r),0!==(s=h[o])&&R(e,n-=k[o],s))}while(c<e.last_lit);E(e,256,t)}function O(e,t){var r,n,i,a=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,h=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<u;r++)0!==a[2*r]?(e.heap[++e.heap_len]=h=r,e.depth[r]=0):a[2*r+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=h<2?++h:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=o[2*i+1]);for(t.max_code=h,r=e.heap_len>>1;r>=1;r--)F(e,a,r);i=u;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],F(e,a,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,a[2*i]=a[2*r]+a[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,a[2*r+1]=a[2*n+1]=i,e.heap[1]=i++,F(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,i,a,o,s,u=t.dyn_tree,h=t.max_code,l=t.stat_desc.static_tree,f=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,g=t.stat_desc.max_length,v=0;for(a=0;a<=c;a++)e.bl_count[a]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<573;r++)(a=u[2*u[2*(n=e.heap[r])+1]+1]+1)>g&&(a=g,v++),u[2*n+1]=a,n>h||(e.bl_count[a]++,o=0,n>=d&&(o=p[n-d]),s=u[2*n],e.opt_len+=s*(a+o),f&&(e.static_len+=s*(l[2*n+1]+o)));if(0!==v){do{for(a=g-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[g]--,v-=2}while(v>0);for(a=g;0!==a;a--)for(n=e.bl_count[a];0!==n;)(i=e.heap[--r])>h||(u[2*i+1]!==a&&(e.opt_len+=(a-u[2*i+1])*u[2*i],u[2*i+1]=a),n--)}}(e,t),T(a,h,e.bl_count)}function B(e,t,r){var n,i,a=-1,o=t[1],s=0,c=7,u=4;for(0===o&&(c=138,u=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=t[2*(n+1)+1],++s<c&&i===o||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=i,0===o?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4))}function N(e,t,r){var n,i,a=-1,o=t[1],s=0,c=7,u=4;for(0===o&&(c=138,u=3),n=0;n<=r;n++)if(i=o,o=t[2*(n+1)+1],!(++s<c&&i===o)){if(s<u)do{E(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(E(e,i,e.bl_tree),s--),E(e,16,e.bl_tree),R(e,s-3,2)):s<=10?(E(e,17,e.bl_tree),R(e,s-3,3)):(E(e,18,e.bl_tree),R(e,s-11,7));s=0,a=i,0===o?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4)}}i(k);var P=!1;function z(e,t,r,i){R(e,0+(i?1:0),3),function(e,t,r,i){L(e),C(e,r),C(e,~r),n.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r)}t._tr_init=function(e){P||(function(){var e,t,r,n,i,a=new Array(16);for(r=0,n=0;n<28;n++)for(m[n]=r,e=0;e<1<<u[n];e++)v[r++]=n;for(v[r-1]=n,i=0,n=0;n<16;n++)for(k[n]=i,e=0;e<1<<h[n];e++)g[i++]=n;for(i>>=7;n<s;n++)for(k[n]=i<<7,e=0;e<1<<h[n]-7;e++)g[256+i++]=n;for(t=0;t<=c;t++)a[t]=0;for(e=0;e<=143;)p[2*e+1]=8,e++,a[8]++;for(;e<=255;)p[2*e+1]=9,e++,a[9]++;for(;e<=279;)p[2*e+1]=7,e++,a[7]++;for(;e<=287;)p[2*e+1]=8,e++,a[8]++;for(T(p,287,a),e=0;e<s;e++)d[2*e+1]=5,d[2*e]=A(e,5);b=new x(p,u,257,o,c),y=new x(d,h,0,s,c),w=new x(new Array(0),l,0,19,7)}(),P=!0),e.l_desc=new S(e.dyn_ltree,b),e.d_desc=new S(e.dyn_dtree,y),e.bl_desc=new S(e.bl_tree,w),e.bi_buf=0,e.bi_valid=0,I(e)},t._tr_stored_block=z,t._tr_flush_block=function(e,t,r,n){var i,o,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<a;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),O(e,e.l_desc),O(e,e.d_desc),s=function(e){var t;for(B(e,e.dyn_ltree,e.l_desc.max_code),B(e,e.dyn_dtree,e.d_desc.max_code),O(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*f[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=r+5,r+4<=i&&-1!==t?z(e,t,r,n):4===e.strategy||o===i?(R(e,2+(n?1:0),3),D(e,p,d)):(R(e,4+(n?1:0),3),function(e,t,r,n){var i;for(R(e,t-257,5),R(e,r-1,5),R(e,n-4,4),i=0;i<n;i++)R(e,e.bl_tree[2*f[i]+1],3);N(e,e.dyn_ltree,t-1),N(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),D(e,e.dyn_ltree,e.dyn_dtree)),I(e),n&&L(e)},t._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(v[r]+a+1)]++,e.dyn_dtree[2*_(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){R(e,2,3),E(e,256,p),function(e){16===e.bi_valid?(C(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,r){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,r){var n=r(11),i=r(28),a=r(29),o=r(58),s=r(59),c=-2,u=12,h=30;function l(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function f(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function p(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(852),t.distcode=t.distdyn=new n.Buf32(592),t.sane=1,t.back=-1,0):c}function d(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,p(e)):c}function g(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?c:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,d(e))):c}function v(e,t){var r,n;return e?(n=new f,e.state=n,n.window=null,0!==(r=g(e,t))&&(e.state=null),r):c}var m,b,y=!0;function w(e){if(y){var t;for(m=new n.Buf32(512),b=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,m,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,b,0,e.work,{bits:5}),y=!1}e.lencode=m,e.lenbits=9,e.distcode=b,e.distbits=5}function k(e,t,r,i){var a,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new n.Buf8(o.wsize)),i>=o.wsize?(n.arraySet(o.window,t,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((a=o.wsize-o.wnext)>i&&(a=i),n.arraySet(o.window,t,r-i,a,o.wnext),(i-=a)?(n.arraySet(o.window,t,r-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}t.inflateReset=d,t.inflateReset2=g,t.inflateResetKeep=p,t.inflateInit=function(e){return v(e,15)},t.inflateInit2=v,t.inflate=function(e,t){var r,f,p,d,g,v,m,b,y,x,S,_,C,R,E,A,T,I,L,M,F,D,O,B,N=0,P=new n.Buf8(4),z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return c;(r=e.state).mode===u&&(r.mode=13),g=e.next_out,p=e.output,m=e.avail_out,d=e.next_in,f=e.input,v=e.avail_in,b=r.hold,y=r.bits,x=v,S=m,D=0;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;y<16;){if(0===v)break e;v--,b+=f[d++]<<y,y+=8}if(2&r.wrap&&35615===b){r.check=0,P[0]=255&b,P[1]=b>>>8&255,r.check=a(r.check,P,2,0),b=0,y=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&b)<<8)+(b>>8))%31){e.msg="incorrect header check",r.mode=h;break}if(8!=(15&b)){e.msg="unknown compression method",r.mode=h;break}if(y-=4,F=8+(15&(b>>>=4)),0===r.wbits)r.wbits=F;else if(F>r.wbits){e.msg="invalid window size",r.mode=h;break}r.dmax=1<<F,e.adler=r.check=1,r.mode=512&b?10:u,b=0,y=0;break;case 2:for(;y<16;){if(0===v)break e;v--,b+=f[d++]<<y,y+=8}if(r.flags=b,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=h;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=h;break}r.head&&(r.head.text=b>>8&1),512&r.flags&&(P[0]=255&b,P[1]=b>>>8&255,r.check=a(r.check,P,2,0)),b=0,y=0,r.mode=3;case 3:for(;y<32;){if(0===v)break e;v--,b+=f[d++]<<y,y+=8}r.head&&(r.head.time=b),512&r.flags&&(P[0]=255&b,P[1]=b>>>8&255,P[2]=b>>>16&255,P[3]=b>>>24&255,r.check=a(r.check,P,4,0)),b=0,y=0,r.mode=4;case 4:for(;y<16;){if(0===v)break e;v--,b+=f[d++]<<y,y+=8}r.head&&(r.head.xflags=255&b,r.head.os=b>>8),512&r.flags&&(P[0]=255&b,P[1]=b>>>8&255,r.check=a(r.check,P,2,0)),b=0,y=0,r.mode=5;case 5:if(1024&r.flags){for(;y<16;){if(0===v)break e;v--,b+=f[d++]<<y,y+=8}r.length=b,r.head&&(r.head.extra_len=b),512&r.flags&&(P[0]=255&b,P[1]=b>>>8&255,r.check=a(r.check,P,2,0)),b=0,y=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((_=r.length)>v&&(_=v),_&&(r.head&&(F=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,f,d,_,F)),512&r.flags&&(r.check=a(r.check,f,_,d)),v-=_,d+=_,r.length-=_),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===v)break e;_=0;do{F=f[d+_++],r.head&&F&&r.length<65536&&(r.head.name+=String.fromCharCode(F))}while(F&&_<v);if(512&r.flags&&(r.check=a(r.check,f,_,d)),v-=_,d+=_,F)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===v)break e;_=0;do{F=f[d+_++],r.head&&F&&r.length<65536&&(r.head.comment+=String.fromCharCode(F))}while(F&&_<v);if(512&r.flags&&(r.check=a(r.check,f,_,d)),v-=_,d+=_,F)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;y<16;){if(0===v)break e;v--,b+=f[d++]<<y,y+=8}if(b!==(65535&r.check)){e.msg="header crc mismatch",r.mode=h;break}b=0,y=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=u;break;case 10:for(;y<32;){if(0===v)break e;v--,b+=f[d++]<<y,y+=8}e.adler=r.check=l(b),b=0,y=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=g,e.avail_out=m,e.next_in=d,e.avail_in=v,r.hold=b,r.bits=y,2;e.adler=r.check=1,r.mode=u;case u:if(5===t||6===t)break e;case 13:if(r.last){b>>>=7&y,y-=7&y,r.mode=27;break}for(;y<3;){if(0===v)break e;v--,b+=f[d++]<<y,y+=8}switch(r.last=1&b,y-=1,3&(b>>>=1)){case 0:r.mode=14;break;case 1:if(w(r),r.mode=20,6===t){b>>>=2,y-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=h}b>>>=2,y-=2;break;case 14:for(b>>>=7&y,y-=7&y;y<32;){if(0===v)break e;v--,b+=f[d++]<<y,y+=8}if((65535&b)!=(b>>>16^65535)){e.msg="invalid stored block lengths",r.mode=h;break}if(r.length=65535&b,b=0,y=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(_=r.length){if(_>v&&(_=v),_>m&&(_=m),0===_)break e;n.arraySet(p,f,d,_,g),v-=_,d+=_,m-=_,g+=_,r.length-=_;break}r.mode=u;break;case 17:for(;y<14;){if(0===v)break e;v--,b+=f[d++]<<y,y+=8}if(r.nlen=257+(31&b),b>>>=5,y-=5,r.ndist=1+(31&b),b>>>=5,y-=5,r.ncode=4+(15&b),b>>>=4,y-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=h;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;y<3;){if(0===v)break e;v--,b+=f[d++]<<y,y+=8}r.lens[z[r.have++]]=7&b,b>>>=3,y-=3}for(;r.have<19;)r.lens[z[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,O={bits:r.lenbits},D=s(0,r.lens,0,19,r.lencode,0,r.work,O),r.lenbits=O.bits,D){e.msg="invalid code lengths set",r.mode=h;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;A=(N=r.lencode[b&(1<<r.lenbits)-1])>>>16&255,T=65535&N,!((E=N>>>24)<=y);){if(0===v)break e;v--,b+=f[d++]<<y,y+=8}if(T<16)b>>>=E,y-=E,r.lens[r.have++]=T;else{if(16===T){for(B=E+2;y<B;){if(0===v)break e;v--,b+=f[d++]<<y,y+=8}if(b>>>=E,y-=E,0===r.have){e.msg="invalid bit length repeat",r.mode=h;break}F=r.lens[r.have-1],_=3+(3&b),b>>>=2,y-=2}else if(17===T){for(B=E+3;y<B;){if(0===v)break e;v--,b+=f[d++]<<y,y+=8}y-=E,F=0,_=3+(7&(b>>>=E)),b>>>=3,y-=3}else{for(B=E+7;y<B;){if(0===v)break e;v--,b+=f[d++]<<y,y+=8}y-=E,F=0,_=11+(127&(b>>>=E)),b>>>=7,y-=7}if(r.have+_>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=h;break}for(;_--;)r.lens[r.have++]=F}}if(r.mode===h)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=h;break}if(r.lenbits=9,O={bits:r.lenbits},D=s(1,r.lens,0,r.nlen,r.lencode,0,r.work,O),r.lenbits=O.bits,D){e.msg="invalid literal/lengths set",r.mode=h;break}if(r.distbits=6,r.distcode=r.distdyn,O={bits:r.distbits},D=s(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,O),r.distbits=O.bits,D){e.msg="invalid distances set",r.mode=h;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(v>=6&&m>=258){e.next_out=g,e.avail_out=m,e.next_in=d,e.avail_in=v,r.hold=b,r.bits=y,o(e,S),g=e.next_out,p=e.output,m=e.avail_out,d=e.next_in,f=e.input,v=e.avail_in,b=r.hold,y=r.bits,r.mode===u&&(r.back=-1);break}for(r.back=0;A=(N=r.lencode[b&(1<<r.lenbits)-1])>>>16&255,T=65535&N,!((E=N>>>24)<=y);){if(0===v)break e;v--,b+=f[d++]<<y,y+=8}if(A&&0==(240&A)){for(I=E,L=A,M=T;A=(N=r.lencode[M+((b&(1<<I+L)-1)>>I)])>>>16&255,T=65535&N,!(I+(E=N>>>24)<=y);){if(0===v)break e;v--,b+=f[d++]<<y,y+=8}b>>>=I,y-=I,r.back+=I}if(b>>>=E,y-=E,r.back+=E,r.length=T,0===A){r.mode=26;break}if(32&A){r.back=-1,r.mode=u;break}if(64&A){e.msg="invalid literal/length code",r.mode=h;break}r.extra=15&A,r.mode=22;case 22:if(r.extra){for(B=r.extra;y<B;){if(0===v)break e;v--,b+=f[d++]<<y,y+=8}r.length+=b&(1<<r.extra)-1,b>>>=r.extra,y-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;A=(N=r.distcode[b&(1<<r.distbits)-1])>>>16&255,T=65535&N,!((E=N>>>24)<=y);){if(0===v)break e;v--,b+=f[d++]<<y,y+=8}if(0==(240&A)){for(I=E,L=A,M=T;A=(N=r.distcode[M+((b&(1<<I+L)-1)>>I)])>>>16&255,T=65535&N,!(I+(E=N>>>24)<=y);){if(0===v)break e;v--,b+=f[d++]<<y,y+=8}b>>>=I,y-=I,r.back+=I}if(b>>>=E,y-=E,r.back+=E,64&A){e.msg="invalid distance code",r.mode=h;break}r.offset=T,r.extra=15&A,r.mode=24;case 24:if(r.extra){for(B=r.extra;y<B;){if(0===v)break e;v--,b+=f[d++]<<y,y+=8}r.offset+=b&(1<<r.extra)-1,b>>>=r.extra,y-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=h;break}r.mode=25;case 25:if(0===m)break e;if(_=S-m,r.offset>_){if((_=r.offset-_)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=h;break}_>r.wnext?(_-=r.wnext,C=r.wsize-_):C=r.wnext-_,_>r.length&&(_=r.length),R=r.window}else R=p,C=g-r.offset,_=r.length;_>m&&(_=m),m-=_,r.length-=_;do{p[g++]=R[C++]}while(--_);0===r.length&&(r.mode=21);break;case 26:if(0===m)break e;p[g++]=r.length,m--,r.mode=21;break;case 27:if(r.wrap){for(;y<32;){if(0===v)break e;v--,b|=f[d++]<<y,y+=8}if(S-=m,e.total_out+=S,r.total+=S,S&&(e.adler=r.check=r.flags?a(r.check,p,S,g-S):i(r.check,p,S,g-S)),S=m,(r.flags?b:l(b))!==r.check){e.msg="incorrect data check",r.mode=h;break}b=0,y=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;y<32;){if(0===v)break e;v--,b+=f[d++]<<y,y+=8}if(b!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=h;break}b=0,y=0}r.mode=29;case 29:D=1;break e;case h:D=-3;break e;case 31:return-4;case 32:default:return c}return e.next_out=g,e.avail_out=m,e.next_in=d,e.avail_in=v,r.hold=b,r.bits=y,(r.wsize||S!==e.avail_out&&r.mode<h&&(r.mode<27||4!==t))&&k(e,e.output,e.next_out,S-e.avail_out)?(r.mode=31,-4):(x-=e.avail_in,S-=e.avail_out,e.total_in+=x,e.total_out+=S,r.total+=S,r.wrap&&S&&(e.adler=r.check=r.flags?a(r.check,p,S,e.next_out-S):i(r.check,p,S,e.next_out-S)),e.data_type=r.bits+(r.last?64:0)+(r.mode===u?128:0)+(20===r.mode||15===r.mode?256:0),(0===x&&0===S||4===t)&&0===D&&(D=-5),D)},t.inflateEnd=function(e){if(!e||!e.state)return c;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?c:(r.head=t,t.done=!1,0):c},t.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?c:11===r.mode&&i(1,t,n,0)!==r.check?-3:k(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,0):c},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,r){e.exports=function(e,t){var r,n,i,a,o,s,c,u,h,l,f,p,d,g,v,m,b,y,w,k,x,S,_,C,R;r=e.state,n=e.next_in,C=e.input,i=n+(e.avail_in-5),a=e.next_out,R=e.output,o=a-(t-e.avail_out),s=a+(e.avail_out-257),c=r.dmax,u=r.wsize,h=r.whave,l=r.wnext,f=r.window,p=r.hold,d=r.bits,g=r.lencode,v=r.distcode,m=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;e:do{d<15&&(p+=C[n++]<<d,d+=8,p+=C[n++]<<d,d+=8),y=g[p&m];t:for(;;){if(p>>>=w=y>>>24,d-=w,0==(w=y>>>16&255))R[a++]=65535&y;else{if(!(16&w)){if(0==(64&w)){y=g[(65535&y)+(p&(1<<w)-1)];continue t}if(32&w){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}k=65535&y,(w&=15)&&(d<w&&(p+=C[n++]<<d,d+=8),k+=p&(1<<w)-1,p>>>=w,d-=w),d<15&&(p+=C[n++]<<d,d+=8,p+=C[n++]<<d,d+=8),y=v[p&b];r:for(;;){if(p>>>=w=y>>>24,d-=w,!(16&(w=y>>>16&255))){if(0==(64&w)){y=v[(65535&y)+(p&(1<<w)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(x=65535&y,d<(w&=15)&&(p+=C[n++]<<d,(d+=8)<w&&(p+=C[n++]<<d,d+=8)),(x+=p&(1<<w)-1)>c){e.msg="invalid distance too far back",r.mode=30;break e}if(p>>>=w,d-=w,x>(w=a-o)){if((w=x-w)>h&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(S=0,_=f,0===l){if(S+=u-w,w<k){k-=w;do{R[a++]=f[S++]}while(--w);S=a-x,_=R}}else if(l<w){if(S+=u+l-w,(w-=l)<k){k-=w;do{R[a++]=f[S++]}while(--w);if(S=0,l<k){k-=w=l;do{R[a++]=f[S++]}while(--w);S=a-x,_=R}}}else if(S+=l-w,w<k){k-=w;do{R[a++]=f[S++]}while(--w);S=a-x,_=R}for(;k>2;)R[a++]=_[S++],R[a++]=_[S++],R[a++]=_[S++],k-=3;k&&(R[a++]=_[S++],k>1&&(R[a++]=_[S++]))}else{S=a-x;do{R[a++]=R[S++],R[a++]=R[S++],R[a++]=R[S++],k-=3}while(k>2);k&&(R[a++]=R[S++],k>1&&(R[a++]=R[S++]))}break}}break}}while(n<i&&a<s);n-=k=d>>3,p&=(1<<(d-=k<<3))-1,e.next_in=n,e.next_out=a,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=a<s?s-a+257:257-(a-s),r.hold=p,r.bits=d}},function(e,t,r){var n=r(11),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,r,c,u,h,l,f){var p,d,g,v,m,b,y,w,k,x=f.bits,S=0,_=0,C=0,R=0,E=0,A=0,T=0,I=0,L=0,M=0,F=null,D=0,O=new n.Buf16(16),B=new n.Buf16(16),N=null,P=0;for(S=0;S<=15;S++)O[S]=0;for(_=0;_<c;_++)O[t[r+_]]++;for(E=x,R=15;R>=1&&0===O[R];R--);if(E>R&&(E=R),0===R)return u[h++]=20971520,u[h++]=20971520,f.bits=1,0;for(C=1;C<R&&0===O[C];C++);for(E<C&&(E=C),I=1,S=1;S<=15;S++)if(I<<=1,(I-=O[S])<0)return-1;if(I>0&&(0===e||1!==R))return-1;for(B[1]=0,S=1;S<15;S++)B[S+1]=B[S]+O[S];for(_=0;_<c;_++)0!==t[r+_]&&(l[B[t[r+_]]++]=_);if(0===e?(F=N=l,b=19):1===e?(F=i,D-=257,N=a,P-=257,b=256):(F=o,N=s,b=-1),M=0,_=0,S=C,m=h,A=E,T=0,g=-1,v=(L=1<<E)-1,1===e&&L>852||2===e&&L>592)return 1;for(;;){y=S-T,l[_]<b?(w=0,k=l[_]):l[_]>b?(w=N[P+l[_]],k=F[D+l[_]]):(w=96,k=0),p=1<<S-T,C=d=1<<A;do{u[m+(M>>T)+(d-=p)]=y<<24|w<<16|k|0}while(0!==d);for(p=1<<S-1;M&p;)p>>=1;if(0!==p?(M&=p-1,M+=p):M=0,_++,0==--O[S]){if(S===R)break;S=t[r+l[_]]}if(S>E&&(M&v)!==g){for(0===T&&(T=E),m+=C,I=1<<(A=S-T);A+T<R&&!((I-=O[A+T])<=0);)A++,I<<=1;if(L+=1<<A,1===e&&L>852||2===e&&L>592)return 1;u[g=M&v]=E<<24|A<<16|m-h|0}}return 0!==M&&(u[m+M]=S-T<<24|64<<16|0),f.bits=E,0}},function(e,t,r){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,r){var n=r(1).Buffer,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function a(e){if(n.isBuffer(e))return e;var t="function"==typeof n.alloc&&"function"==typeof n.from;if("number"==typeof e)return t?n.alloc(e):new n(e);if("string"==typeof e)return t?n.from(e):new n(e);throw new Error("input must be buffer, number, or string, received "+dr(e))}function o(e,t){e=a(e),n.isBuffer(t)&&(t=t.readUInt32BE(0));for(var r=-1^~~t,o=0;o<e.length;o++)r=i[255&(r^e[o])]^r>>>8;return-1^r}function s(){return e=o.apply(null,arguments),(t=a(4)).writeInt32BE(e,0),t;var e,t}"undefined"!=typeof Int32Array&&(i=new Int32Array(i)),s.signed=function(){return o.apply(null,arguments)},s.unsigned=function(){return o.apply(null,arguments)>>>0},e.exports=s},function(e,t,r){(function(t){var n=r(0).CramMalformedError,i=r(12),a=r(63),o=r(64),s=r(65),c=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;mr(this,e),this._buffer=t,this._position=r,this.length=t.length}return yr(e,[{key:"get",value:function(){var e=this._buffer[this._position];return this._position+=1,e}},{key:"getByte",value:function(){return this.get()}},{key:"getByteAt",value:function(e){return this._buffer[e]}},{key:"position",value:function(){return this._position}},{key:"put",value:function(e){return this._buffer[this._position]=e,this._position+=1,e}},{key:"putAt",value:function(e,t){return this._buffer[e]=t,t}},{key:"setPosition",value:function(e){return this._position=e,e}},{key:"getInt",value:function(){var e=this._buffer.readInt32LE(this._position);return this._position+=4,e}},{key:"remaining",value:function(){return this._buffer.length-this._position}}]),e}();e.exports={uncompress:function(e,r){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===e.length)return r.fill(0),r;var h=new c(e,u),l=h.get();if(0!==l&&1!==l)throw new n("Invalid rANS order ".concat(l));if(h.getInt()!==h.remaining()-4)throw new n("Incorrect input length.");var f=h.getInt(),p=new c(r||t.allocUnsafe(f));if(p.length<f)throw new n("Output buffer too small to fit ".concat(f," bytes."));switch(l){case 0:return function(e,t){for(var r=new i.AriDecoder,n=new Array(256),s=0;s<n.length;s+=1)n[s]=new i.Symbol;return a.readStatsO0(e,r,n),o.uncompress(e,r,n,t),t}(h,p);case 1:return function(e,t){for(var r=new Array(256),n=0;n<r.length;n+=1)r[n]=new i.AriDecoder;for(var o=new Array(256),c=0;c<o.length;c+=1){o[c]=new Array(256);for(var u=0;u<o[c].length;u+=1)o[c][u]=new i.Symbol}return a.readStatsO1(e,r,o),s.uncompress(e,t,r,o),t}(h,p);default:throw new n("Invalid rANS order: ".concat(l))}}}}).call(this,r(1).Buffer)},function(e,t,r){var n=r(0).CramMalformedError,i=r(13),a=r(12);function o(e){if(!e)throw new n("assertion failed")}e.exports={readStatsO0:function(e,t,r){var n=0,s=0,c=255&e.get();do{null==t.fc[c]&&(t.fc[c]=new a.FC),t.fc[c].F=255&e.get(),t.fc[c].F>=128&&(t.fc[c].F&=-129,t.fc[c].F=(127&t.fc[c].F)<<8|255&e.get()),t.fc[c].C=s,a.symbolInit(r[c],t.fc[c].C,t.fc[c].F),t.R||(t.R=new Array(i.TOTFREQ)),t.R.fill(c,s,s+t.fc[c].F),s+=t.fc[c].F,0===n&&c+1===(255&e.getByteAt(e.position()))?(c=255&e.get(),n=255&e.get()):0!==n?(n-=1,c+=1):c=255&e.get()}while(0!==c);o(s<i.TOTFREQ)},readStatsO1:function(e,t,r){var n=0,s=255&e.get();do{var c=0,u=0,h=255&e.get();null==t[s]&&(t[s]=new a.AriDecoder);do{null==t[s].fc[h]&&(t[s].fc[h]=new a.FC),t[s].fc[h].F=255&e.get(),t[s].fc[h].F>=128&&(t[s].fc[h].F&=-129,t[s].fc[h].F=(127&t[s].fc[h].F)<<8|255&e.get()),t[s].fc[h].C=u,0===t[s].fc[h].F&&(t[s].fc[h].F=i.TOTFREQ),null==r[s][h]&&(r[s][h]=new a.RansDecSymbol),a.symbolInit(r[s][h],t[s].fc[h].C,t[s].fc[h].F),null==t[s].R&&(t[s].R=new Array(i.TOTFREQ)),t[s].R.fill(h,u,u+t[s].fc[h].F),o((u+=t[s].fc[h].F)<=i.TOTFREQ),0===c&&h+1===(255&e.getByteAt(e.position()))?(h=255&e.get(),c=255&e.get()):0!==c?(c-=1,h+=1):h=255&e.get()}while(0!==h);0===n&&s+1===(255&e.getByteAt(e.position()))?(s=255&e.get(),n=255&e.get()):0!==n?(n-=1,s+=1):s=255&e.get()}while(0!==s)}}},function(e,t,r){var n=r(0).CramMalformedError,i=r(13),a=r(12);e.exports={uncompress:function(e,t,r,o){for(var s,c=e.getInt(),u=e.getInt(),h=e.getInt(),l=e.getInt(),f=o.remaining(),p=-4&f,d=0;d<p;d+=4){var g=t.R[a.get(c,i.TF_SHIFT)],v=t.R[a.get(u,i.TF_SHIFT)],m=t.R[a.get(h,i.TF_SHIFT)],b=t.R[a.get(l,i.TF_SHIFT)];o.putAt(d,g),o.putAt(d+1,v),o.putAt(d+2,m),o.putAt(d+3,b),c=a.advanceSymbolStep(c,r[255&g],i.TF_SHIFT),u=a.advanceSymbolStep(u,r[255&v],i.TF_SHIFT),h=a.advanceSymbolStep(h,r[255&m],i.TF_SHIFT),l=a.advanceSymbolStep(l,r[255&b],i.TF_SHIFT),c=a.renormalize(c,e),u=a.renormalize(u,e),h=a.renormalize(h,e),l=a.renormalize(l,e)}switch(o.setPosition(p),3&f){case 0:break;case 1:s=t.R[a.get(c,i.TF_SHIFT)],a.advanceSymbol(c,e,r[255&s],i.TF_SHIFT),o.put(s);break;case 2:s=t.R[a.get(c,i.TF_SHIFT)],a.advanceSymbol(c,e,r[255&s],i.TF_SHIFT),o.put(s),s=t.R[a.get(u,i.TF_SHIFT)],a.advanceSymbol(u,e,r[255&s],i.TF_SHIFT),o.put(s);break;case 3:s=t.R[a.get(c,i.TF_SHIFT)],a.advanceSymbol(c,e,r[255&s],i.TF_SHIFT),o.put(s),s=t.R[a.get(u,i.TF_SHIFT)],a.advanceSymbol(u,e,r[255&s],i.TF_SHIFT),o.put(s),s=t.R[a.get(h,i.TF_SHIFT)],a.advanceSymbol(h,e,r[255&s],i.TF_SHIFT),o.put(s);break;default:throw new n("invalid output size encountered during rANS decoding")}o.setPosition(0)}}},function(e,t,r){var n=r(13),i=r(12);e.exports={uncompress:function(e,t,r,a){for(var o=t.remaining(),s=e.getInt(),c=e.getInt(),u=e.getInt(),h=e.getInt(),l=o>>2,f=0,p=l,d=2*l,g=3*l,v=0,m=0,b=0,y=0;f<l;f+=1,p+=1,d+=1,g+=1){var w=255&r[v].R[i.get(s,n.TF_SHIFT)],k=255&r[m].R[i.get(c,n.TF_SHIFT)],x=255&r[b].R[i.get(u,n.TF_SHIFT)],S=255&r[y].R[i.get(h,n.TF_SHIFT)];t.putAt(f,w),t.putAt(p,k),t.putAt(d,x),t.putAt(g,S),s=i.advanceSymbolStep(s,a[v][w],n.TF_SHIFT),c=i.advanceSymbolStep(c,a[m][k],n.TF_SHIFT),u=i.advanceSymbolStep(u,a[b][x],n.TF_SHIFT),h=i.advanceSymbolStep(h,a[y][S],n.TF_SHIFT),s=i.renormalize(s,e),c=i.renormalize(c,e),u=i.renormalize(u,e),h=i.renormalize(h,e),v=w,m=k,b=x,y=S}for(;g<o;g+=1){var _=255&r[y].R[i.get(h,n.TF_SHIFT)];t.putAt(g,_),h=i.advanceSymbol(h,e,a[y][_],n.TF_SHIFT),y=_}}}},function(e,t,r){var n=r(67).Parser,i=(new n).itf8(),a={parser:(new n).string("magic",{length:4}).uint8("majorVersion").uint8("minorVersion").string("fileId",{length:20,stripNull:!0}),maxLength:26},o={parser:(new n).uint8("compressionMethod",{formatter:function(e){var t=["raw","gzip","bzip2","lzma","rans"][e];if(!t)throw new Error("compression method number ".concat(e," not implemented"));return t}}).uint8("contentType",{formatter:function(e){var t=["FILE_HEADER","COMPRESSION_HEADER","MAPPED_SLICE_HEADER","UNMAPPED_SLICE_HEADER","EXTERNAL_DATA","CORE_DATA"][e];if(!t)throw new Error("invalid block content type id ".concat(e));return t}}).itf8("contentId").itf8("compressedSize").itf8("uncompressedSize"),maxLength:17},s={parser:(new n).uint32("crc32"),maxLength:4},c=(new n).itf8("size").buffer("entries",{length:"size",formatter:function(e){function t(t,r){for(var n=e.toString("utf8",t,r),i=[],a=0;a<n.length;a+=3)i.push(n.substr(a,3));return i}var r,n=[],i=0;for(r=0;r<e.length;r+=1)e[r]||(n.push(t(i,r)),i=r+1);return r>i&&n.push(t(i,r)),n}}),u=(new n).uint8(null,{formatter:function(e){return!!e}}),h=(new n).itf8("mapSize").itf8("mapCount").array("entries",{length:"mapCount",type:(new n).string("key",{length:2,stripNull:!1}).choice("value",{tag:"key",choices:{MI:u,UI:u,PI:u,RN:u,AP:u,RR:u,SM:(new n).array(null,{type:"uint8",length:5}),TD:(new n).nest(null,{type:c,formatter:function(e){return e.entries}})}})});function l(e){var t={};return e.entries.forEach((function(e){var r=e.key,n=e.value;t[r]&&console.warn("duplicate key ".concat(r," in map")),t[r]=n})),t}var f={cramFileDefinition:a,cramBlockHeader:o,cramBlockCrc32:s},p={cramUnmappedSliceHeader:function(e){var t=0,r=(new n).itf8("numRecords");return t+=5,e>=3?(r=r.ltf8("recordCounter"),t+=9):2===e&&(r=r.itf8("recordCounter"),t+=5),r=r.itf8("numBlocks").itf8("numContentIds").array("contentIds",{type:i,length:"numContentIds"}),t+=10,e>=2&&(r=r.array("md5",{type:"uint8",length:16}),t+=16),{parser:r,maxLength:function(e){return t+5*e}}},cramMappedSliceHeader:function(e){var t=(new n).itf8("refSeqId").itf8("refSeqStart").itf8("refSeqSpan").itf8("numRecords"),r=20;return e>=3?(t=t.ltf8("recordCounter"),r+=9):2===e&&(t=t.itf8("recordCounter"),r+=5),t=t.itf8("numBlocks").itf8("numContentIds").array("contentIds",{type:i,length:"numContentIds"}).itf8("refBaseBlockId"),r+=15,e>=2&&(t=t.array("md5",{type:"uint8",length:16}),r+=16),{parser:t,maxLength:function(e){return r+5*e}}},cramEncoding:function(e){return{parser:(new n).namely("cramEncoding").itf8("codecId").itf8("parametersBytes").choice("parameters",{tag:"codecId",choices:{0:new n,1:(new n).itf8("blockContentId"),2:(new n).itf8("offset").itf8("M"),3:n.start().itf8("numCodes").array("symbols",{length:"numCodes",type:i}).itf8("numLengths").array("bitLengths",{length:"numLengths",type:i}),4:n.start().nest("lengthsEncoding",{type:"cramEncoding"}).nest("valuesEncoding",{type:"cramEncoding"}),5:(new n).uint8("stopByte")[e>1?"itf8":"int"]("blockContentId"),6:(new n).itf8("offset").itf8("length"),7:(new n).itf8("offset").itf8("K"),8:(new n).itf8("offset").itf8("log2m"),9:(new n).itf8("offset")}})}},cramDataSeriesEncodingMap:function(e){return(new n).itf8("mapSize").itf8("mapCount").array("entries",{length:"mapCount",type:(new n).string("key",{length:2,stripNull:!1}).nest("value",{type:this.cramEncoding(e).parser})})},cramTagEncodingMap:function(e){return(new n).itf8("mapSize").itf8("mapCount").array("entries",{length:"mapCount",type:(new n).itf8("key",{formatter:function(e){return String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)}}).nest("value",{type:this.cramEncoding(e).parser})})},cramCompressionHeader:function(e){var t=new n;return{parser:t=t.nest("preservation",{type:h,formatter:l}).nest("dataSeriesEncoding",{type:this.cramDataSeriesEncodingMap(e),formatter:l}).nest("tagEncoding",{type:this.cramTagEncodingMap(e),formatter:l})}},cramContainerHeader1:function(e){var t=(new n).int32("length").itf8("refSeqId").itf8("refSeqStart").itf8("alignmentSpan").itf8("numRecords"),r=24;return e>=3?(t=t.ltf8("recordCounter"),r+=9):2===e&&(t=t.itf8("recordCounter"),r+=5),e>1&&(t=t.ltf8("numBases"),r+=9),{parser:t=t.itf8("numBlocks").itf8("numLandmarks"),maxLength:r+=10}},cramContainerHeader2:function(e){var t=(new n).itf8("numLandmarks").array("landmarks",{type:(new n).itf8(),length:"numLandmarks"}),r=0;return e>=3&&(t=t.uint32("crc32"),r=4),{parser:t,maxLength:function(e){return 5+5*e+r}}}};e.exports={cramFileDefinition:a,getSectionParsers:function(e){var t=Object.assign({},f);return Object.keys(p).forEach((function(r){t[r]=p[r](e)})),t}}},function(e,t,r){(function(e){var n=r(68),i=r(70).Context,a=r(31);"undefined"!=typeof window&&(window.Buffer=e);var o={UInt8:1,UInt16LE:2,UInt16BE:2,UInt32LE:4,UInt32BE:4,Int8:1,Int16LE:2,Int16BE:2,Int32LE:4,Int32BE:4,FloatLE:4,FloatBE:4,DoubleLE:8,DoubleBE:8},s={},c=[];!function(){var e;for(e=1;e<=32;e++)c.push(e)}();var u={};Object.keys(o).concat(Object.keys({String:null,Buffer:null,Array:null,Skip:null,Choice:null,Nest:null,Bit:null,Itf8:null,Ltf8:null})).forEach((function(e){u[e.toLowerCase()]=e}));var h=function(){this.varName="",this.type="",this.options={},this.next=null,this.head=null,this.compiled=null,this.endian="le",this.constructorFn=null,this.alias=null};h.start=function(){return new h},Object.keys(o).forEach((function(e){h.prototype[e.toLowerCase()]=function(t,r){return this.setNextParser(e.toLowerCase(),t,r)};var t=e.replace(/BE|LE/,"").toLowerCase();t in h.prototype||(h.prototype[t]=function(e,r){return this[t+this.endian](e,r)})})),c.forEach((function(e){h.prototype["bit"+e.toString()]=function(t,r){return r||(r={}),r.length=e,this.setNextParser("bit",t,r)}})),h.prototype.namely=function(e){return s[e]=this,this.alias=e,this},h.prototype.skip=function(e,t){if(t&&t.assert)throw new Error("assert option on skip is not allowed.");return this.setNextParser("skip","",{length:e})},h.prototype.string=function(e,t){if(!t.zeroTerminated&&!t.length&&!t.greedy)throw new Error("Neither length, zeroTerminated, nor greedy is defined for string.");if((t.zeroTerminated||t.length)&&t.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(t.stripNull&&!t.length&&!t.greedy)throw new Error("Length or greedy must be defined if stripNull is defined.");return t.encoding=t.encoding||"utf8",this.setNextParser("string",e,t)},h.prototype.buffer=function(e,t){if(!t.length&&!t.readUntil)throw new Error("Length nor readUntil is defined in buffer parser");return this.setNextParser("buffer",e,t)},h.prototype.array=function(e,t){if(!t.readUntil&&!t.length&&!t.lengthInBytes)throw new Error("Length option of array is not defined.");if(!t.type)throw new Error("Type option of array is not defined.");if("string"==typeof t.type&&!s[t.type]&&Object.keys(o).indexOf(u[t.type])<0)throw new Error('Specified primitive type "'+t.type+'" is not supported.');return this.setNextParser("array",e,t)},h.prototype.choice=function(e,t){if(1==arguments.length&&"object"==dr(e)&&(t=e,e=null),!t.tag)throw new Error("Tag option of array is not defined.");if(!t.choices)throw new Error("Choices option of array is not defined.");return Object.keys(t.choices).forEach((function(r){if(!t.choices[r])throw new Error("Choice Case "+r+" of "+e+" is not valid.");if("string"==typeof t.choices[r]&&!s[t.choices[r]]&&Object.keys(o).indexOf(u[t.choices[r]])<0)throw new Error('Specified primitive type "'+t.choices[r]+'" is not supported.')}),this),this.setNextParser("choice",e,t)},h.prototype.nest=function(e,t){if(1==arguments.length&&"object"==dr(e)&&(t=e,e=null),!t.type)throw new Error("Type option of nest is not defined.");if(!(t.type instanceof h||s[t.type]))throw new Error("Type option of nest must be a Parser object.");if(!(t.type instanceof h||e))throw new Error("options.type must be a object if variable name is omitted.");return this.setNextParser("nest",e,t)},h.prototype.endianess=function(e){switch(e.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error("Invalid endianess: "+e)}return this},h.prototype.create=function(e){if(!(e instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=e,this},h.prototype.getCode=function(){var e=new i;return e.pushCode("if (!Buffer.isBuffer(buffer)) {"),e.generateError('"argument buffer is not a Buffer object"'),e.pushCode("}"),this.alias?this.addAliasedCode(e):this.addRawCode(e),this.alias?e.pushCode("return {0}(0)","___parser_"+this.alias):e.pushCode("return { offset: offset, result: vars };"),e.code},h.prototype.addRawCode=function(e){e.pushCode("var offset = 0;"),this.constructorFn?e.pushCode("var vars = new constructorFn();"):e.pushCode("var vars = {};"),this.generate(e),this.resolveReferences(e),e.pushCode("return { offset: offset, result: vars };")},h.prototype.addAliasedCode=function(e){return e.pushCode("function {0}(offset) {","___parser_"+this.alias),this.constructorFn?e.pushCode("var vars = new constructorFn();"):e.pushCode("var vars = {};"),this.generate(e),e.markResolved(this.alias),this.resolveReferences(e),e.pushCode("return { offset: offset, result: vars };"),e.pushCode("}"),e},h.prototype.resolveReferences=function(e){var t=e.getUnresolvedReferences();e.markRequested(t),t.forEach((function(t){s[t].addAliasedCode(e)}))},h.prototype.compile=function(){var e="(function(buffer, constructorFn, Long) { "+this.getCode()+" })";this.compiled=n.runInThisContext(e)},h.prototype.sizeOf=function(){var e=NaN;if(Object.keys(o).indexOf(this.type)>=0)e=o[this.type];else if("String"===this.type&&"number"==typeof this.options.length)e=this.options.length;else if("Buffer"===this.type&&"number"==typeof this.options.length)e=this.options.length;else if("Array"===this.type&&"number"==typeof this.options.length){var t=NaN;"string"==typeof this.options.type?t=o[u[this.options.type]]:this.options.type instanceof h&&(t=this.options.type.sizeOf()),e=this.options.length*t}else"Skip"===this.type?e=this.options.length:"Nest"===this.type?e=this.options.type.sizeOf():this.type||(e=0);return this.next&&(e+=this.next.sizeOf()),e},h.prototype.parse=function(e){return this.compiled||this.compile(),this.compiled(e,this.constructorFn,a)},h.prototype.setNextParser=function(e,t,r){var n=new h;return n.type=u[e],n.varName=t,n.options=r||n.options,n.endian=this.endian,this.head?this.head.next=n:this.next=n,this.head=n,this},h.prototype.generate=function(e){this.type&&(this["generate"+this.type](e),this.generateAssert(e));var t=e.generateVariable(this.varName);return this.options.formatter&&this.generateFormatter(e,t,this.options.formatter),this.generateNext(e)},h.prototype.generateAssert=function(e){if(this.options.assert){var t=e.generateVariable(this.varName);switch(dr(this.options.assert)){case"function":e.pushCode("if (!({0}).call(vars, {1})) {",this.options.assert,t);break;case"number":e.pushCode("if ({0} !== {1}) {",this.options.assert,t);break;case"string":e.pushCode('if ("{0}" !== {1}) {',this.options.assert,t);break;default:throw new Error("Assert option supports only strings, numbers and assert functions.")}e.generateError('"Assert error: {0} is " + {0}',t),e.pushCode("}")}},h.prototype.generateNext=function(e){return this.next&&(e=this.next.generate(e)),e},Object.keys(o).forEach((function(e){h.prototype["generate"+e]=function(t){t.pushCode("{0} = buffer.read{1}(offset);",t.generateVariable(this.varName),e),t.pushCode("offset += {0};",o[e])}})),h.prototype.generateBit=function(e){var t=JSON.parse(JSON.stringify(this));if(t.varName=e.generateVariable(t.varName),e.bitFields.push(t),!this.next||this.next&&["Bit","Nest"].indexOf(this.next.type)<0){var r=0;e.bitFields.forEach((function(e){r+=e.options.length}));var n=e.generateTmpVariable();if(r<=8)e.pushCode("var {0} = buffer.readUInt8(offset);",n),r=8;else if(r<=16)e.pushCode("var {0} = buffer.readUInt16BE(offset);",n),r=16;else if(r<=24){var i=e.generateTmpVariable(),a=e.generateTmpVariable();e.pushCode("var {0} = buffer.readUInt16BE(offset);",i),e.pushCode("var {0} = buffer.readUInt8(offset + 2);",a),e.pushCode("var {2} = ({0} << 8) | {1};",i,a,n),r=24}else{if(!(r<=32))throw new Error("Currently, bit field sequence longer than 4-bytes is not supported.");e.pushCode("var {0} = buffer.readUInt32BE(offset);",n),r=32}e.pushCode("offset += {0};",r/8);var o=0,s="be"===this.endian;e.bitFields.forEach((function(t){e.pushCode("{0} = {1} >> {2} & {3};",t.varName,n,s?r-o-t.options.length:o,(1<<t.options.length)-1),o+=t.options.length})),e.bitFields=[]}},h.prototype.generateSkip=function(e){var t=e.generateOption(this.options.length);e.pushCode("offset += {0};",t)},h.prototype.generateString=function(e){var t=e.generateVariable(this.varName),r=e.generateTmpVariable();this.options.length&&this.options.zeroTerminated?(e.pushCode("var {0} = offset;",r),e.pushCode("while(buffer.readUInt8(offset++) !== 0 && offset - {0}  < {1});",r,this.options.length),e.pushCode("{0} = buffer.toString('{1}', {2}, offset - {2} < {3} ? offset - 1 : offset);",t,this.options.encoding,r,this.options.length)):this.options.length?(e.pushCode("{0} = buffer.toString('{1}', offset, offset + {2});",t,this.options.encoding,e.generateOption(this.options.length)),e.pushCode("offset += {0};",e.generateOption(this.options.length))):this.options.zeroTerminated?(e.pushCode("var {0} = offset;",r),e.pushCode("while(buffer.readUInt8(offset++) !== 0);"),e.pushCode("{0} = buffer.toString('{1}', {2}, offset - 1);",t,this.options.encoding,r)):this.options.greedy&&(e.pushCode("var {0} = offset;",r),e.pushCode("while(buffer.length > offset++);"),e.pushCode("{0} = buffer.toString('{1}', {2}, offset);",t,this.options.encoding,r)),this.options.stripNull&&e.pushCode("{0} = {0}.replace(/\\x00+$/g, '')",t)},h.prototype.generateBuffer=function(e){"eof"===this.options.readUntil?e.pushCode("{0} = buffer.slice(offset);",e.generateVariable(this.varName)):(e.pushCode("{0} = buffer.slice(offset, offset + {1});",e.generateVariable(this.varName),e.generateOption(this.options.length)),e.pushCode("offset += {0};",e.generateOption(this.options.length))),this.options.clone&&e.pushCode("{0} = Buffer.from({0});",e.generateVariable(this.varName))},h.prototype.generateArray=function(e){var t=e.generateOption(this.options.length),r=e.generateOption(this.options.lengthInBytes),n=this.options.type,i=e.generateTmpVariable(),a=e.generateVariable(this.varName),c=e.generateTmpVariable(),l=this.options.key,f="string"==typeof l;if(f?e.pushCode("{0} = {};",a):e.pushCode("{0} = [];",a),"function"==typeof this.options.readUntil?e.pushCode("do {"):"eof"===this.options.readUntil?e.pushCode("for (var {0} = 0; offset < buffer.length; {0}++) {",i):void 0!==r?e.pushCode("for (var {0} = offset; offset - {0} < {1}; ) {",i,r):e.pushCode("for (var {0} = 0; {0} < {1}; {0}++) {",i,t),"string"==typeof n)if(s[n]){var p=e.generateTmpVariable();e.pushCode("var {0} = {1}(offset);",p,"___parser_"+n),e.pushCode("var {0} = {1}.result; offset = {1}.offset;",c,p),n!==this.alias&&e.addReference(n)}else e.pushCode("var {0} = buffer.read{1}(offset);",c,u[n]),e.pushCode("offset += {0};",o[u[n]]);else n instanceof h&&(e.pushCode("var {0} = {};",c),e.pushScope(c),n.generate(e),e.popScope());f?e.pushCode("{0}[{2}.{1}] = {2};",a,l,c):e.pushCode("{0}.push({1});",a,c),e.pushCode("}"),"function"==typeof this.options.readUntil&&e.pushCode(" while (!({0}).call(this, {1}, buffer.slice(offset)));",this.options.readUntil,c)},h.prototype.generateChoiceCase=function(e,t,r){if("string"==typeof r)if(s[r]){var n=e.generateTmpVariable();e.pushCode("var {0} = {1}(offset);",n,"___parser_"+r),e.pushCode("{0} = {1}.result; offset = {1}.offset;",e.generateVariable(this.varName),n),r!==this.alias&&e.addReference(r)}else e.pushCode("{0} = buffer.read{1}(offset);",e.generateVariable(this.varName),u[r]),e.pushCode("offset += {0};",o[u[r]]);else r instanceof h&&(e.pushPath(t),r.generate(e),e.popPath(t))},h.prototype.generateChoice=function(e){var t=e.generateOption(this.options.tag);this.varName&&e.pushCode("{0} = {};",e.generateVariable(this.varName)),e.pushCode("switch({0}) {",t),Object.keys(this.options.choices).forEach((function(t){var r=this.options.choices[t];isNaN(parseInt(t,10))?e.pushCode("case '{0}':",t):e.pushCode("case {0}:",t),this.generateChoiceCase(e,this.varName,r),e.pushCode("break;")}),this),e.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(e,this.varName,this.options.defaultChoice):e.generateError('"Met undefined tag value " + {0} + " at choice"',t),e.pushCode("}")},h.prototype.generateNest=function(e){var t=e.generateVariable(this.varName);if(this.options.type instanceof h)this.varName&&e.pushCode("{0} = {};",t),e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName);else if(s[this.options.type]){var r=e.generateTmpVariable();e.pushCode("var {0} = {1}(offset);",r,"___parser_"+this.options.type),e.pushCode("{0} = {1}.result; offset = {1}.offset;",t,r),this.options.type!==this.alias&&e.addReference(this.options.type)}},h.prototype.generateFormatter=function(e,t,r){"function"==typeof r&&e.pushCode("{0} = ({1}).call(this, {0});",t,r)},h.prototype.isInteger=function(){return!!this.type.match(/U?Int[8|16|32][BE|LE]?|Bit\d+/)},h.prototype.itf8=function(e,t){return this.setNextParser("itf8",e,t)},h.prototype.generateItf8=function(e){var t=e.generateVariable(this.varName),r=e.generateTmpVariable();e.pushCode("\n    var ".concat(r," = buffer[offset];\n    if (").concat(r," < 0x80) {\n      ").concat(t," = ").concat(r,";\n      offset += 1;\n    } else if (").concat(r," < 0xc0) {\n      ").concat(t," = ((").concat(r,"<<8) | buffer[offset+1]) & 0x3fff;\n      offset += 2;\n    } else if (").concat(r," < 0xe0) {\n      ").concat(t," = ((").concat(r,"<<16) | (buffer[offset+1]<< 8) |  buffer[offset+2]) & 0x1fffff;\n      offset += 3;\n    } else if (").concat(r," < 0xf0) {\n      ").concat(t," = ((").concat(r,"<<24) | (buffer[offset+1]<<16) | (buffer[offset+2]<<8) | buffer[offset+3]) & 0x0fffffff;\n      offset += 4\n    } else {\n      ").concat(t," = ((").concat(r," & 0x0f)<<28) | (buffer[offset+1]<<20) | (buffer[offset+2]<<12) | (buffer[offset+3]<<4) | (buffer[offset+4] & 0x0f);\n      // x=((0xff & 0x0f)<<28) | (0xff<<20) | (0xff<<12) | (0xff<<4) | (0x0f & 0x0f);\n      // TODO *val_p = uv < 0x80000000UL ? uv : -((int32_t) (0xffffffffUL - uv)) - 1;\n      offset += 5\n    }\n  "))},h.prototype.ltf8=function(e,t){return this.setNextParser("ltf8",e,t)},h.prototype.generateLtf8=function(e){var t=e.generateVariable(this.varName),r=e.generateTmpVariable();e.pushCode("\n  var ".concat(r," = buffer[offset];\n  if (").concat(r," < 0x80) {\n    ").concat(t," = ").concat(r,";\n    offset += 1;\n  } else if (").concat(r," < 0xc0) {\n    ").concat(t," = ((buffer[offset]<<8) | buffer[offset+1]) & 0x3fff;\n    offset += 2;\n  } else if (").concat(r," < 0xe0) {\n    ").concat(t," = ((buffer[offset]<<16) | (buffer[offset+1]<<8) | buffer[offset+2]) & 0x1fffff;\n    ").concat(t," = (((").concat(r," & 63) << 16) | buffer.readUInt16LE(offset + 1));\n    offset += 3;\n  } else if (").concat(r," < 0xf0) {\n    ").concat(t," = ((buffer[offset]<<24) | (buffer[offset+1]<<16) | (buffer[offset+2]<<8) | buffer[offset+3]) & 0x0fffffff;\n    offset += 4;\n  } else if (").concat(r," < 0xf8) {\n    ").concat(t," = (((buffer[offset] & 15) * Math.pow(2,32))) +\n      (buffer[offset+1]<<24) | (buffer[offset+2]<<16 | buffer[offset+3]<<8 | buffer[offset+4])\n    // TODO *val_p = uv < 0x80000000UL ? uv : -((int32_t) (0xffffffffUL - uv)) - 1;\n    offset += 5;\n  } else if (").concat(r," < 0xfc) {\n    ").concat(t," = ((((buffer[offset] & 7) << 8) | buffer[offset+1] )) * Math.pow(2,32) +\n      (buffer[offset+2]<<24) | (buffer[offset+3]<<16 | buffer[offset+4]<<8 | buffer[offset+5])\n    offset += 6;\n  } else if (").concat(r," < 0xfe) {\n    ").concat(t," = ((((buffer[offset] & 3) << 16) | buffer[offset+1]<<8 | buffer[offset+2])) * Math.pow(2,32) +\n      (buffer[offset+3]<<24) | (buffer[offset+4]<<16 | buffer[offset+5]<<8 | buffer[offset+6])\n    offset += 7;\n  } else if (").concat(r," < 0xff) {\n    ").concat(t," = Long.fromBytesBE(buffer.slice(offset+1,offset+8));\n    if (").concat(t,".greaterThan(Number.MAX_SAFE_INTEGER) || ").concat(t,".lessThan(Number.MIN_SAFE_INTEGER))\n      throw new Error('integer overflow')\n    ").concat(t," = ").concat(t,".toNumber()\n    offset += 8;\n  } else {\n    ").concat(t," = Long.fromBytesBE(buffer.slice(offset+1,offset+9));\n    if (").concat(t,".greaterThan(Number.MAX_SAFE_INTEGER) || ").concat(t,".lessThan(Number.MIN_SAFE_INTEGER))\n      throw new Error('integer overflow')\n    ").concat(t," = ").concat(t,".toNumber()\n    offset += 9;\n  }\n  "))},t.Parser=h}).call(this,r(1).Buffer)},function(e,t,r){var n=r(69),i=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)t.push(r);return t},a=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)},o=function(){try{return Object.defineProperty({},"_",{}),function(e,t,r){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(e){return function(e,t,r){e[t]=r}}}(),s=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval2","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function c(){}c.prototype={};var u=t.Script=function(e){if(!(this instanceof u))return new u(e);this.code=e};u.prototype.runInContext=function(e){if(!(e instanceof c))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var r=t.contentWindow,u=r.eval2,h=r.execScript;!u&&h&&(h.call(r,"null"),u=r.eval2),a(i(e),(function(t){r[t]=e[t]})),a(s,(function(t){e[t]&&(r[t]=e[t])}));var l=i(r),f=u.call(r,this.code);return a(i(r),(function(t){(t in e||-1===n(l,t))&&(e[t]=r[t])})),a(s,(function(t){t in e||o(e,t,r[t])})),document.body.removeChild(t),f},u.prototype.runInThisContext=function(){return cS(this.code)},u.prototype.runInNewContext=function(e){var t=u.createContext(e),r=this.runInContext(t);return a(i(t),(function(r){e[r]=t[r]})),r},a(i(u.prototype),(function(e){t[e]=u[e]=function(t){var r=u(t);return r[e].apply(r,[].slice.call(arguments,1))}})),t.createScript=function(e){return t.Script(e)},t.createContext=u.createContext=function(e){var t=new c;return"object"==dr(e)&&a(i(e),(function(r){t[r]=e[r]})),t}},function(e,t){var r=[].indexOf;e.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},function(e,t){var r=function(){this.code="",this.scopes=[["vars"]],this.isAsync=!1,this.bitFields=[],this.tmpVariableCount=0,this.references={}};r.prototype.generateVariable=function(e){var t=[];for(Array.prototype.push.apply(t,this.scopes[this.scopes.length-1]);/^\$parent\./.test(e);)t.pop(),e=e.replace(/^\$parent\./,"");return e&&t.push(e),t.join(".")},r.prototype.generateOption=function(e){switch(dr(e)){case"number":return e.toString();case"string":return this.generateVariable(e);case"function":return"("+e+").call("+this.generateVariable()+", vars)"}},r.prototype.generateError=function(){var e=Array.prototype.slice.call(arguments),t=r.interpolate.apply(this,e);this.isAsync?this.pushCode("return process.nextTick(function() { callback(new Error("+t+"), vars); });"):this.pushCode("throw new Error("+t+");")},r.prototype.generateTmpVariable=function(){return"$tmp"+this.tmpVariableCount++},r.prototype.pushCode=function(){var e=Array.prototype.slice.call(arguments);this.code+=r.interpolate.apply(this,e)+"\n"},r.prototype.pushPath=function(e){e&&this.scopes[this.scopes.length-1].push(e)},r.prototype.popPath=function(e){e&&this.scopes[this.scopes.length-1].pop()},r.prototype.pushScope=function(e){this.scopes.push([e])},r.prototype.popScope=function(){this.scopes.pop()},r.prototype.addReference=function(e){this.references[e]||(this.references[e]={resolved:!1,requested:!1})},r.prototype.markResolved=function(e){this.references[e].resolved=!0},r.prototype.markRequested=function(e){e.forEach(function(e){this.references[e].requested=!0}.bind(this))},r.prototype.getUnresolvedReferences=function(){var e=this.references;return Object.keys(this.references).filter((function(t){return!e[t].resolved&&!e[t].requested}))},r.interpolate=function(e){var t=e.match(/{\d+}/g),r=Array.prototype.slice.call(arguments,1);return t&&t.forEach((function(t){var n=parseInt(t.substr(1,t.length-2),10);e=e.replace(t,r[n].toString())})),e},t.Context=r},function(e,t,r){(function(t){var n=r(0).CramMalformedError,i=r(8),a=i.itf8Size,o=i.parseItem,s=i.tinyMemoize,c=r(75),u=r(78),h=function(){function e(t,r){mr(this,e),this.file=t,this.filePosition=r}var r,i,s,h;return yr(e,[{key:"getHeader",value:function(){return this._readContainerHeader(this.filePosition)}},{key:"getCompressionHeaderBlock",value:(h=vr(regeneratorRuntime.mark((function e(){var t,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:if(e.sent.numRecords){e.next=4;break}return e.abrupt("return",null);case 4:return e.next=6,this.file.getSectionParsers();case 6:return t=e.sent,e.next=9,this.getFirstBlock();case 9:if("COMPRESSION_HEADER"===(r=e.sent).contentType){e.next=12;break}throw new n("invalid content type ".concat(r.contentType," in what is supposed to be the compression header block"));case 12:return i=o(r.content,t.cramCompressionHeader.parser,0,r.contentPosition),e.abrupt("return",(r.content=i,r));case 14:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"getFirstBlock",value:(s=vr(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:return t=e.sent,e.abrupt("return",this.file.readBlock(t._endPosition));case 4:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"getCompressionScheme",value:(i=vr(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCompressionHeaderBlock();case 2:if(!(t=e.sent)){e.next=5;break}return e.abrupt("return",new u(t.content));case 5:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getSlice",value:function(e,t){return new c(this,e,t)}},{key:"_readContainerHeader",value:(r=vr(regeneratorRuntime.mark((function e(r){var n,i,s,c,u,h,l,f,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.file.getSectionParsers();case 2:return n=e.sent,i=n.cramContainerHeader1,s=n.cramContainerHeader2,e.next=7,this.file.stat();case 7:if(c=e.sent,u=c.size,!(r>=u)){e.next=11;break}return e.abrupt("return");case 11:return h=t.allocUnsafe(i.maxLength),e.next=14,this.file.read(h,0,i.maxLength,r);case 14:if(l=o(h,i.parser),f=a(l.numLandmarks),!(r+l.length>=u)){e.next=17;break}return e.abrupt("return",void console.warn("".concat(this.file,": container header at ").concat(r," indicates that the container has length ").concat(l.length,", which extends beyond the length of the file. Skipping this container.")));case 17:return p=t.allocUnsafe(s.maxLength(l.numLandmarks)),e.next=20,this.file.read(p,0,s.maxLength(l.numLandmarks),r+l._size-f);case 20:if(d=o(p,s.parser),e.t0=this.file.validateChecksums&&void 0!==d.crc32,!e.t0){e.next=25;break}return e.next=25,this.file.checkCrc32(r,l._size+d._size-f-4,d.crc32,"container header beginning at position ".concat(r));case 25:return e.abrupt("return",Object.assign(l,d,{_size:l._size+d._size-f,_endPosition:l._size+d._size-f+r}));case 26:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}]),e}();"getHeader getCompressionHeaderBlock getCompressionScheme".split(" ").forEach((function(e){return s(h,e)})),e.exports=h}).call(this,r(1).Buffer)},function(e,t,r){var n,i,a,o,s;n=r(73),i=r(32).utf8,a=r(74),o=r(32).bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?o.stringToBytes(e):i.stringToBytes(e):a(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var r=n.bytesToWords(e),c=8*e.length,u=1732584193,h=-271733879,l=-1732584194,f=271733878,p=0;p<r.length;p++)r[p]=16711935&(r[p]<<8|r[p]>>>24)|4278255360&(r[p]<<24|r[p]>>>8);r[c>>>5]|=128<<c%32,r[14+(c+64>>>9<<4)]=c;var d=s._ff,g=s._gg,v=s._hh,m=s._ii;for(p=0;p<r.length;p+=16){var b=u,y=h,w=l,k=f;u=d(u,h,l,f,r[p+0],7,-680876936),f=d(f,u,h,l,r[p+1],12,-389564586),l=d(l,f,u,h,r[p+2],17,606105819),h=d(h,l,f,u,r[p+3],22,-1044525330),u=d(u,h,l,f,r[p+4],7,-176418897),f=d(f,u,h,l,r[p+5],12,1200080426),l=d(l,f,u,h,r[p+6],17,-1473231341),h=d(h,l,f,u,r[p+7],22,-45705983),u=d(u,h,l,f,r[p+8],7,1770035416),f=d(f,u,h,l,r[p+9],12,-1958414417),l=d(l,f,u,h,r[p+10],17,-42063),h=d(h,l,f,u,r[p+11],22,-1990404162),u=d(u,h,l,f,r[p+12],7,1804603682),f=d(f,u,h,l,r[p+13],12,-40341101),l=d(l,f,u,h,r[p+14],17,-1502002290),u=g(u,h=d(h,l,f,u,r[p+15],22,1236535329),l,f,r[p+1],5,-165796510),f=g(f,u,h,l,r[p+6],9,-1069501632),l=g(l,f,u,h,r[p+11],14,643717713),h=g(h,l,f,u,r[p+0],20,-373897302),u=g(u,h,l,f,r[p+5],5,-701558691),f=g(f,u,h,l,r[p+10],9,38016083),l=g(l,f,u,h,r[p+15],14,-660478335),h=g(h,l,f,u,r[p+4],20,-405537848),u=g(u,h,l,f,r[p+9],5,568446438),f=g(f,u,h,l,r[p+14],9,-1019803690),l=g(l,f,u,h,r[p+3],14,-187363961),h=g(h,l,f,u,r[p+8],20,1163531501),u=g(u,h,l,f,r[p+13],5,-1444681467),f=g(f,u,h,l,r[p+2],9,-51403784),l=g(l,f,u,h,r[p+7],14,1735328473),u=v(u,h=g(h,l,f,u,r[p+12],20,-1926607734),l,f,r[p+5],4,-378558),f=v(f,u,h,l,r[p+8],11,-2022574463),l=v(l,f,u,h,r[p+11],16,1839030562),h=v(h,l,f,u,r[p+14],23,-35309556),u=v(u,h,l,f,r[p+1],4,-1530992060),f=v(f,u,h,l,r[p+4],11,1272893353),l=v(l,f,u,h,r[p+7],16,-155497632),h=v(h,l,f,u,r[p+10],23,-1094730640),u=v(u,h,l,f,r[p+13],4,681279174),f=v(f,u,h,l,r[p+0],11,-358537222),l=v(l,f,u,h,r[p+3],16,-722521979),h=v(h,l,f,u,r[p+6],23,76029189),u=v(u,h,l,f,r[p+9],4,-640364487),f=v(f,u,h,l,r[p+12],11,-421815835),l=v(l,f,u,h,r[p+15],16,530742520),u=m(u,h=v(h,l,f,u,r[p+2],23,-995338651),l,f,r[p+0],6,-198630844),f=m(f,u,h,l,r[p+7],10,1126891415),l=m(l,f,u,h,r[p+14],15,-1416354905),h=m(h,l,f,u,r[p+5],21,-57434055),u=m(u,h,l,f,r[p+12],6,1700485571),f=m(f,u,h,l,r[p+3],10,-1894986606),l=m(l,f,u,h,r[p+10],15,-1051523),h=m(h,l,f,u,r[p+1],21,-2054922799),u=m(u,h,l,f,r[p+8],6,1873313359),f=m(f,u,h,l,r[p+15],10,-30611744),l=m(l,f,u,h,r[p+6],15,-1560198380),h=m(h,l,f,u,r[p+13],21,1309151649),u=m(u,h,l,f,r[p+4],6,-145523070),f=m(f,u,h,l,r[p+11],10,-1120210379),l=m(l,f,u,h,r[p+2],15,718787259),h=m(h,l,f,u,r[p+9],21,-343485551),u=u+b>>>0,h=h+y>>>0,l=l+w>>>0,f=f+k>>>0}return n.endian([u,h,l,f])})._ff=function(e,t,r,n,i,a,o){var s=e+(t&r|~t&n)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._gg=function(e,t,r,n,i,a,o){var s=e+(t&n|r&~n)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._hh=function(e,t,r,n,i,a,o){var s=e+(t^r^n)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._ii=function(e,t,r,n,i,a,o){var s=e+(r^(t|~n))+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var r=n.wordsToBytes(s(e,t));return t&&t.asBytes?r:t&&t.asString?o.bytesToString(r):n.bytesToHex(r)}},function(e,t){var r,n;r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var i=e[n]<<16|e[n+1]<<8|e[n+2],a=0;a<4;a++)8*n+6*a<=8*e.length?t.push(r.charAt(i>>>6*(3-a)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,i=0;n<e.length;i=++n%4)0!=i&&t.push((r.indexOf(e.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<2*i|r.indexOf(e.charAt(n))>>>6-2*i);return t}},e.exports=n},function(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
	   * Determine if an object is a Buffer
	   *
	   * @author   Feross Aboukhadijeh <https://feross.org>
	   * @license  MIT
	   */e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,r){var n=r(0),i=n.CramMalformedError,a=n.CramBufferOverrunError,o=n.CramArgumentError,s=r(8),c=s.parseItem,u=s.tinyMemoize,h=s.sequenceMD5,l=r(17),f=r(76);function p(e,t,r,n){if(!n)throw new i("could not resolve intra-slice mate pairs, file seems truncated or malformed");var a=!!(n.mate||void 0!==n.mateRecordNumber&&n.mateRecordNumber!==t);r.readName||(r.readName=String(r.uniqueId),n.readName=r.readName),r.mate={sequenceId:n.sequenceId,alignmentStart:n.alignmentStart,uniqueId:n.uniqueId},n.readName&&(r.mate.readName=n.readName),n.mate||void 0!==n.mateRecordNumber||(n.mate={sequenceId:r.sequenceId,alignmentStart:r.alignmentStart,uniqueId:r.uniqueId},r.readName&&(n.mate.readName=r.readName)),r.flags|=l.BAM_FPAIRED,n.flags&l.BAM_FUNMAP&&(r.flags|=l.BAM_FMUNMAP),r.flags&l.BAM_FUNMAP&&(n.flags|=l.BAM_FMUNMAP),n.flags&l.BAM_FREVERSE&&(r.flags|=l.BAM_FMREVERSE),r.flags&l.BAM_FREVERSE&&(n.flags|=l.BAM_FMREVERSE),void 0===r.templateLength&&(a?function(e,t,r){var n=function t(r){var n=[r];if(r.mateRecordNumber>=0){var a=e[r.mateRecordNumber];if(!a)throw new i("intra-slice mate record not found, this file seems malformed");n.push.apply(n,Lr(t(a)))}return n}(r),a=n.map((function(e){return e.alignmentStart})),o=n.map((function(e){return e.alignmentStart+e.readLength-1})),s=Math.max.apply(Math,Lr(o))-Math.min.apply(Math,Lr(a))+1;s>=0&&n.forEach((function(e){if(void 0!==e.templateLength)throw new i("mate pair group has some members that have template lengths already, this file seems malformed");e.templateLength=s}))}(e,0,r):function(e,t){var r=Math.min(e.alignmentStart,t.alignmentStart),n=Math.max(e.alignmentStart+e.readLength-1,t.alignmentStart+t.readLength-1)-r+1;e.templateLength=n,t.templateLength=n}(r,n)),delete r.mateRecordNumber}var d=function(){function e(t,r){mr(this,e),this.container=t,this.file=t.file,this.containerPosition=r}var t,r,n,s,u,l,d,g;return yr(e,[{key:"getHeader",value:(g=vr(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.file.getSectionParsers();case 2:return t=e.sent,e.next=5,this.container.getHeader();case 5:return r=e.sent,e.next=8,this.file.readBlock(r._endPosition+this.containerPosition);case 8:if("MAPPED_SLICE_HEADER"!==(n=e.sent).contentType){e.next=13;break}n.content=c(n.content,t.cramMappedSliceHeader.parser,0,r._endPosition),e.next=16;break;case 13:if("UNMAPPED_SLICE_HEADER"===n.contentType){e.next=15;break}throw new i("error reading slice header block, invalid content type ".concat(n._contentType));case 15:n.content=c(n.content,t.cramUnmappedSliceHeader.parser,0,r._endPosition);case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"getBlocks",value:(d=vr(regeneratorRuntime.mark((function e(){var t,r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:t=e.sent,r=t._endPosition,n=new Array(t.content.numBlocks),i=0;case 6:if(!(i<n.length)){e.next=14;break}return e.next=9,this.file.readBlock(r);case 9:n[i]=e.sent,r=n[i]._endPosition;case 11:i+=1,e.next=6;break;case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"getCoreDataBlock",value:(l=vr(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBlocks();case 2:return e.abrupt("return",e.sent[0]);case 3:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"_getBlocksContentIdIndex",value:(u=vr(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBlocks();case 2:return t=e.sent,r={},e.abrupt("return",(t.forEach((function(e){"EXTERNAL_DATA"===e.contentType&&(r[e.contentId]=e)})),r));case 5:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"getBlockByContentId",value:(s=vr(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getBlocksContentIdIndex();case 2:return e.t0=t,e.abrupt("return",e.sent[e.t0]);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"getReferenceRegion",value:(n=vr(regeneratorRuntime.mark((function e(){var t,r,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:if(!((t=e.sent.content).refSeqId<0)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.container.getCompressionScheme();case 7:if(r=e.sent,!(t.refBaseBlockId>=0)){e.next=15;break}if(n=this.getBlockByContentId(t.refBaseBlockId)){e.next=12;break}throw new i("embedded reference specified, but reference block does not exist");case 12:if(!(t.span>n.uncompressedSize)){e.next=14;break}throw new i("Embedded reference is too small");case 14:return e.abrupt("return",{seq:n.data.toString("utf8"),start:t.refSeqStart,end:t.refSeqStart+t.refSeqSpan-1,span:t.refSeqSpan});case 15:if(!r.referenceRequired&&!this.file.fetchReferenceSequenceCallback){e.next=24;break}if(this.file.fetchReferenceSequenceCallback){e.next=18;break}throw new Error("reference sequence not embedded, and seqFetch callback not provided, cannot fetch reference sequence");case 18:return e.next=20,this.file.fetchReferenceSequenceCallback(t.refSeqId,t.refSeqStart,t.refSeqStart+t.refSeqSpan-1);case 20:if((a=e.sent).length===t.refSeqSpan){e.next=23;break}throw new o("seqFetch callback returned a reference sequence of the wrong length");case 23:return e.abrupt("return",{seq:a,start:t.refSeqStart,end:t.refSeqStart+t.refSeqSpan-1,span:t.refSeqSpan});case 24:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getAllRecords",value:function(){return this.getRecords((function(){return!0}))}},{key:"_fetchRecords",value:(r=vr(regeneratorRuntime.mark((function e(){var t,r,n,o,s,c,u,l,d,g,v,m,b,y,w,k,x,S,_=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.file.getDefinition();case 2:return t=e.sent,r=t.majorVersion,e.next=6,this.container.getCompressionScheme();case 6:return n=e.sent,e.next=9,this.getHeader();case 9:return o=e.sent,e.next=12,this._getBlocksContentIdIndex();case 12:if(s=e.sent,!(r>1&&this.file.options.checkSequenceMD5&&o.content.refSeqId>=0&&"0000000000000000"!==o.content.md5.join(""))){e.next=21;break}return e.next=16,this.getReferenceRegion();case 16:if(!(c=e.sent)){e.next=21;break}if(u=c.seq,l=c.start,d=c.end,g=h(u),v=o.content.md5.map((function(e){return(e<16?"0":"")+e.toString(16)})).join(""),g===v){e.next=21;break}throw new i("MD5 checksum reference mismatch for ref ".concat(o.content.refSeqId," pos ").concat(l,"..").concat(d,". recorded MD5: ").concat(v,", calculated MD5: ").concat(g));case 21:return e.next=23,this.getCoreDataBlock();case 23:m=e.sent,b={lastAlignmentStart:o.content.refSeqStart||0,coreBlock:{bitPosition:7,bytePosition:0},externalBlocks:{getCursor:function(e){return this[e]||(this[e]={bitPosition:7,bytePosition:0}),this[e]}}},y=function(e){var t=n.getCodecForDataSeries(e);if(!t)throw new i("no codec defined for ".concat(e," data series"));return t.decode(_,m,s,b)},w=new Array(o.content.numRecords),k=0;case 28:if(!(k<w.length)){e.next=42;break}e.prev=29,w[k]=f(this,y,n,o,m,s,b,r,k),w[k].uniqueId=o.contentPosition+o.content.recordCounter+k+1,e.next=39;break;case 33:if(e.prev=33,e.t0=e.catch(29),!(e.t0 instanceof a)){e.next=38;break}return console.warn("read attempted beyond end of buffer, file seems truncated."),w=w.filter((function(e){return!!e})),e.abrupt("break",42);case 38:throw e.t0;case 39:k+=1,e.next=28;break;case 42:for(x=0;x<w.length;x+=1)(S=w[x].mateRecordNumber)>=0&&p(w,x,w[x],w[S]);return e.abrupt("return",w);case 44:case"end":return e.stop()}}),e,this,[[29,33]])}))),function(){return r.apply(this,arguments)})},{key:"getRecords",value:(t=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s,c,u,h,l,f,p,d,g=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.container.filePosition+this.containerPosition,(n=this.file.featureCache.get(r))||(n=this._fetchRecords(),this.file.featureCache.set(r,n)),e.next=5,n;case 5:if(!(i=e.sent.filter(t)).length||!this.file.fetchReferenceSequenceCallback){e.next=20;break}return e.next=9,this.getHeader();case 9:if(!((a=e.sent).content.refSeqId>=0||-2===a.content.refSeqId)){e.next=20;break}return o=a.content.refSeqId>=0?a.content.refSeqId:void 0,e.next=14,this.container.getCompressionScheme();case 14:for(s=e.sent,c={},u=0;u<i.length;u+=1)h=void 0!==o?o:i[u].sequenceId,(l=c[h])||(l={id:h,start:i[u].alignmentStart,end:-1/0},c[h]=l),(f=i[u].alignmentStart+(i[u].lengthOnRef||i[u].readLength)-1)>l.end&&(l.end=f),i[u].alignmentStart<l.start&&(l.start=i[u].alignmentStart);return e.next=19,Promise.all(Object.values(c).map(function(){var e=vr(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=-1!==t.id&&t.start<=t.end,!e.t0){e.next=5;break}return e.next=4,g.file.fetchReferenceSequenceCallback(t.id,t.start,t.end);case 4:t.seq=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 19:for(p=0;p<i.length;p+=1)(d=c[void 0!==o?o:i[p].sequenceId])&&d.seq&&i[p].addReferenceSequence(d,s);case 20:return e.abrupt("return",i);case 21:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();"getHeader getBlocks _getBlocksContentIdIndex".split(" ").forEach((function(e){return u(d,e)})),e.exports=d},function(e,t,r){(function(t){var n=r(0),i=n.CramMalformedError,a=n.CramUnimplementedError,o=r(31),s=r(77),c=r(17);function u(e){var t=e.indexOf(0);return-1===t?e.toString("utf8"):e.toString("utf8",0,t)}function h(e,r){if(r.readInt32LE||(r=t.from(r)),"Z"===e)return u(r);if("A"===e)return String.fromCharCode(r[0]);if("I"===e){var n=o.fromBytesLE(r);if(n.greaterThan(Number.MAX_SAFE_INTEGER)||n.lessThan(Number.MIN_SAFE_INTEGER))throw new a("integer overflow");return n.toNumber()}if("i"===e)return r.readInt32LE(0);if("s"===e)return r.readInt16LE(0);if("S"===e)return r.readUInt16LE(0);if("c"===e)return r.readInt8(0);if("C"===e)return r.readUInt8(0);if("f"===e)return r.readFloatLE(0);if("H"===e){var s=u(r);return Number.parseInt(s.replace(/^0x/,""),16)}if("B"===e)return function(e){var t=String.fromCharCode(e[0]),r=e.readInt32LE(1),n={c:["readInt8",1],C:["readUInt8",1],s:["readInt16LE",2],S:["readUInt16LE",2],i:["readInt32LE",4],I:["readUInt32LE",4],f:["readFloatLE",4]}[t];if(!n)throw new i("invalid tag value array type '".concat(t,"'"));for(var a=Ir(n,2),o=a[0],s=a[1],c=new Array(r),u=5,h=0;h<r;h+=1)c[h]=e[o](u),u+=s;return c}(r);throw new i("Unrecognized tag type ".concat(e))}function l(e){if(e instanceof t)return u(e);if(e.length&&e.indexOf){if(!e[e.length-1]){var r=e.indexOf(0);return String.fromCharCode.apply(String,Lr(e.slice(0,r)))}return String.fromCharCode.apply(String,Lr(e))}return String(e)}e.exports=function(e,t,r,n,a,o,u,f,p){var d=new s;if(d.flags=t("BF"),d.cramFlags=t("CF"),f>1&&-2===n.content.refSeqId?d.sequenceId=t("RI"):d.sequenceId=n.content.refSeqId,d.readLength=t("RL"),d.alignmentStart=t("AP"),r.APdelta&&(d.alignmentStart+=u.lastAlignmentStart),u.lastAlignmentStart=d.alignmentStart,d.readGroupId=t("RG"),r.readNamesIncluded&&(d.readName=l(t("RN"))),d.isDetached()){var g={};g.flags=t("MF"),r.readNamesIncluded||(g.readName=l(t("RN")),d.readName=g.readName),g.sequenceId=t("NS"),g.alignmentStart=t("NP"),(g.flags||g.sequenceId>-1)&&(d.mate=g),d.templateSize=t("TS"),g.flags&c.CRAM_M_UNMAP&&(d.flags|=c.BAM_FMUNMAP),g.flags&c.CRAM_M_REVERSE&&(d.flags|=c.BAM_FMREVERSE)}else d.hasMateDownStream()&&(d.mateRecordNumber=t("NF")+p+1);var v=t("TL");if(v<0)throw new i("invalid TL index");for(var m=r.getTagNames(v),b=m.length,y=0;y<b;y+=1){var w=m[y],k=w.substr(0,2),x=w.substr(2,1),S=r.getCodecForTag(w);if(!S)throw new i("no codec defined for auxiliary tag ".concat(w));var _=S.decode(e,a,o,u);d.tags[k]=h(x,_)}if(d.isSegmentUnmapped())if(d.isUnknownBases())d.readBases=null,d.qualityScores=null;else{for(var C=new Array(d.readLength),R=0;R<C.length;R+=1)C[R]=t("BA");if(d.readBases=String.fromCharCode.apply(String,C),d.isPreservingQualityScores()){for(var E=0;E<C.length;E+=1)C[E]=t("QS");d.qualityScores=C}}else{var A=t("FN");A&&(d.readFeatures=function(e,t,r,n,a){var o=0,s=e.alignmentStart-1,c=new Array(t);function u(e){var t=Ir(e,2),n=t[0],i=t[1],a=r(i);return"character"===n?String.fromCharCode(a):"string"===n?a.toString("utf8"):"numArray"===n?a.toArray():a}for(var h=0;h<t;h+=1){var l=String.fromCharCode(r("FC")),f=r("FP"),p={code:l},d={B:["character","BA"],S:["string",a>1?"SC":"IN"],X:["number","BS"],D:["number","DL"],I:["string","IN"],i:["character","BA"],b:["string","BB"],q:["numArray","QQ"],Q:["number","QS"],H:["number","HC"],P:["number","PD"],N:["number","RS"]}[l];if(!d)throw new i('invalid read feature code "'.concat(l,'"'));p.data=u(d);var g={B:["number","QS"]}[l];g&&(p.data=[p.data,u(g)]),o+=f,p.pos=o,s+=f,p.refPos=s,"D"===l||"N"===l?s+=p.data:"H"===l?s-=p.data:"I"===l||"S"===l?s-=p.data.length:"i"===l&&(s-=1),c[h]=p}return c}(d,A,t,0,f));var T=d.readLength;if(d.readFeatures&&d.readFeatures.forEach((function(e){var t=e.code,r=e.data;"D"===t||"N"===t?T+=r:"I"===t||"S"===t?T-=r.length:"i"===t&&(T-=1)})),Number.isNaN(T)&&(console.warn("".concat(d.readName||"".concat(d.sequenceId,":").concat(d.alignmentStart)," record has invalid read features")),T=d.readLength),d.lengthOnRef=T,d.mappingQuality=t("MQ"),d.isPreservingQualityScores()){for(var I=new Array(d.readLength),L=0;L<I.length;L+=1)I[L]=t("QS");d.qualityScores=I}}return d}}).call(this,r(1).Buffer)},function(e,t,r){var n=r(17),i={a:0,A:0,c:1,C:1,g:2,G:2,t:3,T:3,n:4,N:4};e.exports=function(){function e(){mr(this,e),this.tags={}}return yr(e,[{key:"isPaired",value:function(){return!!(this.flags&n.BAM_FPAIRED)}},{key:"isProperlyPaired",value:function(){return!!(this.flags&n.BAM_FPROPER_PAIR)}},{key:"isSegmentUnmapped",value:function(){return!!(this.flags&n.BAM_FUNMAP)}},{key:"isMateUnmapped",value:function(){return!!(this.flags&n.BAM_FMUNMAP)}},{key:"isReverseComplemented",value:function(){return!!(this.flags&n.BAM_FREVERSE)}},{key:"isMateReverseComplemented",value:function(){return!!(this.flags&n.BAM_FMREVERSE)}},{key:"isRead1",value:function(){return!!(this.flags&n.BAM_FREAD1)}},{key:"isRead2",value:function(){return!!(this.flags&n.BAM_FREAD2)}},{key:"isSecondary",value:function(){return!!(this.flags&n.BAM_FSECONDARY)}},{key:"isFailedQc",value:function(){return!!(this.flags&n.BAM_FQCFAIL)}},{key:"isDuplicate",value:function(){return!!(this.flags&n.BAM_FDUP)}},{key:"isSupplementary",value:function(){return!!(this.flags&n.BAM_FSUPPLEMENTARY)}},{key:"isDetached",value:function(){return!!(this.cramFlags&n.CRAM_FLAG_DETACHED)}},{key:"hasMateDownStream",value:function(){return!!(this.cramFlags&n.CRAM_FLAG_MATE_DOWNSTREAM)}},{key:"isPreservingQualityScores",value:function(){return!!(this.cramFlags&n.CRAM_FLAG_PRESERVE_QUAL_SCORES)}},{key:"isUnknownBases",value:function(){return!!(this.cramFlags&n.CRAM_FLAG_NO_SEQ)}},{key:"getReadBases",value:function(){return!this.readBases&&this._refRegion&&(this.readBases=function(e,t){if((e.lengthOnRef||e.readLength)&&!e.isUnknownBases()){var r=e.alignmentStart-t.start;if(!e.readFeatures)return t.seq.substr(r,e.lengthOnRef).toUpperCase();for(var n="",i=r,a=0;n.length<e.readLength;)if(a<e.readFeatures.length&&e.readFeatures[a].pos===n.length+1){var o=e.readFeatures[a];a+=1,"b"===o.code?(n+=o.data,i+=1):"B"===o.code?(n+=o.data[0],i+=1):"X"===o.code?(n+=o.sub,i+=1):"I"===o.code?n+=o.data:"D"===o.code?i+=o.data:"i"===o.code?n+=o.data:"N"===o.code?i+=o.data:"S"===o.code?n+=o.data:"P"===o.code||o.code}else if(a<e.readFeatures.length){var s=t.seq.substr(i,e.readFeatures[a].pos-n.length-1);n+=s,i+=s.length}else{var c=t.seq.substr(i,e.readLength-n.length);n+=c,i+=c.length}return n.toUpperCase()}}(this,this._refRegion)),this.readBases}},{key:"getPairOrientation",value:function(){if(!this.isSegmentUnmapped()&&this.isPaired()&&!this.isMateUnmapped()&&this.sequenceId===this.mate.sequenceId){var e=this.isReverseComplemented()?"R":"F",t=this.isMateReverseComplemented()?"R":"F",r=" ",n=" ";this.isRead1()?(r="1",n="2"):this.isRead2()&&(r="2",n="1");var i=[],a=this.templateLength||this.templateSize;return this.alignmentStart>this.mate.alignmentStart&&a>0&&(a=-a),a>0?(i[0]=e,i[1]=r,i[2]=t,i[3]=n):(i[2]=e,i[3]=r,i[0]=t,i[1]=n),i.join("")}return null}},{key:"addReferenceSequence",value:function(e,t){this.readFeatures&&this.readFeatures.forEach((function(r){"X"===r.code&&function(e,t,r,n){if(t){var a=n.refPos-t.start,o=t.seq.charAt(a);o&&(n.ref=o);var s=i[o];void 0===s&&(s=4);var c=r.substitutionMatrix[s][n.data];c&&(n.sub=c)}}(0,e,t,r)})),!this.readBases&&e.start<=this.alignmentStart&&e.end>=this.alignmentStart+(this.lengthOnRef||this.readLength)-1&&(this._refRegion=e)}},{key:"toJSON",value:function(){var e=this,t={};return Object.keys(this).forEach((function(r){"_"!==r.charAt(0)&&(t[r]=e[r])})),t.readBases=this.getReadBases(),t}}]),e}()},function(e,t,r){var n=r(0).CramMalformedError,i=r(79).instantiateCodec,a={BF:"int",CF:"int",RI:"int",RL:"int",AP:"int",RG:"int",MF:"int",NS:"int",NP:"int",TS:"int",NF:"int",TC:"byte",TN:"int",FN:"int",FC:"byte",FP:"int",BS:"byte",IN:"byteArray",SC:"byteArray",DL:"int",BA:"byte",BB:"byteArray",RS:"int",PD:"int",HC:"int",MQ:"int",RN:"byteArray",QS:"byte",QQ:"byteArray",TL:"int",TM:"ignore",TV:"ignore"};e.exports=function(){function e(t){mr(this,e),Object.assign(this,t),this.readNamesIncluded=t.preservation.RN,this.APdelta=t.preservation.AP,this.referenceRequired=!!t.preservation.RR,this.tagIdsDictionary=t.preservation.TD,this.substitutionMatrix=function(e){for(var t=new Array(5),r=0;r<5;r+=1)t[r]=new Array(4);return t[0][e[0]>>6&3]="C",t[0][e[0]>>4&3]="G",t[0][e[0]>>2&3]="T",t[0][e[0]>>0&3]="N",t[1][e[1]>>6&3]="A",t[1][e[1]>>4&3]="G",t[1][e[1]>>2&3]="T",t[1][e[1]>>0&3]="N",t[2][e[2]>>6&3]="A",t[2][e[2]>>4&3]="C",t[2][e[2]>>2&3]="T",t[2][e[2]>>0&3]="N",t[3][e[3]>>6&3]="A",t[3][e[3]>>4&3]="C",t[3][e[3]>>2&3]="G",t[3][e[3]>>0&3]="N",t[4][e[4]>>6&3]="A",t[4][e[4]>>4&3]="C",t[4][e[4]>>2&3]="G",t[4][e[4]>>0&3]="T",t}(t.preservation.SM),this.dataSeriesCodecCache={},this.tagCodecCache={}}return yr(e,[{key:"getCodecForTag",value:function(e){if(!this.tagCodecCache[e]){var t=this.tagEncoding[e];t&&(this.tagCodecCache[e]=i(t,"byteArray"))}return this.tagCodecCache[e]}},{key:"getTagNames",value:function(e){return this.tagIdsDictionary[e]}},{key:"getCodecForDataSeries",value:function(e){if(!this.dataSeriesCodecCache[e]){var t=this.dataSeriesEncoding[e];if(t){var r=a[e];if(!r)throw new n("data series name ".concat(e," not defined in file compression header"));this.dataSeriesCodecCache[e]=i(t,r)}}return this.dataSeriesCodecCache[e]}},{key:"toJSON",value:function(){var e=this,t={};return Object.keys(this).forEach((function(r){/Cache$/.test(r)||(t[r]=e[r])})),t}}]),e}()},function(e,t,r){var n=r(0).CramUnimplementedError,i=r(80),a=r(81),o=r(82),s=r(83),c=r(84),u=r(85),h={1:a,3:i,4:s,5:o,6:c,7:r(86),9:u};function l(e){return h[e]}e.exports={getCodecClassWithId:l,instantiateCodec:function e(t,r){var i=l("ignore"===r?0:t.codecId);if(!i)throw new n("no codec implemented for codec ID ".concat(t.codecId));return new i(t.parameters,r,e)}}},function(e,t,r){var n=r(0).CramMalformedError,i=r(6);e.exports=function(e){wr(r,e);var t=Ar(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if(mr(this,r),e=t.call(this,n,i),!["byte","int"].includes(e.dataType))throw new TypeError("".concat(e.dataType," decoding not yet implemented by HUFFMAN_INT codec"));return e.buildCodeBook(),e.buildCodes(),e.buildCaches(),0===e.sortedCodes[0].bitLength&&(e._decode=e._decodeZeroLengthCode),Er(e)}return yr(r,[{key:"buildCodeBook",value:function(){for(var e=this,t=new Array(this.parameters.numCodes),r=0;r<this.parameters.numCodes;r+=1)t[r]={symbol:this.parameters.symbols[r],bitLength:this.parameters.bitLengths[r]};t=t.sort((function(e,t){return e.bitLength-t.bitLength||e.symbol-t.symbol})),this.codeBook={},t.forEach((function(t){e.codeBook[t.bitLength]||(e.codeBook[t.bitLength]=[]),e.codeBook[t.bitLength].push(t.symbol)}))}},{key:"buildCodes",value:function(){var e=this;this.codes={};var t=0,r=-1;Object.entries(this.codeBook).forEach((function(i){var a=Ir(i,2),o=a[0],s=a[1];o=parseInt(o,10),s.forEach((function(i){var a={bitLength:o,value:i};r+=1;var s=o-t;if(r<<=s,a.bitCode=r,t+=s,function(e){var t=e-(e>>1)&1431655765;return 16843009*((t=(858993459&t)+(t>>2&858993459))+(t>>4)&252645135)>>24}(r)>o)throw new n("Symbol out of range");e.codes[i]=a}))}))}},{key:"buildCaches",value:function(){this.sortedCodes=Object.values(this.codes).sort((function(e,t){return e.bitLength-t.bitLength||e.bitCode-t.bitCode})),this.sortedByValue=Object.values(this.codes).sort((function(e,t){return e.value-t.value})),this.sortedValuesByBitCode=this.sortedCodes.map((function(e){return e.value})),this.sortedBitCodes=this.sortedCodes.map((function(e){return e.bitCode})),this.sortedBitLengthsByBitCode=this.sortedCodes.map((function(e){return e.bitLength}));var e=Math.max.apply(Math,Lr(this.sortedBitCodes));this.bitCodeToValue=new Array(e+1).fill(-1);for(var t=0;t<this.sortedBitCodes.length;t+=1)this.bitCodeToValue[this.sortedCodes[t].bitCode]=t}},{key:"decode",value:function(e,t,r,n){return this._decode(e,t,n.coreBlock)}},{key:"_decodeZeroLengthCode",value:function(){return this.sortedCodes[0].value}},{key:"_decode",value:function(e,t,r){for(var i=t.content,a=0,o=0,s=0;s<this.sortedCodes.length;s+=1){var c=this.sortedCodes[s].bitLength;o<<=c-a,o|=this._getBits(i,r,c-a),a=c;var u=this.bitCodeToValue[o];if(u>-1&&this.sortedBitLengthsByBitCode[u]===c)return this.sortedValuesByBitCode[u];for(var h=s;this.sortedCodes[h+1].bitLength===c&&h<this.sortedCodes.length;h+=1)s+=1}throw new n("Huffman symbol not found.")}}]),r}(i)},function(e,t,r){var n=r(0),i=n.CramUnimplementedError,a=n.CramMalformedError,o=n.CramBufferOverrunError,s=r(6),c=r(8).parseItf8;e.exports=function(e){wr(r,e);var t=Ar(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(mr(this,r),"int"===(e=t.call(this,n,a)).dataType)e._decodeData=e._decodeInt;else{if("byte"!==e.dataType)throw new i("".concat(e.dataType," decoding not yet implemented by EXTERNAL codec"));e._decodeData=e._decodeByte}return Er(e)}return yr(r,[{key:"decode",value:function(e,t,r,n){var i=this.parameters.blockContentId,o=r[i];if(!o)throw new a("no block found with content ID ".concat(i));var s=n.externalBlocks.getCursor(i);return this._decodeData(o,s)}},{key:"_decodeInt",value:function(e,t){var r=Ir(c(e.content,t.bytePosition),2),n=r[0],i=r[1];return t.bytePosition+=i,n}},{key:"_decodeByte",value:function(e,t){if(t.bytePosition>=e.content.length)throw new o("attempted to read beyond end of block. this file seems truncated.");var r=e.content[t.bytePosition];return t.bytePosition+=1,r}}]),r}(s)},function(e,t,r){var n=r(0),i=n.CramBufferOverrunError,a=n.CramMalformedError,o=r(6);e.exports=function(e){wr(r,e);var t=Ar(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if(mr(this,r),e=t.call(this,n,i),"byteArray"!==i)throw new TypeError("byteArrayStop codec does not support data type ".concat(i));return e._decode=e._decodeByteArray,Er(e)}return yr(r,[{key:"decode",value:function(e,t,r,n){var i=this.parameters.blockContentId,o=r[i];if(!o)throw new a("no block found with content ID ".concat(i));var s=n.externalBlocks.getCursor(i);return this._decode(o,s)}},{key:"_decodeByteArray",value:function(e,t){for(var r=e.content,n=this.parameters.stopByte,a=t.bytePosition,o=t.bytePosition;r[o]!==n&&o<r.length;){if(o===r.length)throw new i("byteArrayStop reading beyond length of data buffer?");o+=1}return t.bytePosition=o+1,r.slice(a,o)}}]),r}(o)},function(e,t,r){var n=r(8).tinyMemoize,i=function(e){wr(r,e);var t=Ar(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;if(mr(this,r),(e=t.call(this,n,i)).instantiateCodec=a,"byteArray"!==i)throw new TypeError("byteArrayLength does not support data type ".concat(i));return Er(e)}return yr(r,[{key:"decode",value:function(e,t,r,n){for(var i=this._getLengthCodec().decode(e,t,r,n),a=this._getDataCodec(),o=new Array(i),s=0;s<i;s+=1)o[s]=a.decode(e,t,r,n);return o}},{key:"_getLengthCodec",value:function(){var e=this.parameters.lengthsEncoding;return this.instantiateCodec(e,"int")}},{key:"_getDataCodec",value:function(){var e=this.parameters.valuesEncoding;return this.instantiateCodec(e,"byte")}}]),r}(r(6));"_getLengthCodec _getDataCodec".split(" ").forEach((function(e){return n(i,e)})),e.exports=i},function(e,t,r){var n=r(0).CramUnimplementedError,i=r(6);e.exports=function(e){wr(r,e);var t=Ar(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(mr(this,r),"int"!==(e=t.call(this,i,a)).dataType)throw new n("".concat(e.dataType," decoding not yet implemented by BETA codec"));return Er(e)}return yr(r,[{key:"decode",value:function(e,t,r,n){return this._getBits(t.content,n.coreBlock,this.parameters.length)-this.parameters.offset}}]),r}(i)},function(e,t,r){var n=r(0).CramUnimplementedError,i=r(6);e.exports=function(e){wr(r,e);var t=Ar(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(mr(this,r),"int"!==(e=t.call(this,i,a)).dataType)throw new n("".concat(e.dataType," decoding not yet implemented by GAMMA codec"));return Er(e)}return yr(r,[{key:"decode",value:function(e,t,r,n){for(var i=1;0===this._getBits(t.content,n.coreBlock,1);)i+=1;return(this._getBits(t.content,n.coreBlock,i-1)|1<<i-1)-this.parameters.offset}}]),r}(i)},function(e,t,r){var n=r(0).CramUnimplementedError,i=r(6);e.exports=function(e){wr(r,e);var t=Ar(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(mr(this,r),"int"!==(e=t.call(this,i,a)).dataType)throw new n("".concat(e.dataType," decoding not yet implemented by SUBEXP codec"));return Er(e)}return yr(r,[{key:"decode",value:function(e,t,r,n){for(var i,a,o=0;this._getBits(t.content,n.coreBlock,1);)o+=1;return 0===o?(i=this.parameters.K,a=this._getBits(t.content,n.coreBlock,i)):a=1<<(i=o+this.parameters.K-1)|this._getBits(t.content,n.coreBlock,i),a-this.parameters.offset}}]),r}(i)},function(e,t,r){var n=r(88),i=r(90);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=y,t.resolve=function(e,t){return y(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?y(e,!1,!0).resolveObject(t):t},t.format=function(e){return i.isString(e)&&(e=y(e)),e instanceof a?e.format():a.prototype.format.call(e)},t.Url=a;var o=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),h=["'"].concat(u),l=["%","/","?",";","#"].concat(h),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=r(91);function y(e,t,r){if(e&&i.isObject(e)&&e instanceof a)return e;var n=new a;return n.parse(e,t,r),n}a.prototype.parse=function(e,t,r){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+dr(e));var a=e.indexOf("?"),s=-1!==a&&a<e.indexOf("#")?"?":"#",u=e.split(s);u[0]=u[0].replace(/\\/g,"/");var y=e=u.join(s);if(y=y.trim(),!r&&1===e.split("#").length){var w=c.exec(y);if(w)return this.path=y,this.href=y,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var k=o.exec(y);if(k){var x=(k=k[0]).toLowerCase();this.protocol=x,y=y.substr(k.length)}if(r||k||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===y.substr(0,2);!S||k&&v[k]||(y=y.substr(2),this.slashes=!0)}if(!v[k]&&(S||k&&!m[k])){for(var _,C,R=-1,E=0;E<f.length;E++)-1!==(A=y.indexOf(f[E]))&&(-1===R||A<R)&&(R=A);for(-1!==(C=-1===R?y.lastIndexOf("@"):y.lastIndexOf("@",R))&&(_=y.slice(0,C),y=y.slice(C+1),this.auth=decodeURIComponent(_)),R=-1,E=0;E<l.length;E++){var A;-1!==(A=y.indexOf(l[E]))&&(-1===R||A<R)&&(R=A)}-1===R&&(R=y.length),this.host=y.slice(0,R),y=y.slice(R),this.parseHost(),this.hostname=this.hostname||"";var T="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!T)for(var I=this.hostname.split(/\./),L=(E=0,I.length);E<L;E++){var M=I[E];if(M&&!M.match(p)){for(var F="",D=0,O=M.length;D<O;D++)M.charCodeAt(D)>127?F+="x":F+=M[D];if(!F.match(p)){var B=I.slice(0,E),N=I.slice(E+1),P=M.match(d);P&&(B.push(P[1]),N.unshift(P[2])),N.length&&(y="/"+N.join(".")+y),this.hostname=B.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=n.toASCII(this.hostname));var z=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+z,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!g[x])for(E=0,L=h.length;E<L;E++){var H=h[E];if(-1!==y.indexOf(H)){var j=encodeURIComponent(H);j===H&&(j=escape(H)),y=y.split(H).join(j)}}var q=y.indexOf("#");-1!==q&&(this.hash=y.substr(q),y=y.slice(0,q));var V=y.indexOf("?");if(-1!==V?(this.search=y.substr(V),this.query=y.substr(V+1),t&&(this.query=b.parse(this.query)),y=y.slice(0,V)):t&&(this.search="",this.query={}),y&&(this.pathname=y),m[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){z=this.pathname||"";var W=this.search||"";this.path=z+W}return this.href=this.format(),this},a.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",a=!1,o="";this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(o=b.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||m[t])&&!1!==a?(a="//"+(a||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):a||(a=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),t+a+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+n},a.prototype.resolve=function(e){return this.resolveObject(y(e,!1,!0)).format()},a.prototype.resolveObject=function(e){if(i.isString(e)){var t=new a;t.parse(e,!1,!0),e=t}for(var r=new a,n=Object.keys(this),o=0;o<n.length;o++){var s=n[o];r[s]=this[s]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),u=0;u<c.length;u++){var h=c[u];"protocol"!==h&&(r[h]=e[h])}return m[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!m[e.protocol]){for(var l=Object.keys(e),f=0;f<l.length;f++){var p=l[f];r[p]=e[p]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||v[e.protocol])r.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var g=r.pathname||"",b=r.search||"";r.path=g+b}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var y=r.pathname&&"/"===r.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),k=w||y||r.host&&e.pathname,x=k,S=r.pathname&&r.pathname.split("/")||[],_=(d=e.pathname&&e.pathname.split("/")||[],r.protocol&&!m[r.protocol]);if(_&&(r.hostname="",r.port=null,r.host&&(""===S[0]?S[0]=r.host:S.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),k=k&&(""===d[0]||""===S[0])),w)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,S=d;else if(d.length)S||(S=[]),S.pop(),S=S.concat(d),r.search=e.search,r.query=e.query;else if(!i.isNullOrUndefined(e.search))return _&&(r.hostname=r.host=S.shift(),(T=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=T.shift(),r.host=r.hostname=T.shift())),r.search=e.search,r.query=e.query,i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!S.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var C=S.slice(-1)[0],R=(r.host||e.host||S.length>1)&&("."===C||".."===C)||""===C,E=0,A=S.length;A>=0;A--)"."===(C=S[A])?S.splice(A,1):".."===C?(S.splice(A,1),E++):E&&(S.splice(A,1),E--);if(!k&&!x)for(;E--;E)S.unshift("..");!k||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),R&&"/"!==S.join("/").substr(-1)&&S.push("");var T,I=""===S[0]||S[0]&&"/"===S[0].charAt(0);return _&&(r.hostname=r.host=I?"":S.length?S.shift():"",(T=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=T.shift(),r.host=r.hostname=T.shift())),(k=k||r.host&&S.length)&&!I&&S.unshift(""),S.length?r.pathname=S.join("/"):(r.pathname=null,r.path=null),i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},a.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){(function(e,n){var i;
/*! https://mths.be/punycode v1.4.1 by @mathias */!function(a){t&&t.nodeType,e&&e.nodeType;var o="object"==dr(n)&&n;o.global!==o&&o.window!==o&&o.self;var s,c=2147483647,u=36,h=/^xn--/,l=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,g=String.fromCharCode;function v(e){throw new RangeError(p[e])}function m(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function b(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+m((e=e.replace(f,".")).split("."),t).join(".")}function y(e){for(var t,r,n=[],i=0,a=e.length;i<a;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function w(e){return m(e,(function(e){var t="";return e>65535&&(t+=g((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+g(e)})).join("")}function k(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function x(e,t,r){var n=0;for(e=r?d(e/700):e>>1,e+=d(e/t);e>455;n+=u)e=d(e/35);return d(n+36*e/(e+38))}function S(e){var t,r,n,i,a,o,s,h,l,f,p,g=[],m=e.length,b=0,y=128,k=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&v("not-basic"),g.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<m;){for(a=b,o=1,s=u;i>=m&&v("invalid-input"),((h=(p=e.charCodeAt(i++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:u)>=u||h>d((c-b)/o))&&v("overflow"),b+=h*o,!(h<(l=s<=k?1:s>=k+26?26:s-k));s+=u)o>d(c/(f=u-l))&&v("overflow"),o*=f;k=x(b-a,t=g.length+1,0==a),d(b/t)>c-y&&v("overflow"),y+=d(b/t),b%=t,g.splice(b++,0,y)}return w(g)}function _(e){var t,r,n,i,a,o,s,h,l,f,p,m,b,w,S,_=[];for(m=(e=y(e)).length,t=128,r=0,a=72,o=0;o<m;++o)(p=e[o])<128&&_.push(g(p));for(n=i=_.length,i&&_.push("-");n<m;){for(s=c,o=0;o<m;++o)(p=e[o])>=t&&p<s&&(s=p);for(s-t>d((c-r)/(b=n+1))&&v("overflow"),r+=(s-t)*b,t=s,o=0;o<m;++o)if((p=e[o])<t&&++r>c&&v("overflow"),p==t){for(h=r,l=u;!(h<(f=l<=a?1:l>=a+26?26:l-a));l+=u)S=h-f,w=u-f,_.push(g(k(f+S%w,0))),h=d(S/w);_.push(g(k(h,0))),a=x(r,b,n==i),r=0,++n}++r,++t}return _.join("")}s={version:"1.4.1",ucs2:{decode:y,encode:w},decode:S,encode:_,toASCII:function(e){return b(e,(function(e){return l.test(e)?"xn--"+_(e):e}))},toUnicode:function(e){return b(e,(function(e){return h.test(e)?S(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return s}.call(t,r,t,e))||(e.exports=i)}()}).call(this,r(89)(e),r(2))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==dr(e)&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){t.decode=t.parse=r(92),t.encode=t.stringify=r(93)},function(e,t,r){function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,a){t=t||"&",r=r||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t);var c=1e3;a&&"number"==typeof a.maxKeys&&(c=a.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var h=0;h<u;++h){var l,f,p,d,g=e[h].replace(s,"%20"),v=g.indexOf(r);v>=0?(l=g.substr(0,v),f=g.substr(v+1)):(l=g,f=""),p=decodeURIComponent(l),d=decodeURIComponent(f),n(o,p)?i(o[p])?o[p].push(d):o[p]=[o[p],d]:o[p]=d}return o};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){var n=function(e){switch(dr(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,s){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==dr(e)?a(o(e),(function(o){var s=encodeURIComponent(n(o))+r;return i(e[o])?a(e[o],(function(e){return s+encodeURIComponent(n(e))})).join(t):s+encodeURIComponent(n(e[o]))})).join(t):s?encodeURIComponent(n(s))+r+encodeURIComponent(n(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var o=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){(function(t){var n=r(95),i=r(96);e.exports=function(){function e(t){var r=this;mr(this,e),this.position=0,this.url=t,this.cache=new i({fetch:function(e,t){return r._fetch(e,t)}})}var r,a,o;return yr(e,[{key:"_fetch",value:(o=vr(regeneratorRuntime.mark((function e(r,i){var a,o,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},i<1/0?a.range="bytes=".concat(r,"-").concat(r+i):i===1/0&&0!==r&&(a.range="bytes=".concat(r,"-")),e.next=4,n(this.url,{method:"GET",headers:a,redirect:"follow",mode:"cors"});case 4:if((200!==(o=e.sent).status||0!==r)&&206!==o.status){e.next=13;break}return e.t0=t,e.next=9,o.arrayBuffer();case 9:return e.t1=e.sent,s=e.t0.from.call(e.t0,e.t1),c=/\/(\d+)$/.exec(o.headers.get("content-range")),e.abrupt("return",(c&&c[1]?this._stat={size:parseInt(c[1],10)}:this._stat={size:void 0},s));case 13:throw new Error("HTTP ".concat(o.status," fetching ").concat(this.url));case 14:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"read",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return null===n&&(this.position,this.position+=r),this.cache.get(e,t,r,n)}},{key:"readFile",value:(a=vr(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(this.url,{method:"GET",redirect:"follow",mode:"cors"});case 2:return r=e.sent,e.t0=t,e.next=6,r.arrayBuffer();case 6:return e.t1=e.sent,e.abrupt("return",e.t0.from.call(e.t0,e.t1));case 8:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"stat",value:(r=vr(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._stat){e.next=6;break}return r=t.allocUnsafe(10),e.next=4,this.read(r,0,10,0);case 4:if(this._stat){e.next=6;break}throw new Error("unable to determine size of file at ".concat(this.url));case 6:return e.abrupt("return",this._stat);case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}]),e}()}).call(this,r(1).Buffer)},function(e,t){var r=function(e){function t(){this.fetch=!1}return t.prototype=e,new t}("undefined"!=typeof self?self:this);!function(e){!function(t){var r="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in e,o="ArrayBuffer"in e;if(o)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function h(e){return"string"!=typeof e&&(e=String(e)),e}function l(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function d(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function g(e){var t=new FileReader,r=d(t);return t.readAsArrayBuffer(e),r}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&i&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e,t,r,n=p(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,r=d(t=new FileReader),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(e,t){e=u(e),t=h(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},f.prototype.delete=function(e){delete this.map[u(e)]},f.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},f.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},f.prototype.set=function(e,t){this.map[u(e)]=h(t)},f.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},f.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),l(e)},f.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),l(e)},f.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),l(e)},n&&(f.prototype[Symbol.iterator]=f.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function y(e,t){var r,n,i=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new f(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new f(t.headers)),this.method=(n=(r=t.method||this.method||"GET").toUpperCase(),b.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function k(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new f(t.headers),this.url=t.url||"",this._initBody(e)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},m.call(y.prototype),m.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},k.error=function(){var e=new k(null,{status:0,statusText:""});return e.type="error",e};var x=[301,302,303,307,308];k.redirect=function(e,t){if(-1===x.indexOf(t))throw new RangeError("Invalid status code");return new k(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function S(e,r){return new Promise((function(n,a){var o=new y(e,r);if(o.signal&&o.signal.aborted)return a(new t.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function c(){s.abort()}s.onload=function(){var e,t,r={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new f,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t)};r.url="responseURL"in s?s.responseURL:r.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;n(new k(i,r))},s.onerror=function(){a(new TypeError("Network request failed"))},s.ontimeout=function(){a(new TypeError("Network request failed"))},s.onabort=function(){a(new t.DOMException("Aborted","AbortError"))},s.open(o.method,o.url,!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&i&&(s.responseType="blob"),o.headers.forEach((function(e,t){s.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",c),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",c)}),s.send(void 0===o._bodyInit?null:o._bodyInit)}))}S.polyfill=!0,e.fetch||(e.fetch=S,e.Headers=f,e.Request=y,e.Response=k),t.Headers=f,t.Request=y,t.Response=k,t.fetch=S}({})}(r),delete r.fetch.polyfill,e.exports=t=r.fetch,t.fetch=r.fetch,t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response,t.default=r.fetch},function(e,t,r){var n=r(30);e.exports=function(){function e(t){var r=t.fetch,i=t.size,a=void 0===i?1e7:i,o=t.chunkSize,s=void 0===o?32768:o;if(mr(this,e),!r)throw new Error("fetch function required");this.fetch=r,this.chunkSize=s,this.lruCache=new n({maxSize:Math.floor(a/s)})}return yr(e,[{key:"get",value:function(){var e=vr(regeneratorRuntime.mark((function e(t,r,n,i){var a,o,s,c,u,h,l,f=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length<r+n)){e.next=2;break}throw new Error("output buffer not big enough for request");case 2:for(a=Math.floor(i/this.chunkSize),o=Math.floor((i+n)/this.chunkSize),s=new Array(o-a+1),c=function(e){s[e-a]=f._getChunk(e).then((function(t){return{data:t,chunkNumber:e}}))},u=a;u<=o;u+=1)c(u);return e.next=7,Promise.all(s);case 7:h=e.sent,l=i-h[0].chunkNumber*this.chunkSize,h.forEach((function(e){var s=e.data,c=e.chunkNumber,u=c*f.chunkSize,h=0,p=f.chunkSize,d=r+(c-a)*f.chunkSize-l;c===a&&(d=r,h=l),c===o&&(p=i+n-u),s.copy(t,d,h,p)}));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"_getChunk",value:function(e){var t=this.lruCache.get(e);if(t)return t;var r=this.fetch(e*this.chunkSize,this.chunkSize);return this.lruCache.set(e,r),r}}]),e}()},function(e,t,r){r(34).promisify;var n=null,i=n;e.exports=function(){function e(t){mr(this,e),this.position=0,this.filename=t,this.fd=i(this.filename,"r")}var t,r,n;return yr(e,[{key:"read",value:(n=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:0,n=a.length>2?a[2]:void 0,null===(i=a.length>3?a[3]:void 0)&&(this.position,this.position+=n),e.t0=null,e.next=8,this.fd;case 8:return e.t1=e.sent,e.t2=t,e.t3=r,e.t4=n,e.t5=i,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4,e.t5));case 14:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"readFile",value:(r=vr(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=null,e.next=3,this.fd;case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"stat",value:(t=vr(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._stat,e.t0){e.next=9;break}return e.t1=null,e.next=5,this.fd;case 5:return e.t2=e.sent,e.next=8,(0,e.t1)(e.t2);case 8:this._stat=e.sent;case 9:return e.abrupt("return",this._stat);case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}()},function(e,t){e.exports={parseHeaderText:function(e){var t=e.split(/\r?\n/),r=[];return t.forEach((function(e){var t=function(e){return Mr(e)||Fr(e)||Dr(e)||Br()}(e.split(/\t/)),n=t[0],i=t.slice(1).map((function(e){var t=Ir(e.split(":",2),2);return{tag:t[0],value:t[1]}}));n&&r.push({tag:n.substr(1),data:i})})),r}}},function(e,t,r){var n=r(0),i=n.CramUnimplementedError,a=n.CramSizeLimitError,o=r(18);e.exports=function(){function e(t){if(mr(this,e),t.cram?this.cram=t.cram:this.cram=new o({url:t.cramUrl,path:t.cramPath,filehandle:t.cramFilehandle,seqFetch:t.seqFetch,checkSequenceMD5:t.checkSequenceMD5,cacheSize:t.cacheSize}),!(this.cram instanceof o))throw new Error("invalid arguments: no cramfile");if(this.index=t.index,!this.index.getEntriesForRange)throw new Error("invalid arguments: not an index");this.fetchSizeLimit=t.fetchSizeLimit||3e6}var t;return yr(e,[{key:"getRecordsForRange",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n){var o,s,c,u,h,l,f,p,d,g,v,m,b,y,w,k,x,S,_,C,R,E,A,T,I,L,M,F=this,D=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((s=D.length>3&&void 0!==D[3]?D[3]:{}).viewAsPairs=s.viewAsPairs||!1,s.pairAcrossChr=s.pairAcrossChr||!1,s.maxInsertSize=s.maxInsertSize||2e5,"string"!=typeof t){e.next=3;break}throw new i("string sequence names not yet supported");case 3:return c=t,e.next=6,this.index.getEntriesForRange(c,r,n);case 6:if(u=e.sent,!((h=u.map((function(e){return e.sliceBytes})).reduce((function(e,t){return e+t}),0))>this.fetchSizeLimit)){e.next=10;break}throw new a("data size of ".concat(h.toLocaleString()," bytes exceeded fetch size limit of ").concat(this.fetchSizeLimit.toLocaleString()," bytes"));case 10:return l=function(e){return e.sequenceId===t&&e.alignmentStart<=n&&e.alignmentStart+e.lengthOnRef>=r},e.next=13,Promise.all(u.map((function(e){return F.getRecordsInSlice(e,l)})));case 13:if(f=e.sent,p=(o=Array.prototype).concat.apply(o,Lr(f)),!s.viewAsPairs){e.next=36;break}for(d={},g={},v=0;v<p.length;v+=1)m=p[v].readName,b=p[v].uniqueId,d[m]||(d[m]=0),d[m]+=1,g[b]=1;for(y={},Object.entries(d).forEach((function(e){var t=Ir(e,2),r=t[0];1===t[1]&&(y[r]=!0)})),w=[],k=0;k<p.length;k+=1)x=p[k].readName,y[x]&&p[k].mate&&(p[k].mate.sequenceId===c||s.pairAcrossChr)&&Math.abs(p[k].alignmentStart-p[k].mate.alignmentStart)<s.maxInsertSize&&(S=this.index.getEntriesForRange(p[k].mate.sequenceId,p[k].mate.alignmentStart,p[k].mate.alignmentStart+1),w.push(S));return e.next=24,Promise.all(w);case 24:for(_=e.sent,C=[],R=0;R<_.length;R+=1)(E=C).push.apply(E,Lr(_[R]));if(C=C.sort((function(e,t){return e.toString().localeCompare(t.toString())})).filter((function(e,t,r){return!t||e.toString()!==r[t-1].toString()})),A=[],T=[],!((I=C.map((function(e){return e.sliceBytes})).reduce((function(e,t){return e+t}),0))>this.fetchSizeLimit)){e.next=31;break}throw new Error("mate data size of ".concat(I.toLocaleString()," bytes exceeded fetch size limit of ").concat(this.fetchSizeLimit.toLocaleString()," bytes"));case 31:return C.forEach((function(e){var t=F.cram.featureCache.get(e.toString());t||(t=F.getRecordsInSlice(e,(function(){return!0})),F.cram.featureCache.set(e.toString(),t)),A.push(t);var r=t.then((function(e){for(var t=[],r=0;r<e.length;r+=1){var n=e[r];y[n.readName]&&!g[n.uniqueId]&&t.push(n)}return t}));T.push(r)})),e.next=34,Promise.all(T);case 34:(L=e.sent).length&&(M=L.reduce((function(e,t){return e.concat(t)})),p=p.concat(M));case 36:return e.abrupt("return",p);case 37:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})},{key:"getRecordsInSlice",value:function(e,t){var r=e.containerStart,n=e.sliceStart,i=e.sliceBytes;return this.cram.getContainerAtPosition(r).getSlice(n,i).getRecords(t)}},{key:"hasDataForReferenceSequence",value:function(e){return this.index.hasDataForReferenceSequence(e)}}]),e}()},function(e,t,r){var n=(0,r(34).promisify)(r(20).gunzip),i=r(33).open,a=r(0).CramMalformedError,o=function(){function e(t){mr(this,e),Object.assign(this,t)}return yr(e,[{key:"toString",value:function(){return"".concat(this.start,":").concat(this.span,":").concat(this.containerStart,":").concat(this.sliceStart,":").concat(this.sliceBytes)}}]),e}();function s(e,t){if(t.some((function(e){return void 0===e})))throw new a("invalid .crai index file");var r=Ir(t,6),n=r[0],i=r[1],s=r[2],c=r[3],u=r[4],h=r[5];e[n]||(e[n]=[]),e[n].push(new o({start:i,span:s,containerStart:c,sliceStart:u,sliceBytes:h}))}e.exports=function(){function e(t){mr(this,e);var r=i(t.url,t.path,t.filehandle);this.readFile=r.readFile.bind(r),this.index=this.parseIndex()}var t,r;return yr(e,[{key:"parseIndex",value:function(){var e={};return this.readFile().then((function(e){return 31===e[0]&&139===e[1]?n(e):e})).then((function(t){for(var r=[],n="",i=0;i<t.length;i+=1){var o=t[i];if(o>=48&&o<=57||!n&&45===o)n+=String.fromCharCode(o);else if(9===o)r.push(Number.parseInt(n,10)),n="";else if(10===o)r.push(Number.parseInt(n,10)),n="",s(e,r),r=[];else if(13!==o&&32!==o)throw new a("invalid .crai index file")}return n&&r.push(Number.parseInt(n,10)),6===r.length&&s(e,r),Object.entries(e).forEach((function(t){var r=Ir(t,2),n=r[0],i=r[1];e[n]=i.sort((function(e,t){return e.start-t.start||e.span-t.span}))})),e}))}},{key:"getIndex",value:function(){return this.index}},{key:"hasDataForReferenceSequence",value:(r=vr(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.index;case 2:return e.t0=t,e.abrupt("return",!!e.sent[e.t0]);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"getEntriesForRange",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a,o,s,c,u,h,l,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.index;case 2:if(e.t0=t,i=e.sent[e.t0]){e.next=6;break}return e.abrupt("return",[]);case 6:a=i.length,o=function(e){var t=e.start,i=e.start+e.span;return t>=n?-1:i<=r?1:0},c=0,u=a-1;case 8:if(!(c<=u)){e.next=19;break}if(!((h=o(i[s=Math.round((u+c)/2)]))>0)){e.next=14;break}c=s+1,e.next=17;break;case 14:if(h<0){e.next=16;break}return e.abrupt("break",19);case 16:u=s-1;case 17:e.next=8;break;case 19:for(l=s;l&&!o(i[l-1]);)l-=1;for(f=s;f<a-1&&!o(i[f+1]);)f+=1;return p=i[l].start,e.abrupt("return",i[f].start+i[f].span>=r&&n>=p?i.slice(l,f+1):[]);case 25:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})}]),e}()}]),hS=function(){function e(t,r,n){mr(this,e),this.config=t,this.browser=n,this.genome=r,this.cramFile=new uS.CramFile({filehandle:new lS(t.url,t),seqFetch:t.seqFetch||function(e,t,r){var n=this.genome.sequence,i=this.genome;return this.getHeader().then((function(a){var o=i.getChromosomeName(a.chrNames[e]);return n.getSequence(o,t-1,r)}))}.bind(this),checkSequenceMD5:void 0===t.checkSequenceMD5||t.checkSequenceMD5});var i=new lS(t.indexURL,t);this.indexedCramFile=new uS.IndexedCramFile({cram:this.cramFile,index:new uS.CraiIndex({filehandle:i}),fetchSizeLimit:3e7}),Ix.setReaderDefaults(this,t)}var t,r;return yr(e,[{key:"getHeader",value:(r=vr(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,s,c,u,h,l,f,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.header){e.next=50;break}return t=this.genome,e.next=4,this.cramFile.getSamHeader();case 4:r=e.sent,n={},i=[],a={},o=[],s=Nr(r),e.prev=10,s.s();case 12:if((c=s.n()).done){e.next=41;break}if("SQ"!==(u=c.value).tag){e.next=38;break}h=Nr(u.data),e.prev=16,h.s();case 18:if((l=h.n()).done){e.next=28;break}if("SN"!==(f=l.value).tag){e.next=26;break}return p=f.value,n[p]=i.length,i.push(p),t&&(d=t.getChromosomeName(p),a[d]=p),e.abrupt("break",28);case 26:e.next=18;break;case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(16),h.e(e.t0);case 33:return e.prev=33,h.f(),e.finish(33);case 36:e.next=39;break;case 38:"RG"===u.tag&&o.push(u.data);case 39:e.next=12;break;case 41:e.next=46;break;case 43:e.prev=43,e.t1=e.catch(10),s.e(e.t1);case 46:return e.prev=46,s.f(),e.finish(46);case 49:this.header={chrNames:i,chrToIndex:n,chrAliasTable:a,readGroups:o};case 50:return e.abrupt("return",this.header);case 51:case"end":return e.stop()}}),e,this,[[10,43,46,49],[16,30,33,36]])}))),function(){return r.apply(this,arguments)})},{key:"readAlignments",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a,o,s,c,u,h,l,f,p,d,g,v,m,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b=function(e,t){var r,n,i=[],a=0,o="";if(t.scStart=t.start,t.scLengthOnRef=t.lengthOnRef,e.readFeatures){var s,c=Nr(e.readFeatures);try{for(c.s();!(s=c.n()).done;){var u=s.value,h=u.code,l=u.data,f=u.pos-1,p=u.refPos-1;switch(h){case"S":case"I":case"i":case"N":case"D":if(f>a){var d=f-a;i.push(new Cx({start:p-d,seqOffset:a,len:d,type:"M"})),a+=d,o+=d+"M"}if("S"===h){var g=p;t.scLengthOnRef+=l.length,0===f&&(t.scStart-=l.length,g-=l.length);var v=l.length;i.push(new Cx({start:g,seqOffset:a,len:v,type:"S"})),a+=v,o+=v+h}else if("I"===h||"i"===h){void 0===r&&(r=[]);var m="i"===h?1:l.length;r.push(new Cx({start:p-1,len:m,seqOffset:a,type:"I"})),a+=m,o+=m+h}else"D"!==h&&"N"!==h||(n||(n=[]),n.push({start:p,len:l,type:h}),o+=l+h);break;case"H":case"P":o+=l+h}}}catch(e){c.e(e)}finally{c.f()}}var b=e.readLength-a;b>0&&(i.push(new Cx({start:e.alignmentStart+e.lengthOnRef-b-1,seqOffset:a,len:b,type:"M"})),o+=b+"M"),t.blocks=i,t.insertions=r,t.gaps=n,t.cigar=o},m=function(e,t){var r=new wx;if(r.chr=t[e.sequenceId],r.start=e.alignmentStart-1,r.lengthOnRef=e.lengthOnRef,r.flags=e.flags,r.strand=!(16&e.flags),r.fragmentLength=e.templateLength||e.templateSize,r.mq=e.mappingQuality,r.end=e.alignmentStart+e.lengthOnRef,r.readGroupId=e.readGroupId,e.mate&&void 0!==e.mate.sequenceId){var n=void 0!==e.mate.flags?!(1&e.mate.flags):!(32&e.flags);r.mate={chr:t[e.mate.sequenceId],position:e.mate.alignmentStart,strand:n}}return r.seq=e.getReadBases(),r.qual=e.qualityScores,r.tagDict=e.tags,r.readName=e.readName,b(e,r),r.mate&&r.start>r.mate.position&&r.fragmentLength>0&&(r.fragmentLength=-r.fragmentLength),Ix.setPairOrientation(r),r},this.browser,e.next=5,this.getHeader();case 5:if(i=e.sent,a=i.chrAliasTable.hasOwnProperty(t)?i.chrAliasTable[t]:t,o=i.chrToIndex[a],s=new px(t,r,n,this.samplingWindowSize,this.samplingDepth,this.pairsSupported,this.alleleFreqThreshold),void 0!==o){e.next=13;break}return e.abrupt("return",s);case 13:return e.prev=13,e.next=16,this.indexedCramFile.getRecordsForRange(o,r,n);case 16:c=e.sent,u=Nr(c),e.prev=18,u.s();case 20:if((h=u.n()).done){e.next=41;break}if(l=h.value,f=l.sequenceId,p=l.alignmentStart,d=p+l.lengthOnRef,!(f<0)){e.next=29;break}return e.abrupt("continue",39);case 29:if(!(f>o||p>n)){e.next=33;break}return e.abrupt("return");case 33:if(!(f<o)){e.next=35;break}return e.abrupt("continue",39);case 35:if(!(d<r)){e.next=37;break}return e.abrupt("continue",39);case 37:g=m(l,i.chrNames),s.push(g);case 39:e.next=20;break;case 41:e.next=46;break;case 43:e.prev=43,e.t0=e.catch(18),u.e(e.t0);case 46:return e.prev=46,u.f(),e.finish(46);case 49:return s.finish(),e.abrupt("return",s);case 53:throw e.prev=53,e.t1=e.catch(13),(v=e.t1.message)&&v.indexOf("MD5")>=0&&(v="Sequence mismatch. Is this the correct genome for the loaded CRAM?"),nn.presentAlert(new Error(v)),e.t1;case 59:case"end":return e.stop()}}),e,this,[[13,53],[18,43,46,49]])}))),function(e,r,n){return t.apply(this,arguments)})}]),e}(),lS=function(){function e(t,r){var n=this;mr(this,e),this.position=0,this.url=t,this.config=r,this.cache=new fS({fetch:function(e,t){return n._fetch(e,t)}})}var t,r,n,i;return yr(e,[{key:"_fetch",value:(i=vr(regeneratorRuntime.mark((function e(t,r){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={start:t,size:r},this._stat={size:void 0},e.next=4,Lm.loadArrayBuffer(this.url,km(this.config,{range:n}));case 4:return i=e.sent,e.abrupt("return",Buffer.from(i));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"read",value:(n=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:0,n=a.length>2&&void 0!==a[2]?a[2]:1/0,null===(i=a.length>3&&void 0!==a[3]?a[3]:0)&&(this.position,this.position+=n),e.abrupt("return",this.cache.get(t,r,n,i));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"readFile",value:(r=vr(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lm.loadArrayBuffer(this.url,km(this.config));case 2:return t=e.sent,e.abrupt("return",Buffer.from(t));case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"stat",value:(t=vr(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._stat){e.next=6;break}return t=Buffer.allocUnsafe(10),e.next=4,this.read(t,0,10,0);case 4:if(this._stat){e.next=6;break}throw new Error("unable to determine size of file at ".concat(this.url));case 6:return e.abrupt("return",this._stat);case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),fS=function(){function e(t){var r=t.fetch,n=t.size,i=void 0===n?1e7:n,a=t.chunkSize,o=void 0===a?32768:a;mr(this,e),this.fetch=r,this.chunkSize=o,this.lruCache=new pS({maxSize:Math.floor(i/o)})}return yr(e,[{key:"get",value:function(){var e=vr(regeneratorRuntime.mark((function e(t,r,n,i){var a,o,s,c,u,h,l,f=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length<r+n)){e.next=2;break}throw new Error("output buffer not big enough for request");case 2:for(a=Math.floor(i/this.chunkSize),o=Math.floor((i+n)/this.chunkSize),s=new Array(o-a+1),c=function(e){s[e-a]=f._getChunk(e).then((function(t){return{data:t,chunkNumber:e}}))},u=a;u<=o;u+=1)c(u);return e.next=9,Promise.all(s);case 9:h=e.sent,l=i-h[0].chunkNumber*this.chunkSize,h.forEach((function(e){var s=e.data,c=e.chunkNumber,u=c*f.chunkSize,h=0,p=f.chunkSize,d=r+(c-a)*f.chunkSize-l;c===a&&(d=r,h=l),c===o&&(p=i+n-u),s.copy(t,d,h,p)}));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"_getChunk",value:function(e){var t=this.lruCache.get(e);if(t)return t;var r=this.fetch(e*this.chunkSize,this.chunkSize);return this.lruCache.set(e,r),r}}]),e}(),pS=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(mr(this,e),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=t.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}return yr(e,[{key:"_set",value:function(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}},{key:"get",value:function(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){var t=this.oldCache.get(e);return this._set(e,t),t}}},{key:"set",value:function(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}},{key:"has",value:function(e){return this.cache.has(e)||this.oldCache.has(e)}},{key:"peek",value:function(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}},{key:"delete",value:function(e){var t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}},{key:"clear",value:function(){this.cache.clear(),this.oldCache.clear(),this._size=0}},{key:"keys",value:regeneratorRuntime.mark((function e(){var t,r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Nr(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=Ir(r.value,1),i=n[0],e.next=7,i;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"values",value:regeneratorRuntime.mark((function e(){var t,r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Nr(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=Ir(r.value,2),i=n[1],e.next=7,i;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:Symbol.iterator,value:regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Nr(this.cache),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=r.value,e.next=7,n;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:i=Nr(this.oldCache),e.prev=18,i.s();case 20:if((a=i.n()).done){e.next=28;break}if(o=a.value,s=Ir(o,1),c=s[0],this.cache.has(c)){e.next=26;break}return e.next=26,o;case 26:e.next=20;break;case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(18),i.e(e.t1);case 33:return e.prev=33,i.f(),e.finish(33);case 36:case"end":return e.stop()}}),e,this,[[1,11,14,17],[18,30,33,36]])}))},{key:"size",get:function(){var e,t=0,r=Nr(this.oldCache.keys());try{for(r.s();!(e=r.n()).done;){var n=e.value;this.cache.has(n)||t++}}catch(e){r.e(e)}finally{r.f()}return this._size+t}}]),e}(),dS={ALIGNMENT_MATCH:"M",INSERT:"I",DELETE:"D",SKIP:"N",CLIP_SOFT:"S",CLIP_HARD:"H",PAD:"P",SEQUENCE_MATCH:"=",SEQUENCE_MISMATCH:"X"},gS=function(e,t){this.config=e,this.genome=t,this.url=e.url,this.filter=new Rx(e.filter),this.readGroupSetIds=e.readGroupSetIds,this.authKey=e.authKey,this.samplingWindowSize=void 0===e.samplingWindowSize?100:e.samplingWindowSize,this.samplingDepth=void 0===e.samplingDepth?1e3:e.samplingDepth,e.viewAsPairs?this.pairsSupported=!0:this.pairsSupported=void 0===e.pairsSupported||e.pairsSupported};gS.prototype.readAlignments=function(e,t,r){var n=this.genome,i=this;return(i.chrAliasTable?Promise.resolve(i.chrAliasTable):i.readMetadata().then((function(e){if(i.chrAliasTable={},n&&e.readGroups&&e.readGroups.length>0){var t=e.readGroups[0].referenceSetId;return t?Xw({url:i.url+"/references/search",body:{referenceSetId:t},decode:function(e){return e.references}}).then((function(e){return e.forEach((function(e){var t=e.name,r=n.getChromosomeName(t);i.chrAliasTable[r]=t})),i.chrAliasTable})):(function(e,t){var r;if("461916304629"===t||"337315832689"===t){for(r=1;r<23;r++)e["chr"+r]=r;e.chrX="X",e.chrY="Y",e.chrM="MT"}}(i.chrAliasTable,i.config.datasetId),i.chrAliasTable)}return i.chrAliasTable}))).then((function(n){var o=n.hasOwnProperty(e)?n[e]:e;return Xw({url:i.url+"/reads/search",body:{readGroupSetIds:[i.readGroupSetIds],referenceName:o,start:t,end:r,pageSize:"10000"},decode:a,results:new px(e,t,r,i.samplingWindowSize,i.samplingDepth,i.pairsSupported,i.alleleFreqThreshold)})}));function a(e){var t,r,a,o,s,c=e.alignments,u=c.length,h=[];for(t=0;t<u;t++){var l=c[t];(r=new wx).readName=l.fragmentName,r.properPlacement=l.properPlacement,r.duplicateFragment=l.duplicateFragment,r.numberReads=l.numberReads,r.fragmentLength=l.fragmentLength,r.readNumber=l.readNumber,r.failedVendorQualityChecks=l.failedVendorQualityChecks,r.secondaryAlignment=l.secondaryAlignment,r.supplementaryAlignment=l.supplementaryAlignment,r.seq=l.alignedSequence,r.qual=l.alignedQuality,r.matePos=l.nextMatePosition,r.tagDict=l.info,r.flags=0,l.alignment?(r.mapped=!0,r.chr=l.alignment.position.referenceName,n&&(r.chr=n.getChromosomeName(r.chr)),r.start=parseInt(l.alignment.position.position),r.strand=!l.alignment.position.reverseStrand,r.mq=l.alignment.mappingQuality,r.cigar=f(l.alignment.cigar),a=p(l.alignment.cigar),r.lengthOnRef=a.lengthOnRef,s=d(r,a.array),r.blocks=s.blocks,r.insertions=s.insertions):r.mapped=!1,(o=l.nextMatePosition)&&(r.mate={chr:o.referenceFrame,position:parseInt(o.position),strand:!o.reverseStrand}),i.filter.pass(r)&&h.push(r)}return h;function f(e){var t="";return e.forEach((function(e){var r=dS[e.operation],n=e.operationLength;t+=n+r})),t}function p(e){var t,r,n,i,a=0,o=[];for(i=0;i<e.length;i++)t=e[i],n=dS[t.operation],r=parseInt(t.operationLength),"M"!==n&&"EQ"!==n&&"X"!==n&&"D"!==n&&"N"!==n&&"="!==n||(a+=r),o.push({len:r,ltr:n});return{lengthOnRef:a,array:o}}function d(e,t){for(var r,n,i,a=[],o=0,s=e.start,c=t.length,u=0;u<c;u++){var h=t[u];switch(h.ltr){case"H":case"P":break;case"S":o+=h.len,i="S";break;case"N":case"D":void 0===r&&(r=[]),r.push({start:s,len:h.len,type:h.ltr}),s+=h.len;break;case"I":void 0===n&&(n=[]),n.push(new Cx({start:s,len:h.len,seqOffset:o})),o+=h.len;break;case"M":case"EQ":case"=":case"X":a.push(new Cx({start:s,len:h.len,seqOffset:o,gapType:i})),o+=h.len,s+=h.len}}return{blocks:a,insertions:n,gaps:r}}}},gS.prototype.readMetadata=function(){return Yw({url:this.url,entity:"readgroupsets",entityId:this.readGroupSetIds})};var vS=Sn,mS=function(){function e(t,r){mr(this,e);var n=r.genome;if(this.config=t,this.genome=n,this.alignmentContainer=void 0,vS(t.url)&&t.url.startsWith("data:")){if("cram"===t.format)throw"CRAM data uris are not supported";this.config.indexed=!1}"ga4gh"===t.sourceType?this.bamReader=new gS(t,n):"pysam"===t.sourceType?this.bamReader=new Ux(t,n):"htsget"===t.sourceType?this.bamReader=new jx(t,n):"shardedBam"===t.sourceType?this.bamReader=new zx(t,n):"cram"===t.format?this.bamReader=new hS(t,n,r):!1===this.config.indexed?this.bamReader=new Bx(t,n):this.bamReader=new Px(t,n),this.viewAsPairs=t.viewAsPairs,this.showSoftClips=t.showSoftClips}var t;return yr(e,[{key:"setViewAsPairs",value:function(e){this.viewAsPairs!==e&&(this.viewAsPairs=e)}},{key:"setShowSoftClips",value:function(e){this.showSoftClips!==e&&(this.showSoftClips=e)}},{key:"getAlignments",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a,o,s,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.genome,a=this.showSoftClips,!this.alignmentContainer||!this.alignmentContainer.contains(t,r,n)){e.next=6;break}return e.abrupt("return",this.alignmentContainer);case 6:return e.next=8,this.bamReader.readAlignments(t,r,n);case 8:if(o=e.sent,s=o.alignments,this.viewAsPairs||(s=lx([{alignments:s}])),c=s.length>0,o.packedAlignmentRows=fx(s,o.start,o.end,a),o.alignments=void 0,this.alignmentContainer=o,!c){e.next=26;break}return e.next=18,i.sequence.getSequence(t,o.start,o.end);case 18:if(!(u=e.sent)){e.next=25;break}return o.coverageMap.refSeq=u,o.sequence=u,e.abrupt("return",o);case 25:console.error("No sequence for: "+t+":"+o.start+"-"+o.end);case 26:return e.abrupt("return",o);case 27:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})}]),e}(),bS="rgb(185, 185, 185)",yS=function(e){wr(n,e);var t,r=Ar(n);function n(e,t){var i;return mr(this,n),(i=r.call(this,e,t)).type="alignment",void 0===e.alleleFreqThreshold&&(e.alleleFreqThreshold=.2),i.featureSource=new mS(e,t),i.showCoverage=void 0===e.showCoverage||e.showCoverage,i.showAlignments=void 0===e.showAlignments||e.showAlignments,i.coverageTrack=new wS(e,Rr(i)),i.alignmentTrack=new kS(e,Rr(i)),i.alignmentTrack.setTop(i.coverageTrack,i.showCoverage),i.visibilityWindow=e.visibilityWindow||3e4,i.viewAsPairs=e.viewAsPairs,i.pairsSupported=!1!==e.pairsSupported,i.showSoftClips=e.showSoftClips,i.showAllBases=e.showAllBases,i.showMismatches=!1!==e.showMismatches,i.color=e.color||bS,i.coverageColor=e.coverageColor||"rgb(150, 150, 150)",i.minFragmentLength=e.minFragmentLength,i.maxFragmentLength=e.maxFragmentLength,e.sort&&(Array.isArray(e.sort)?i.assignSort(e.sort[0]):i.assignSort(e.sort)),i.height=void 0!==e.height?e.height:300,i}return yr(n,[{key:"sort",value:function(e){e=this.assignSort(e);var t,r=Nr(this.trackView.viewports);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.containsPosition(e.chr,e.position)){var i=n.getCachedFeatures();i&&(xS(e,i),n.repaint())}}}catch(e){r.e(e)}finally{r.f()}}},{key:"assignSort",value:function(e){if(e.locus){var t=function(e){const t=e.split(":"),r=t[1].split("-"),n={chr:t[0],start:Number.parseInt(r[0].replace(/,/g,""))-1};return r.length>1?n.end=Number.parseInt(r[1].replace(/,/g,"")):n.end=n.start+1,n}(e.locus);e.chr=t.chr,e.position=t.start}else e.position--;return e.direction="ASC"===e.direction||!0===e.direction,e.chr=this.browser.genome.getChromosomeName(e.chr),this.sortObject=e,this.sortObject}},{key:"getFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n,i,a){var o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.featureSource.getAlignments(t,r,n);case 2:return(o=e.sent).alignments&&o.alignments.length>99&&(void 0===this.minFragmentLength&&(this.minFragmentLength=o.pairedEndStats.lowerFragmentLength),void 0===this.maxFragmentLength&&(this.maxFragmentLength=o.pairedEndStats.upperFragmentLength)),(s=this.sortObject)&&s.chr===t&&s.position>=r&&s.position<=n&&xS(s,o),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e,this)}))),function(e,r,n,i,a){return t.apply(this,arguments)})},{key:"computePixelHeight",value:function(e){return(this.showCoverage?this.coverageTrack.height:0)+(this.showAlignments?this.alignmentTrack.computePixelHeight(e):0)+15}},{key:"draw",value:function(e){Jp.fillRect(e.context,0,e.pixelTop,e.pixelWidth,e.pixelHeight,{fillStyle:"rgb(255, 255, 255)"}),!0===this.showCoverage&&this.coverageTrack.height>0?(this.trackView.controlCanvas.style.display="block",this.coverageTrack.draw(e)):this.trackView.controlCanvas.style.display="none",!0===this.showAlignments&&(this.alignmentTrack.setTop(this.coverageTrack,this.showCoverage),this.alignmentTrack.draw(e))}},{key:"paintAxis",value:function(e,t,r){this.browser.isMultiLocusMode()?e.clearRect(0,0,t,r):this.coverageTrack.paintAxis(e,t,this.coverageTrack.height)}},{key:"contextMenuItemList",value:function(e){return this.alignmentTrack.contextMenuItemList(e)}},{key:"popupData",value:function(e){return!0===this.showCoverage&&e.y>=this.coverageTrack.top&&e.y<this.coverageTrack.height?this.coverageTrack.popupData(e):this.alignmentTrack.popupData(e)}},{key:"menuItemList",value:function(){var e=this,t=["<hr/>"];t=t.concat(mb.numericDataMenuItems(this.trackView));var r=Su('<div class="igv-track-menu-category igv-track-menu-border-top">');r.text("Color by"),t.push({name:void 0,object:r,click:void 0,init:void 0});var n=[{key:"strand",label:"read strand"}];this.alignmentTrack.hasPairs&&(n.push({key:"firstOfPairStrand",label:"first-of-pair strand"}),n.push({key:"pairOrientation",label:"pair orientation"}),n.push({key:"fragmentLength",label:"insert size (TLEN)"}));var i="tag"+(this.alignmentTrack.colorByTag?" ("+this.alignmentTrack.colorByTag+")":"");n.push({key:"tag",label:i});for(var a=0,o=n;a<o.length;a++){var s=o[a],c=this.alignmentTrack.colorBy===s.key;t.push(this.colorByCB(s,c))}var u=function(){if(!e.autoHeight){var t=15+(e.showCoverage?e.coverageTrack.height:0)+(e.showAlignments?e.alignmentTrack.height:0);e.trackView.setTrackHeight(t)}};t.push({object:Su('<div class="igv-track-menu-border-top">')}),t.push({object:pb("Show Coverage",this.showCoverage),click:function(){e.showCoverage=!e.showCoverage,u(),e.trackView.checkContentHeight(),e.trackView.repaintViews()}}),t.push({object:pb("Show Alignments",this.showAlignments),click:function(){e.showAlignments=!e.showAlignments,u(),e.trackView.checkContentHeight(),e.trackView.repaintViews()}}),t.push({object:Su('<div class="igv-track-menu-border-top">')}),t.push({object:pb("Show all bases",this.showAllBases),click:function(){e.showAllBases=!e.showAllBases,e.config.showAllBases=e.showAllBases,e.trackView.repaintViews()}}),t.push({object:Su('<div class="igv-track-menu-border-top">')}),this.pairsSupported&&this.alignmentTrack.hasPairs&&t.push({object:pb("View as pairs",this.viewAsPairs),click:function(){e.viewAsPairs=!e.viewAsPairs,e.config.viewAsPairs=e.viewAsPairs,e.featureSource.setViewAsPairs(e.viewAsPairs);var t,r=Nr(e.getCachedAlignmentContainers());try{for(r.s();!(t=r.n()).done;){t.value.setViewAsPairs(e.viewAsPairs)}}catch(e){r.e(e)}finally{r.f()}e.trackView.repaintViews()}}),t.push({object:pb("Show soft clips",this.showSoftClips),click:function(){e.showSoftClips=!e.showSoftClips,e.config.showSoftClips=e.showSoftClips,e.featureSource.setShowSoftClips(e.showSoftClips);var t,r=Nr(e.getCachedAlignmentContainers());try{for(r.s();!(t=r.n()).done;){t.value.setShowSoftClips(e.showSoftClips)}}catch(e){r.e(e)}finally{r.f()}e.trackView.repaintViews()}});var h=Su('<div class="igv-track-menu-category igv-track-menu-border-top">');return h.text("Display mode"),t.push({name:void 0,object:h,click:void 0,init:void 0}),t.push({object:pb("expand","EXPANDED"===this.alignmentTrack.displayMode),click:function(){e.alignmentTrack.displayMode="EXPANDED",e.config.displayMode="EXPANDED",e.trackView.checkContentHeight(),e.trackView.repaintViews()}}),t.push({object:pb("squish","SQUISHED"===this.alignmentTrack.displayMode),click:function(){e.alignmentTrack.displayMode="SQUISHED",e.config.displayMode="SQUISHED",e.trackView.checkContentHeight(),e.trackView.repaintViews()}}),t}},{key:"colorByCB",value:function(e,t){var r=this;return{name:void 0,object:pb(e.label,t),click:function(t){e.key===r.alignmentTrack.colorBy?(r.alignmentTrack.colorBy="none",r.config.colorBy="none",r.trackView.repaintViews()):"tag"===e.key?r.browser.inputDialog.present({label:"Tag Name",value:r.alignmentTrack.colorByTag?r.alignmentTrack.colorByTag:"",callback:function(e){r.alignmentTrack.colorBy="tag",r.config.colorBy="tag",e!==r.alignmentTrack.colorByTag&&(r.alignmentTrack.colorByTag=e,r.config.colorByTag=e,r.alignmentTrack.tagColors=new Lk("Set1"),Su("#color-by-tag").text(self.alignmentTrack.colorByTag)),r.trackView.repaintViews()}},t):(r.alignmentTrack.colorBy=e.key,r.config.colorBy=e.key,r.trackView.repaintViews())},init:void 0}}},{key:"dispose",value:function(){this.trackView=void 0}},{key:"getState",value:function(){var e=Tr(kr(n.prototype),"getState",this).call(this);return this.sortObject&&(e.sort={chr:this.sortObject.chr,position:this.sortObject.position+1,option:this.sortObject.option,direction:this.sortObject.direction?"ASC":"DESC"}),e}},{key:"getCachedAlignmentContainers",value:function(){return this.trackView.viewports.map((function(e){return e.getCachedFeatures()}))}},{key:"height",set:function(e){this._height=e,this.coverageTrack&&this.showAlignments&&(this.alignmentTrack.height=this.showCoverage?e-this.coverageTrack.height:e)},get:function(){return this._height}},{key:"dataRange",get:function(){return this.coverageTrack.dataRange},set:function(e){this.coverageTrack.dataRange=e}},{key:"logScale",get:function(){return this.coverageTrack.logScale},set:function(e){this.coverageTrack.logScale=e}},{key:"autoscale",get:function(){return this.coverageTrack.autoscale},set:function(e){this.coverageTrack.autoscale=e}}]),n}(Oy),wS=function(){function e(t,r){mr(this,e),this.parent=r,this.featureSource=r.featureSource,this.height=void 0!==t.coverageTrackHeight?t.coverageTrackHeight:50,this.paintAxis=Jk,this.top=0,this.autoscale=t.autoscale||void 0===t.max,this.autoscale||(this.dataRange={min:t.min||0,max:t.max})}return yr(e,[{key:"draw",value:function(e){var t=e.pixelTop,r=(e.pixelHeight,this.parent.browser.nucleotideColors);if(!(t>this.height)){var n,i=e.context,a=e.features.coverageMap;a.refSeq&&(n=a.refSeq.toUpperCase());var o=e.bpPerPixel,s=e.bpStart,c=s+e.pixelWidth*o+1,u=this.parent.coverageColor;this.parent.color!==bS&&(u=ei.darkenLighten(this.parent.color,-35)),Jp.setProperties(i,{fillStyle:u,strokeStyle:u});for(var h=Math.max(1,Math.ceil(1/o)),l=0,f=a.coverage.length;l<f;l++){var p=a.bpStart+l;if(!(p<s)){if(p>c)break;var d=a.coverage[l];if(d){var g=Math.round(d.total/this.dataRange.max*this.height),v=this.height-g,m=Math.floor((p-s)/o);Jp.fillRect(i,m,v,h,g)}}}if(n)for(var b=0,y=a.coverage.length;b<y;b++){var w=a.bpStart+b;if(!(w<s)){if(w>c)break;var k=a.coverage[b];if(k){var x=k.total/this.dataRange.max*this.height,S=this.height-x,_=Math.floor((w-s)/o),C=n[b];if(k.isMismatch(C)){Jp.setProperties(i,{fillStyle:r[C]}),Jp.fillRect(i,_,S,h,x);for(var R=0,E=0,A=["A","C","T","G"];E<A.length;E++){var T=A[E],I=(k["pos"+T]+k["neg"+T])/this.dataRange.max*this.height;S=this.height-I-R,R+=I,Jp.setProperties(i,{fillStyle:r[T]}),Jp.fillRect(i,_,S,h,I)}}}}}}}},{key:"popupData",value:function(e){var t=e.viewport.getCachedFeatures();if(t&&0!==t.length){var r=Math.floor(e.genomicLocation),n=e.viewport.referenceFrame,i=t.coverageMap,a=[],o=Math.floor(r-i.bpStart),s=i.coverage[o];if(s){a.push(n.chr+":"+_n(1+r)),a.push({name:"Total Count",value:s.total});var c=s.posA+s.negA;c>0&&(c=c.toString()+" ("+Math.round(c/s.total*100)+"%, "+s.posA+"+, "+s.negA+"- )"),a.push({name:"A",value:c}),(c=s.posC+s.negC)>0&&(c=c.toString()+" ("+Math.round(c/s.total*100)+"%, "+s.posC+"+, "+s.negC+"- )"),a.push({name:"C",value:c}),(c=s.posG+s.negG)>0&&(c=c.toString()+" ("+Math.round(c/s.total*100)+"%, "+s.posG+"+, "+s.negG+"- )"),a.push({name:"G",value:c}),(c=s.posT+s.negT)>0&&(c=c.toString()+" ("+Math.round(c/s.total*100)+"%, "+s.posT+"+, "+s.negT+"- )"),a.push({name:"T",value:c}),(c=s.posN+s.negN)>0&&(c=c.toString()+" ("+Math.round(c/s.total*100)+"%, "+s.posN+"+, "+s.negN+"- )"),a.push({name:"N",value:c}),a.push("<HR/>"),a.push({name:"DEL",value:s.del.toString()}),a.push({name:"INS",value:s.ins.toString()})}return a}}}]),e}(),kS=function(){function e(t,r){mr(this,e),this.parent=r,this.browser=r.browser,this.featureSource=r.featureSource,this.top=0===t.coverageTrackHeight?0:t.coverageTrackHeight+5,this.displayMode=t.displayMode||"EXPANDED",this.alignmentRowHeight=t.alignmentRowHeight||14,this.squishedRowHeight=t.squishedRowHeight||3,this.negStrandColor=t.negStrandColor||"rgba(150, 150, 230, 0.75)",this.posStrandColor=t.posStrandColor||"rgba(230, 150, 150, 0.75)",this.insertionColor=t.insertionColor||"rgb(138, 94, 161)",this.deletionColor=t.deletionColor||"black",this.skippedColor=t.skippedColor||"rgb(150, 170, 170)",this.pairConnectorColor=t.pairConnectorColor,this.smallFragmentLengthColor=t.smallFragmentLengthColor||"rgb(0, 0, 150)",this.largeFragmentLengthColor=t.largeFragmentLengthColor||"rgb(200, 0, 0)",this.pairOrientation=t.pairOrienation||"fr",this.pairColors={},this.pairColors.RL=t.rlColor||"rgb(0, 150, 0)",this.pairColors.RR=t.rrColor||"rgb(20, 50, 200)",this.pairColors.LL=t.llColor||"rgb(0, 150, 150)",this.colorBy=t.colorBy||"pairOrientation",this.colorByTag=t.colorByTag?t.colorByTag.toUpperCase():void 0,this.bamColorTag=void 0===t.bamColorTag?"YC":t.bamColorTag,this.hideSmallIndels=t.hideSmallIndels,this.indelSizeThreshold=t.indelSizeThreshold||1,this.hasPairs=!1}return yr(e,[{key:"setTop",value:function(e,t){this.top=0===e.height||!1===t?0:5+e.height}},{key:"computePixelHeight",value:function(e){return e.packedAlignmentRows?(e.hasDownsampledIntervals()?10:0)+("SQUISHED"===this.displayMode?this.squishedRowHeight:this.alignmentRowHeight)*e.packedAlignmentRows.length+5:0}},{key:"draw",value:function(e){var t=e.features,r=e.context,n=e.bpPerPixel,i=e.bpStart,a=e.pixelWidth,o=i+a*n+1,s=t.packedAlignmentRows,c=this.parent.showSoftClips,u=this.parent.showAllBases,h=this.browser.nucleotideColors,l=t.sequence;l&&(l=l.toUpperCase());var f=0,p=e.pixelTop;r.save(),this.top&&r.translate(0,this.top);var d=p+e.pixelHeight;t.hasDownsampledIntervals()?(f=10,t.downsampledIntervals.forEach((function(e){var t=(e.start-i)/n,a=(e.end-i)/n;a-t>5&&(t+=1,a-=1),Jp.fillRect(r,t,2,a-t,3,{fillStyle:"black"})}))):f=0,this.alignmentsYOffset=f;var g="SQUISHED"===this.displayMode?this.squishedRowHeight:this.alignmentRowHeight;if(s)for(var v=s.length,m=0;m<v;m++){var b=s[m],y=f+g*m,w=g<=4?g:g-2;if(y>d)break;if(!(y+w<p)){var k,x=Nr(b.alignments);try{for(x.s();!(k=x.n()).done;){var S=k.value;if(this.hasPairs=this.hasPairs||S.isPaired(),!(S.start+S.lengthOnRef<i)){if(S.start>o)break;!0!==S.hidden&&(S instanceof ox?(_.call(this,S,y,w),C.call(this,S.firstAlignment,y,w),S.secondAlignment&&C.call(this,S.secondAlignment,y,w)):C.call(this,S,y,w))}}}catch(e){x.e(e)}finally{x.f()}}}function _(e,t,a){var s=this.getConnectorColor(e.firstAlignment),c=(e.connectingStart-i)/n,u=(e.connectingEnd-i)/n,h=t+a/2;e.connectingEnd<i||e.connectingStart>o||(e.mq<=0&&(s=ei.addAlpha(s,.15)),Jp.setProperties(r,{fillStyle:s,strokeStyle:s}),Jp.strokeLine(r,c,h,u,h))}function C(e,a,s){if(!(e.start+e.lengthOnRef<i||e.start>o)){var f=c?e.blocks:e.blocks.filter((function(e){return"S"!==e.type})),p=this.getAlignmentColor(e),d=p;e.mq<=0&&(p=ei.addAlpha(p,.15)),Jp.setProperties(r,{fillStyle:p,strokeStyle:d});for(var v=0;v<f.length;v++){var m=f[v];if(!(v!==f.length-1&&f[v+1].start<i)&&(I.call(this,m,v),m.start+m.len>o))break}if(e.insertions){var b,y=-1,w=Nr(e.insertions);try{for(w.s();!(b=w.n()).done;){var k=b.value;if(!(this.hideSmallIndels&&k.len<=this.indelSizeThreshold)&&!(k.start<i)){if(k.start>o)break;var x=(k.start-i)/n-1;if(x-y>2){Jp.fillRect(r,x,a-1,3,s+2,{fillStyle:this.insertionColor}),y=x}}}}catch(e){w.e(e)}finally{w.f()}}if(e.gaps){var S,_=a+s/2,C=Nr(e.gaps);try{for(C.s();!(S=C.n()).done;){var R=S.value,E=(R.start-i)/n,A=(R.start+R.len-i)/n,T="D"===R.type?this.deletionColor:this.skippedColor;Jp.strokeLine(r,E,_,A,_,{strokeStyle:T})}}catch(e){C.e(e)}finally{C.f()}}}function I(o,c){var v=o.start-t.start,m=(o.start-i)/n,b=(o.start+o.len-i)/n,y=Math.max(1,b-m),w=g/2,k="S"===o.type,x=e.mq<=0||this.highlightedAlignmentReadNamed===e.readName||k,S=d;this.highlightedAlignmentReadNamed===e.readName?S="red":k&&(S="rgb(50,50,50)");var _,C,R=!0===e.strand&&c===f.length-1,E=!1===e.strand&&0===c;R|E?(R?(_=[m,b,b+w,b,m,m],C=[a,a,a+s/2,a+s,a+s,a]):E&&(_=[b,m,m-w,m,b,b],C=[a,a,a+s/2,a+s,a+s,a]),Jp.fillPolygon(r,_,C,{fillStyle:p}),x&&Jp.strokePolygon(r,_,C,{strokeStyle:S})):(Jp.fillRect(r,m,a,y,s,{fillStyle:p}),x&&(r.save(),r.strokeStyle=S,r.strokeRect(m,a,y,s),r.restore()));if(this.parent.showMismatches&&(k||u||l&&e.seq&&"*"!==e.seq))for(var A=e.seq?e.seq.toUpperCase():void 0,T=e.qual,I=o.seqOffset,M=0,F=o.len;M<F;M++)if(!(v+M<0)){var D=A?A.charAt(I+M):"",O=l.charAt(v+M);if("="===D&&(D=O),"X"===D||O!==D||k||u){var B=void 0;if(!k&&void 0!==T&&T.length>I+M)B=SS(T[I+M],h[D]);else B=h[D];if(B){var N=(o.start+M-i)/n,P=Math.max(1,1/n);L(r,n,{x:N,y:a,width:P,height:s},B,D)}}}}function L(e,t,r,n,i){var a;if(.1,t<=.1&&r.height>=8){var o=Math.min(10,r.height);e.font=o+"px sans-serif",a=r.x+r.width/2,Jp.strokeText(e,i,a-e.measureText(i).width/2,o-1+r.y,{strokeStyle:n})}else Jp.fillRect(e,r.x,r.y,r.width,r.height,{fillStyle:n})}}r.restore()}},{key:"popupData",value:function(e){var t=this.getClickedObject(e.viewport,e.y,e.genomicLocation);return t?t.popupData(e.genomicLocation):void 0}},{key:"contextMenuItemList",value:function(e){var t=this,r=e.viewport,n=this.parent.showSoftClips,i=this.getClickedObject(r,e.y,e.genomicLocation),a=i&&"function"==typeof i.alignmentContaining?i.alignmentContaining(e.genomicLocation,n):i,o=(a&&i.isPaired,[]),s=function(n){var i=t.parent.sortObject,a=!i||i.position!==Math.floor(e.genomicLocation)||!i.direction,o={chr:r.referenceFrame.chr,position:Math.floor(e.genomicLocation),sortOption:n,direction:a};t.parent.sortObject=o,xS(o,r.getCachedFeatures()),r.repaint()};return o.push("<b>Sort by...</b>"),o.push({label:"&nbsp; base",click:function(){return s("BASE")}}),o.push({label:"&nbsp; read strand",click:function(){return s("STRAND")}}),o.push({label:"&nbsp; insert size",click:function(){return s("INSERT_SIZE")}}),o.push({label:"&nbsp; gap size",click:function(){return s("GAP_SIZE")}}),o.push({label:"&nbsp; chromosome of mate",click:function(){return s("MATE_CHR")}}),o.push({label:"&nbsp; mapping quality",click:function(){return s("MQ")}}),o.push({label:"&nbsp; tag",click:function(){var n=t.parent.sortObject,i=!n||n.position!==Math.floor(e.genomicLocation)||!n.direction,a={label:"Tag Name",value:t.sortByTag?t.sortByTag:"",callback:function(n){if(n){var a={chr:r.referenceFrame.chr,position:Math.floor(e.genomicLocation),sortOption:"TAG",tag:n,direction:i};t.sortByTag=n,t.parent.sortObject=a,xS(a,r.getCachedFeatures()),r.repaint()}}};t.browser.inputDialog.present(a,e.event)}}),o.push("<hr/>"),a.isPaired()&&a.isMateMapped()&&o.push({label:"View mate in split screen",click:function(){a.mate&&(t.highlightedAlignmentReadNamed=a.readName,t.browser.presentSplitScreenMultiLocusPanel(a,e.viewport.referenceFrame))},init:void 0}),o.push({label:"View read sequence",click:function(){if(a){var e=a.seq;e&&"*"!==e?nn.presentAlert(e):nn.presentAlert("Read sequence: *")}}}),o.push("<hr/>"),o}},{key:"getClickedObject",value:function(e,t,r){var n=this.parent.showSoftClips,i=e.getCachedFeatures();if(i&&0!==i.length){var a=i.packedAlignmentRows,o=i.downsampledIntervals,s="SQUISHED"===this.displayMode?this.squishedRowHeight:this.alignmentRowHeight,c=Math.floor((t-this.top-this.alignmentsYOffset)/s);if(c<0){for(var u=0;u<o.length;u++)if(o[u].start<=r&&o[u].end>=r)return o[u]}else if(c<a.length){var h=a[c].alignments.filter((function(e){return e.containsLocation(r,n)}));if(h.length>0)return h[0]}}}},{key:"getConnectorColor",value:function(e){if(this.pairConnectorColor)return this.pairConnectorColor;switch(this.colorBy){case"strand":case"firstOfPairStrand":case"pairOrientation":case"tag":return this.parent.color||"rgb(200, 200, 200)";default:return this.getAlignmentColor(e)}}},{key:"getAlignmentColor",value:function(e){var t=this.parent.color;switch(this.colorBy){case"strand":t=e.strand?this.posStrandColor:this.negStrandColor;break;case"firstOfPairStrand":e instanceof ox?t=e.firstOfPairStrand()?this.posStrandColor:this.negStrandColor:e.isPaired()&&(e.isFirstOfPair()?t=e.strand?this.posStrandColor:this.negStrandColor:e.isSecondOfPair()?t=e.strand?this.negStrandColor:this.posStrandColor:console.error("ERROR. Paired alignments are either first or second."));break;case"pairOrientation":if(e.mate&&e.isMateMapped()&&e.mate.chr!==e.chr)t=CS(e.mate.chr);else if(this.pairOrientation&&e.pairOrientation){var r=_S[this.pairOrientation];if(r){var n=this.pairColors[r[e.pairOrientation]];n&&(t=n)}}break;case"fragmentLength":e.mate&&e.isMateMapped()&&e.mate.chr!==e.chr?t=CS(e.mate.chr):this.parent.minFragmentLength&&Math.abs(e.fragmentLength)<this.parent.minFragmentLength?t=this.smallFragmentLengthColor:this.parent.maxFragmentLength&&Math.abs(e.fragmentLength)>this.parent.maxFragmentLength&&(t=this.largeFragmentLengthColor);break;case"tag":var i=e.tags()[this.colorByTag];void 0!==i&&(this.bamColorTag===this.colorByTag?t="rgb("+i+")":(this.tagColors||(this.tagColors=new Lk("Set1")),t=this.tagColors.getColor(i)));break;default:t=this.parent.color}return t}}]),e}();function xS(e,t){var r,n=e.direction,i=Nr(t.packedAlignmentRows);try{for(i.s();!(r=i.n()).done;){r.value.updateScore(e,t)}}catch(e){i.e(e)}finally{i.f()}t.packedAlignmentRows.sort((function(e,t){var r=e.score>t.score?1:e.score<t.score?-1:0;return!0===n?r:-r}))}function SS(e,t){var r;return r=e<5?.1:Math.max(.1,Math.min(1,.1+.9*(e-5)/15)),(r=Math.round(10*r)/10)<1&&(t=ei.addAlpha(t,r)),t}var _S={fr:{F1R2:"LR",F2R1:"LR",F1F2:"LL",F2F1:"LL",R1R2:"RR",R2R1:"RR",R1F2:"RL",R2F1:"RL"},rf:{R1F2:"LR",R2F1:"LR",R1R2:"LL",R2R1:"LL",F1F2:"RR",F2F1:"RR",F1R2:"RL",F2R1:"RL"},ff:{F2F1:"LR",R1R2:"LR",F2R1:"LL",R1F2:"LL",R2F1:"RR",F1R2:"RR",R2R1:"RL",F1F2:"RL"}};function CS(e){if(RS[e])return RS[e];if(RS["chr"+e]){var t=RS["chr"+e];return RS[e]=t,t}var r=ei.randomRGB();return RS[e]=r,r}var RS={chrX:"rgb(204, 153, 0)",chrY:"rgb(153, 204, 0",chrUn:"rgb(50, 50, 50)",chr1:"rgb(80, 80, 255)",chrI:"rgb(139, 155, 187)",chr2:"rgb(206, 61, 50)",chrII:"rgb(206, 61, 50)",chr2a:"rgb(216, 71, 60)",chr2b:"rgb(226, 81, 70)",chr3:"rgb(116, 155, 88)",chrIII:"rgb(116, 155, 88)",chr4:"rgb(240, 230, 133)",chrIV:"rgb(240, 230, 133)",chr5:"rgb(70, 105, 131)",chr6:"rgb(186, 99, 56)",chr7:"rgb(93, 177, 221)",chr8:"rgb(128, 34, 104)",chr9:"rgb(107, 215, 107)",chr10:"rgb(213, 149, 167)",chr11:"rgb(146, 72, 34)",chr12:"rgb(131, 123, 141)",chr13:"rgb(199, 81, 39)",chr14:"rgb(213, 143, 92)",chr15:"rgb(122, 101, 165)",chr16:"rgb(228, 175, 105)",chr17:"rgb(59, 27, 83)",chr18:"rgb(205, 222, 183)",chr19:"rgb(97, 42, 121)",chr20:"rgb(174, 31, 99)",chr21:"rgb(231, 199, 111)",chr22:"rgb(90, 101, 94)",chr23:"rgb(204, 153, 0)",chr24:"rgb(153, 204, 0)",chr25:"rgb(51, 204, 0)",chr26:"rgb(0, 204, 51)",chr27:"rgb(0, 204, 153)",chr28:"rgb(0, 153, 204)",chr29:"rgb(10, 71, 255)",chr30:"rgb(71, 117, 255)",chr31:"rgb(255, 194, 10)",chr32:"rgb(255, 209, 71)",chr33:"rgb(153, 0, 51)",chr34:"rgb(153, 26, 0)",chr35:"rgb(153, 102, 0)",chr36:"rgb(128, 153, 0)",chr37:"rgb(51, 153, 0)",chr38:"rgb(0, 153, 26)",chr39:"rgb(0, 153, 102)",chr40:"rgb(0, 128, 153)",chr41:"rgb(0, 51, 153)",chr42:"rgb(26, 0, 153)",chr43:"rgb(102, 0, 153)",chr44:"rgb(153, 0, 128)",chr45:"rgb(214, 0, 71)",chr46:"rgb(255, 20, 99)",chr47:"rgb(0, 214, 143)",chr48:"rgb(20, 255, 177)"},ES=function(e){wr(i,e);var t,r,n=Ar(i);function i(e,t){var r;return mr(this,i),(r=n.call(this,e,t)).theta=e.theta||Math.PI/4,r.sinTheta=Math.sin(r.theta),r.cosTheta=Math.cos(r.theta),r.height=e.height||250,r.arcType=e.arcType||"nested",r.arcOrientation=void 0===e.arcOrientation||e.arcOrientation,r.showBlocks=void 0===e.showBlocks||e.showBlocks,r.blockHeight=e.blockHeight||3,r.thickness=e.thickness||1,r.color=e.color||"rgb(180,25,137)",r.alpha=e.alpha||.15,e.valueColumn?(r.valueColumn=e.valueColumn,r.hasValue=!0):e.useScore&&(r.hasValue=!0,r.valueColumn="score"),r.logScale=!1!==e.logScale,e.max?(r.dataRange={min:e.min||0,max:e.max},r.autoscale=!1):r.autoscale=!0,r.featureSource=Tk(e,t.genome),r.featureSource.getWGFeatures=MS,r}return yr(i,[{key:"postInit",value:(r=vr(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof this.featureSource.getHeader){e.next=4;break}return e.next=3,this.featureSource.getHeader();case 3:this.header=e.sent;case 4:if(this.header&&this.setTrackProperties(this.header),void 0!==this.visibilityWindow||"function"!=typeof this.featureSource.defaultVisibilityWindow){e.next=10;break}return e.next=8,this.featureSource.defaultVisibilityWindow();case 8:this.visibilityWindow=e.sent,this.featureSource.visibilityWindow=this.visibilityWindow;case 10:return e.abrupt("return",this);case 11:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"supportsWholeGenome",value:function(){return!0}},{key:"getFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.visibilityWindow,e.next=3,this.featureSource.getFeatures({chr:t,start:r,end:n,visibilityWindow:i});case 3:return a=e.sent,void 0===this.hasValue&&a&&a.length>0&&(this.hasValue=void 0!==a[0].score),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})},{key:"draw",value:function(e){"proportional"===this.arcType?this.drawProportional(e):this.drawNested(e)}},{key:"drawNested",value:function(e){var t=e.context,r=e.pixelWidth,n=e.pixelHeight,i=e.viewportWidth,a=e.bpPerPixel,o=e.bpStart,s=a;Jp.fillRect(t,0,e.pixelTop,r,n,{fillStyle:"rgb(255, 255, 255)"});var c,u=e.features;if(u){(function(){var e,t=0,a=Nr(u);try{for(a.s();!(e=a.n()).done;){var c=e.value,h=(c.start-o)/s,l=(c.end-o)/s;l>=0&&h<=r&&(t=Math.max(t,l-h))}}catch(e){a.e(e)}finally{a.f()}var f=Math.min(i,t)/2;if(t>0){var p=(n-10)/f;this.theta=function(e){var t,r=[.01570925532366355,.15838444032453644,.3249196962329063,.5095254494944288,.7265425280053609,.9999999999999999],n=[.031415926535897934,.3141592653589793,.6283185307179586,.9424777960769379,1.2566370614359172,1.5707963267948966];for(t=0;t<r.length&&!(r[t]>e);t++);var i=0===t?0:r[t-1],a=t<r.length?r[t]:1,o=(e-i)/(a-i),s=0===t?0:n[t-1],c=t<n.length?n[t]:Math.PI/2;return s+o*(c-s)}(p),this.sinTheta=Math.sin(this.theta),this.cosTheta=Math.cos(this.theta)}}).call(this);var h=this.arcOrientation?e.pixelHeight:0,l=this.arcOrientation;t.font="8px",t.textAlign="center";var f,p=Nr(u);try{for(p.s();!(f=p.n()).done;){var d=f.value,g=d.color||this.color;if(g&&this.config.useScore&&(g=LS(g,(c=d.score,Math.min(1,.11+c/779*.89).toString()))),t.lineWidth=d.thickness||this.thickness||1,d.chr1===d.chr2||"all"===d.chr){var v=AS(d,this.browser.genome),m=v.m1,b=v.m2,y=Math.round((m-o)/s),w=Math.round((b-o)/s);if(w<0||y>r)continue;var k=w-y;k<3&&(k=3,y--);var x=k/2,S=x/this.sinTheta,_=this.cosTheta*S,C=y+x,R=void 0,E=void 0,A=void 0;if(l?(R=this.height+_,E=Math.PI+Math.PI/2-this.theta,A=Math.PI+Math.PI/2+this.theta):(R=-_,E=Math.PI/2-this.theta,A=Math.PI/2+this.theta),this.showBlocks&&"all"!==d.chr){var T=(d.start1-o)/s,I=(d.end1-o)/s,L=(d.start2-o)/s,M=(d.end2-o)/s,F=this.arcOrientation?-this.blockHeight:this.blockHeight;t.fillRect(T,h,I-T,F),t.fillRect(L,h,M-L,F)}g&&!this.config.useScore&&k>i&&(g=LS(g,this.alpha)),t.strokeStyle=g,t.fillStyle=g,t.beginPath(),t.arc(C,R,S,E,A,!1),t.stroke(),d.drawState={xc:C,yc:R,r:S}}else{var D=Math.round((d.start-o)/s),O=Math.round((d.end-o)/s);if(O<0||D>r)continue;var B=O-D;B<3&&(B=3,D--);var N=d.chr===d.chr1?d.chr2:d.chr1;t.strokeStyle=g,t.fillStyle=g,l?(t.fillRect(D,this.height/2,B,this.height/2),t.fillText(N,D+B/2,this.height/2-5),d.drawState={x:D,y:this.height/2,w:B,h:this.height/2}):(t.fillRect(D,0,B,this.height/2),t.fillText(N,D+B/2,this.height/2+13),d.drawState={x:D,y:0,w:B,h:this.height/2})}}}catch(e){p.e(e)}finally{p.f()}}}},{key:"drawProportional",value:function(e){var t=e.context,r=e.pixelWidth,n=e.pixelHeight,i=e.bpPerPixel,a=e.bpStart,o=i;Jp.fillRect(t,0,e.pixelTop,r,n,{fillStyle:"rgb(255, 255, 255)"});var s=e.features;if(s&&s.length>0){var c,u=this.logScale?e.pixelHeight/Math.log10(this.dataRange.max+1):e.pixelHeight/(this.dataRange.max-this.dataRange.min),h=this.arcOrientation?e.pixelHeight:0,l=Nr(s);try{for(l.s();!(c=l.n()).done;){var f=c.value;t.save();var p=this.valueColumn?f[this.valueColumn]:f.score;if(void 0!==p&&!Number.isNaN(p)){var d=this.logScale?Math.log10(p+1)*u:p*u;if(f.chr1===f.chr2||"all"===f.chr){var g=AS(f,this.browser.genome),v=g.m1,m=g.m2,b=(v-a)/o,y=(m-a)/o,w=y-b;if(w<3&&(w=3,b--),y<0||b>r||p<this.dataRange.min)continue;var k=w/2,x=b+w/2,S=!!this.arcOrientation,_=f.color||this.color;if(t.strokeStyle=_,t.lineWidth=f.thickness||this.thickness||1,t.beginPath(),t.ellipse(x,h,k,d,0,0,Math.PI,S),t.stroke(),this.showBlocks&&"all"!==f.chr){t.fillStyle=_;var C=(f.start1-a)/o,R=(f.end1-a)/o,E=(f.start2-a)/o,A=(f.end2-a)/o,T=this.arcOrientation?-this.blockHeight:this.blockHeight;t.fillRect(C,h,R-C,T),t.fillRect(E,h,A-E,T)}if(this.alpha){var I=LS(_,this.alpha);t.fillStyle=I,t.fill()}t.restore(),f.drawState={xc:x,yc:h,radiusX:k,radiusY:d}}else{var L=Math.round((f.start-a)/o),M=Math.round((f.end-a)/o);if(M<0||L>r||p<this.dataRange.min)continue;var F=Math.min(d,this.height-13),D=M-L;D<3&&(D=3,L--);var O=f.chr===f.chr1?f.chr2:f.chr1;if(t.font="8px",t.textAlign="center",this.arcOrientation){var B=this.height-F;t.fillRect(L,B,D,F),t.fillText(O,L+D/2,B-5),f.drawState={x:L,y:B,w:D,h:F}}else t.fillRect(L,0,D,F),t.fillText(O,L+D/2,F+13),f.drawState={x:L,y:0,w:D,h:F}}}}}catch(e){l.e(e)}finally{l.f()}}}},{key:"menuItemList",value:function(){var e=this,t=[{name:"Set track color",click:function(){e.trackView.presentColorPicker()}},"<HR/>"];if(this.hasValue)for(var r={nested:"Nested Arcs",proportional:"Proportional Arcs"},n=function(){var n=a[i];t.push({object:pb(r[n],n===e.arcType),click:function(){e.arcType=n,e.trackView.repaintViews()}})},i=0,a=["nested","proportional"];i<a.length;i++)n();return t.push({object:pb("Show Blocks",this.showBlocks),click:function(){e.showBlocks=!e.showBlocks,e.trackView.repaintViews()}}),t.push({name:"Toggle arc direction",click:function(){e.arcOrientation=!e.arcOrientation,e.trackView.repaintViews()}}),"proportional"===this.arcType&&(t.push("<HR>"),t=t.concat(mb.numericDataMenuItems(this.trackView))),t}},{key:"doAutoscale",value:function(e){var t=0;if(e){var r,n=Nr(e);try{for(n.s();!(r=n.n()).done;){var i=r.value,a=this.valueColumn?i[this.valueColumn]:i.score;Number.isNaN(a)||(t=Math.max(t,a))}}catch(e){n.e(e)}finally{n.f()}}return{min:0,max:t}}},{key:"popupData",value:function(e,t){t||(t=this.clickedFeatures(e));var r,n=[],i=Nr(t);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a._||a;if(n.push({name:"Region 1",value:TS(o.chr1,o.start1,o.end1,o.strand1)}),n.push({name:"Region 2",value:TS(o.chr2,o.start2,o.end2,o.strand2)}),o.name&&n.push({name:"Name",value:o.name}),void 0!==o.value&&n.push({name:"Value",value:o.value}),void 0!==o.score&&n.push({name:"Score",value:o.score}),o.extras&&this.header&&this.header.columnNames)for(var s=this.header.columnNames,c=10;c<s.length;c++)"info"===s[c]?FS(n,o.extras[c-10]):n.push({name:s[c],value:o.extras[c-10]});break}}catch(e){i.e(e)}finally{i.f()}return n}},{key:"clickedFeatures",value:function(e){var t=e.viewport.getCachedFeatures(),r=[];if(t){var n,i="proportional"===this.arcType,a=Nr(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o.drawState)if(o.chr1===o.chr2||"all"===o.chr)if(i){var s=o.drawState,c=s.xc,u=s.yc,h=s.radiusX,l=s.radiusY,f=e.canvasX-c,p=e.canvasY-u,d=f/h*(f/h)+p/l*(p/l);d<=1&&r.push({score:1/d,feature:o})}else{var g=o.drawState,v=g.xc,m=g.yc,b=g.r,y=e.canvasX-v,w=e.canvasY-m,k=Math.abs(Math.sqrt(y*y+w*w)-b);k<5&&r.push({score:k,feature:o})}else{var x=o.drawState,S=x.x,_=x.y,C=x.w,R=x.h;if(e.canvasX>=S-5&&e.canvasX<=S+C+5&&e.canvasY>=_&&e.canvasY<=_+R){var E=-Math.abs(e.canvasX-(S+C/2));r.push({score:E,feature:o});break}}}}catch(e){a.e(e)}finally{a.f()}}return r.length>1&&r.sort((function(e,t){return e.score-t.score})),r.map((function(e){return e.feature}))}}]),i}(Oy);function AS(e,t){var r=(e.start1+e.end1)/2,n=(e.start2+e.end2)/2;if("all"===e.chr&&(r=t.getGenomeCoordinate(e.chr1,r),n=t.getGenomeCoordinate(e.chr2,n)),r>n){var i=r;r=n,n=i}return{m1:r,m2:n}}function TS(e,t,r,n){return n&&"."!==n?"".concat(e,":").concat(_n(t+1),"-").concat(_n(r)," (").concat(n,")"):"".concat(e,":").concat(_n(t+1),"-").concat(_n(r))}var IS=new Map;function LS(e,t){var r="".concat(e,"_").concat(t),n=IS.get(r);return n||(n=ei.addAlpha(e,t),IS.set(r,n)),n}function MS(e){var t,r=this.genome,n=[],i=Nr(r.wgChromosomeNames);try{for(i.s();!(t=i.n()).done;){var a=e[t.value];if(a){var o,s=Nr(a);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(!c.dup){var u=Object.assign({},c);u.chr="all",u.start=r.getGenomeCoordinate(c.chr1,c.start1),u.end=r.getGenomeCoordinate(c.chr2,c.end2),n.push(u)}}}catch(e){s.e(e)}finally{s.f()}}}}catch(e){i.e(e)}finally{i.f()}return n}function FS(e,t){var r,n=Nr(t.split(";"));try{for(n.s();!(r=n.n()).done;){var i=r.value.split("=");2===i.length&&e.push({name:i[0],value:i[1]})}}catch(e){n.e(e)}finally{n.f()}}for(var DS=Sn,OS=1e6,BS=function(e){wr(a,e);var t,r,n,i=Ar(a);function a(e,t){var r;return mr(this,a),(r=i.call(this,e,t)).visibilityWindow=e.visibilityWindow,r.displayMode=e.displayMode||"EXPANDED",r.labelDisplayMode=e.labelDisplayMode,r.variantHeight=e.variantHeight||10,r.squishedCallHeight=e.squishedCallHeight||1,r.expandedCallHeight=e.expandedCallHeight||10,r.expandedVGap=void 0!==e.expandedVGap?e.expandedVGap:2,r.squishedVGap=void 0!==e.squishedVGap?e.squishedVGap:1,r.expandedGroupGap=e.expandedGroupGap||10,r.squishedGroupGap=e.squishedGroupGap||5,r.featureHeight=e.featureHeight||14,r.visibilityWindow=e.visibilityWindow,r.featureSource=Tk(e,t.genome),r.noCallColor=e.noCallColor||"rgb(245, 245, 245)",r.nonRefColor=e.nonRefColor||"rgb(200, 200, 215)",r.mixedColor=e.mixedColor||"rgb(200, 220, 200)",r.homrefColor=e.homrefColor||"rgb(200, 200, 200)",r.homvarColor=e.homvarColor||"rgb(17,248,254)",r.hetvarColor=e.hetvarColor||"rgb(34,12,253)",r.sortDirection="ASC",r.type=e.type||"variant",r.nRows=1,r}return yr(a,[{key:"postInit",value:(n=vr(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:return e.sent,void 0===this.visibilityWindow&&!1!==this.config.indexed&&(t=this.config.url instanceof File?this.config.url.name:this.config.url,DS(t)&&t.toLowerCase().includes("gnomad")?this.visibilityWindow=1e3:this.callSets?(r=this.callSets.length,this.visibilityWindow=Math.max(1e3,OS-1e4*r)):this.visibilityWindow=OS),e.abrupt("return",this);case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"supportsWholeGenome",value:function(){return!1===this.config.indexed&&!1!==this.config.supportsWholeGenome}},{key:"getHeader",value:(r=vr(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.header){e.next=4;break}return e.abrupt("return",this.header);case 4:if("function"!=typeof this.featureSource.getHeader){e.next=13;break}return e.next=7,this.featureSource.getHeader();case 7:return(t=e.sent)&&(this.callSets=t.callSets||[]),this.header=t,e.abrupt("return",t);case 13:return this.callSets=[],e.abrupt("return",void 0);case 15:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getCallsetsLength",value:function(){return this.callSets.length}},{key:"getFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.header){e.next=4;break}return e.next=3,this.getHeader();case 3:this.header=e.sent;case 4:return e.abrupt("return",this.featureSource.getFeatures({chr:t,start:r,end:n,bpPerPixel:i,visibilityWindow:this.visibilityWindow}));case 5:case"end":return e.stop()}}),e,this)}))),function(e,r,n,i){return t.apply(this,arguments)})},{key:"computePixelHeight",value:function(e){if("COLLAPSED"===this.displayMode)return this.nRows=1,10+this.variantHeight;var t=0;if(e){var r,n=Nr(e);try{for(n.s();!(r=n.n()).done;){var i=r.value;i.row&&i.row>t&&(t=i.row)}}catch(e){n.e(e)}finally{n.f()}}var a="EXPANDED"===this.displayMode?this.expandedVGap:this.squishedVGap;this.nRows=t+1;var o=10+this.nRows*(this.variantHeight+a);this.variantBandHeight=o;var s="EXPANDED"===this.displayMode?this.expandedCallHeight:this.squishedCallHeight;return o+a+(this.getCallsetsLength()*this.nRows+1)*(s+a)}},{key:"draw",value:function(e){var t=e.context,r=this.callSets,n=this.getCallsetsLength(),i=e.pixelWidth,a=e.pixelHeight,o="EXPANDED"===this.displayMode?this.expandedCallHeight:this.squishedCallHeight,s=e.bpPerPixel,c=e.bpStart,u=c+i*s+1;Jp.fillRect(t,0,e.pixelTop,i,a,{fillStyle:"rgb(255, 255, 255)"});var h="EXPANDED"===this.displayMode?this.expandedVGap:this.squishedVGap;r&&n>0&&"COLLAPSED"!==this.displayMode&&Jp.strokeLine(t,0,this.variantBandHeight,i,this.variantBandHeight,{strokeStyle:"rgb(224,224,224) "});var l=e.features;if(l){var f,p=Nr(l);try{for(p.s();!(f=p.n()).done;){var d=f.value;if(!(d.end<c)){if(d.start>u)break;var g=10+("COLLAPSED"===this.displayMode?0:d.row*(this.variantHeight+h)),v=this.variantHeight,m=Math.round((d.start-c)/s),b=Math.round((d.end-c)/s),y=Math.max(1,b-m);if(y<3?(y=3,m-=1):y>5&&(m+=1,y-=2),"NONVARIANT"===d.type?t.fillStyle=this.nonRefColor:"MIXED"===d.type?t.fillStyle=this.mixedColor:t.fillStyle=this.color||this.defaultColor,t.fillRect(m,g,y,v),n>0&&d.calls&&"COLLAPSED"!==this.displayMode){var w,k=0,x=Nr(r);try{for(x.s();!(w=x.n()).done;){var S=w.value,_=d.calls[S.id];if(_){var C,R=this.variantBandHeight+h+(k+d.row)*(o+h),E=!0,A=!0,T=!1,I=Nr(_.genotype);try{for(I.s();!(C=I.n()).done;){var L=C.value;if("."===L){T=!0;break}0!==L&&(A=!1),0===L&&(E=!1)}}catch(e){I.e(e)}finally{I.f()}t.fillStyle=T?this.noCallColor:A?this.homrefColor:E?this.homvarColor:this.hetvarColor,t.fillRect(m,R,y,o)}k++}}catch(e){x.e(e)}finally{x.f()}}}}}catch(e){p.e(e)}finally{p.f()}}}},{key:"popupData",value:function(e,t){t||(t=this.clickedFeatures(e));var r,n=e.genomicLocation,i=this.browser.genome.id,a=[],o=this.browser.sampleInformation,s=Nr(t);try{for(s.s();!(r=s.n()).done;){var c=r.value;if(a.length>0&&a.push("<HR>"),"COLLAPSED"===this.displayMode)Array.prototype.push.apply(a,c.popupData(n,this.type));else{var u=e.y,h="EXPANDED"===this.displayMode?this.expandedVGap:this.squishedVGap;if(u<=this.variantBandHeight){var l=Math.floor((u-10)/(this.variantHeight+h));c.row===l&&Array.prototype.push.apply(a,c.popupData(n,i),this.type)}else{var f=this.callSets;if(f&&c.calls){var p=this.nRows*("SQUISHED"===this.displayMode?this.squishedCallHeight:this.expandedCallHeight),d=Math.floor((u-this.variantBandHeight)/(p+h));if(d>=0&&d<f.length){var g=f[d],v=c.calls[g.id];Array.prototype.push.apply(a,m(v,c,i,o))}}}}}}catch(e){s.e(e)}finally{s.f()}return a;function m(e,t,r,n){var i,a="",o=t.alternateBases.split(","),s=Nr(e.genotype);try{for(s.s();!(i=s.n()).done;){var c=i.value;if("."===c){a+="No Call";break}a+=0===c?t.referenceBases:o[c-1].replace("<","&lt;")}}catch(e){s.e(e)}finally{s.f()}var u=[];if(void 0!==e.callSetName&&u.push({name:"Name",value:e.callSetName}),u.push({name:"Genotype",value:a}),void 0!==e.phaseset&&u.push({name:"Phase set",value:e.phaseset}),void 0!==e.genotypeLikelihood&&u.push({name:"genotypeLikelihood",value:e.genotypeLikelihood.toString()}),n){var h=n.getAttributes(e.callSetName);h&&Object.keys(h).forEach((function(e){var t=e.replace(/([A-Z])/g," $1");t=t.charAt(0).toUpperCase()+t.slice(1),u.push({name:t,value:h[e]})}))}var l=Object.keys(e.info);l.length&&u.push("<hr>"),l.forEach((function(t){u.push({name:t,value:e.info[t]})}));var f=[];return f.length>0&&(u.push("<HR/>"),u=u.concat(f)),u}}},{key:"menuItemList",value:function(){var e=this,t=[];return t.push({object:Su('<div class="igv-track-menu-border-top">')}),["COLLAPSED","SQUISHED","EXPANDED"].forEach((function(r){t.push({object:pb({COLLAPSED:"Collapse",SQUISHED:"Squish",EXPANDED:"Expand"}[r],r===e.displayMode),click:function(){e.displayMode=r,e.trackView.checkContentHeight(),e.trackView.repaintViews()}})})),t}}]),a}(Oy),NS=function(e){wr(n,e);var t,r=Ar(n);function n(e,t){var i;mr(this,n),(i=r.call(this,e,t)).config=e,i.url=e.url,i.name=e.name,i.pValueField=e.pValueField||"pValue",i.geneField=e.geneField||"geneSymbol",i.snpField=e.snpField||"snp";var a=e.minLogP||e.min,o=e.maxLogP||e.max;return i.dataRange={min:a||3.5,max:o||25},i.autoscale=!o||e.autoscale,i.autoscalePercentile=void 0===e.autoscalePercentile?98:e.autoscalePercentile,i.background=e.background,i.divider=e.divider||"rgb(225,225,225)",i.dotSize=e.dotSize||2,i.height=e.height||100,i.autoHeight=!1,i.disableButtons=e.disableButtons,i.visibilityWindow=void 0===e.visibilityWindow?2e6:e.visibilityWindow>=0?Math.min(2e6,e.visibilityWindow):2e6,i.featureSource=Tk(e,t.genome),Dk.gtexLoaded=!0,i}return yr(n,[{key:"paintAxis",value:function(e,t,r){var n=(this.dataRange.max-this.dataRange.min)/r,i={font:"normal 10px Arial",textAlign:"right",strokeStyle:"black"};Jp.fillRect(e,0,0,t,r,{fillStyle:"rgb(255, 255, 255)"});for(var a=Math.ceil(10*(this.dataRange.max-this.dataRange.min)/r),o=4;o<=this.dataRange.max;o+=a){var s=.85*t,c=s-5,u=s,h=r-(o-this.dataRange.min)/n;Jp.strokeLine(e,c,h,u,h,i),h>8&&Jp.fillText(e,o,c-1,h+2,i)}i.textAlign="center",Jp.fillText(e,"-log10(pvalue)",t/4,r/2,i,{rotate:{angle:-90}})}},{key:"getFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.pValueField,e.next=3,this.featureSource.getFeatures({chr:t,start:r,end:n});case 3:return(a=e.sent).forEach((function(e){e.value=e[i]})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})},{key:"draw",value:function(e){var t=this,r=e.context,n=e.pixelWidth,i=e.pixelHeight;this.background&&Jp.fillRect(r,0,0,n,i,{fillStyle:this.background}),Jp.strokeLine(r,0,i-1,n,i-1,{strokeStyle:this.divider}),r.save();var a=function(a){var o,s=a?2*t.dotSize:t.dotSize,c=e.bpStart,u=(t.dataRange.max-t.dataRange.min)/i,h=e.referenceFrame.selection,l=Nr(e.features);try{for(l.s();!(o=l.n()).done;){var f=o.value,p=(f.start-c+.5)/e.bpPerPixel;if(!(p<0)){if(p>n)break;var d=f.snp.toUpperCase(),g=f[t.geneField].toUpperCase(),v=h&&(h.snp===d||h.gene===g);if(!a||v){h&&h.snp===d&&h.addGene(g);var m=-Math.log(f[t.pValueField])/Math.LN10;if(m>=t.dataRange.min){var b=void 0;m>t.dataRange.max?(m=t.dataRange.max,b=!0):b=!1;var y=Math.max(0+s,i-Math.round((m-t.dataRange.min)/u));f.px=p,f.py=y,f.radius=s;var w=void 0;a&&h?(w=h.colorForGene(g),Jp.setProperties(r,{fillStyle:w,strokeStyle:"black"})):(w=b?"rgb(150, 150, 150)":"rgb(180, 180, 180)",Jp.setProperties(r,{fillStyle:w,strokeStyle:w})),Jp.fillCircle(r,p,y,s),Jp.strokeCircle(r,p,y,s)}}}}}catch(e){l.e(e)}finally{l.f()}};a(!1),a(!0),r.restore()}},{key:"popupData",value:function(e){var t=e.viewport.getCachedFeatures();if(!t||0===t.length)return[];var r,n=this.name,i=[],a=Nr(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;Math.abs(o.px-e.canvasX)<o.radius+3&&Math.abs(o.py-e.canvasY)<o.radius+3&&(i.length>0&&i.push("<hr>"),i.push({name:"snp id",value:o.snp},{name:"gene id",value:o.geneId},{name:"gene name",value:o.geneName},{name:"p value",value:o.pValue},{name:"tissue",value:n}))}}catch(e){a.e(e)}finally{a.f()}return i}},{key:"menuItemList",value:function(){return mb.numericDataMenuItems(this.trackView)}},{key:"doAutoscale",value:function(e){if(e.length>0){var t=e.map((function(e){return-Math.log(e.value)/Math.LN10}));this.dataRange.max=Xn(t,this.autoscalePercentile)}else{var r=this.config.maxLogP||this.config.max;this.dataRange.max=r||25}return this.dataRange}}]),n}(Oy),PS={X:"rgb(204, 153, 0)",Y:"rgb(153, 204, 0)",Un:"darkGray)",1:"rgb(80, 80, 255)",I:"rgb(139, 155, 187)",2:"rgb(206, 61, 50)",II:"rgb(206, 61, 50)","2a":"rgb(210, 65, 55)","2b":"rgb(215, 70, 60)",3:"rgb(116, 155, 88)",III:"rgb(116, 155, 88)",4:"rgb(240, 230, 133)",IV:"rgb(240, 230, 133)",5:"rgb(70, 105, 131)",6:"rgb(186, 99, 56)",7:"rgb(93, 177, 221)",8:"rgb(128, 34, 104)",9:"rgb(107, 215, 107)",10:"rgb(213, 149, 167)",11:"rgb(146, 72, 34)",12:"rgb(131, 123, 141)",13:"rgb(199, 81, 39)",14:"rgb(213, 143, 92)",15:"rgb(122, 101, 165)",16:"rgb(228, 175, 105)",17:"rgb(59, 27, 83)",18:"rgb(205, 222, 183)",19:"rgb(97, 42, 121)",20:"rgb(174, 31, 99)",21:"rgb(231, 199, 111)",22:"rgb(90, 101, 94)",23:"rgb(204, 153, 0)",24:"rgb(153, 204, 0)",25:"rgb(51, 204, 0)",26:"rgb(0, 204, 51)",27:"rgb(0, 204, 153)",28:"rgb(0, 153, 204)",29:"rgb(10, 71, 255)",30:"rgb(71, 117, 255)",31:"rgb(255, 194, 10)",32:"rgb(255, 209, 71)",33:"rgb(153, 0, 51)",34:"rgb(153, 26, 0)",35:"rgb(153, 102, 0)",36:"rgb(128, 153, 0)",37:"rgb(51, 153, 0)",38:"rgb(0, 153, 26)",39:"rgb(0, 153, 102)",40:"rgb(0, 128, 153)",41:"rgb(0, 51, 153)",42:"rgb(26, 0, 153)",43:"rgb(102, 0, 153)",44:"rgb(153, 0, 128)",45:"rgb(214, 0, 71)",46:"rgb(255, 20, 99)",47:"rgb(0, 214, 143)",48:"rgb(20, 255, 177)"},zS=0,US=Object.keys(PS);zS<US.length;zS++){var HS=US[zS];PS["chr"+HS]=PS[HS]}var jS=function(e){wr(n,e);var t,r=Ar(n);function n(e,t){var i;return mr(this,n),(i=r.call(this,e,t)).useChrColors=void 0===e.useChrColors||e.useChrColors,i.trait=e.trait,i.posteriorProbability=e.posteriorProbability,i.height=e.height||100,e.autoscale||(e.posteriorProbability?i.dataRange={min:void 0===e.min?0:e.min,max:void 0===e.max?1:e.max}:i.dataRange={min:void 0===e.min?0:e.min,max:void 0===e.max?25:e.max}),i.autoscale=e.autoscale,i.autoscalePercentile=void 0===e.autoscalePercentile?98:e.autoscalePercentile,i.background=e.background,i.divider=e.divider||"rgb(225,225,225)",i.dotSize=e.dotSize||3,i.popoverWindow=void 0===e.popoverWindow?1e8:e.popoverWindow,i.description=e.description,i.colorScales=e.color?new nx(e.color):{"*":new tx(e.colorScale||{thresholds:[5e-8,5e-4,.5],colors:["rgb(255,50,50)","rgb(251,100,100)","rgb(251,170,170)","rgb(227,238,249)"]})},i.featureSource=Tk(e,t.genome),i}return yr(n,[{key:"supportsWholeGenome",value:function(){return!0}},{key:"getFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.featureSource.getFeatures({chr:t,start:r,end:n}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})},{key:"draw",value:function(e){var t=e.features,r=e.context,n=e.pixelWidth,i=e.pixelHeight;if(this.background&&Jp.fillRect(r,0,0,n,i,{fillStyle:this.background}),Jp.strokeLine(r,0,i-1,n,i-1,{strokeStyle:this.divider}),t){var a,o=e.bpPerPixel,s=e.bpStart,c=s+n*o+1,u=Nr(t);try{for(u.s();!(a=u.n()).done;){var h=a.value,l=h.start;if(!(l<s)){if(l>c)break;var f=this.getColorScale(h._f?h._f.chr:h.chr),p=void 0,d=void 0;if(this.posteriorProbability)d=h.value,p=f.getColor(d);else{var g=h.value||h.score;if(!g)continue;d=-Math.log10(g),p=f.getColor(d)}var v=(this.dataRange.max-this.dataRange.min)/i,m=Math.round((l-s)/o),b=Math.max(this.dotSize,i-Math.round((d-this.dataRange.min)/v));p&&Jp.setProperties(r,{fillStyle:p,strokeStyle:"black"}),Jp.fillCircle(r,m,b,this.dotSize),h.px=m,h.py=b}}}catch(e){u.e(e)}finally{u.f()}}}},{key:"getColorScale",value:function(e){if(this.useChrColors){var t=this.colorScales[e];if(!t){var r=PS[e]||Fk.get();t=new nx(r),this.colorScales[e]=t}return t}return this.colorScales("*")}},{key:"paintAxis",value:function(e,t,r){Jp.fillRect(e,0,0,t,r,{fillStyle:"rgb(255, 255, 255)"});var n={font:"normal 10px Arial",textAlign:"right",strokeStyle:"black"},i=(this.dataRange.max-this.dataRange.min)/r;if(this.posteriorProbability)for(var a=this.dataRange.min;a<this.dataRange.max;a+=.1){var o=r-Math.round((a-this.dataRange.min)/i);Jp.strokeLine(e,45,o-2,50,o-2,n),Jp.fillText(e,a.toFixed(1),44,o+2,n)}else for(var s=Math.ceil(10*(this.dataRange.max-this.dataRange.min)/r),c=this.dataRange.min;c<this.dataRange.max;c+=s){var u=r-Math.round((c-this.dataRange.min)/i);Jp.strokeLine(e,45,u,50,u,n),Jp.fillText(e,Math.floor(c),44,u+4,n)}n.textAlign="center",this.posteriorProbability?Jp.fillText(e,"PPA",t/2,r/2,n,{rotate:{angle:-90}}):Jp.fillText(e,"-log10(pvalue)",t/2,r/2,n,{rotate:{angle:-90}})}},{key:"popupData",value:function(e){var t=[],r=e.viewport.trackView.track,n=e.viewport.getCachedFeatures();if(n){var i,a=0,o=Nr(n);try{for(o.s();!(i=o.n()).done;){var s=i.value,c=Math.abs(e.canvasX-s.px),u=Math.abs(e.canvasY-s.py),h=s.value||s.score;if(c<this.dotSize&&u<this.dotSize){if(a>0&&t.push("<HR/>"),5==a){t.push("...");break}if("function"==typeof s.popupData)t=t.concat(s.popupData());else{var l=s.realChr||s.chr,f=(s.realStart||s.start)+1;t.push({name:"chromosome",value:l}),t.push({name:"position",value:f}),t.push({name:"name",value:s.name}),r.posteriorProbability?t.push({name:"posterior probability",value:h}):t.push({name:"pValue",value:h})}a++}}}catch(e){o.e(e)}finally{o.f()}}return t}},{key:"menuItemList",value:function(){return mb.numericDataMenuItems(this.trackView)}},{key:"doAutoscale",value:function(e){if(e.length>0){var t=this.posteriorProbability?e:e.map((function(e){var t=void 0!==e.value?e.value:e.score;return{value:-Math.log(t)/Math.LN10}})),r=xm(t);this.dataRange.max=r.max,this.dataRange.min=r.min!==r.max?r.min:0}else this.posteriorProbability?(this.dataRange.min=this.config.min||0,this.dataRange.max=this.config.max||1):(this.dataRange.max=this.config.max||25,this.dataRange.min=this.config.min||0);return this.dataRange}}]),n}(Oy),qS=function(e){wr(i,e);var t,r,n=Ar(i);function i(e,t){var r;return mr(this,i),(r=n.call(this,e,t)).autoscale=e.autoscale||void 0===e.max,r.dataRange={min:e.min||0,max:e.max},r.windowFunction=e.windowFunction||"mean",r.paintAxis=Jk,r.graphType=e.graphType||"bar",e._featureSource?(r.featureSource=e._featureSource,delete e._featureSource):r.featureSource=Tk(r.config,t.genome),r}return yr(i,[{key:"postInit",value:(r=vr(regeneratorRuntime.mark((function e(){var t,r,n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof this.featureSource.getHeader){e.next=7;break}return e.next=3,this.featureSource.getHeader();case 3:if(this.header=e.sent,this.sampleNames=this.header.columnNames.slice(3),this.setTrackProperties(this.header),this.header.hasOwnProperty("highlight")){this.config.highlightSamples={},t=this.header.highlight,Array.isArray(t)||(t=[t]),r=Nr(t);try{for(r.s();!(n=r.n()).done;)i=n.value,2===(a=i.split(";")).length&&(this.config.highlightSamples[a[0]]=a[1])}catch(e){r.e(e)}finally{r.f()}}case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"menuItemList",value:function(){return mb.numericDataMenuItems(this.trackView)}},{key:"getFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.featureSource.getFeatures({chr:t,start:0,end:Number.MAX_VALUE});case 2:i=e.sent,a=void 0,o=void 0,s=1;case 6:if(!(s<i.length-1)){e.next=14;break}if(void 0===a&&i[s].end>r&&(a=s-1),!(void 0===o&&i[s].start>n)){e.next=11;break}return o=s+1,e.abrupt("break",14);case 11:s++,e.next=6;break;case 14:return void 0===a&&(a=0),void 0===o&&(o=i.length),e.abrupt("return",i.slice(a,o));case 17:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})},{key:"draw",value:function(e){var t=this,r=e.features,n=e.context,i=e.bpPerPixel,a=e.bpStart,o=(e.pixelWidth,e.pixelHeight),s=function(e){return(t.dataRange.max-e)/(t.dataRange.max-t.dataRange.min)*o},c=function(e){var t=Math.floor((e-a)/i);return isNaN(t)&&console.warn("isNaN(x). feature start "+_n(e)+" bp start "+_n(a)),t};if(r&&r.length>0&&(void 0===this.dataRange.min&&(this.dataRange.min=0),this.dataRange.max>this.dataRange.min)){var u=this.config.highlightSamples,h=this.config.onlyHandleClicksForHighlightedSamples,l=-1,f={},p=[],d=[];this.clickDetectorCache={};var g,v=Nr(r);try{for(v.s();!(g=v.n()).done;){var m=g.value,b=c(m.start),y=c(m.end),w=l>=0?c(l):b;if(!isNaN(b)&&!isNaN(y)&&!(b-w<1&&y-b<1)){this.clickDetectorCache[b]=[],this.clickDetectorCache[y]=[];for(var k=0;k<m.values.length;k++){var x=this.sampleNames[k],S=m.values[k],_=s(S);if(b-w>=1){var C=f[x],R=s(C),E=u&&u[x];E?p.push([w,R,b,_,E]):Jp.strokeLine(n,w,R,b,_,{strokeStyle:"#D9D9D9"}),h&&!(x in u)||this.clickDetectorCache[b].push([w,R,b,_,x,E||"gray"])}if(y-b>=1){var A=u&&u[x];A?d.push([b,_,y,_,A]):Jp.strokeLine(n,b,_,y,_,{strokeStyle:"gray"}),h&&!(x in u)||this.clickDetectorCache[y].push([b,_,y,_,x,A||"gray"])}f[x]=S}l=m.end}}}catch(e){v.e(e)}finally{v.f()}for(var T=0,I=p;T<I.length;T++){var L=I[T];Jp.strokeLine(n,L[0],L[1],L[2],L[3],{strokeStyle:L[4],lineWidth:1.3})}for(var M=0,F=d;M<F.length;M++){var D=F[M];Jp.strokeLine(n,D[0],D[1],D[2],D[3],{strokeStyle:D[4],lineWidth:2})}}!function(e){if(t.config.hasOwnProperty("guideLines")){var r,n=Nr(t.config.guideLines);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(i.hasOwnProperty("color")&&i.hasOwnProperty("y")&&i.hasOwnProperty("dotted")){var a=s(i.y),o={strokeStyle:i.color,strokeWidth:2};i.dotted?Jp.dashedLine(e.context,0,a,e.pixelWidth,a,5,o):Jp.strokeLine(e.context,0,a,e.pixelWidth,a,o)}}}catch(e){n.e(e)}finally{n.f()}}}(e)}},{key:"doAutoscale",value:function(e){var t,r;return e.length>0?(t=Number.MAX_VALUE,r=-Number.MAX_VALUE,e.forEach((function(e){t=Math.min.apply(Math,[t].concat(Lr(e.values))),r=Math.max.apply(Math,[r].concat(Lr(e.values)))})),t-=.01,r+=.01):(t=0,r=100),{min:t,max:r}}},{key:"clickedFeatures",value:function(e){for(var t=e.canvasX,r=e.canvasY,n=null,i=0,a=Object.keys(this.clickDetectorCache);i<a.length&&(n=a[i],!((n=parseInt(n))>=t));i++);if(n){var o,s=Number.MAX_VALUE,c=[],u=Nr(this.clickDetectorCache[n]);try{for(u.s();!(o=u.n()).done;){var h=o.value,l=h[0],f=h[2];if(t<l||t>f)return[];var p=h[1],d=h[3];if(!(r<Math.min(p,d)-10||r>Math.max(p,d)+10)){var g=VS(t,r,l,p,f,d);g<s&&(c=[{name:h[4],color:h[5]}],s=g)}}}catch(e){u.e(e)}finally{u.f()}if(s<5)return c}return[]}},{key:"popupData",value:function(e,t){t||(t=this.clickedFeatures(e));var r=[];return t.forEach((function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];wm(e[i])&&r.push({name:i,value:e[i]})}})),r}},{key:"supportsWholeGenome",value:function(){return!1}}]),i}(Oy);function VS(e,t,r,n,i,a){var o=i-r,s=a-n,c=Math.abs(o*(n-t)-(r-e)*s),u=Math.sqrt(o*o+s*s);return u>0?c/u:0}var WS=function(e){wr(n,e);var t,r=Ar(n);function n(e,t){var i;return mr(this,n),i=r.call(this,e,t),e.height||(i.height=300),i.arcOrientation=!1,i.theta=Math.PI/2,e.format,i.featureSource=new $S(e,t.genome),i}return yr(n,[{key:"getFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.featureSource.getFeatures(t,r,n));case 1:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})},{key:"draw",value:function(e){var t=this,r=Math.PI/2,n=e.context,i=e.pixelWidth,a=e.pixelHeight,o=(e.viewportWidth,e.bpPerPixel),s=e.bpStart,c=o,u=t.arcOrientation;Jp.fillRect(n,0,e.pixelTop,i,a,{fillStyle:"rgb(255, 255, 255)"});var h=e.features;h&&(GS(h,1),h.forEach((function(e){if(e.startLeft){var i=Math.round((e.startLeft-s)/c),a=Math.round((e.startRight-s)/c),o=Math.round((e.endLeft-s)/c),h=Math.round((e.endRight-s)/c);n.fillStyle=e.color,n.strokeStyle=e.color,n.beginPath();var l=(i+h)/2,f=(h-i)/2,p=t.height,d=Math.PI+(Math.PI/2-r),g=2*Math.PI-(Math.PI/2-r);u?(p=0,n.arc(l,p,f,g,d),n.lineTo(h,p)):(n.arc(l,p,f,d,g),n.lineTo(o,p));var v=(a+o)/2,m=(o-a)/2,b=p;u?(n.arc(v,b,m,d,g,!0),n.lineTo(o,b)):(n.arc(v,b,m,g,d,!0),n.lineTo(i,b)),n.stroke(),n.fill(),e.drawState={x1:l,y1:p,r1:f,x2:v,y2:b,r2:m,sa:d,ea:g}}else{var y=Math.round((e.start-s)/c),w=Math.round((e.end-s)/c);n.strokeStyle=e.color,n.beginPath();var k=(y+w)/2,x=(w-y)/2,S=t.height,_=Math.PI+(Math.PI/2-r),C=2*Math.PI-(Math.PI/2-r);u?(S=0,n.arc(k,S,x,C,_)):n.arc(k,S,x,_,C),n.stroke(),e.drawState={x1:k,y1:S,r1:x,sa:_,ea:C}}})))}},{key:"clickedFeatures",value:function(e){var t=Tr(kr(n.prototype),"clickedFeatures",this).call(this,e),r=[];GS(t,-1);var i,a=Nr(t);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.drawState,c=e.canvasX-s.x1,u=e.canvasY-s.y1,h=Math.sqrt(c*c+u*u),l=s.r1+3,f=void 0,p=void 0;if(void 0===s.x2)f=h,p=s.r1-3;else{var d=e.canvasX-s.x2,g=e.canvasY-s.y2;f=Math.sqrt(d*d+g*g),p=s.r2-3}if(h<l&&f>p){r.push(o);break}}}catch(e){a.e(e)}finally{a.f()}return r}},{key:"popupData",value:function(e,t){if(t||(t=this.clickedFeatures(e)),t&&t.length>0)return Oy.extractPopupData(t[0],this.getGenomeId())}},{key:"menuItemList",value:function(){var e=this;return[{name:"Toggle arc direction",click:function(){e.arcOrientation=!e.arcOrientation,e.trackView.repaintViews()}}]}}]),n}(Oy);function GS(e,t){e.sort((function(e,r){var n=void 0===e.score?-Number.MAX_VALUE:e.score,i=void 0===r.score?-Number.MAX_VALUE:r.score;return(void 0===t?1:t)*(n-i)}))}var $S=function(){function e(t,r){mr(this,e),this.config=t,this.genome=r}var t;return yr(e,[{key:"getFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(e){if(!e)return null;for(var t,r=Ly(e),n=!0,i=[],a=[],o=[];void 0!==(t=r.nextLine());){var s=t.split("\t");if(n&&t.startsWith("color:")){var c="rgb("+s[1]+","+s[2]+","+s[3]+")";i.push(c),s.length>4&&a.push(s[4])}else{n=!1;var u=s[0],h=Number.parseInt(s[1])-1,l=Number.parseInt(s[2])-1,f=Number.parseInt(s[3]),p=Number.parseInt(s[4]),d=Number.parseInt(s[5]),g=i[d],v=void 0;(v=h<=p?{chr:u,startLeft:Math.min(h,l),startRight:Math.max(h,l),endLeft:Math.min(f,p),endRight:Math.max(f,p),color:g,score:d}:{chr:u,startLeft:Math.min(f,p),startRight:Math.max(f,p),endLeft:Math.min(h,l),endRight:Math.max(h,l),color:g,score:d}).start=v.startLeft,v.end=v.endRight,a.length>d&&(v.description=a[d]),o.push(v)}}return o},i=this.genome,this.featureCache){e.next=11;break}return a=km(this.config),e.next=6,Lm.loadString(this.config.url,a);case 6:return o=e.sent,this.featureCache=new Ew(s(o),i),e.abrupt("return",this.featureCache.queryFeatures(t,r,n));case 11:return e.abrupt("return",this.featureCache.queryFeatures(t,r,n));case 12:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})}]),e}(),ZS=function(){function e(t){mr(this,e),this.browser=t,this.type="ideogram",this.id=this.type,this.height=16,this.order=Number.MIN_SAFE_INTEGER,this.disableButtons=!0,this.ignoreTrackMenu=!0}var t;return yr(e,[{key:"getFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)}))),function(e,r,n){return t.apply(this,arguments)})},{key:"computePixelHeight",value:function(e){return this.height}},{key:"draw",value:function(e){}},{key:"computePixelHeight",value:function(){}},{key:"dispose",value:function(){this.trackView=void 0}}]),e}(),YS={tracks:{ideogram:function(e,t){return new ZS(e,t)},sequence:function(e,t){return new Qk(e,t)},feature:function(e,t){return new Nk(e,t)},seg:function(e,t){return new ix(e,t)},wig:function(e,t){return new ex(e,t)},merged:function(e,t){return new ax(e,t)},alignment:function(e,t){return new yS(e,t)},interaction:function(e,t){return new ES(e,t)},interact:function(e,t){return new ES(e,t)},variant:function(e,t){return new BS(e,t)},eqtl:function(e,t){return new NS(e,t)},gwas:function(e,t){return new jS(e,t)},arc:function(e,t){return new WS(e,t)},gcnv:function(e,t){return new qS(e,t)}},addTrack:function(e,t){this.tracks[e]=t},getTrack:function(e){return this.tracks[e]}},XS=function(){function e(t,r){mr(this,e),this.config=t,this.name=t.name,this.roiSource=Tk(t,r),this.color=t.color||"rgba(68, 134, 247, 0.25)"}var t;return yr(e,[{key:"getFeatures",value:(t=vr(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.roiSource.getFeatures({chr:t,start:r,end:n}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})},{key:"draw",value:function(e){var t,r,n,i;if(i=e.features){t=e.bpStart+(e.pixelWidth*e.bpPerPixel+1);for(var a=0,o=i.length;a<o;a++)if(!((r=i[a]).end<e.bpStart)){if(r.start>t)break;n=KS(r,e.bpStart,e.bpPerPixel),Jp.fillRect(e.context,n.x,e.pixelTop,n.width,e.pixelHeight,{fillStyle:this.color})}}}}]),e}();function KS(e,t,r){var n,i;return n=Math.round((e.start-t)/r),(i=Math.round((e.end-t)/r)-n)<3&&(i=3,n-=1),{x:n,width:i}}var QS=function(){function e(t,r){mr(this,e),this.geneColors={},this.gene=null,this.snp=null,this.genesCount=0,t&&(this.gene=t.toUpperCase(),this.geneColors[this.gene]=JS[this.genesCount++]),r&&(this.snp=r.toUpperCase())}return yr(e,[{key:"addGene",value:function(e){this.geneColors[e.toUpperCase()]||(this.geneColors[e.toUpperCase()]=JS[this.genesCount++])}},{key:"colorForGene",value:function(e){return this.geneColors[e.toUpperCase()]}}]),e}(),JS=new Array;JS.push("rgb(228,26,28)"),JS.push("rgb(55,126,184)"),JS.push("rgb(77,175,74)"),JS.push("rgb(166,86,40)"),JS.push("rgb(152,78,163)"),JS.push("rgb(255,127,0)"),JS.push("rgb(247,129,191)"),JS.push("rgb(153,153,153)"),JS.push("rgb(255,255,51)"),JS.push("rgb(102, 194, 165"),JS.push("rgb(252, 141, 98"),JS.push("rgb(141, 160, 203"),JS.push("rgb(231, 138, 195"),JS.push("rgb(166, 216, 84"),JS.push("rgb(255, 217, 47"),JS.push("rgb(229, 196, 148"),JS.push("rgb(179, 179, 179"),JS.push("rgb( 141, 211, 199"),JS.push("rgb(255, 255, 179"),JS.push("rgb(190, 186, 218"),JS.push("rgb(251, 128, 114"),JS.push("rgb(128, 177, 211"),JS.push("rgb(253, 180, 98"),JS.push("rgb(179, 222, 105"),JS.push("rgb(252, 205, 229"),JS.push("rgb(217, 217, 217"),JS.push("rgb(188, 128, 189"),JS.push("rgb(204, 235, 197"),JS.push("rgb(255, 237, 111");var e_=!hh((function(e){Array.from(e)}));Me({target:"Array",stat:!0,forced:e_},{from:Nl});var t_=function(){function e(t,r){mr(this,e);var n=(new DOMParser).parseFromString(t,"text/xml");this.processRootNode(n,r);var i=n.getElementsByTagName("Resource"),a=n.getElementsByTagName("Track"),o=a&&a.length>0,s=[];this.tracks=s;var c=new Map;Array.from(i).forEach((function(e,t){var r={url:e.getAttribute("path"),indexURL:e.getAttribute("index"),order:t};c.set(r.url,r),o||s.push(r)})),o&&Array.from(a).forEach((function(e){var t=e.getElementsByTagName("Track");if(t&&t.length>0){var r={type:"merged",tracks:[]};r_(e,r),s.push(r),Array.from(t).forEach((function(e){e.processed=!0;var t=e.getAttribute("id"),n=c.get(t);n&&(r.tracks.push(n),r_(e,n),n.autoscale=!1,r.height=n.height)}))}else if(!e.processed){var n=e.getAttribute("id"),i=c.get(n);i&&(s.push(i),r_(e,i))}}))}return yr(e,[{key:"processRootNode",value:function(e,t){var r=e.getElementsByTagName("Session");!r||r.length;var n=r.item(0),i=n.getAttribute("genome"),a=n.getAttribute("locus"),o=n.getAttribute("ucscID");t&&t.hasOwnProperty(i)?this.genome=i:(this.reference={fastaURL:i},o&&(this.reference.id=o)),a&&(this.locus=a)}}]),e}();function r_(e,t){t.name=e.getAttribute("name");var r=e.getAttribute("color");r&&(t.color="rgb("+r+")");var n=e.getAttribute("altColor");r&&(t.altColor="rgb("+n+")");var i=e.getAttribute("height");i&&(t.height=parseInt(i));var a=e.getAttribute("autoScale");a&&(t.autoscale="true"===a);var o=e.getAttribute("autoscaleGroup");o&&(t.autoscaleGroup=o);var s=e.getAttribute("windowFunction");s&&(t.windowFunction=s);var c=e.getAttribute("visibilityWindow")||e.getAttribute("featureVisibilityWindow");c&&(t.visibilityWindow=c);var u=e.getAttribute("indexed");u&&(t.indexed="true"===u);var h=e.getAttribute("normalize");h&&(t.normalize="true"===h);var l=e.getElementsByTagName("DataRange");if(l.length>0){var f=l.item(0);t.min=Number.parseFloat(f.getAttribute("minimum")),t.max=Number.parseFloat(f.getAttribute("maximum")),t.logScale="LOG"===f.getAttribute("type")}}var n_=Cn,i_=function(){function e(){mr(this,e),this.attributes={},this.plinkLoaded=!1}var t;return yr(e,[{key:"loadPlinkFile",value:(t=vr(regeneratorRuntime.mark((function e(t,r){var n,i,a,o,s,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r||(r={}),n=km(r),e.next=4,Lm.loadString(t,n);case 4:i=e.sent,a=n_(i),o=Nr(a);try{for(o.s();!(s=o.n()).done;)c=s.value,u=c.split(" "),this.attributes[u[1]]={familyId:u[0],fatherId:u[2],motherId:u[3],sex:u[4],phenotype:u[5]}}catch(e){o.e(e)}finally{o.f()}return this.plinkLoaded=!0,e.abrupt("return",this);case 10:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"getAttributes",value:function(e){return this.attributes[e]}},{key:"getAttributeNames",value:function(){return this.hasAttributes()?Object.keys(this.attributes[Object.keys(this.attributes)[0]]):[]}},{key:"hasAttributes",value:function(){return Object.keys(this.attributes).length>0}}]),e}();function a_(e,t){return(new i_).loadPlinkFile(e,t)}var o_=function(){function e(t,r,n,i,a){mr(this,e),this.genome=t,this.chr=r,this.start=n,this.initialEnd=i,this.initialStart=n,this.bpPerPixel=a,this.id=gn()}return yr(e,[{key:"calculateEnd",value:function(e){return this.start+this.bpPerPixel*e}},{key:"calculateBPP",value:function(e,t){return(e-this.start)/t}},{key:"set",value:function(e){this.chr=e.chr,this.start=e.start,this.bpPerPixel=e.bpPerPixel}},{key:"toPixels",value:function(e){return e/this.bpPerPixel}},{key:"toBP",value:function(e){return this.bpPerPixel*e}},{key:"shiftPixels",value:function(e,t){var r=this.start;return this.start+=e*this.bpPerPixel,this.clamp(t),r!==this.start}},{key:"clamp",value:function(e){var t=this.genome.getChromosome(this.chr).bpStart||0;if(this.start=Math.max(t,this.start),e){var r=this.genome.getChromosome(this.chr).bpLength-e*this.bpPerPixel;this.start>r&&(this.start=r)}}},{key:"getChromosome",value:function(){return this.genome.getChromosome(this.chr)}},{key:"presentLocus",value:function(e){if("all"===this.chr)return this.chr;var t=_n(Math.floor(this.start)+1),r=_n(Math.round(this.start+this.bpPerPixel*e));return"".concat(this.chr,":").concat(t,"-").concat(r)}}]),e}();function s_(e,t){var r=e.calculateViewportWidth(t.length);return t.map((function(t){e.flanking&&t.gene&&(t.start=Math.max(0,t.start-e.flanking),t.end+=e.flanking);var n=e.genome.getChromosome(t.chr);Sm(n.bpLength,t,e.minimumBases());var i=new o_(e.genome,t.chr,t.start,t.end,(t.end-t.start)/r);return i.locusSearchString=t.locusSearchString,(t.gene||t.snp)&&(i.selection=new QS(t.gene,t.snp)),i}))}var c_={A:"rgb(  0, 200,   0)",C:"rgb(  0,0,200)",T:"rgb(255,0,0)",G:"rgb(209,113,  5)",N:"rgb(80,80,80)"};function u_(e,t){return h_.apply(this,arguments)}function h_(){return(h_=vr(regeneratorRuntime.mark((function e(t,r){var n,i,a,o,s,c,u,h,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==r&&""!==r.trim()){e.next=2;break}return e.abrupt("return");case 2:(r&&"all"===r.trim().toLowerCase()||"*"===r)&&(r="all"),n=r.split(" "),i=t.searchConfig,a=[],o=function(){var e=vr(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=l_(t,r))||(n=t.genome.featureDB[r.toUpperCase()]),n){e.next=6;break}return e.next=5,f_(t,r,i);case 5:n=e.sent;case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=Nr(n),e.prev=8,s.s();case 10:if((c=s.n()).done){e.next=18;break}return u=c.value,e.next=14,o(u);case 14:(h=e.sent)&&(h.locusSearchString=u,a.push(h));case 16:e.next=10;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),s.e(e.t0);case 23:return e.prev=23,s.f(),e.finish(23);case 26:if(0!==a.length){e.next=31;break}return e.next=29,o(r);case 29:(l=e.sent)&&(l.locusSearchString=r,a.push(l));case 31:return e.abrupt("return",0===a.length?void 0:a);case 32:case"end":return e.stop()}}),e,null,[[8,20,23,26]])})))).apply(this,arguments)}function l_(e,t){var r=t.split(":"),n=r[0];if("all"===n&&e.genome.getChromosome(n))return{chr:n,start:0,end:e.genome.getChromosome(n).bpLength};if(void 0!==e.genome.getChromosome(n)){var i={chr:e.genome.getChromosomeName(n),start:0,end:e.genome.getChromosome(n).bpLength};if(r.length>1){var a,o=r[1].split("-");if(o.length>2)return;if(a=o[0].replace(/,/g,""),isNaN(a))return;if(i.start=parseInt(a,10)-1,i.end=i.start+1,1===o.length&&(i.start-=20,i.end+=20),2===o.length){if(a=o[1].replace(/,/g,""),isNaN(a))return;i.end=parseInt(a,10)}}return i}}function f_(e,t,r){return p_.apply(this,arguments)}function p_(){return(p_=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=n.url.replace("$FEATURE$",r.toUpperCase())).indexOf("$GENOME$")>-1&&(i=i.replace("$GENOME$",t.genome.id?t.genome.id:"hg19")),e.next=4,Lm.loadString(i);case 4:return a=e.sent,(o=d_(t,a,n))&&(o.locusSearchString=r),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d_(e,t,r){var n;if(n="plain"===r.type?function(e,t){var r=[],n=[];return Cn(t).forEach((function(e){""===e||r.push(e)})),r.forEach((function(t){var r,i,a,o,s=t.split("\t");s.length>=3&&(a=(i=s[1].split(":"))[1].split("-"),r=s[2].trim(),o={gene:s[0],chromosome:e.genome.getChromosomeName(i[0].trim()),start:parseInt(a[0].replace(/,/g,"")),end:parseInt(a[1].replace(/,/g,"")),type:"gtex"===r?"snp":"gene"},n.push(o))})),n}(e,t):JSON.parse(t),r.resultsField&&(n=n[r.resultsField]),n&&0!==n.length){var i,a=r.chromosomeField||"chromosome",o=r.startField||"start",s=r.endField||"end",c=r.coords||1;(i=Array.isArray(n)?n[0]:n).hasOwnProperty(a)&&i.hasOwnProperty(o)||console.error("Search service results must include chromosome and start fields: "+i);var u=i[a],h=e.genome.getChromosome(u);if(!h)return;var l=h.name,f=i[o]-c,p=i[s];void 0===p&&(p=f+1);var d={chr:l,start:f,end:p},g=i.type?i.type:"gene";return r.geneField&&"gene"===g&&(d.gene=i[r.geneField]),r.snpField&&"snp"===g&&(d.snp=i[r.snpField]),d}}var g_=function(){function e(t,r){mr(this,e),this.config=t,this.guid=gn(),this.namespace=".browser_"+this.guid,this.parent=r,this.$root=Su("<div>",{class:"igv-root"}),Su(r).append(this.$root);var n=Su("<div>",{class:"igv-track-container"});this.$root.append(n),nn.init(this.$root.get(0)),this.trackContainer=n.get(0),this.initialize(t),this.trackViews=[],this.trackLabelsVisible=!0,this.isCenterGuideVisible=!1,this.cursorGuideVisible=!1,this.constants={dragThreshold:3,scrollThreshold:5,defaultColor:"rgb(0,0,150)",doubleClickDelay:t.doubleClickDelay||500},this.eventHandlers={},this.$spinner=Su("<div>",{class:"igv-track-container-spinner"}),n.append(this.$spinner),this.$spinner.append(db("spinner")),this.stopSpinner(),this.addMouseHandlers()}var t,r,n,i,a,o,s,c,u,h,l,f,p;return yr(e,[{key:"initialize",value:function(e){e.gtex&&(Dk.gtexLoaded=!0),this.flanking=e.flanking,this.crossDomainProxy=e.crossDomainProxy,this.formats=e.formats,this.trackDefaults=e.trackDefaults,this.nucleotideColors=e.nucleotideColors||c_;for(var t=0,r=Object.keys(this.nucleotideColors);t<r.length;t++){var n=r[t];this.nucleotideColors[n.toLowerCase()]=this.nucleotideColors[n]}e.search?this.searchConfig={type:"json",url:e.search.url,coords:void 0===e.search.coords?1:e.search.coords,chromosomeField:e.search.chromosomeField||"chromosome",startField:e.search.startField||"start",endField:e.search.endField||"end",geneField:e.search.geneField||"gene",snpField:e.search.snpField||"snp",resultsField:e.search.resultsField}:(e.reference&&e.reference.id?e.reference.id:e.genome?e.genome:"hg19",this.searchConfig={type:"plain",url:"https://igv.org/genomes/locus.php?genome=$GENOME$&name=$FEATURE$",coords:0,chromosomeField:"chromosome",startField:"start",endField:"end",geneField:"gene",snpField:"snp"})}},{key:"startSpinner",value:function(){var e=this.$spinner;e&&(e.addClass("igv-fa5-spin"),e.show())}},{key:"stopSpinner",value:function(){var e=this.$spinner;e&&(e.hide(),e.removeClass("igv-fa5-spin"))}},{key:"isMultiLocusMode",value:function(){return this.referenceFrameList&&this.referenceFrameList.length>1}},{key:"addTrackToFactory",value:function(e,t){YS.addTrack(e,t)}},{key:"isMultiLocusWholeGenomeView",value:function(){if(void 0===this.referenceFrameList||1===this.referenceFrameList.length)return!1;var e,t=Nr(this.referenceFrameList);try{for(t.s();!(e=t.n()).done;){if("all"===e.value.chr.toLowerCase())return!0}}catch(e){t.e(e)}finally{t.f()}return!1}},{key:"toSVG",value:function(){var e,t=this.trackContainer.getBoundingClientRect(),r=t.x,n=t.y,i=t.width,a=t.height,o=this.trackViews[0].$viewportContainer.get(0).getBoundingClientRect().x,s=i+5*(this.referenceFrameList.length-1),c=a,u=new ld({width:s,height:8e3,backdropColor:"white",multiLocusGap:5,viewbox:{x:0,y:0,width:s,height:8e3}}),h=o-r,l=Nr(this.trackViews);try{for(l.s();!(e=l.n()).done;){e.value.renderSVGContext(u,{deltaX:h,deltaY:-n})}}catch(e){l.e(e)}finally{l.f()}return u.setHeight(c),u.getSerializedSvg(!0)}},{key:"saveSVGtoFile",value:function(e){var t=this.toSVG();if(e.$container){var r=this.trackContainer.getBoundingClientRect();e.$container.empty(),e.$container.width(r.width),e.$container.append(t)}Gn(e.filename||"igv.svg",URL.createObjectURL(new Blob([t],{type:"application/octet-stream"})))}},{key:"loadSession",value:(p=vr(regeneratorRuntime.mark((function t(r){var n,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=function(){return(a=vr(regeneratorRuntime.mark((function t(r){var n,i,a,o,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.url||r.file,!r.url||!r.url.startsWith("blob:")&&!r.url.startsWith("data:")){t.next=6;break}return i=e.uncompressSession(r.url),t.abrupt("return",JSON.parse(i));case 6:if(a=r.filename){t.next=16;break}if(!r.url){t.next=14;break}return t.next=11,Cm(r.url);case 11:t.t0=t.sent,t.next=15;break;case 14:t.t0=r.file.name;case 15:a=t.t0;case 16:if(!a.endsWith(".xml")){t.next=24;break}return o=ub.KNOWN_GENOMES,t.next=20,Lm.loadString(n);case 20:return s=t.sent,t.abrupt("return",new t_(s,o));case 24:if(!a.endsWith(".json")){t.next=28;break}return t.abrupt("return",Lm.loadJson(n));case 28:return t.abrupt("return",void 0);case 29:case"end":return t.stop()}}),t)})))).apply(this,arguments)},i=function(e){return a.apply(this,arguments)},this.roi=[],!r.url&&!r.file){t.next=9;break}return t.next=6,i(r);case 6:n=t.sent,t.next=10;break;case 9:n=r;case 10:return t.abrupt("return",this.loadSessionObject(n));case 11:case"end":return t.stop()}}),t,this)}))),function(e){return p.apply(this,arguments)})},{key:"loadSessionObject",value:(f=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s,c,u,h,l,f,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.removeAllTracks(),e.next=3,this.loadGenome(t.reference||t.genome,t.locus,!1);case 3:if(r=e.sent,void 0===this.ideogram&&!1!==this.config.showIdeogram&&(this.ideogram=new ZS(this),this.addTrack(this.ideogram)),void 0===this.rulerTrack&&!1!==this.config.showRuler&&(this.rulerTrack=new jb(this),this.addTrack(this.rulerTrack)),t.gtexSelections){n=Nr(this.referenceFrameList);try{for(n.s();!(i=n.n()).done;)for(a=i.value,o=0,s=Object.keys(t.gtexSelections);o<s.length;o++)c=s[o],u=t.gtexSelections[c].gene,h=t.gtexSelections[c].snp,a.selection=new QS(u,h)}catch(e){n.e(e)}finally{n.f()}}if(t.roi){this.roi=[],l=Nr(t.roi);try{for(l.s();!(f=l.n()).done;)p=f.value,this.roi.push(new XS(p,r))}catch(e){l.e(e)}finally{l.f()}}return 0===(d=t.tracks||[]).filter((function(e){return"sequence"===e.type})).length&&!1!==this.config.showSequence&&d.push({type:"sequence",order:Yk}),e.next=13,this.loadTrackList(d);case 13:this.ideogram&&this.ideogram.trackView.updateViews(),this.rulerTrack&&this.rulerTrack.trackView.updateViews(),this.updateLocusSearchWidget(this.referenceFrameList),this.windowSizePanel.updatePanel(this.referenceFrameList);case 17:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"loadGenome",value:function(){var e=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a,o,s,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e,t){return e?Array.isArray(e)?e.join(" "):e:t.getHomeChromosomeName()},c=function(){return(c=vr(regeneratorRuntime.mark((function e(t){var r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Sn(t)?r=t:t.genome?r=t.genome:void 0!==t.id&&void 0===t.fastaURL&&(r=t.id),!r){e.next=8;break}return n=ub.KNOWN_GENOMES,(i=n[r])||nn.presentAlert(new Error("Unknown genome id: ".concat(r)),void 0),e.abrupt("return",i);case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)},s=function(e){return c.apply(this,arguments)},Sn(t)&&t.startsWith("{"))try{t=JSON.parse(t)}catch(e){}return e.next=6,s.call(this,t);case 6:return i=e.sent,e.next=9,ub.loadGenome(i);case 9:return a=e.sent,o=this.genome&&this.genome.id!==a.id,this.genome=a,this.$current_genome.text(a.id||""),this.$current_genome.attr("title",a.id||""),this.chromosomeSelectWidget.update(a),o&&this.removeAllTracks(),this.genome=a,e.prev=17,e.next=20,this.search(u(r,a),!0);case 20:this.referenceFrameList=e.sent,e.next=30;break;case 23:return e.prev=23,e.t0=e.catch(17),e.t0.message(),nn.presentAlert(new Error("Unrecognized locus ".concat(r)),void 0),e.next=29,this.search(this.genome.getHomeChromosomeName());case 29:this.referenceFrameList=e.sent;case 30:if(!i.tracks){e.next=33;break}return e.next=33,this.loadTrackList(i.tracks);case 33:return!1!==n&&this.updateViews(),e.abrupt("return",this.genome);case 35:case"end":return e.stop()}}),e,this,[[17,23]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"updateUIWithReferenceFrameListChange",value:function(e){var t=this.isMultiLocusWholeGenomeView()||ub.isWholeGenomeView(e[0].chr);t||this.isMultiLocusMode()?this.centerGuide.forcedHide():this.centerGuide.forcedShow(),this.navbarManager.navbarDidResize(this.$navigation.width(),t),v_(this.trackViews,this.trackLabelsVisible)}},{key:"setTrackLabelName",value:function(e,t){e.viewports.forEach((function(e){e.setTrackLabel(t)}))}},{key:"hideTrackLabels",value:function(){this.trackLabelsVisible=!1,v_(this.trackViews,this.trackLabelsVisible)}},{key:"showTrackLabels",value:function(){this.trackLabelsVisible=!0,v_(this.trackViews,this.trackLabelsVisible)}},{key:"hideCursorGuide",value:function(){this.cursorGuide.$guide.hide(),this.cursorGuideVisible=!1}},{key:"showCursorGuide",value:function(){this.cursorGuide.$guide.show(),this.cursorGuideVisible=!0}},{key:"setCustomCursorGuideMouseHandler",value:function(e){this.cursorGuide.customMouseHandler=e}},{key:"hideCenterGuide",value:function(){this.centerGuide.$container.hide(),this.isCenterGuideVisible=!1}},{key:"showCenterGuide",value:function(){this.centerGuide.$container.show(),this.centerGuide.resize(),this.isCenterGuideVisible=!0}},{key:"loadTrackList",value:(l=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,this.startSpinner(),r=[],n=Nr(t);try{for(n.s();!(i=n.n()).done;)a=i.value,r.push(this.loadTrack(a,!0))}catch(e){n.e(e)}finally{n.f()}return e.next=7,Promise.all(r);case 7:return o=e.sent,(s=this.trackViews.filter((function(e){return e.track.autoscaleGroup}))).length>0&&this.updateViews(this.referenceFrameList[0],s),e.abrupt("return",o);case 11:return e.prev=11,this.stopSpinner(),e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[0,,11,14]])}))),function(e){return l.apply(this,arguments)})},{key:"loadROI",value:(h=vr(regeneratorRuntime.mark((function e(t){var r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.roi||(this.roi=[]),Array.isArray(t)){r=Nr(t);try{for(r.s();!(n=r.n()).done;)i=n.value,this.roi.push(new XS(i,this.genome))}catch(e){r.e(e)}finally{r.f()}}else this.roi.push(new XS(t,this.genome));return e.next=4,this.updateViews(void 0,void 0,!0);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"removeROI",value:function(e){for(var t=0;t<this.roi.length;t++)if(this.roi[t].name===e.name){this.roi.splice(t,1);break}var r,n=Nr(this.trackViews);try{for(n.s();!(r=n.n()).done;){r.value.updateViews(void 0,void 0,!0)}}catch(e){n.e(e)}finally{n.f()}}},{key:"clearROIs",value:function(){this.roi=[];var e,t=Nr(this.trackViews);try{for(t.s();!(e=t.n()).done;){e.value.updateViews(void 0,void 0,!0)}}catch(e){t.e(e)}finally{t.f()}}},{key:"loadTrack",value:(u=vr(regeneratorRuntime.mark((function e(t,r){var n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sn(t)&&(t=JSON.parse(t)),e.prev=1,r||this.startSpinner(),e.next=5,this.createTrack(t);case 5:if(void 0!==(n=e.sent)){e.next=9;break}return nn.presentAlert(new Error("Unknown file type: ".concat(t.url||t)),void 0),e.abrupt("return",n);case 9:if(void 0===n.order&&(n.order=this.trackViews.length),"function"!=typeof n.postInit){e.next=13;break}return e.next=13,n.postInit();case 13:if(!t.sync){e.next=18;break}return e.next=16,this.addTrack(n);case 16:e.next=19;break;case 18:this.addTrack(n);case 19:return e.abrupt("return",n);case 22:e.prev=22,e.t0=e.catch(1),i={401:"Access unauthorized",403:"Access forbidden",404:"Not found"},console.error(e.t0),a=e.t0.message||e.t0.error||e.t0.toString(),i.hasOwnProperty(a)&&(a=i[a]),a+=": "+t.url,nn.presentAlert(new Error(a),void 0);case 30:return e.prev=30,r||this.stopSpinner(),e.finish(30);case 33:case"end":return e.stop()}}),e,this,[[1,22,30,33]])}))),function(e,t){return u.apply(this,arguments)})},{key:"createTrack",value:(c=vr(regeneratorRuntime.mark((function e(t){var r,n,i,a,o,s,c,u,h,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn(t.url);case 2:if(Sn(r=e.sent)&&(r=r.trim()),!r){e.next=15;break}if(!t.format){e.next=9;break}t.format=t.format.toLowerCase(),e.next=15;break;case 9:if(n=t.filename){e.next=14;break}return e.next=13,Cm(r);case 13:n=e.sent;case 14:t.format=Yn(n);case 15:if(!(i=t.type)||"bedtype"===i){e.next=20;break}i=i.toLowerCase(),e.next=29;break;case 20:if("bedtype"!==(i=_m(t))){e.next=29;break}return a=Tk(t,this.genome),t._featureSource=a,e.next=26,a.trackType();case 26:o=e.sent,i=o||"annotation",t.type=i;case 29:if(this.trackDefaults&&i&&(s=this.trackDefaults[i]))for(c in s)s.hasOwnProperty(c)&&void 0===t[c]&&(t[c]=s[c]);e.t0=i,e.next="annotation"===e.t0||"genes"===e.t0||"fusionjuncspan"===e.t0||"junctions"===e.t0||"splicejunctions"===e.t0||"snp"===e.t0?33:35;break;case 33:return u=YS.getTrack("feature")(t,this),e.abrupt("break",36);case 35:u=YS.tracks.hasOwnProperty(i)?YS.getTrack(i)(t,this):void 0;case 36:if(t.roi&&u){u.roi=[],h=Nr(t.roi);try{for(h.s();!(l=h.n()).done;)f=l.value,u.roi.push(new XS(f,this.genome))}catch(e){h.e(e)}finally{h.f()}}return e.abrupt("return",u);case 38:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"addTrack",value:(s=vr(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new Wb(this,Su(this.trackContainer),t),this.trackViews.push(r),v_(this.trackViews,this.trackLabelsVisible),this.reorderTracks(),t.autoscaleGroup){e.next=6;break}return e.abrupt("return",r.updateViews());case 6:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"reorderTracks",value:function(){this.trackViews.sort((function(e,t){var r=function(e){return"ideogram"===e.track.id?1:"ruler"===e.track.id?2:3},n=r(e),i=r(t);return n===i?(e.track.order||0)-(t.track.order||0):n-i})),Su(this.trackContainer).children("igv-track").detach();var e,t=Nr(this.trackViews);try{for(t.s();!(e=t.n()).done;){var r=e.value;this.trackContainer.appendChild(r.trackDiv)}}catch(e){t.e(e)}finally{t.f()}}},{key:"removeTrackByName",value:function(e){var t,r=Nr(this.trackViews.slice());try{for(r.s();!(t=r.n()).done;){var n=t.value;e===n.track.name&&this.removeTrack(n.track)}}catch(e){r.e(e)}finally{r.f()}}},{key:"removeTrack",value:function(e){for(var t,r=0;r<this.trackViews.length;r++)if(e===this.trackViews[r].track){t=this.trackViews[r];break}t&&(this.trackViews.splice(r,1),Su(t.trackDiv).remove(),this.fireEvent("trackremoved",[t.track]),t.dispose())}},{key:"removeAllTracks",value:function(){var e,t=[],r=Nr(this.trackViews);try{for(r.s();!(e=r.n()).done;){var n=e.value,i=n.track.id;"ruler"!==i&&"ideogram"!==i?(this.trackContainer.removeChild(n.trackDiv),this.fireEvent("trackremoved",[n.track]),n.dispose()):t.push(n)}}catch(e){r.e(e)}finally{r.f()}this.trackViews=t}},{key:"findTracks",value:function(e,t){var r="function"==typeof e?function(t){return e(t.track)}:function(r){return t===r.track[e]};return this.trackViews.filter(r).map((function(e){return e.track}))}},{key:"setTrackHeight",value:function(e){this.trackHeight=e,this.trackViews.forEach((function(t){t.setTrackHeight(e)}))}},{key:"visibilityChange",value:function(){var e=vr(regeneratorRuntime.mark((function e(){var t,r,n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.referenceFrameList.find((function(e){return e.bpPerPixel<0}))){t=this.calculateViewportWidth(this.referenceFrameList.length),r=Nr(this.referenceFrameList);try{for(r.s();!(n=r.n()).done;)(i=n.value).bpPerPixel=(i.initialEnd-i.start)/t}catch(e){r.e(e)}finally{r.f()}}return this.referenceFrameList&&((a=this.isMultiLocusWholeGenomeView()||ub.isWholeGenomeView(this.referenceFrameList[0].chr))||this.isMultiLocusMode()?this.centerGuide.forcedHide():this.centerGuide.forcedShow(),this.navbarManager.navbarDidResize(this.$navigation.width(),a)),e.next=5,this.resize();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resize",value:(o=vr(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,s,c,u,h,l,f,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.calculateViewportWidth(this.referenceFrameList.length),r=Nr(this.referenceFrameList);try{for(r.s();!(n=r.n()).done;)i=n.value,a=i.toBP(t),o=i.genome.getChromosome(i.chr),s=o.bpLength,a>s&&(i.bpPerPixel=s/t)}catch(e){r.e(e)}finally{r.f()}c=Nr(this.trackViews);try{for(c.s();!(u=c.n()).done;)u.value.resize(t)}catch(e){c.e(e)}finally{c.f()}return this.centerGuide&&this.centerGuide.resize(),this.referenceFrameList&&this.referenceFrameList.length>0&&(this.updateLocusSearchWidget(this.referenceFrameList),this.windowSizePanel.updatePanel(this.referenceFrameList)),e.next=9,this.updateViews();case 9:h=Nr(this.trackViews);try{for(h.s();!(l=h.n()).done;)f=l.value,p=f.viewports,d=f.$viewportContainer,Zb(p,d)}catch(e){h.e(e)}finally{h.f()}case 11:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"updateViews",value:(a=vr(regeneratorRuntime.mark((function e(t,r,n){var i,a,o,s,c,u,h,l,f,p,d,g,v,m,b,y,w,k,x,S,_,C,R,E,A,T,I,L,M,F,D;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r||(r=this.trackViews),!t&&this.referenceFrameList&&1===this.referenceFrameList.length&&(t=this.referenceFrameList[0]),t&&(this.referenceFrameList.length>1?(this.updateLocusSearchWidget(this.referenceFrameList),this.windowSizePanel.updatePanel(this.referenceFrameList)):(this.updateLocusSearchWidget([t]),this.windowSizePanel.updatePanel([t]))),this.centerGuide&&this.centerGuide.repaint(),!this.dragObject){e.next=24;break}i=Nr(r),e.prev=6,i.s();case 8:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=12,o.updateViews(n);case 12:e.next=8;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=73;break;case 24:s={},c=[],u=Nr(r);try{for(u.s();!(h=u.n()).done;)l=h.value,(f=l.track.autoscaleGroup)?((p=s[f])||(p=[],s[f]=p),p.push(l)):c.push(l)}catch(e){u.e(e)}finally{u.f()}d=Object.keys(s),g=0,v=d;case 30:if(!(g<v.length)){e.next=65;break}m=v[g],b=s[m],y=[],w=Nr(b);try{for(w.s();!(k=w.n()).done;)x=k.value,y.push(x.getInViewFeatures())}catch(e){w.e(e)}finally{w.f()}return e.next=38,Promise.all(y);case 38:S=e.sent,_=[],R=Nr(S);try{for(R.s();!(E=R.n()).done;)A=E.value,_=_.concat(A)}catch(e){R.e(e)}finally{R.f()}C=xm(_),T=Nr(b),e.prev=44,T.s();case 46:if((I=T.n()).done){e.next=54;break}return(L=I.value).track.dataRange=C,L.track.autoscale=!1,e.next=52,L.updateViews(n);case 52:e.next=46;break;case 54:e.next=59;break;case 56:e.prev=56,e.t1=e.catch(44),T.e(e.t1);case 59:return e.prev=59,T.f(),e.finish(59);case 62:g++,e.next=30;break;case 65:M=0,F=c;case 66:if(!(M<F.length)){e.next=73;break}return D=F[M],e.next=70,D.updateViews(n);case 70:M++,e.next=66;break;case 73:case"end":return e.stop()}}),e,this,[[6,16,19,22],[44,56,59,62]])}))),function(e,t,r){return a.apply(this,arguments)})},{key:"loadInProgress",value:function(){var e;for(e=0;e<this.trackViews.length;e++)if(this.trackViews[e].isLoading())return!0;return!1}},{key:"updateLocusSearchWidget",value:function(e){if(e.length>1)return this.$searchInput.val(""),void this.chromosomeSelectWidget.$select.val("");this.rulerTrack&&this.rulerTrack.updateLocusLabel();var t=e[0];if(t.locusSearchString&&"all"===t.locusSearchString.toLowerCase())this.$searchInput.val(t.locusSearchString),this.chromosomeSelectWidget.$select.val("all");else{var r,n,i;if(this.chromosomeSelectWidget.$select.val(t.chr),this.$searchInput){var a=t.start+t.bpPerPixel*this.viewportWidth();if(this.genome){var o=this.genome.getChromosome(t.chr);o&&(a=Math.min(a,o.bpLength))}r=_n(Math.floor(t.start+1)),n=_n(Math.floor(a)),i=t.chr+":"+r+"-"+n,this.$searchInput.val(i)}this.fireEvent("locuschange",[{chr:t.chr,start:r,end:n,label:i}])}}},{key:"viewportContainerWidth",value:function(){var e;this.trackViews&&this.trackViews.length>0?e=this.trackViews[0].$viewportContainer.width():e=this.trackContainer.getBoundingClientRect().width-112;return e}},{key:"calculateViewportWidth",value:function(e){return 1===e?this.viewportContainerWidth():Math.floor((this.viewportContainerWidth()-5*(e-1))/e)}},{key:"viewportWidth",value:function(){return this.trackViews[0].viewports[0].$viewport.width()}},{key:"minimumBases",value:function(){return this.config.minimumBases}},{key:"updateZoomSlider",value:function(e){var t=this.trackViews[0].viewports[0],r=t.referenceFrame,n=t.$viewport.width()*r.bpPerPixel,i=r.getChromosome().bpLength,a=(i-n)/(i-this.minimumBases()),o=Math.round(100*a);e.val(o)}},{key:"zoom",value:function(e){this.zoomWithScaleFactor(e)}},{key:"zoomIn",value:function(){this.zoomWithScaleFactor(.5)}},{key:"zoomOut",value:function(){this.zoomWithScaleFactor(2)}},{key:"zoomWithRangePercentage",value:function(e){if(!this.loadInProgress()){var t,r=Nr(this.trackViews[0].viewports);try{for(r.s();!(t=r.n()).done;){var n=t.value,i=n.referenceFrame,a=i.start+i.toBP(n.$viewport.width()/2),o=i.getChromosome(),s=u((o.bpLength-o.bpStart)/n.$viewport.width(),this.minimumBases()/n.$viewport.width(),e),c=s*n.$viewport.width();function u(e,t,r){return(1-r)*e+r*t}i.start=a-c/2,i.bpPerPixel=s,i.clamp(n.$viewport.width()),this.updateViews(n.referenceFrame)}}catch(e){r.e(e)}finally{r.f()}}}},{key:"zoomWithScaleFactor",value:function(e,t,r){var n,i=Nr(r?[r]:this.trackViews[0].viewports);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.referenceFrame,s=o.getChromosome(),c=o.start,u=o.bpPerPixel,h=s.bpLength-s.bpStart,l=e<1?this.minimumBases()/a.$viewport.width():h/a.$viewport.width(),f=void 0===t?o.start+o.toBP(a.$viewport.width()/2):t,p=void 0,d=(p=e<1?Math.max(o.bpPerPixel*e,l):Math.min(o.bpPerPixel*e,l))*a.$viewport.width();o.start=f-d/2,o.bpPerPixel=p,o.clamp(a.$viewport.width()),(c!==o.start||u!==o.bpPerPixel)&&this.updateViews(a.referenceFrame)}}catch(e){i.e(e)}finally{i.f()}}},{key:"presentSplitScreenMultiLocusPanel",value:function(e,t){var r=this.calculateViewportWidth(1+this.referenceFrameList.length);!function(e,t,r,n){var i=(r+(r+n))/2;e.start=i-e.bpPerPixel*(t/2),e.initialEnd=e.start+e.bpPerPixel*t,e.locusSearchString=e.presentLocus(t)}(t,r,e.start,e.lengthOnRef);var n=this.genome.getChromosomeName(e.mate.chr),i=function(e,t,r,n,i,a){var o=(i+(i+a))/2-r*(n/2),s=new o_(e,t,o,o+r*n,r);return s.locusSearchString=s.presentLocus(n),s}(this.genome,n,t.bpPerPixel,r,e.mate.position,e.lengthOnRef);this.addMultiLocusPanelWithReferenceFrameIndex(i,1+this.referenceFrameList.indexOf(t),r)}},{key:"selectMultiLocusPanelWithReferenceFrame",value:function(e){var t=this;this.referenceFrameList.filter((function(t){return e!==t})).forEach((function(e){return t.removeMultiLocusPanelWithReferenceFrame(e,!1)})),this.resize()}},{key:"removeMultiLocusPanelWithReferenceFrame",value:function(e,t){var r,n=Nr(this.trackViews);try{for(n.s();!(r=n.n()).done;){r.value.removeViewportForReferenceFrame(e)}}catch(e){n.e(e)}finally{n.f()}var i=this.referenceFrameList.indexOf(e);if(this.referenceFrameList.splice(i,1),this.updateUIWithReferenceFrameListChange(this.referenceFrameList),!0===t)this.resize();else{var a,o=Nr(this.trackViews);try{for(o.s();!(a=o.n()).done;){var s=a.value;Zb(s.viewports,s.$viewportContainer)}}catch(e){o.e(e)}finally{o.f()}}}},{key:"addMultiLocusPanelWithReferenceFrameIndex",value:function(e,t,r){if(t===this.referenceFrameList.length){this.referenceFrameList.push(e);var n,i=Nr(this.trackViews);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=Tb(a,this.referenceFrameList,t,r);a.viewports.push(o)}}catch(e){i.e(e)}finally{i.f()}}else{this.referenceFrameList.splice(t,0,e);var s,c=Nr(this.trackViews);try{for(c.s();!(s=c.n()).done;){var u=s.value,h=Tb(u,this.referenceFrameList,t,r);u.viewports.splice(t,0,h),h.$viewport.detach().insertAfter(u.viewports[t-1].$viewport)}}catch(e){c.e(e)}finally{c.f()}}var l,f=Nr(this.trackViews);try{for(f.s();!(l=f.n()).done;){l.value.updateViewportForMultiLocus()}}catch(e){f.e(e)}finally{f.f()}this.rulerTrack&&this.rulerTrack.updateLocusLabel(),this.updateUIWithReferenceFrameListChange(this.referenceFrameList),this.resize()}},{key:"getViewportWithGUID",value:function(e){var t,r=void 0,n=Nr(this.trackViews);try{for(n.s();!(t=n.n()).done;){var i,a=Nr(t.value.viewports);try{for(a.s();!(i=a.n()).done;){var o=i.value;e===o.guid&&(r=o)}}catch(e){a.e(e)}finally{a.f()}}}catch(e){n.e(e)}finally{n.f()}return r}},{key:"goto",value:(i=vr(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.search(t+":"+r+"-"+n));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return i.apply(this,arguments)})},{key:"search",value:(n=vr(regeneratorRuntime.mark((function e(t,r){var n,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u_(this,t);case 2:if(n=e.sent,e.t0=n,!e.t0){e.next=9;break}return e.next=7,n;case 7:e.t1=e.sent.length,e.t0=e.t1>0;case 9:if(!e.t0){e.next=20;break}i=s_(this,n),this.referenceFrameList=i,Gb(this.trackViews),a=Nr(this.trackViews);try{for(a.s();!(o=a.n()).done;)s=o.value,$b(this,i,s)}catch(e){a.e(e)}finally{a.f()}return this.updateUIWithReferenceFrameListChange(i),r||this.updateViews(),e.abrupt("return",i);case 20:throw new Error("Unrecognized locus ".concat(t));case 21:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"loadSampleInformation",value:(r=vr(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t,t instanceof File&&(r=t.name),"fam"!==r.substr(r.lastIndexOf(".")+1)){e.next=7;break}return e.next=6,a_(t);case 6:this.sampleInformation=e.sent;case 7:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"on",value:function(e,t){this.eventHandlers[e]||(this.eventHandlers[e]=[]),this.eventHandlers[e].push(t)}},{key:"un",value:function(e,t){if(this.eventHandlers[e]){var r=this.eventHandlers[e].indexOf(t);-1!==r&&this.eventHandlers[e].splice(r,1)}}},{key:"off",value:function(e,t){if(e)if(t){var r=this.eventHandlers[e].indexOf(t);-1!==r&&this.eventHandlers[e].splice(r,1)}else this.eventHandlers[e]=[];else this.eventHandlers={}}},{key:"fireEvent",value:function(e,t,r){var n,i=this.eventHandlers[e];if(void 0!==i&&0!==i.length)return n=r||window,i.map((function(e){return e.apply(n,t)}))[0]}},{key:"dispose",value:function(){Su(window).off(this.namespace),Su(document).off(this.namespace),this.eventHandlers=void 0,this.trackViews.forEach((function(e){e.dispose()}))}},{key:"toJSON",value:function(){var e={version:"2.7.4"};if(e.reference=this.genome.toJSON(),Wn(e.reference.fastaURL))throw new Error("Error. Sessions cannot include local file references ".concat(e.reference.fastaURL.name,"."));if(Wn(e.reference.indexURL))throw new Error("Error. Sessions cannot include local file references ".concat(e.reference.indexURL.name,"."));var t,r=[],n={},i=Nr(this.trackViews[0].viewports);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=a.referenceFrame,s=a.$viewport[0].clientWidth,c=o.presentLocus(s);if(r.push(c),o.selection){var u={gene:o.selection.gene,snp:o.selection.snp};n[c]=u}}}catch(e){i.e(e)}finally{i.f()}e.locus=1===r.length?r[0]:r,Object.getOwnPropertyNames(n).length>0&&(e.gtexSelections=n);var h,l=[],f=[],p=Nr(this.trackViews);try{for(p.s();!(h=p.n()).done;){var d=h.value.track;try{var g=void 0;(g="function"==typeof d.getState?d.getState():d.config)&&(g.browser&&delete g.browser,g.order=d.order,l.push(g))}catch(w){f.push(w)}}}catch(e){p.e(e)}finally{p.f()}if(f.length>0){var v,m=1,b="Errors encountered saving session:",y=Nr(f);try{for(y.s();!(v=y.n()).done;){var w=v.value;b+=" (".concat(m++,") ").concat(w.toString(),".")}}catch(e){y.e(e)}finally{y.f()}throw Error(b)}if(l.filter((function(e){e.url&&Wn(e.url)})).length>0)throw new Error("Error. Sessions cannot include local file references.");return e.tracks=l,e}},{key:"compressedSession",value:function(){return function(e){const t=[];for(var r=0;r<e.length;r++)t.push(e.charCodeAt(r));const n=new wn.RawDeflate(t).compress(),i=String.fromCharCode.apply(null,n);return xn(i).replace(/\+/g,".").replace(/\//g,"_").replace(/=/g,"-")}(JSON.stringify(this.toJSON()))}},{key:"sessionURL",value:function(){var e=window.location.href.slice(),t=e.indexOf("?");return(t>0?e.substring(0,t):e)+"?sessionURL=blob:"+this.compressedSession()}},{key:"currentLoci",value:function(){var e,t=[],r=Nr(this.trackViews[0].viewports);try{for(r.s();!(e=r.n()).done;){var n=e.value,i=n.referenceFrame,a=n.$viewport[0].clientWidth,o=i.presentLocus(a);t.push(o)}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"mouseDownOnViewport",value:function(e,t){var r;r=dn(e),this.vpMouseDown={viewport:t,lastMouseX:r.x,mouseDownX:r.x,lastMouseY:r.y,mouseDownY:r.y,referenceFrame:t.referenceFrame}}},{key:"cancelTrackPan",value:function(){var e=this.dragObject;this.dragObject=void 0,this.isScrolling=!1,this.vpMouseDown=void 0,e&&e.viewport.referenceFrame.start!==e.start&&(this.updateViews(),this.fireEvent("trackdragend"))}},{key:"startTrackDrag",value:function(e){this.dragTrack=e}},{key:"updateTrackDrag",value:function(e){if(e&&this.dragTrack){var t=this.dragTrack,r=this.trackViews.indexOf(e),n=this.trackViews.indexOf(t),i=this.trackViews;i[r]=t,i[n]=e;var a=this.trackViews[r].track.order;this.trackViews[n].track.order=a;var o=i.length,s=a;if(r<n)for(var c=r+1;c<o;c++){var u=i[c].track;if(!(u.order<=s))break;u.order=Math.min(Number.MAX_SAFE_INTEGER,s+1),s=u.order}else for(var h=r-1;h>0;h--){var l=i[h].track;if(!(l.order>=s))break;l.order=Math.max(-Number.MAX_SAFE_INTEGER,s-1),s=l.order}this.reorderTracks()}}},{key:"endTrackDrag",value:function(){this.dragTrack&&this.dragTrack.$trackDragScrim.hide(),this.dragTrack=void 0}},{key:"addMouseHandlers",value:function(){var e=this,t=this;function r(e){var r,n,i,a;if(e.preventDefault(),!t.loadInProgress()&&(r=dn(e),t.vpMouseDown)){var o=Math.abs(r.x-t.vpMouseDown.mouseDownX)>Math.abs(r.y-t.vpMouseDown.mouseDownY);if(i=(n=t.vpMouseDown.viewport).$viewport.width(),a=n.referenceFrame,!t.dragObject&&!t.isScrolling)if(o)t.vpMouseDown.mouseDownX&&Math.abs(r.x-t.vpMouseDown.mouseDownX)>t.constants.dragThreshold&&(t.dragObject={viewport:n,start:a.start});else if(t.vpMouseDown.mouseDownY&&Math.abs(r.y-t.vpMouseDown.mouseDownY)>t.constants.scrollThreshold){t.isScrolling=!0;var s=n.trackView,c=s.$viewportContainer.height(),u=Xb(s.viewports);t.vpMouseDown.r=c/u}if(t.dragObject)a.shiftPixels(t.vpMouseDown.lastMouseX-r.x,i)&&(t.referenceFrameList.length>1?t.updateLocusSearchWidget(t.referenceFrameList):t.updateLocusSearchWidget([t.vpMouseDown.referenceFrame]),t.updateViews()),t.fireEvent("trackdrag");if(t.isScrolling){var h=t.vpMouseDown.r*(t.vpMouseDown.lastMouseY-r.y);t.vpMouseDown.viewport.trackView.scrollBy(h)}t.vpMouseDown.lastMouseX=r.x,t.vpMouseDown.lastMouseY=r.y}}function n(e){t.cancelTrackPan(),t.endTrackDrag()}Su(window).on("resize"+this.namespace,(function(){e.resize()})),Su(this.root).on("mouseup",n),Su(this.root).on("mouseleave",n),Su(this.trackContainer).on("mousemove",r),Su(this.trackContainer).on("touchmove",r),Su(this.trackContainer).on("mouseleave",n),Su(this.trackContainer).on("mouseup",n),Su(this.trackContainer).on("touchend",n)}},{key:"getDriveFileInfo",value:(t=vr(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Mn(t),n="https://www.googleapis.com/drive/v3/files/"+r+"?supportsTeamDrives=true",e.abrupt("return",Lm.loadJson(n,km({})));case 3:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}],[{key:"uncompressSession",value:function(e){if(e.indexOf("/gzip;base64")>0){var t,r="",n=Nr(Un(e));try{for(n.s();!(t=n.n()).done;){var i=t.value;r+=String.fromCharCode(i)}}catch(e){n.e(e)}finally{n.f()}return r}return function(e){e=e.replace(/\./g,"+").replace(/_/g,"/").replace(/-/g,"=");const t=atob(e),r=[];for(let e=0;e<t.length;e++)r.push(t.charCodeAt(e));const n=new wn.RawInflate(r).decompress();let i="";for(let e of n)i+=String.fromCharCode(e);return i}(e.substring(5))}}]),e}();function v_(e,t){var r,n=Nr(e);try{for(n.s();!(r=n.n()).done;){var i,a=r.value,o=Nr(a.viewports);try{for(o.s();!(i=o.n()).done;){var s=i.value;s.$trackLabel&&(0===a.viewports.indexOf(s)&&!0===t?s.$trackLabel.show():s.$trackLabel.hide())}}catch(e){o.e(e)}finally{o.f()}}}catch(e){n.e(e)}finally{n.f()}}var m_=function(){function e(t,r){mr(this,e),this.$container=Su("<div>",{class:"igv-windowsize-panel-container"}),t.append(this.$container),this.browser=r}return yr(e,[{key:"show",value:function(){this.$container.show()}},{key:"hide",value:function(){this.$container.hide()}},{key:"updatePanel",value:function(e){this.$container.text(1===e.length?function(e){var t,r,n;if(!(e>1e7))return e>1e4?(r=" kb",n=e/(t=1e3),_n(Math.floor(n))+r):_n(e)+" bp";t=1e6,r=" mb";return n=e/t,Math.floor(n).toString()+r}(Math.round(this.browser.viewportWidth()*e[0].bpPerPixel)):"")}}]),e}();var b_=function(){function e(t,r){var n=this;mr(this,e),this.$container=Su("<div>",{class:"igv-generic-dialog-container"}),t.append(this.$container),this.$container.offset({left:0,top:0});var i=Su("<div>",{class:"igv-generic-dialog-header"});this.$container.append(i),yn(i[0],(function(){n.$minimum_input.val(void 0),n.$maximum_input.val(void 0),n.$container.offset({left:0,top:0}),n.$container.hide()})),this.$minimum=Su("<div>",{class:"igv-generic-dialog-label-input"}),this.$container.append(this.$minimum);var a=Su("<div>");a.text("Minimum"),this.$minimum.append(a),this.$minimum_input=Su("<input>"),this.$minimum.append(this.$minimum_input),this.$maximum=Su("<div>",{class:"igv-generic-dialog-label-input"}),this.$container.append(this.$maximum);var o=Su("<div>");o.text("Maximum"),this.$maximum.append(o),this.$maximum_input=Su("<input>"),this.$maximum.append(this.$maximum_input);var s=Su("<div>",{class:"igv-generic-dialog-ok-cancel"});this.$container.append(s),this.$ok=Su("<div>"),s.append(this.$ok),this.$ok.text("OK"),this.$cancel=Su("<div>"),s.append(this.$cancel),this.$cancel.text("Cancel"),this.$cancel.on("click",(function(){n.$minimum_input.val(void 0),n.$maximum_input.val(void 0),n.$container.offset({left:0,top:0}),n.$container.hide()})),ri(this.$container.get(0),i.get(0)),this.$container.hide()}return yr(e,[{key:"configure",value:function(e){var t,r,n=this,i=e.trackView.dataRange();i?(t=i.min,r=i.max):(t=0,r=100),this.$minimum_input.val(t),this.$maximum_input.val(r),this.$minimum_input.unbind(),this.$minimum_input.on("keyup",(function(t){13===t.keyCode&&n.processResults(e)})),this.$maximum_input.unbind(),this.$maximum_input.on("keyup",(function(t){13===t.keyCode&&n.processResults(e)})),this.$ok.unbind(),this.$ok.on("click",(function(t){n.processResults(e)}))}},{key:"processResults",value:function(e){var t=parseFloat(this.$minimum_input.val()),r=parseFloat(this.$maximum_input.val());isNaN(t)||isNaN(r)?nn.presentAlert(new Error("Must input numeric values"),void 0):e.trackView.setDataRange(t,r),this.$minimum_input.val(void 0),this.$maximum_input.val(void 0),this.$container.offset({left:0,top:0}),this.$container.hide()}},{key:"present",value:function(e){var t=e.offset().top,r=Su("body").scrollTop();this.$container.offset({left:e.width()-this.$container.width(),top:t+r}),this.$container.show()}}]),e}(),y_=function(e){this.$container=Su('<div class="igv-user-feedback">'),e.append(this.$container);var t=Su("<div>");this.$container.append(t);var r=Su("<div>");t.append(r);var n=db("exclamation-triangle","red");r.append(n);var i=Su("<div>");t.append(i);var a=db("times-circle","grey");i.append(a);var o=Su("<div>");this.$container.append(o);var s=Su("<div>");o.append(s),s.text("i am user feedback"),i.click((function(){s.html(""),undefined.$container.hide()}))};y_.prototype.show=function(){this.$container.show()},y_.prototype.hide=function(){this.$container.hide()};var w_=function(e,t){var r=Su('<div class="igv-navbar-button">');e.append(r),r.text("Save SVG"),r.on("click.svg-save-control",(function(){t.saveSVGtoFile({})}))},k_=function(e,t){var r;this.$zoomContainer=Su('<div class="igv-zoom-widget">'),t.append(this.$zoomContainer),r=Su("<div>"),this.$zoomContainer.append(r),r.append(db("minus-circle")),r.on("click",(function(){e.zoomOut()})),r=Su("<div>"),this.$zoomContainer.append(r),this.$slider=Su('<input type="range"/>'),r.append(this.$slider),this.$slider.on("change",(function(t){e.zoomWithRangePercentage(t.target.value/100)})),r=Su("<div>"),this.$zoomContainer.append(r),r.append(db("plus-circle")),r.on("click",(function(){e.zoomIn()})),this.currentChr=void 0;var n=this;e.on("locuschange",(function(){e.updateZoomSlider(n.$slider)}))};k_.prototype.hide=function(){this.$zoomContainer.hide()},k_.prototype.show=function(){this.$zoomContainer.show()},k_.prototype.hideSlider=function(){this.$slider.hide()},k_.prototype.showSlider=function(){this.$slider.show()};var x_=function(e,t){this.showAllChromosomes=!1!==e.config.showAllChromosomes,this.$container=Su("<div>",{class:"igv-chromosome-select-widget-container"}),t.append(this.$container),this.$select=Su("<select>",{name:"chromosome-select-widget"}),this.$container.append(this.$select),this.$select.on("change",(function(){""!==Su(this).val()&&(e.search(Su(this).val()),Su(this).blur())}))};x_.prototype.update=function(e){this.$select.empty();var t=this.showAllChromosomes?e.chromosomeNames.slice():e.wgChromosomeNames.slice();e.showWholeGenomeView()&&(t.unshift("all"),t.unshift(""));var r,n=Nr(t);try{for(n.s();!(r=n.n()).done;){var i,a=r.value;i=Su("<option>",{value:a}),this.$select.append(i),i.text(a)}}catch(e){n.e(e)}finally{n.f()}};var S_=function(e,t){var r=this;this.browser=t,this.$button=Su('<div class="igv-navbar-button">'),e.append(this.$button),this.$button.text("track labels"),this.$button.on("click",(function(){!0===t.trackLabelsVisible?r.doHide():r.doShow()}))};S_.prototype.doHide=function(){this.$button.removeClass("igv-navbar-button-clicked"),this.browser.hideTrackLabels()},S_.prototype.doShow=function(){this.$button.addClass("igv-navbar-button-clicked"),this.browser.showTrackLabels()},S_.prototype.setState=function(e){!0===e?this.$button.addClass("igv-navbar-button-clicked"):this.$button.removeClass("igv-navbar-button-clicked")},S_.prototype.disable=function(){this.doHide(),this.$button.hide()},S_.prototype.enable=function(){this.$button.show()};var __=function(){function e(t,r,n,i){mr(this,e);var a=this;this.browser=i,this.$container=Su('<div class="igv-center-guide igv-center-guide-thin">'),t.append(this.$container),!0===n.showCenterGuideButton&&(this.$centerGuideToggle=Su('<div class="igv-navbar-button">'),r.append(this.$centerGuideToggle),this.$centerGuideToggle.text("center line"),this.$centerGuideToggle.on("click",(function(){!0===i.isCenterGuideVisible?a.doHide():a.doShow()})))}return yr(e,[{key:"doHide",value:function(){this.$centerGuideToggle&&this.$centerGuideToggle.removeClass("igv-navbar-button-clicked"),this.browser.hideCenterGuide()}},{key:"doShow",value:function(){this.$centerGuideToggle&&this.$centerGuideToggle.addClass("igv-navbar-button-clicked"),this.browser.showCenterGuide()}},{key:"setState",value:function(e){this.$centerGuideToggle&&(!0===e?this.$centerGuideToggle.addClass("igv-navbar-button-clicked"):this.$centerGuideToggle.removeClass("igv-navbar-button-clicked"))}},{key:"forcedHide",value:function(){this.$centerGuideToggle&&this.$centerGuideToggle.hide(),!0===this.browser.isCenterGuideVisible&&this.$container.hide()}},{key:"forcedShow",value:function(){this.$centerGuideToggle&&this.$centerGuideToggle.show(),!0===this.browser.isCenterGuideVisible&&this.$container.show()}},{key:"repaint",value:function(){var e,t,r,n,i,a,o;this.browser.referenceFrameList&&(1/(o=this.browser.referenceFrameList[0]).bpPerPixel>1?(e=this.browser.trackViews[0].$viewportContainer.position(),t=Math.round(this.browser.trackViews[0].$viewportContainer.width()/2),n=e.left+t-.5*(r=o.toPixels(1)),i=Math.round(n).toString()+"px",a=Math.round(r).toString()+"px",this.$container.css({left:i,width:a}),this.$container.removeClass("igv-center-guide-thin"),this.$container.addClass("igv-center-guide-wide")):(this.$container.css({left:"50%",width:"1px"}),this.$container.removeClass("igv-center-guide-wide"),this.$container.addClass("igv-center-guide-thin")))}},{key:"resize",value:function(){this.repaint()}}]),e}(),C_=function(e,t,r,n){var i=this,a=this;this.browser=n,this.$guide=Su('<div class="igv-cursor-tracking-guide">'),e.append(this.$guide),e.on("mousemove.cursor-guide",(function(t){t.preventDefault();var r=Su(document.elementFromPoint(t.clientX,t.clientY)),a=r.parent(),o=void 0;a.hasClass("igv-viewport-content")?o=a.parent():a.hasClass("igv-viewport")&&r.hasClass("igv-viewport-content")?o=a:a.hasClass("igv-viewport-container")&&r.hasClass("igv-viewport")&&(o=r);r.attr("class"),a.attr("class");if(o){var s=R_(t,o,i.$guide,e,n);if(s){var c=s.bp,u=s.start,h=s.end,l=s.interpolant;i.customMouseHandler&&i.customMouseHandler({bp:c,start:u,end:h,interpolant:l})}}})),!0===r.showCursorTrackingGuideButton&&(this.$button=Su('<div class="igv-navbar-button">'),t.append(this.$button),this.$button.text("cursor guide"),this.$button.on("click",(function(){!0===n.cursorGuideVisible?a.doHide():a.doShow()})))},R_=function(e,t,r,n,i){var a=vn(e,n.get(0)).x,o="".concat(a,"px");r.css({left:o});var s=vn(e,t.get(0)),c=s.x,u=s.xNormalized,h=s.width,l=t.data("viewportGUID"),f=i.getViewportWithGUID(l);if(void 0!==f){var p=f.referenceFrame,d=p.start,g=p.bpPerPixel;return{$host:t.closest(".igv-track-container"),host_css_left:o,bp:Math.round(d+c*g),start:d,end:1+d+h*g,interpolant:u}}};C_.prototype.doHide=function(){this.$button&&this.$button.removeClass("igv-navbar-button-clicked"),this.browser.hideCursorGuide()},C_.prototype.doShow=function(){this.$button.addClass("igv-navbar-button-clicked"),this.browser.showCursorGuide()},C_.prototype.setState=function(e){this.$button&&(!0===e?this.$button.addClass("igv-navbar-button-clicked"):this.$button.removeClass("igv-navbar-button-clicked"))},C_.prototype.disable=function(){this.doHide(),this.$guide.hide()},C_.prototype.enable=function(){this.$button&&this.$button.show()};var E_=function(){function e(t){mr(this,e),this.browser=t}return yr(e,[{key:"navbarDidResize",value:function(e,t){this.updateNavbar(this.createResponsiveClassSchedule(e,t))}},{key:"updateNavbar",value:function(e){this.browser.$toggle_button_container.removeClass(),this.browser.$toggle_button_container.addClass(e.$toggle_button_container),this.browser.zoomWidget.$zoomContainer.removeClass(),this.browser.zoomWidget.$zoomContainer.addClass(e.$zoomContainer)}},{key:"createResponsiveClassSchedule",value:function(e,t){var r={};return t?this.browser.windowSizePanel.hide():this.browser.windowSizePanel.show(),e>990?(r.$toggle_button_container="igv-navbar-toggle-button-container",r.$zoomContainer="igv-zoom-widget"):e>860?(r.$toggle_button_container="igv-navbar-toggle-button-container",r.$zoomContainer="igv-zoom-widget-900"):e>540?(r.$toggle_button_container="igv-navbar-toggle-button-container-750",r.$zoomContainer="igv-zoom-widget-900"):(r.$toggle_button_container="igv-navbar-toggle-button-container-750",r.$zoomContainer="igv-zoom-widget-900",this.browser.windowSizePanel.hide()),t&&(r.$zoomContainer="igv-zoom-widget-hidden"),r}}]),e}(),A_=[];function T_(){return(T_=vr(regeneratorRuntime.mark((function e(t,r){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===r&&(r={}),ub.KNOWN_GENOMES){e.next=4;break}return e.next=4,ub.initializeGenomes(r);case 4:if(F_(r),!1!==r.queryParametersSupported&&D_(r),r.apiKey&&Lm.setApiKey(r.apiKey),r.oauthToken&&am.setToken(r.oauthToken),!r.clientId||Dn()){e.next=11;break}return e.next=11,Fn({clientId:r.clientId,apiKey:r.apiKey,scope:"https://www.googleapis.com/auth/userinfo.profile"});case 11:if(L_(r),n=new g_(r,t),A_.push(n),M_(n,r),n.userFeedback=new y_(Su(n.trackContainer)),n.userFeedback.hide(),n.inputDialog=new an(n.$root.get(0)),n.dataRangeDialog=new b_(n.$root),!1===r.showTrackLabels?n.hideTrackLabels():(n.showTrackLabels(),n.trackLabelControl&&n.trackLabelControl.setState(n.trackLabelsVisible)),!1===r.showCursorTrackingGuide?n.cursorGuide.doHide():n.cursorGuide.doShow(),!1===r.showCenterGuide?n.centerGuide.doHide():n.centerGuide.doShow(),!r.sessionURL){e.next=27;break}return e.next=25,n.loadSession({url:r.sessionURL});case 25:e.next=29;break;case 27:return e.next=29,n.loadSessionObject(r);case 29:return i=n.isMultiLocusWholeGenomeView()||ub.isWholeGenomeView(n.referenceFrameList[0].chr),n.isMultiLocusMode()||i?n.centerGuide.forcedHide():n.centerGuide.forcedShow(),n.navbarManager.navbarDidResize(n.$navigation.width(),i),e.abrupt("return",n);case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I_(){return(I_=vr(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Nr(A_),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=r.value,e.next=7,n.visibilityChange();case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function L_(e){var t=1;e.tracks&&e.tracks.forEach((function(e){void 0===e.order&&(e.order=t++)}))}function M_(e,t){var r=function(e,t){e.navbarManager=new E_(e);var r=Su("<div>",{class:"igv-navbar"});e.$navigation=r;var n=Su("<div>",{class:"igv-navbar-left-container"});r.append(n);var i=Su("<div>",{class:"igv-logo"});n.append(i);var a=Su('<svg width="690px" height="324px" viewBox="0 0 690 324" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>IGV</title><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="IGV" fill="#666666"><polygon id="Path" points="379.54574 8.00169252 455.581247 8.00169252 515.564813 188.87244 532.884012 253.529506 537.108207 253.529506 554.849825 188.87244 614.833392 8.00169252 689.60164 8.00169252 582.729511 320.722144 486.840288 320.722144"></polygon><path d="M261.482414,323.793286 C207.975678,323.793286 168.339046,310.552102 142.571329,284.069337 C116.803612,257.586572 103.919946,217.158702 103.919946,162.784513 C103.919946,108.410325 117.437235,67.8415913 144.472217,41.0770945 C171.507199,14.3125977 212.903894,0.930550071 268.663545,0.930550071 C283.025879,0.930550071 298.232828,1.84616386 314.284849,3.6774189 C330.33687,5.50867394 344.839793,7.97378798 357.794056,11.072835 L357.794056,68.968378 C339.48912,65.869331 323.578145,63.5450806 310.060654,61.9955571 C296.543163,60.4460336 284.574731,59.6712835 274.154998,59.6712835 C255.850062,59.6712835 240.502308,61.4320792 228.111274,64.9537236 C215.720241,68.4753679 205.793482,74.2507779 198.330701,82.2801269 C190.867919,90.309476 185.587729,100.87425 182.48997,113.974767 C179.392212,127.075284 177.843356,143.345037 177.843356,162.784513 C177.843356,181.942258 179.251407,198.000716 182.067551,210.960367 C184.883695,223.920018 189.671068,234.41436 196.429813,242.443709 C203.188559,250.473058 212.059279,256.178037 223.042241,259.558815 C234.025202,262.939594 247.683295,264.629958 264.01693,264.629958 C268.241146,264.629958 273.098922,264.489094 278.590403,264.207362 C284.081883,263.925631 289.643684,263.50304 295.275972,262.939577 L295.275972,159.826347 L361.595831,159.826347 L361.595831,308.579859 C344.698967,313.087564 327.239137,316.750019 309.215815,319.567334 C291.192494,322.38465 275.281519,323.793286 261.482414,323.793286 L261.482414,323.793286 L261.482414,323.793286 Z" id="Path"></path>;<polygon id="Path" points="0.81355666 5.00169252 73.0472883 5.00169252 73.0472883 317.722144 0.81355666 317.722144"></polygon></g> </g> </svg>');a.css("width","34px"),a.css("height","32px"),i.append(a),e.$current_genome=Su("<div>",{class:"igv-current-genome"}),n.append(e.$current_genome),e.$current_genome.text("");var o=Su("<div>",{class:"igv-navbar-genomic-location"});n.append(o),e.chromosomeSelectWidget=new x_(e,o),void 0===t.showChromosomeWidget&&(t.showChromosomeWidget=!0);!0===t.showChromosomeWidget?e.chromosomeSelectWidget.$container.show():e.chromosomeSelectWidget.$container.hide();var s=Su("<div>",{class:"igv-locus-size-group"});o.append(s);var c=Su("<div>",{class:"igv-search-container"});s.append(c),e.$searchInput=Su("<input>",{class:"igv-search-input",type:"text",placeholder:"Locus Search"}),c.append(e.$searchInput),e.$searchInput.change(vr(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=e.$searchInput.val(),t.next=4,e.search(r);case 4:(n=t.sent).length>1&&(e.updateLocusSearchWidget(n),e.windowSizePanel.updatePanel(n)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),nn.presentAlert(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))));var u=Su("<div>",{class:"igv-search-icon-container"});c.append(u),u.append(db("search")),u.on("click",(function(){return e.search(e.$searchInput.val())})),e.windowSizePanel=new m_(s,e);var h=Su("<div>",{class:"igv-navbar-right-container"});r.append(h);var l=Su('<div class="igv-navbar-toggle-button-container">');h.append(l),e.$toggle_button_container=l,e.cursorGuide=new C_(Su(e.trackContainer),l,t,e),e.centerGuide=new __(Su(e.trackContainer),l,t,e),!0===t.showTrackLabelButton&&(e.trackLabelControl=new S_(l,e));t.showSVGButton&&(e.svgSaveControl=new w_(l,e));e.zoomWidget=new k_(e,h),!1===t.showNavigation&&e.$navigation.hide();return r}(e,t);r.insertBefore(Su(e.trackContainer)),!1===t.showControls&&r.hide()}function F_(e){void 0===e.promisified&&(e.promisified=!1),void 0===e.minimumBases&&(e.minimumBases=40),void 0===e.showIdeogram&&(e.showIdeogram=!0),void 0===e.showCursorTrackingGuideButton&&(e.showCursorTrackingGuideButton=!0),void 0===e.showCenterGuideButton&&(e.showCenterGuideButton=!0),void 0===e.showSVGButton&&(e.showSVGButton=!0),void 0===e.showTrackLabelButton&&(e.showTrackLabelButton=!0),void 0===e.showCursorTrackingGuide&&(e.showCursorTrackingGuide=!1),void 0===e.showCenterGuide&&(e.showCenterGuide=!1),void 0===e.showTrackLabels&&(e.showTrackLabels=!0),void 0===e.showControls&&(e.showControls=!0),void 0===e.showNavigation&&(e.showNavigation=!0),void 0===e.showRuler&&(e.showRuler=!0),void 0===e.flanking&&(e.flanking=1e3),void 0===e.pairsSupported&&(e.pairsSupported=!0),e.tracks||(e.tracks=[])}function D_(e){var t,r,n,i,a,o,s,c,u,h,l;if(a={},t=(s=window.location.href).indexOf("?"),r=s.lastIndexOf("#"),t>=0)for(r<0&&(r=s.length),n=t+1;n<r;)(i=s.indexOf("&",n))<0&&(i=r),2===(o=s.substring(n,i).split("=",2)).length&&(c=o[0],u=decodeURIComponent(o[1]),"file"===c?h=u.split(","):"index"===c?l=u.split(","):e[c]=u,n=i+1);if(h){e.tracks||(e.tracks=[]);for(var f=0;f<h.length;f++){if(h[f].endsWith(".xml")||h[f].endsWith(".json")){e.sessionURL=h[f];break}var p={url:h[f]};l&&l.length>f&&(p.indexURL=l[f]),e.tracks.push(p)}}return a}var O_=Lm,B_=Lm.setApiKey;return function(){var e=document.createElement("style");e.setAttribute("type","text/css"),e.innerHTML='.igv-generic-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 2048;\n  background-color: white;\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-generic-container div:first-child {\n    cursor: move;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    height: 24px;\n    width: 100%;\n    background-color: #dddddd; }\n    .igv-generic-container div:first-child i {\n      display: block;\n      color: #5f5f5f;\n      cursor: pointer;\n      width: 14px;\n      height: 14px;\n      margin-right: 8px;\n      margin-bottom: 4px; }\n\n.igv-generic-dialog-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 300px;\n  height: 200px;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: thin;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400;\n  z-index: 2048;\n  background-color: white;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-generic-dialog-container .igv-generic-dialog-header {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-generic-dialog-container .igv-generic-dialog-header div {\n      margin-right: 4px;\n      margin-bottom: 2px;\n      height: 12px;\n      width: 12px;\n      color: #7F7F7F; }\n    .igv-generic-dialog-container .igv-generic-dialog-header div:hover {\n      cursor: pointer;\n      color: #444; }\n  .igv-generic-dialog-container .igv-generic-dialog-one-liner {\n    color: #373737;\n    width: 95%;\n    height: 24px;\n    line-height: 24px;\n    text-align: left;\n    margin-top: 8px;\n    padding-left: 8px;\n    overflow-wrap: break-word;\n    background-color: white; }\n  .igv-generic-dialog-container .igv-generic-dialog-label-input {\n    margin-top: 8px;\n    width: 95%;\n    height: 24px;\n    color: #373737;\n    line-height: 24px;\n    padding-left: 8px;\n    background-color: white;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-items: center; }\n    .igv-generic-dialog-container .igv-generic-dialog-label-input div {\n      width: 30%;\n      height: 100%;\n      font-size: 16px;\n      text-align: right;\n      padding-right: 8px;\n      background-color: white; }\n    .igv-generic-dialog-container .igv-generic-dialog-label-input input {\n      display: block;\n      height: 100%;\n      width: 100%;\n      padding-left: 4px;\n      font-family: "Open Sans", sans-serif;\n      font-weight: 400;\n      color: #373737;\n      text-align: left;\n      outline: none;\n      border-style: solid;\n      border-width: thin;\n      border-color: #7F7F7F;\n      background-color: white; }\n    .igv-generic-dialog-container .igv-generic-dialog-label-input input {\n      width: 50%;\n      font-size: 16px; }\n  .igv-generic-dialog-container .igv-generic-dialog-input {\n    margin-top: 8px;\n    width: calc(100% - 16px);\n    height: 24px;\n    color: #373737;\n    line-height: 24px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-generic-dialog-container .igv-generic-dialog-input input {\n      display: block;\n      height: 100%;\n      width: 100%;\n      padding-left: 4px;\n      font-family: "Open Sans", sans-serif;\n      font-weight: 400;\n      color: #373737;\n      text-align: left;\n      outline: none;\n      border-style: solid;\n      border-width: thin;\n      border-color: #7F7F7F;\n      background-color: white; }\n    .igv-generic-dialog-container .igv-generic-dialog-input input {\n      font-size: 16px; }\n  .igv-generic-dialog-container .igv-generic-dialog-ok-cancel {\n    width: 100%;\n    height: 28px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div {\n      margin-top: 32px;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: 14px;\n      font-weight: 400;\n      width: 75px;\n      height: 28px;\n      line-height: 28px;\n      text-align: center;\n      border-color: transparent;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 2px; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:first-child {\n      margin-left: 32px;\n      margin-right: 0;\n      background-color: #5ea4e0; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:last-child {\n      margin-left: 0;\n      margin-right: 32px;\n      background-color: #c4c4c4; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:first-child:hover {\n      cursor: pointer;\n      background-color: #3b5c7f; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:last-child:hover {\n      cursor: pointer;\n      background-color: #7f7f7f; }\n  .igv-generic-dialog-container .igv-generic-dialog-ok {\n    width: 100%;\n    height: 36px;\n    margin-top: 32px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok div {\n      width: 98px;\n      height: 36px;\n      line-height: 36px;\n      text-align: center;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: medium;\n      font-weight: 400;\n      border-color: white;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 4px;\n      background-color: #2B81AF; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok div:hover {\n      cursor: pointer;\n      background-color: #25597f; }\n\n.igv-menu-popup {\n  position: absolute;\n  top: 0;\n  left: 0;\n  min-width: 132px;\n  z-index: 4096;\n  cursor: pointer;\n  font-family: "Open Sans", sans-serif;\n  font-size: small;\n  font-weight: 400;\n  color: #4b4b4b;\n  background: white;\n  border-radius: 4px;\n  border-color: #7F7F7F;\n  border-style: solid;\n  border-width: thin;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: flex-end;\n  text-align: left; }\n  .igv-menu-popup > div:not(:first-child) {\n    width: 100%; }\n    .igv-menu-popup > div:not(:first-child) > div {\n      background: white; }\n    .igv-menu-popup > div:not(:first-child) > div.context-menu {\n      padding-left: 4px;\n      padding-right: 4px; }\n    .igv-menu-popup > div:not(:first-child) > div:last-child {\n      border-bottom-left-radius: 4px;\n      border-bottom-right-radius: 4px;\n      border-bottom-color: transparent;\n      border-bottom-style: solid;\n      border-bottom-width: thin; }\n    .igv-menu-popup > div:not(:first-child) > div:hover {\n      background: #efefef; }\n\n.igv-menu-popup-shim {\n  padding-left: 8px;\n  padding-right: 8px; }\n\n.igv-menu-popup-header {\n  position: relative;\n  width: 100%;\n  height: 24px;\n  cursor: move;\n  border-top-color: transparent;\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n  border-bottom-color: #7F7F7F;\n  border-bottom-style: solid;\n  border-bottom-width: thin;\n  background-color: #eee;\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-end;\n  align-items: center; }\n  .igv-menu-popup-header div {\n    margin-right: 4px;\n    height: 12px;\n    width: 12px;\n    color: #7F7F7F; }\n  .igv-menu-popup-header div:hover {\n    cursor: pointer;\n    color: #444; }\n\n.igv-menu-popup-check-container {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center;\n  width: 100%;\n  height: 20px;\n  background-color: transparent; }\n  .igv-menu-popup-check-container div {\n    padding-top: 2px;\n    padding-left: 8px; }\n  .igv-menu-popup-check-container div:first-child {\n    position: relative;\n    width: 12px;\n    height: 12px; }\n    .igv-menu-popup-check-container div:first-child svg {\n      position: absolute;\n      width: 12px;\n      height: 12px; }\n\n.igv-user-feedback {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 512px;\n  height: 360px;\n  z-index: 2048;\n  background-color: white;\n  border-color: #a2a2a2;\n  border-style: solid;\n  border-width: thin;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400;\n  color: #444;\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-user-feedback div:first-child {\n    position: relative;\n    height: 24px;\n    width: 100%;\n    background-color: white;\n    border-bottom-color: #a2a2a2;\n    border-bottom-style: solid;\n    border-bottom-width: thin; }\n    .igv-user-feedback div:first-child div {\n      position: absolute;\n      top: 2px;\n      width: 16px;\n      height: 16px;\n      background-color: transparent; }\n    .igv-user-feedback div:first-child div:first-child {\n      left: 8px; }\n    .igv-user-feedback div:first-child div:last-child {\n      cursor: pointer;\n      right: 8px; }\n  .igv-user-feedback div:last-child {\n    width: 100%;\n    height: calc(100% - 24px);\n    border-width: 0; }\n    .igv-user-feedback div:last-child div {\n      width: auto;\n      height: auto;\n      margin: 8px; }\n\n.igv-root {\n  position: relative;\n  padding-top: 4px;\n  margin-left: 10px;\n  margin-right: 10px;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: stretch; }\n  .igv-root .igv-navbar {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-between;\n    align-items: center;\n    color: #444;\n    font-size: 12px;\n    font-family: "Open Sans", sans-serif;\n    font-weight: 400;\n    line-height: 32px;\n    padding-left: 8px;\n    padding-right: 8px;\n    margin-top: 2px;\n    margin-bottom: 4px;\n    height: 32px;\n    border-style: solid;\n    border-radius: 3px;\n    border-width: thin;\n    border-color: #bfbfbf;\n    background-color: #f3f3f3; }\n    .igv-root .igv-navbar .igv-navbar-left-container {\n      display: flex;\n      flex-flow: row;\n      flex-wrap: nowrap;\n      justify-content: space-between;\n      align-items: center;\n      height: 32px;\n      line-height: 32px; }\n      .igv-root .igv-navbar .igv-navbar-left-container .igv-logo {\n        width: 34px;\n        height: 32px;\n        margin-right: 8px; }\n      .igv-root .igv-navbar .igv-navbar-left-container .igv-current-genome {\n        height: 32px;\n        margin-left: 4px;\n        margin-right: 4px;\n        user-select: none;\n        line-height: 32px;\n        vertical-align: middle;\n        text-align: center; }\n      .igv-root .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location {\n        display: flex;\n        flex-flow: row;\n        flex-wrap: nowrap;\n        justify-content: space-between;\n        align-items: center;\n        height: 100%; }\n        .igv-root .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-chromosome-select-widget-container {\n          display: flex;\n          flex-flow: column;\n          flex-wrap: nowrap;\n          justify-content: space-around;\n          align-items: center;\n          height: 100%;\n          width: 125px;\n          margin-right: 4px; }\n          .igv-root .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-chromosome-select-widget-container select {\n            display: block;\n            cursor: pointer;\n            width: 100px;\n            height: 75%;\n            outline: none;\n            font-size: 12px;\n            font-family: "Open Sans", sans-serif;\n            font-weight: 400; }\n        .igv-root .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-locus-size-group {\n          display: flex;\n          flex-flow: row;\n          flex-wrap: nowrap;\n          justify-content: space-between;\n          align-items: center;\n          margin-left: 8px;\n          height: 22px; }\n          .igv-root .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-locus-size-group .igv-search-container {\n            display: flex;\n            flex-flow: row;\n            flex-wrap: nowrap;\n            justify-content: flex-start;\n            align-items: center;\n            width: 200px;\n            height: 22px;\n            line-height: 22px; }\n            .igv-root .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-locus-size-group .igv-search-container input.igv-search-input {\n              cursor: text;\n              width: 85%;\n              height: 22px;\n              line-height: 22px;\n              font-size: 12px;\n              font-family: "Open Sans", sans-serif;\n              font-weight: 400;\n              text-align: left;\n              padding-left: 8px;\n              margin-right: 8px;\n              outline: none;\n              border-style: solid;\n              border-radius: 3px;\n              border-width: thin;\n              border-color: #bfbfbf;\n              background-color: white; }\n            .igv-root .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-locus-size-group .igv-search-container .igv-search-icon-container {\n              cursor: pointer;\n              height: 16px;\n              width: 16px; }\n          .igv-root .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-locus-size-group .igv-windowsize-panel-container {\n            margin-left: 4px;\n            user-select: none; }\n    .igv-root .igv-navbar .igv-navbar-right-container {\n      display: flex;\n      flex-flow: row;\n      flex-wrap: nowrap;\n      justify-content: space-between;\n      align-items: center;\n      height: 32px;\n      line-height: 32px; }\n      .igv-root .igv-navbar .igv-navbar-right-container .igv-navbar-toggle-button-container {\n        display: flex;\n        flex-flow: row;\n        flex-wrap: nowrap;\n        justify-content: space-between;\n        align-items: center;\n        height: 100%; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-navbar-toggle-button-container div {\n          margin-left: 0;\n          margin-right: 4px; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-navbar-toggle-button-container div:last-child {\n          margin-left: 0;\n          margin-right: 0; }\n      .igv-root .igv-navbar .igv-navbar-right-container .igv-navbar-toggle-button-container-750 {\n        display: none; }\n      .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget {\n        color: #737373;\n        font-size: 18px;\n        height: 32px;\n        line-height: 32px;\n        margin-left: 8px;\n        user-select: none;\n        display: flex;\n        flex-flow: row;\n        flex-wrap: nowrap;\n        justify-content: flex-end;\n        align-items: center; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget div {\n          cursor: pointer;\n          margin-left: unset;\n          margin-right: unset; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget div:first-child {\n          height: 24px;\n          width: 24px;\n          margin-left: unset;\n          margin-right: 8px; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget div:last-child {\n          height: 24px;\n          width: 24px;\n          margin-left: 8px;\n          margin-right: unset; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget div:nth-child(even) {\n          display: block;\n          height: fit-content; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget input {\n          display: block;\n          width: 125px; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget svg {\n          display: block; }\n      .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 {\n        color: #737373;\n        font-size: 18px;\n        height: 32px;\n        line-height: 32px;\n        margin-left: 8px;\n        user-select: none;\n        display: flex;\n        flex-flow: row;\n        flex-wrap: nowrap;\n        justify-content: flex-end;\n        align-items: center; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 div {\n          cursor: pointer;\n          margin-left: unset;\n          margin-right: unset; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 div:first-child {\n          height: 24px;\n          width: 24px;\n          margin-left: unset;\n          margin-right: 8px; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 div:last-child {\n          height: 24px;\n          width: 24px;\n          margin-left: 8px;\n          margin-right: unset; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 div:nth-child(even) {\n          width: 0;\n          height: 0;\n          display: none; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 input {\n          width: 0;\n          height: 0;\n          display: none; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 svg {\n          display: block; }\n      .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget-hidden {\n        display: none; }\n  .igv-root .igv-ideogram-container {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-items: center;\n    margin-top: 10px;\n    height: 16px;\n    width: 100%; }\n    .igv-root .igv-ideogram-container .igv-ideogram-content {\n      height: 100%;\n      background-color: white; }\n    .igv-root .igv-ideogram-container .igv-ideogram-content:first-child {\n      margin-left: 50px; }\n    .igv-root .igv-ideogram-container .igv-ideogram-content-border-right {\n      border-right-color: #292929;\n      border-right-style: solid;\n      border-right-width: 1px; }\n  .igv-root .igv-track-container {\n    position: relative; }\n\n.igv-multi-locus-separator {\n  pointer-events: none;\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  z-index: 2;\n  width: 1px;\n  background-color: gray; }\n\n.igv-track-container-spinner {\n  position: absolute;\n  top: 90%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 1024;\n  width: 24px;\n  height: 24px;\n  pointer-events: none;\n  color: #737373; }\n\n.igv-track {\n  position: relative;\n  width: 100%;\n  margin-top: 4px;\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: stretch; }\n\n.igv-left-hand-gutter {\n  width: 50px;\n  height: 100%; }\n\n.igv-right-hand-gutter {\n  position: relative;\n  width: 36px;\n  height: 100%;\n  background: white; }\n\n.igv-viewport-container {\n  position: relative;\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: stretch;\n  width: calc(100% - 112px);\n  height: 100%; }\n  .igv-viewport-container .igv-viewport {\n    position: relative;\n    height: 100%;\n    overflow-x: hidden;\n    overflow-y: hidden;\n    background-color: white; }\n  .igv-viewport-container .igv-viewport-multi-locus-gap-shim {\n    height: 100%;\n    width: 1px;\n    margin-left: 2px;\n    margin-right: 2px;\n    background-color: transparent; }\n\n.igv-viewport-content {\n  position: relative;\n  width: 100%; }\n\n.igv-canvas {\n  position: relative;\n  display: block; }\n\n.igv-scrollbar-shim {\n  position: relative;\n  width: 14px;\n  height: 100%;\n  background-color: white; }\n\n.igv-scrollbar-outer-div {\n  position: relative;\n  width: 14px;\n  height: 100%;\n  background-color: white; }\n  .igv-scrollbar-outer-div > div {\n    cursor: pointer;\n    position: absolute;\n    top: 0;\n    left: 2px;\n    width: 8px;\n    border-width: 1px;\n    border-style: solid;\n    border-color: #c4c4c4;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-left-radius: 4px;\n    border-bottom-right-radius: 4px;\n    background-color: transparent; }\n  .igv-scrollbar-outer-div > div:hover {\n    background-color: #c4c4c4; }\n\n.igv-viewport-border-right {\n  border-right-color: #292929;\n  border-right-style: solid;\n  border-right-width: 1px; }\n\n.igv-viewport-ruler {\n  cursor: pointer;\n  font-family: "Open Sans", sans-serif;\n  font-size: 10px;\n  font-weight: 200;\n  text-align: center; }\n  .igv-viewport-ruler > div {\n    height: 100%; }\n\n.igv-track-manipulation-handle {\n  position: relative;\n  cursor: pointer;\n  width: 12px;\n  height: 100%;\n  margin-left: 0;\n  font-size: medium;\n  border-color: #c4c4c4;\n  border-style: solid;\n  border-width: 0;\n  border-top-right-radius: 6px;\n  border-bottom-right-radius: 6px;\n  z-index: 512;\n  background-color: #c4c4c4; }\n\n.igv-track-manipulation-handle:hover,\n.igv-track-manipulation-handle:focus,\n.igv-track-manipulation-handle:active {\n  border-color: #7e7e7e;\n  background-color: #7e7e7e; }\n\n.igv-multi-locus-panel-border {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 1px;\n  background-color: green;\n  border-right-color: #ff0000;\n  border-right-style: solid;\n  border-right-width: 1px; }\n\n.igv-navbar-button {\n  box-sizing: unset;\n  padding-left: 6px;\n  padding-right: 6px;\n  height: 18px;\n  text-transform: capitalize;\n  user-select: none;\n  line-height: 18px;\n  text-align: center;\n  vertical-align: middle;\n  font-family: "Open Sans", sans-serif;\n  font-size: 11px;\n  font-weight: 200;\n  color: #737373;\n  background-color: #f3f3f3;\n  border-color: #737373;\n  border-style: solid;\n  border-width: thin;\n  border-radius: 6px; }\n\n.igv-navbar-button-clicked {\n  color: white;\n  background-color: #737373; }\n\n.igv-navbar-button:hover {\n  cursor: pointer; }\n\n.igv-logo-nonav {\n  margin-left: 4px;\n  margin-top: 12px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 34px;\n  height: 16px; }\n\n.igv-search-results {\n  position: absolute;\n  top: 32px;\n  left: 2px;\n  height: 320px;\n  width: 213px;\n  background-color: white;\n  border-color: #7F7F7F;\n  border-style: solid;\n  border-width: thin;\n  overflow-x: hidden;\n  overflow-y: auto;\n  z-index: 9999; }\n  .igv-search-results tr {\n    font-family: "Open Sans", sans-serif;\n    font-size: small;\n    font-weight: 400;\n    color: #444; }\n  .igv-search-results tr:hover,\n  .igv-search-results tr:focus,\n  .igv-search-results tr:active {\n    cursor: pointer;\n    font-weight: 700;\n    color: #141414; }\n\n.igv-viewport-message {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  color: rgba(0, 0, 0, 0.15);\n  font-family: "Open Sans", sans-serif;\n  font-size: 25px;\n  font-weight: bold;\n  user-select: none; }\n\n.igv-whole-genome-container {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  width: 100%;\n  height: 100%;\n  background-color: white; }\n  .igv-whole-genome-container div {\n    font-family: "Open Sans", sans-serif;\n    font-size: 10px;\n    font-weight: 400;\n    color: #444;\n    height: 100%;\n    text-align: center;\n    border-right-color: #bfbfbf;\n    border-right-style: solid;\n    border-right-width: thin; }\n    .igv-whole-genome-container div span {\n      display: block;\n      padding-top: 6px;\n      text-overflow: ellipsis; }\n  .igv-whole-genome-container div:last-child {\n    border-right-color: transparent; }\n  .igv-whole-genome-container div:hover,\n  .igv-whole-genome-container div:focus,\n  .igv-whole-genome-container div:active {\n    cursor: pointer;\n    background-color: #efefef; }\n\n.igv-multi-locus-panel-close-container {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  width: 16px;\n  height: 16px;\n  color: #666666;\n  z-index: 1000; }\n\n.igv-multi-locus-panel-close-container:hover {\n  cursor: pointer;\n  color: #434343; }\n\n.igv-multi-locus-panel-label-div {\n  position: absolute;\n  left: 50%;\n  top: 15%;\n  transform: translate(-50%, -25%);\n  font-family: "Open Sans", sans-serif;\n  font-size: 12px;\n  font-weight: 400;\n  text-align: center;\n  min-width: 16px;\n  z-index: 64;\n  color: #373737;\n  background-color: white;\n  padding: 1px; }\n\n.igv-multi-locus-panel-label-div:hover {\n  cursor: pointer; }\n\n.igv-viewport-spinner {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 1024;\n  width: 24px;\n  height: 24px;\n  pointer-events: none;\n  color: #737373; }\n\n.igv-ruler-sweeper-div {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 0;\n  height: 100%;\n  z-index: 99999;\n  background-color: rgba(68, 134, 247, 0.25); }\n\n.igv-track-menu-border-top {\n  border-top-color: #a2a2a2;\n  border-top-style: solid;\n  border-top-width: thin; }\n\n.igv-track-menu-category {\n  padding-left: 4px;\n  font-weight: 400; }\n\n.igv-track-drag-scrim {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 256;\n  background-color: rgba(68, 134, 247, 0.25); }\n\n.igv-trackgear-container {\n  position: relative;\n  width: 20px;\n  height: 20px;\n  margin-left: 4px;\n  color: #7F7F7F; }\n\n.igv-trackgear-container:hover {\n  cursor: pointer;\n  color: #444; }\n\n.igv-track-label {\n  position: absolute;\n  left: 8px;\n  top: 8px;\n  width: auto;\n  height: auto;\n  max-width: 200px;\n  padding-left: 4px;\n  padding-right: 4px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-family: "Open Sans", sans-serif;\n  font-size: small;\n  font-weight: 400;\n  text-align: center;\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  border-color: #444;\n  border-radius: 2px;\n  border-style: solid;\n  border-width: thin;\n  background-color: white;\n  z-index: 128;\n  cursor: pointer; }\n\n.igv-track-label:hover,\n.igv-track-label:focus,\n.igv-track-label:active {\n  background-color: rgba(0, 0, 0, 0.05); }\n\n.zoom-in-notice-container {\n  position: absolute;\n  top: 10px;\n  left: 50%; }\n  .zoom-in-notice-container div {\n    position: relative;\n    left: -50%;\n    font-family: "Open Sans", sans-serif;\n    font-size: medium;\n    font-weight: 400;\n    color: #3f3f3f;\n    background-color: rgba(255, 255, 255, 0.51);\n    z-index: 64; }\n\n.igv-center-guide {\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 50%;\n  width: 8px;\n  z-index: 8;\n  display: none;\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  border-left-style: dashed;\n  border-left-width: thin;\n  border-right-style: dashed;\n  border-right-width: thin; }\n\n.igv-center-guide-wide {\n  background-color: rgba(0, 0, 0, 0);\n  border-left-color: rgba(127, 127, 127, 0.51);\n  border-right-color: rgba(127, 127, 127, 0.51); }\n\n.igv-center-guide-thin {\n  left: 50%;\n  width: 1px;\n  background-color: rgba(0, 0, 0, 0);\n  border-left-color: rgba(127, 127, 127, 0.51);\n  border-right-color: rgba(0, 0, 0, 0);\n  /*background-color: rgba(127, 127, 127, 0.51);*/\n  /*border-left-color: rgba(0,0,0,0);*/\n  /*border-right-color: rgba(0,0,0,0);*/ }\n\n.igv-cursor-tracking-guide {\n  pointer-events: none;\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 50%;\n  width: 1px;\n  z-index: 1;\n  border-left-style: dotted;\n  border-left-width: thin;\n  border-left-color: rgba(127, 127, 127, 0.76);\n  display: none; }\n\n.igv-clickable {\n  cursor: pointer;\n  background-color: white; }\n\n#color-by-tag {\n  color: #444; }\n\n#color-by-tag:hover,\n#color-by-tag:focus,\n#color-by-tag:active {\n  cursor: pointer;\n  padding-left: 2px;\n  padding-right: 2px;\n  color: white;\n  border-color: #444;\n  border-radius: 2px;\n  border-style: solid;\n  border-width: thin;\n  background-color: #7f7f7f; }\n\n.igv-ellipsis {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis; }\n\n.igv-spinner-container {\n  color: #3f3f3f;\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  padding-top: 8px;\n  font-size: 24px;\n  z-index: 512; }\n\n.igv-fa-check-visible {\n  color: inherit;\n  padding-right: 2px; }\n\n.igv-fa-check-hidden {\n  color: transparent;\n  padding-right: 2px; }\n\n.validateTips {\n  border: 1px solid transparent;\n  padding: 0.3em; }\n  .validateTips fieldset {\n    border: 0; }\n\n.igv-spacer-10 {\n  height: 10px;\n  width: 100%;\n  font-size: 0;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  display: block; }\n\n.igv-fa5-spin {\n  -webkit-animation: igv-fa5-spin 2s infinite linear;\n  animation: igv-fa5-spin 2s infinite linear; }\n\n@-webkit-keyframes igv-fa5-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg); }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg); } }\n@keyframes igv-fa5-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg); }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg); } }\n\n/*# sourceMappingURL=igv.css.map */\n',document.head.insertBefore(e,document.head.childNodes[document.head.childNodes.length-1])}(),{createBrowser:function(e,t){return T_.apply(this,arguments)},removeBrowser:function(e){e.dispose(),e.$root.remove(),A_=A_.filter((function(t){return t!==e}))},removeAllBrowsers:function(){var e,t=Nr(A_);try{for(t.s();!(e=t.n()).done;){var r=e.value;r.dispose(),r.$root.remove()}}catch(e){t.e(e)}finally{t.f()}A_=[]},visibilityChange:function(){return I_.apply(this,arguments)},setGoogleOauthToken:function(e){return am.setToken(e)},oauth:am,version:ab,xhr:O_,setApiKey:B_}}));
//# sourceMappingURL=igv.min.js.map
